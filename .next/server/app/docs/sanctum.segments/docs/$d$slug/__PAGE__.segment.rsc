1:"$Sreact.fragment"
91:I[74715,["/_next/static/chunks/796e69ae18b2784c.js","/_next/static/chunks/0a3d48cc7de64d8a.js","/_next/static/chunks/b9cc757437f01a9b.js","/_next/static/chunks/a76a0998b696e151.js"],"CodeBlock"]
b0:I[48399,["/_next/static/chunks/796e69ae18b2784c.js","/_next/static/chunks/0a3d48cc7de64d8a.js","/_next/static/chunks/b9cc757437f01a9b.js","/_next/static/chunks/a76a0998b696e151.js"],"TableOfContents"]
b1:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/247eb132b7f7b574.js"],"OutletBoundary"]
b2:"$Sreact.suspense"
0:{"buildId":"B6gCsbFYtOtrb-3UkcGTt","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"container mx-auto py-10","children":["$","div",null,{"className":"flex gap-8 justify-center","children":[["$","div",null,{"className":"flex-1 max-w-3xl","children":[["$","div",null,{"className":"mb-8","children":[["$","h1",null,{"className":"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl","children":"Sanctum (Laravel Sanctum)"}],["$","p",null,{"className":"text-xl text-muted-foreground mt-2","children":"Sanctum 為 SPAs 和行動應用程式提供簡單的驗證系統"}]]}],["$","article",null,{"className":"prose prose-slate dark:prose-invert max-w-none","children":[["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","a",null,{"href":"#introduction","children":"簡介"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#how-it-works","children":"運作原理"}]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#installation","children":"安裝"}]}],"\n",["$","li",null,{"children":[["$","a",null,{"href":"#configuration","children":"設定"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#overriding-default-models","children":"覆寫預設 Model"}]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":[["$","a",null,{"href":"#api-token-authentication","children":"API Token 驗證"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#issuing-api-tokens","children":"發行 API Token"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#token-abilities","children":"Token 能力"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#protecting-routes","children":"保護路由"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#revoking-tokens","children":"撤銷 Token"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#token-expiration","children":"Token 過期"}]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":[["$","a",null,{"href":"#spa-authentication","children":"SPA 驗證"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#spa-configuration","children":"設定"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#spa-authenticating","children":"驗證"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#protecting-spa-routes","children":"保護路由"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#authorizing-private-broadcast-channels","children":"授權私有廣播頻道"}]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":[["$","a",null,{"href":"#mobile-application-authentication","children":"行動應用程式驗證"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#issuing-mobile-api-tokens","children":"發行 API Token"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#protecting-mobile-api-routes","children":"保護路由"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#revoking-mobile-api-tokens","children":"撤銷 Token"}]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#testing","children":"測試"}]}],"\n"]}],"\n",["$","a",null,{"name":"introduction"}],"\n",["$","h2",null,{"id":"簡介-introduction","children":["$","a",null,{"href":"#簡介-introduction","children":"簡介 (Introduction)"}]}],"\n",["$","p",null,{"children":[["$","a",null,{"href":"https://github.com/laravel/sanctum","children":"Laravel Sanctum"}]," 為 SPA (單頁應用程式)、行動應用程式和簡單的 Token 基礎 API 提供了一個輕量級的驗證系統。Sanctum 允許應用程式的每個使用者為其帳戶產生多個 API Token。這些 Token 可以被授予能力 / 範圍 (abilities / scopes)，以指定 Token 被允許執行的動作。"]}],"\n",["$","a",null,{"name":"how-it-works"}],"\n",["$","h3",null,{"id":"運作原理-how-it-works","children":["$","a",null,{"href":"#運作原理-how-it-works","children":"運作原理 (How it Works)"}]}],"\n",["$","p",null,{"children":"Laravel Sanctum 的存在是為了解決兩個分開的問題。在深入探討這個函式庫之前，讓我們先討論每一個問題。"}],"\n",["$","a",null,{"name":"how-it-works-api-tokens"}],"\n",["$","h4",null,{"id":"api-tokens","children":["$","a",null,{"href":"#api-tokens","children":"API Tokens"}]}],"\n",["$","p",null,{"children":"首先，Sanctum 是一個簡單的套件，你可以用它來發行 API Token 給你的使用者，而不需要 OAuth 的複雜性。這個功能的靈感來自 GitHub 和其他發行「個人存取 Token (Personal Access Tokens)」的應用程式。例如，想像你的應用程式的「帳戶設定」有一個畫面，使用者可以在那裡為他們的帳戶產生一個 API Token。你可以使用 Sanctum 來產生和管理這些 Token。這些 Token 通常有很長的過期時間 (數年)，但使用者可以隨時手動撤銷。"}],"\n",["$","p",null,{"children":["Laravel Sanctum 透過將使用者 API Token 儲存在單一資料庫資料表中，並透過應包含有效 API Token 的 ",["$","code",null,{"children":"Authorization"}]," 標頭來驗證傳入的 HTTP 請求，從而提供此功能。"]}],"\n",["$","a",null,{"name":"how-it-works-spa-authentication"}],"\n",["$","h4",null,{"id":"spa-驗證-spa-authentication","children":["$","a",null,{"href":"#spa-驗證-spa-authentication","children":"SPA 驗證 (SPA Authentication)"}]}],"\n",["$","p",null,{"children":"其次，Sanctum 的存在是為了提供一種簡單的方法來驗證需要與 Laravel 驅動的 API 進行通訊的單頁應用程式 (SPA)。這些 SPA 可能存在於與你的 Laravel 應用程式相同的儲存庫中，或者可能是一個完全獨立的儲存庫，例如使用 Next.js 或 Nuxt 建立的 SPA。"}],"\n","$L2","\n","$L3","\n","$L4","\n","$L5","\n","$L6","\n","$L7","\n","$L8","\n","$L9","\n","$La","\n","$Lb","\n","$Lc","\n","$Ld","\n","$Le","\n","$Lf","\n","$L10","\n","$L11","\n","$L12","\n","$L13","\n","$L14","\n","$L15","\n","$L16","\n","$L17","\n","$L18","\n","$L19","\n","$L1a","\n","$L1b","\n","$L1c","\n","$L1d","\n","$L1e","\n","$L1f","\n","$L20","\n","$L21","\n","$L22","\n","$L23","\n","$L24","\n","$L25","\n","$L26","\n","$L27","\n","$L28","\n","$L29","\n","$L2a","\n","$L2b","\n","$L2c","\n","$L2d","\n","$L2e","\n","$L2f","\n","$L30","\n","$L31","\n","$L32","\n","$L33","\n","$L34","\n","$L35","\n","$L36","\n","$L37","\n","$L38","\n","$L39","\n","$L3a","\n","$L3b","\n","$L3c","\n","$L3d","\n","$L3e","\n","$L3f","\n","$L40","\n","$L41","\n","$L42","\n","$L43","\n","$L44","\n","$L45","\n","$L46","\n","$L47","\n","$L48","\n","$L49","\n","$L4a","\n","$L4b","\n","$L4c","\n","$L4d","\n","$L4e","\n","$L4f","\n","$L50","\n","$L51","\n","$L52","\n","$L53","\n","$L54","\n","$L55","\n","$L56","\n","$L57","\n","$L58","\n","$L59","\n","$L5a","\n","$L5b","\n","$L5c","\n","$L5d","\n","$L5e","\n","$L5f","\n","$L60","\n","$L61","\n","$L62","\n","$L63","\n","$L64","\n","$L65","\n","$L66","\n","$L67","\n","$L68","\n","$L69","\n","$L6a","\n","$L6b","\n","$L6c","\n","$L6d","\n","$L6e","\n","$L6f","\n","$L70","\n","$L71","\n","$L72","\n","$L73","\n","$L74","\n","$L75","\n","$L76","\n","$L77","\n","$L78","\n","$L79","\n","$L7a","\n","$L7b","\n","$L7c","\n","$L7d","\n","$L7e","\n","$L7f","\n","$L80","\n","$L81","\n","$L82","\n","$L83","\n","$L84","\n","$L85","\n","$L86","\n","$L87","\n","$L88","\n","$L89","\n","$L8a","\n","$L8b","\n","$L8c","\n","$L8d"]}]]}],"$L8e"]}]}],["$L8f"],"$L90"]}],"loading":null,"isPartial":false}
2:["$","p",null,{"children":["對於此功能，Sanctum 不使用任何種類的 Token。相反地，Sanctum 使用 Laravel 內建的 Cookie 基礎 Session 驗證服務。通常，Sanctum 利用 Laravel 的 ",["$","code",null,{"children":"web"}]," 驗證 Guard 來完成此任務。這提供了 CSRF 保護、Session 驗證的好處，並防止驗證憑證透過 XSS 洩漏。"]}]
3:["$","p",null,{"children":["當傳入的請求源自你自己的 SPA 前端時，Sanctum 只會嘗試使用 Cookie 進行驗證。當 Sanctum 檢查傳入的 HTTP 請求時，它會先檢查是否有驗證 Cookie，如果沒有，Sanctum 接著會檢查 ",["$","code",null,{"children":"Authorization"}]," 標頭是否有有效的 API Token。"]}]
4:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"[!NOTE]\n僅將 Sanctum 用於 API Token 驗證或僅用於 SPA 驗證是完全沒問題的。僅僅因為你使用了 Sanctum，並不意味著你必須使用它提供的這兩個功能。"}],"\n"]}]
5:["$","a",null,{"name":"installation"}]
6:["$","h2",null,{"id":"安裝-installation","children":["$","a",null,{"href":"#安裝-installation","children":"安裝 (Installation)"}]}]
7:["$","p",null,{"children":["你可以透過 ",["$","code",null,{"children":"install:api"}]," Artisan 指令安裝 Laravel Sanctum："]}]
8:["$","$L91",null,{"className":"","children":["$","code",null,{"children":["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"php"}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":" artisan"}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":" install:api"}]]}]}]}]
9:["$","p",null,{"children":["接下來，如果你打算利用 Sanctum 來驗證 SPA，請參考本文件的 ",["$","a",null,{"href":"#spa-authentication","children":"SPA 驗證"}]," 章節。"]}]
a:["$","a",null,{"name":"configuration"}]
b:["$","h2",null,{"id":"設定-configuration","children":["$","a",null,{"href":"#設定-configuration","children":"設定 (Configuration)"}]}]
c:["$","a",null,{"name":"overriding-default-models"}]
d:["$","h3",null,{"id":"覆寫預設-model-overriding-default-models","children":["$","a",null,{"href":"#覆寫預設-model-overriding-default-models","children":"覆寫預設 Model (Overriding Default Models)"}]}]
e:["$","p",null,{"children":["雖然通常不需要，但你可以自由擴充 Sanctum 內部使用的 ",["$","code",null,{"children":"PersonalAccessToken"}]," Model："]}]
f:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Laravel\\Sanctum\\PersonalAccessToken"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" as"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":" SanctumPersonalAccessToken"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"class"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":" PersonalAccessToken"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" extends"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":" SanctumPersonalAccessToken"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"{"}]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#6A737D","--shiki-light":"#6A737D"},"children":"    // ..."}]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"}"}]}]]}]}]
10:["$","p",null,{"children":["然後，你可以透過 Sanctum 提供的 ",["$","code",null,{"children":"usePersonalAccessTokenModel"}]," 方法指示 Sanctum 使用你的自訂 Model。通常，你應該在應用程式的 ",["$","code",null,{"children":"AppServiceProvider"}]," 檔案的 ",["$","code",null,{"children":"boot"}]," 方法中呼叫此方法："]}]
11:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" App\\Models\\Sanctum\\PersonalAccessToken"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Laravel\\Sanctum\\Sanctum"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#6A737D","--shiki-light":"#6A737D"},"children":"/**"}]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#6A737D","--shiki-light":"#6A737D"},"children":" * Bootstrap any application services."}]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#6A737D","--shiki-light":"#6A737D"},"children":" */"}]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"public"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" function"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":" boot"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"()"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":":"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" void"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"{"}]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"    Sanctum"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"usePersonalAccessTokenModel"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"PersonalAccessToken"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::class"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":");"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"}"}]}]]}]}]
12:["$","a",null,{"name":"api-token-authentication"}]
13:["$","h2",null,{"id":"api-token-驗證-api-token-authentication","children":["$","a",null,{"href":"#api-token-驗證-api-token-authentication","children":"API Token 驗證 (API Token Authentication)"}]}]
14:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!NOTE]\n你不應該使用 API Token 來驗證你自己的第一方 SPA。相反地，請使用 Sanctum 內建的 ",["$","a",null,{"href":"#spa-authentication","children":"SPA 驗證功能"}],"。"]}],"\n"]}]
15:["$","a",null,{"name":"issuing-api-tokens"}]
16:["$","h3",null,{"id":"發行-api-token-issuing-api-tokens","children":["$","a",null,{"href":"#發行-api-token-issuing-api-tokens","children":"發行 API Token (Issuing API Tokens)"}]}]
17:["$","p",null,{"children":["Sanctum 允許你發行 API Token / 個人存取 Token，這些 Token 可用於驗證對你應用程式的 API 請求。使用 API Token 發出請求時，應將 Token 包含在 ",["$","code",null,{"children":"Authorization"}]," 標頭中作為 ",["$","code",null,{"children":"Bearer"}]," Token。"]}]
18:["$","p",null,{"children":["要開始為使用者發行 Token，你的 User Model 應該使用 ",["$","code",null,{"children":"Laravel\\Sanctum\\HasApiTokens"}]," Trait："]}]
19:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Laravel\\Sanctum\\HasApiTokens"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"class"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":" User"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" extends"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":" Authenticatable"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"{"}]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"    use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" HasApiTokens"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"HasFactory"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Notifiable"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"}"}]}]]}]}]
1a:["$","p",null,{"children":["要發行 Token，你可以使用 ",["$","code",null,{"children":"createToken"}]," 方法。",["$","code",null,{"children":"createToken"}]," 方法回傳一個 ",["$","code",null,{"children":"Laravel\\Sanctum\\NewAccessToken"}]," 實例。API Token 在儲存到資料庫之前會使用 SHA-256 雜湊進行雜湊處理，但你可以使用 ",["$","code",null,{"children":"NewAccessToken"}]," 實例的 ",["$","code",null,{"children":"plainTextToken"}]," 屬性存取 Token 的純文字值。你應該在 Token 建立後立即向使用者顯示此值："]}]
1b:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Illuminate\\Http\\Request"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Route"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"post"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'/tokens/create'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"function"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" ("}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Request"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $request) {"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"    $token "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $request"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"user"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"()"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"createToken"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"($request"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"token_name);"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"    return"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" ["}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'token'"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" =>"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $token"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"plainTextToken];"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"});"}]}]]}]}]
1c:["$","p",null,{"children":["你可以使用 ",["$","code",null,{"children":"HasApiTokens"}]," Trait 提供的 ",["$","code",null,{"children":"tokens"}]," Eloquent 關聯存取使用者的所有 Token："]}]
1d:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"foreach"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" ($user"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"tokens "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"as"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $token) {"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#6A737D","--shiki-light":"#6A737D"},"children":"    // ..."}]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"}"}]}]]}]}]
1e:["$","a",null,{"name":"token-abilities"}]
1f:["$","h3",null,{"id":"token-能力-token-abilities","children":["$","a",null,{"href":"#token-能力-token-abilities","children":"Token 能力 (Token Abilities)"}]}]
20:["$","p",null,{"children":["Sanctum 允許你指派「能力 (abilities)」給 Token。能力的作用類似於 OAuth 的「範圍 (scopes)」。你可以將字串能力陣列作為第二個參數傳遞給 ",["$","code",null,{"children":"createToken"}]," 方法："]}]
21:["$","$L91",null,{"className":"","children":["$","code",null,{"children":["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"return"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $user"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"createToken"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'token-name'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", ["}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'server:update'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"])"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"plainTextToken;"}]]}]}]}]
22:["$","p",null,{"children":["當處理經由 Sanctum 驗證的傳入請求時，你可以使用 ",["$","code",null,{"children":"tokenCan"}]," 或 ",["$","code",null,{"children":"tokenCant"}]," 方法判斷 Token 是否具有給定的能力："]}]
23:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"if"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" ($user"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"tokenCan"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'server:update'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":")) {"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#6A737D","--shiki-light":"#6A737D"},"children":"    // ..."}]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"}"}]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"if"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" ($user"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"tokenCant"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'server:update'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":")) {"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#6A737D","--shiki-light":"#6A737D"},"children":"    // ..."}]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"}"}]}]]}]}]
24:["$","a",null,{"name":"token-ability-middleware"}]
25:["$","h4",null,{"id":"token-能力-middleware-token-ability-middleware","children":["$","a",null,{"href":"#token-能力-middleware-token-ability-middleware","children":"Token 能力 Middleware (Token Ability Middleware)"}]}]
26:["$","p",null,{"children":["Sanctum 還包含兩個 Middleware，可用於驗證傳入的請求是否使用已授予給定能力的 Token 進行驗證。首先，在應用程式的 ",["$","code",null,{"children":"bootstrap/app.php"}]," 檔案中定義以下 Middleware 別名："]}]
27:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Laravel\\Sanctum\\Http\\Middleware\\CheckAbilities"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Laravel\\Sanctum\\Http\\Middleware\\CheckForAnyAbility"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"withMiddleware"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"function"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" ("}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Middleware"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $middleware)"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":":"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" void"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"    $middleware"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"alias"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"(["}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"        'abilities'"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" =>"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" CheckAbilities"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::class"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"        'ability'"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" =>"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" CheckForAnyAbility"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::class"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"    ]);"}]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"})"}]}]]}]}]
28:["$","p",null,{"children":[["$","code",null,{"children":"abilities"}]," Middleware 可以指派給路由，以驗證傳入請求的 Token 是否具有所有列出的能力："]}]
29:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Route"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"get"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'/orders'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"function"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" () {"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#6A737D","--shiki-light":"#6A737D"},"children":"    // Token has both \"check-status\" and \"place-orders\" abilities..."}]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"})"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"middleware"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"(["}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'auth:sanctum'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'abilities:check-status,place-orders'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"]);"}]]}]]}]}]
2a:["$","p",null,{"children":[["$","code",null,{"children":"ability"}]," Middleware 可以指派給路由，以驗證傳入請求的 Token 是否具有列出的能力中的 ",["$","em",null,{"children":"至少一個"}],"："]}]
2b:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Route"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"get"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'/orders'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"function"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" () {"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#6A737D","--shiki-light":"#6A737D"},"children":"    // Token has the \"check-status\" or \"place-orders\" ability..."}]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"})"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"middleware"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"(["}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'auth:sanctum'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'ability:check-status,place-orders'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"]);"}]]}]]}]}]
2c:["$","a",null,{"name":"first-party-ui-initiated-requests"}]
2d:["$","h4",null,{"id":"第一方-ui-發起的請求-first-party-ui-initiated-requests","children":["$","a",null,{"href":"#第一方-ui-發起的請求-first-party-ui-initiated-requests","children":"第一方 UI 發起的請求 (First-Party UI Initiated Requests)"}]}]
2e:["$","p",null,{"children":["為了方便起見，如果傳入的驗證請求來自你的第一方 SPA，並且你正在使用 Sanctum 內建的 ",["$","a",null,{"href":"#spa-authentication","children":"SPA 驗證"}],"，",["$","code",null,{"children":"tokenCan"}]," 方法將始終回傳 ",["$","code",null,{"children":"true"}],"。"]}]
2f:["$","p",null,{"children":["然而，這並不一定意味著你的應用程式必須允許使用者執行該動作。通常，你的應用程式的 ",["$","a",null,{"href":"/docs/authorization#creating-policies","children":"Authorization Policies"}]," 將決定 Token 是否已被授予執行能力的權限，並檢查使用者實例本身是否應被允許執行該動作。"]}]
30:["$","p",null,{"children":["例如，如果我們想像一個管理伺服器的應用程式，這可能意味著檢查 Token 是否被授權更新伺服器 ",["$","strong",null,{"children":"並且"}]," 伺服器屬於該使用者："]}]
31:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"return"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $request"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"user"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"()"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"id "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"==="}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $server"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"user_id "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"&&"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"       $request"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"user"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"()"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"tokenCan"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'server:update'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":")"}]]}]]}]}]
32:["$","p",null,{"children":["起初，允許呼叫 ",["$","code",null,{"children":"tokenCan"}]," 方法並對第一方 UI 發起的請求始終回傳 ",["$","code",null,{"children":"true"}]," 似乎很奇怪；然而，能夠始終假設 API Token 可用並可透過 ",["$","code",null,{"children":"tokenCan"}]," 方法進行檢查是很方便的。透過採取這種方法，你可以在應用程式的 Authorization Policies 中始終呼叫 ",["$","code",null,{"children":"tokenCan"}]," 方法，而不必擔心請求是從應用程式的 UI 觸發的，還是由你的 API 的第三方消費者發起的。"]}]
33:["$","a",null,{"name":"protecting-routes"}]
34:["$","h3",null,{"id":"保護路由-protecting-routes","children":["$","a",null,{"href":"#保護路由-protecting-routes","children":"保護路由 (Protecting Routes)"}]}]
35:["$","p",null,{"children":["為了保護路由，使所有傳入的請求都必須經過驗證，你應該將 ",["$","code",null,{"children":"sanctum"}]," 驗證 Guard 附加到 ",["$","code",null,{"children":"routes/web.php"}]," 和 ",["$","code",null,{"children":"routes/api.php"}]," 路由檔案中的受保護路由。此 Guard 將確保傳入的請求被驗證為有狀態的、Cookie 驗證的請求，或者如果請求來自第三方，則包含有效的 API Token 標頭。"]}]
36:["$","p",null,{"children":["你可能想知道為什麼我們建議你使用 ",["$","code",null,{"children":"sanctum"}]," Guard 來驗證應用程式 ",["$","code",null,{"children":"routes/web.php"}]," 檔案中的路由。請記住，Sanctum 會先嘗試使用 Laravel 典型的 Session 驗證 Cookie 來驗證傳入的請求。如果該 Cookie 不存在，Sanctum 將嘗試使用請求的 ",["$","code",null,{"children":"Authorization"}]," 標頭中的 Token 來驗證請求。此外，使用 Sanctum 驗證所有請求可確保我們始終可以在當前驗證的使用者實例上呼叫 ",["$","code",null,{"children":"tokenCan"}]," 方法："]}]
37:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Illuminate\\Http\\Request"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Route"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"get"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'/user'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"function"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" ("}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Request"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $request) {"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"    return"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $request"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"user"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"();"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"})"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"middleware"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'auth:sanctum'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":");"}]]}]]}]}]
38:["$","a",null,{"name":"revoking-tokens"}]
39:["$","h3",null,{"id":"撤銷-token-revoking-tokens","children":["$","a",null,{"href":"#撤銷-token-revoking-tokens","children":"撤銷 Token (Revoking Tokens)"}]}]
3a:["$","p",null,{"children":["你可以透過使用 ",["$","code",null,{"children":"Laravel\\Sanctum\\HasApiTokens"}]," Trait 提供的 ",["$","code",null,{"children":"tokens"}]," 關聯從資料庫中刪除 Token 來「撤銷」它們："]}]
3b:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#6A737D","--shiki-light":"#6A737D"},"children":"// Revoke all tokens..."}]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"$$user"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"tokens"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"()"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"delete"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"();"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#6A737D","--shiki-light":"#6A737D"},"children":"// Revoke the token that was used to authenticate the current request..."}]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"$$request"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"user"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"()"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"currentAccessToken"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"()"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"delete"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"();"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#6A737D","--shiki-light":"#6A737D"},"children":"// Revoke a specific token..."}]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"$$user"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"tokens"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"()"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"where"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'id'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", $tokenId)"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"delete"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"();"}]]}]]}]}]
3c:["$","a",null,{"name":"token-expiration"}]
3d:["$","h3",null,{"id":"token-過期-token-expiration","children":["$","a",null,{"href":"#token-過期-token-expiration","children":"Token 過期 (Token Expiration)"}]}]
3e:["$","p",null,{"children":["預設情況下，Sanctum Token 永不過期，只能透過 ",["$","a",null,{"href":"#revoking-tokens","children":"撤銷 Token"}]," 來使其無效。然而，如果你想為應用程式的 API Token 設定過期時間，你可以透過應用程式 ",["$","code",null,{"children":"sanctum"}]," 設定檔中定義的 ",["$","code",null,{"children":"expiration"}]," 設定選項來實現。此設定選項定義了發行的 Token 被視為過期之前的分鐘數："]}]
3f:["$","$L91",null,{"className":"","children":["$","code",null,{"children":["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'expiration'"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" =>"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" 525600"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}]}]}]
40:["$","p",null,{"children":["如果你想獨立指定每個 Token 的過期時間，你可以透過將過期時間作為第三個參數提供給 ",["$","code",null,{"children":"createToken"}]," 方法來實現："]}]
41:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"return"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $user"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"createToken"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"    'token-name'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", ["}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'*'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"], "}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"now"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"()"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"addWeek"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"()"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":")"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"plainTextToken;"}]]}]]}]}]
42:["$","p",null,{"children":["如果你為應用程式設定了 Token 過期時間，你可能還希望 ",["$","a",null,{"href":"/docs/scheduling","children":"排程任務"}]," 來修剪應用程式的過期 Token。幸運的是，Sanctum 包含一個 ",["$","code",null,{"children":"sanctum:prune-expired"}]," Artisan 指令，你可以用它來完成此任務。例如，你可以設定一個排程任務來刪除所有已過期至少 24 小時的過期 Token 資料庫記錄："]}]
43:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Illuminate\\Support\\Facades\\Schedule"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Schedule"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"command"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'sanctum:prune-expired --hours=24'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":")"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"daily"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"();"}]]}]]}]}]
44:["$","a",null,{"name":"spa-authentication"}]
45:["$","h2",null,{"id":"spa-驗證-spa-authentication-1","children":["$","a",null,{"href":"#spa-驗證-spa-authentication-1","children":"SPA 驗證 (SPA Authentication)"}]}]
46:["$","p",null,{"children":"Sanctum 的存在也是為了提供一種簡單的方法來驗證需要與 Laravel 驅動的 API 進行通訊的單頁應用程式 (SPA)。這些 SPA 可能存在於與你的 Laravel 應用程式相同的儲存庫中，或者可能是一個完全獨立的儲存庫。"}]
47:["$","p",null,{"children":"對於此功能，Sanctum 不使用任何種類的 Token。相反地，Sanctum 使用 Laravel 內建的 Cookie 基礎 Session 驗證服務。這種驗證方法提供了 CSRF 保護、Session 驗證的好處，並防止驗證憑證透過 XSS 洩漏。"}]
48:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!WARNING]\n為了進行驗證，你的 SPA 和 API 必須共享相同的頂級網域。但是，它們可以位於不同的子網域上。此外，你應該確保在請求中發送 ",["$","code",null,{"children":"Accept: application/json"}]," 標頭以及 ",["$","code",null,{"children":"Referer"}]," 或 ",["$","code",null,{"children":"Origin"}]," 標頭。"]}],"\n"]}]
49:["$","a",null,{"name":"spa-configuration"}]
4a:["$","h3",null,{"id":"設定-configuration-1","children":["$","a",null,{"href":"#設定-configuration-1","children":"設定 (Configuration)"}]}]
4b:["$","a",null,{"name":"configuring-your-first-party-domains"}]
4c:["$","h4",null,{"id":"設定你的第一方網域-configuring-your-first-party-domains","children":["$","a",null,{"href":"#設定你的第一方網域-configuring-your-first-party-domains","children":"設定你的第一方網域 (Configuring Your First-Party Domains)"}]}]
4d:["$","p",null,{"children":["首先，你應該設定你的 SPA 將從哪些網域發出請求。你可以在 ",["$","code",null,{"children":"sanctum"}]," 設定檔中使用 ",["$","code",null,{"children":"stateful"}]," 設定選項來設定這些網域。此設定決定了哪些網域在向你的 API 發出請求時，將使用 Laravel Session Cookie 維持「有狀態 (stateful)」驗證。"]}]
4e:["$","p",null,{"children":["為了協助你設定第一方有狀態網域，Sanctum 提供了兩個輔助函式，你可以將其包含在設定中。首先，",["$","code",null,{"children":"Sanctum::currentApplicationUrlWithPort()"}]," 將回傳 ",["$","code",null,{"children":"APP_URL"}]," 環境變數中的當前應用程式 URL，而 ",["$","code",null,{"children":"Sanctum::currentRequestHost()"}]," 將在有狀態網域列表中注入一個佔位符，該佔位符在執行時將被當前請求的主機替換，以便所有具有相同網域的請求都被視為有狀態。"]}]
4f:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!WARNING]\n如果你是透過包含連接埠的 URL (",["$","code",null,{"children":"127.0.0.1:8000"}],") 存取你的應用程式，你應該確保將連接埠號包含在網域中。"]}],"\n"]}]
50:["$","a",null,{"name":"sanctum-middleware"}]
51:["$","h4",null,{"id":"sanctum-middleware","children":["$","a",null,{"href":"#sanctum-middleware","children":"Sanctum Middleware"}]}]
52:["$","p",null,{"children":["接下來，你應該指示 Laravel，來自 SPA 的傳入請求可以使用 Laravel 的 Session Cookie 進行驗證，同時仍允許來自第三方或行動應用程式的請求使用 API Token 進行驗證。這可以透過在應用程式的 ",["$","code",null,{"children":"bootstrap/app.php"}]," 檔案中呼叫 ",["$","code",null,{"children":"statefulApi"}]," Middleware 方法輕鬆完成："]}]
53:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"withMiddleware"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"function"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" ("}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Middleware"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $middleware)"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":":"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" void"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"    $middleware"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"statefulApi"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"();"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"})"}]}]]}]}]
54:["$","a",null,{"name":"cors-and-cookies"}]
55:["$","h4",null,{"id":"cors-和-cookies-cors-and-cookies","children":["$","a",null,{"href":"#cors-和-cookies-cors-and-cookies","children":"CORS 和 Cookies (CORS and Cookies)"}]}]
56:["$","p",null,{"children":"如果你在從執行於單獨子網域的 SPA 驗證應用程式時遇到問題，你可能錯誤設定了 CORS (跨來源資源共用) 或 Session Cookie 設定。"}]
57:["$","p",null,{"children":[["$","code",null,{"children":"config/cors.php"}]," 設定檔預設未發佈。如果你需要自訂 Laravel 的 CORS 選項，你應該使用 ",["$","code",null,{"children":"config:publish"}]," Artisan 指令發佈完整的 ",["$","code",null,{"children":"cors"}]," 設定檔："]}]
58:["$","$L91",null,{"className":"","children":["$","code",null,{"children":["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"php"}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":" artisan"}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":" config:publish"}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":" cors"}]]}]}]}]
59:["$","p",null,{"children":["接下來，你應該確保應用程式的 CORS 設定回傳值為 ",["$","code",null,{"children":"True"}]," 的 ",["$","code",null,{"children":"Access-Control-Allow-Credentials"}]," 標頭。這可以透過將應用程式 ",["$","code",null,{"children":"config/cors.php"}]," 設定檔中的 ",["$","code",null,{"children":"supports_credentials"}]," 選項設定為 ",["$","code",null,{"children":"true"}]," 來完成。"]}]
5a:["$","p",null,{"children":["此外，你應該在應用程式的全域 ",["$","code",null,{"children":"axios"}]," 實例上啟用 ",["$","code",null,{"children":"withCredentials"}]," 和 ",["$","code",null,{"children":"withXSRFToken"}]," 選項。通常，這應該在你的 ",["$","code",null,{"children":"resources/js/bootstrap.js"}]," 檔案中執行。如果你不使用 Axios 從前端發出 HTTP 請求，你應該在自己的 HTTP 用戶端上執行等效的設定："]}]
5b:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"axios.defaults.withCredentials "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" true"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"axios.defaults.withXSRFToken "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" true"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}]]}]}]
5c:["$","p",null,{"children":["最後，你應該確保應用程式的 Session Cookie 網域設定支援你的根網域的任何子網域。你可以透過在應用程式的 ",["$","code",null,{"children":"config/session.php"}]," 設定檔中為網域加上前導 ",["$","code",null,{"children":"."}]," 來完成此操作："]}]
5d:["$","$L91",null,{"className":"","children":["$","code",null,{"children":["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'domain'"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" =>"}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":" '.domain.com'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}]}]}]
5e:["$","a",null,{"name":"spa-authenticating"}]
5f:["$","h3",null,{"id":"驗證-authenticating","children":["$","a",null,{"href":"#驗證-authenticating","children":"驗證 (Authenticating)"}]}]
60:["$","a",null,{"name":"csrf-protection"}]
61:["$","h4",null,{"id":"csrf-保護-csrf-protection","children":["$","a",null,{"href":"#csrf-保護-csrf-protection","children":"CSRF 保護 (CSRF Protection)"}]}]
62:["$","p",null,{"children":["要驗證你的 SPA，你的 SPA 的「登入」頁面應首先向 ",["$","code",null,{"children":"/sanctum/csrf-cookie"}]," 端點發出請求，以初始化應用程式的 CSRF 保護："]}]
63:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"axios."}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"get"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"/sanctum/csrf-cookie\""}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":")."}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"then"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"(("}],["$","span",null,{"style":{"color":"#FFAB70","--shiki-light":"#E36209"},"children":"response"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":") "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"=>"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#6A737D","--shiki-light":"#6A737D"},"children":"  // Login..."}]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"});"}]}]]}]}]
64:["$","p",null,{"children":["在此請求期間，Laravel 將設定一個包含當前 CSRF Token 的 ",["$","code",null,{"children":"XSRF-TOKEN"}]," Cookie。然後，此 Token 應進行 URL 解碼並在後續請求的 ",["$","code",null,{"children":"X-XSRF-TOKEN"}]," 標頭中傳遞，某些 HTTP 用戶端函式庫 (如 Axios 和 Angular HttpClient) 會自動為你執行此操作。如果你的 JavaScript HTTP 函式庫沒有為你設定該值，你需要手動設定 ",["$","code",null,{"children":"X-XSRF-TOKEN"}]," 標頭以符合此路由設定的 ",["$","code",null,{"children":"XSRF-TOKEN"}]," Cookie 的 URL 解碼值。"]}]
65:["$","a",null,{"name":"logging-in"}]
66:["$","h4",null,{"id":"登入-logging-in","children":["$","a",null,{"href":"#登入-logging-in","children":"登入 (Logging In)"}]}]
67:["$","p",null,{"children":["一旦 CSRF 保護初始化完成，你應該向 Laravel 應用程式的 ",["$","code",null,{"children":"/login"}]," 路由發出 ",["$","code",null,{"children":"POST"}]," 請求。此 ",["$","code",null,{"children":"/login"}]," 路由可以 ",["$","a",null,{"href":"/docs/authentication#authenticating-users","children":"手動實作"}]," 或使用像 ",["$","a",null,{"href":"/docs/fortify","children":"Laravel Fortify"}]," 這樣的無頭驗證套件。"]}]
68:["$","p",null,{"children":["如果登入請求成功，你將被驗證，並且對應用程式路由的後續請求將透過 Laravel 應用程式發給用戶端的 Session Cookie 自動進行驗證。此外，由於你的應用程式已經向 ",["$","code",null,{"children":"/sanctum/csrf-cookie"}]," 路由發出請求，只要你的 JavaScript HTTP 用戶端在 ",["$","code",null,{"children":"X-XSRF-TOKEN"}]," 標頭中發送 ",["$","code",null,{"children":"XSRF-TOKEN"}]," Cookie 的值，後續請求應自動獲得 CSRF 保護。"]}]
69:["$","p",null,{"children":"當然，如果使用者的 Session 由於缺乏活動而過期，對 Laravel 應用程式的後續請求可能會收到 401 或 419 HTTP 錯誤回應。在這種情況下，你應該將使用者重新導向到 SPA 的登入頁面。"}]
6a:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!WARNING]\n你可以自由編寫自己的 ",["$","code",null,{"children":"/login"}]," 端點；但是，你應該確保它使用標準的、",["$","a",null,{"href":"/docs/authentication#authenticating-users","children":"Laravel 提供的 Session 基礎驗證服務"}]," 來驗證使用者。通常，這意味著使用 ",["$","code",null,{"children":"web"}]," 驗證 Guard。"]}],"\n"]}]
6b:["$","a",null,{"name":"protecting-spa-routes"}]
6c:["$","h3",null,{"id":"保護路由-protecting-routes-1","children":["$","a",null,{"href":"#保護路由-protecting-routes-1","children":"保護路由 (Protecting Routes)"}]}]
6d:["$","p",null,{"children":["為了保護路由，使所有傳入的請求都必須經過驗證，你應該將 ",["$","code",null,{"children":"sanctum"}]," 驗證 Guard 附加到 ",["$","code",null,{"children":"routes/api.php"}]," 檔案中的 API 路由。此 Guard 將確保傳入的請求被驗證為來自 SPA 的有狀態驗證請求，或者如果請求來自第三方，則包含有效的 API Token 標頭："]}]
6e:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Illuminate\\Http\\Request"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Route"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"get"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'/user'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"function"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" ("}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Request"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $request) {"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"    return"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $request"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"user"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"();"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"})"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"middleware"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'auth:sanctum'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":");"}]]}]]}]}]
6f:["$","a",null,{"name":"authorizing-private-broadcast-channels"}]
70:["$","h3",null,{"id":"授權私有廣播頻道-authorizing-private-broadcast-channels","children":["$","a",null,{"href":"#授權私有廣播頻道-authorizing-private-broadcast-channels","children":"授權私有廣播頻道 (Authorizing Private Broadcast Channels)"}]}]
71:["$","p",null,{"children":["如果你的 SPA 需要驗證 ",["$","a",null,{"href":"/docs/broadcasting#authorizing-channels","children":"私有 / 存在廣播頻道"}],"，你應該從應用程式的 ",["$","code",null,{"children":"bootstrap/app.php"}]," 檔案中包含的 ",["$","code",null,{"children":"withRouting"}]," 方法中移除 ",["$","code",null,{"children":"channels"}]," 項目。相反地，你應該呼叫 ",["$","code",null,{"children":"withBroadcasting"}]," 方法，以便你可以為應用程式的廣播路由指定正確的 Middleware："]}]
72:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"return"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Application"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"configure"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"basePath"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":": "}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"dirname"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"__DIR__"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"))"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"    ->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"withRouting"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"        web"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":": "}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"__DIR__"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"."}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'/../routes/web.php'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#6A737D","--shiki-light":"#6A737D"},"children":"        // ..."}]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"    )"}]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"    ->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"withBroadcasting"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"        __DIR__"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"."}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'/../routes/channels.php'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"        ["}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'prefix'"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" =>"}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":" 'api'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'middleware'"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" =>"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" ["}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'api'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'auth:sanctum'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"]],"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"    )"}]}]]}]}]
73:["$","p",null,{"children":["接下來，為了使 Pusher 的授權請求成功，你在初始化 ",["$","a",null,{"href":"/docs/broadcasting#client-side-installation","children":"Laravel Echo"}]," 時需要提供一個自訂的 Pusher ",["$","code",null,{"children":"authorizer"}],"。這允許你的應用程式設定 Pusher 使用 ",["$","a",null,{"href":"#cors-and-cookies","children":"已正確設定跨網域請求"}]," 的 ",["$","code",null,{"children":"axios"}]," 實例："]}]
74:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"window.Echo "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" new"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":" Echo"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"({"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"  broadcaster: "}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"pusher\""}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"  cluster: "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"import"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"."}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"meta"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":".env."}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"VITE_PUSHER_APP_CLUSTER"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"  encrypted: "}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"true"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"  key: "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"import"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"."}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"meta"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":".env."}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"VITE_PUSHER_APP_KEY"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"  authorizer"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":": ("}],["$","span",null,{"style":{"color":"#FFAB70","--shiki-light":"#E36209"},"children":"channel"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"color":"#FFAB70","--shiki-light":"#E36209"},"children":"options"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":") "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"=>"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"    return"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"      authorize"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":": ("}],["$","span",null,{"style":{"color":"#FFAB70","--shiki-light":"#E36209"},"children":"socketId"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"color":"#FFAB70","--shiki-light":"#E36209"},"children":"callback"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":") "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"=>"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"        axios"}]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"          ."}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"post"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"\"/api/broadcasting/auth\""}],"$L92"]}],"\n","$L93","\n","$L94","\n","$L95","\n","$L96","\n","$L97","\n","$L98","\n","$L99","\n","$L9a","\n","$L9b","\n","$L9c","\n","$L9d","\n","$L9e","\n","$L9f"]}]}]
75:["$","a",null,{"name":"mobile-application-authentication"}]
76:["$","h2",null,{"id":"行動應用程式驗證-mobile-application-authentication","children":["$","a",null,{"href":"#行動應用程式驗證-mobile-application-authentication","children":"行動應用程式驗證 (Mobile Application Authentication)"}]}]
77:["$","p",null,{"children":"你也可以使用 Sanctum Token 來驗證你的行動應用程式對 API 的請求。驗證行動應用程式請求的過程類似於驗證第三方 API 請求；但是，發行 API Token 的方式略有不同。"}]
78:["$","a",null,{"name":"issuing-mobile-api-tokens"}]
79:["$","h3",null,{"id":"發行-api-token-issuing-api-tokens-1","children":["$","a",null,{"href":"#發行-api-token-issuing-api-tokens-1","children":"發行 API Token (Issuing API Tokens)"}]}]
7a:["$","p",null,{"children":"首先，建立一個路由，該路由接受使用者的電子郵件 / 使用者名稱、密碼和裝置名稱，然後交換這些憑證以獲取新的 Sanctum Token。提供給此端點的「裝置名稱」僅供參考，可以是任何你想要的值。通常，裝置名稱值應該是使用者可以識別的名稱，例如「Nuno's iPhone 12」。"}]
7b:["$","p",null,{"children":"通常，你會從行動應用程式的「登入」畫面請求 Token 端點。端點將回傳純文字 API Token，然後可以將其儲存在行動裝置上並用於發出其他 API 請求："}]
7c:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" App\\Models\\User"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Illuminate\\Http\\Request"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Illuminate\\Support\\Facades\\Hash"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Illuminate\\Validation\\ValidationException"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Route"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"post"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'/sanctum/token'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"function"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" ("}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Request"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $request) {"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"    $request"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"validate"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"(["}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"        'email'"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" =>"}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":" 'required|email'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"        'password'"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" =>"}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":" 'required'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"        'device_name'"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" =>"}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":" 'required'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":","}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"    ]);"}]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"    $user "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" User"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"where"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],"$La0","$La1","$La2","$La3","$La4","$La5","$La6"]}],"\n","$La7","\n","$La8","\n","$La9","\n","$Laa","\n","$Lab","\n","$Lac","\n","$Lad","\n","$Lae","\n","$Laf"]}]}]
7d:["$","p",null,{"children":["當行動應用程式使用 Token 向你的應用程式發出 API 請求時，應將 Token 包含在 ",["$","code",null,{"children":"Authorization"}]," 標頭中作為 ",["$","code",null,{"children":"Bearer"}]," Token。"]}]
7e:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!NOTE]\n為行動應用程式發行 Token 時，你也可以自由指定 ",["$","a",null,{"href":"#token-abilities","children":"Token 能力"}],"。"]}],"\n"]}]
7f:["$","a",null,{"name":"protecting-mobile-api-routes"}]
80:["$","h3",null,{"id":"保護路由-protecting-routes-2","children":["$","a",null,{"href":"#保護路由-protecting-routes-2","children":"保護路由 (Protecting Routes)"}]}]
81:["$","p",null,{"children":["如前所述，你可以透過將 ",["$","code",null,{"children":"sanctum"}]," 驗證 Guard 附加到路由來保護路由，使所有傳入的請求都必須經過驗證："]}]
82:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Route"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"get"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'/user'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"function"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" ("}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Request"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $request) {"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"    return"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $request"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"user"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"();"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"})"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"middleware"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'auth:sanctum'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":");"}]]}]]}]}]
83:["$","a",null,{"name":"revoking-mobile-api-tokens"}]
84:["$","h3",null,{"id":"撤銷-token-revoking-tokens-1","children":["$","a",null,{"href":"#撤銷-token-revoking-tokens-1","children":"撤銷 Token (Revoking Tokens)"}]}]
85:["$","p",null,{"children":["為了允許使用者撤銷發行給行動裝置的 API Token，你可以在 Web 應用程式 UI 的「帳戶設定」部分按名稱列出它們，並附上「撤銷」按鈕。當使用者點擊「撤銷」按鈕時，你可以從資料庫中刪除該 Token。請記住，你可以透過 ",["$","code",null,{"children":"Laravel\\Sanctum\\HasApiTokens"}]," Trait 提供的 ",["$","code",null,{"children":"tokens"}]," 關聯存取使用者的 API Token："]}]
86:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#6A737D","--shiki-light":"#6A737D"},"children":"// Revoke all tokens..."}]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"$$user"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"tokens"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"()"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"delete"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"();"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#6A737D","--shiki-light":"#6A737D"},"children":"// Revoke a specific token..."}]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"$$user"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"tokens"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"()"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"where"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'id'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", $tokenId)"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"delete"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"();"}]]}]]}]}]
87:["$","a",null,{"name":"testing"}]
88:["$","h2",null,{"id":"測試-testing","children":["$","a",null,{"href":"#測試-testing","children":"測試 (Testing)"}]}]
89:["$","p",null,{"children":["在測試時，可以使用 ",["$","code",null,{"children":"Sanctum::actingAs"}]," 方法來驗證使用者並指定應授予其 Token 的能力："]}]
8a:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" App\\Models\\User"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Laravel\\Sanctum\\Sanctum"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"test"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'task list can be retrieved'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"function"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" () {"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"    Sanctum"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"actingAs"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"        User"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"factory"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"()"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"create"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"(),"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"        ["}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'view-tasks'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"]"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"    );"}]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"    $response "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" $this"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"get"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'/api/task'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":");"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"    $response"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"assertOk"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"();"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"});"}]}]]}]}]
8b:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" App\\Models\\User"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Laravel\\Sanctum\\Sanctum"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"public"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" function"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":" test_task_list_can_be_retrieved"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"()"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":":"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" void"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"{"}]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"    Sanctum"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"actingAs"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"        User"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"factory"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"()"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"create"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"(),"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"        ["}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'view-tasks'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"]"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"    );"}]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"    $response "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" $this"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"get"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'/api/task'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":");"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"    $response"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"assertOk"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"();"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"}"}]}]]}]}]
8c:["$","p",null,{"children":["如果你想授予 Token 所有能力，你應該在提供給 ",["$","code",null,{"children":"actingAs"}]," 方法的能力列表中包含 ",["$","code",null,{"children":"*"}],"："]}]
8d:["$","$L91",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Sanctum"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"actingAs"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"    User"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"factory"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"()"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"create"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"(),"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"    ["}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'*'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"]"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":");"}]}]]}]}]
8e:["$","$Lb0",null,{"items":[{"id":"簡介-introduction","text":"簡介 (Introduction)","level":2},{"id":"運作原理-how-it-works","text":"運作原理 (How it Works)","level":3},{"id":"api-tokens","text":"API Tokens","level":4},{"id":"spa-驗證-spa-authentication","text":"SPA 驗證 (SPA Authentication)","level":4},{"id":"安裝-installation","text":"安裝 (Installation)","level":2},{"id":"設定-configuration","text":"設定 (Configuration)","level":2},{"id":"覆寫預設-model-overriding-default-models","text":"覆寫預設 Model (Overriding Default Models)","level":3},{"id":"api-token-驗證-api-token-authentication","text":"API Token 驗證 (API Token Authentication)","level":2},{"id":"發行-api-token-issuing-api-tokens","text":"發行 API Token (Issuing API Tokens)","level":3},{"id":"token-能力-token-abilities","text":"Token 能力 (Token Abilities)","level":3},{"id":"token-能力-middleware-token-ability-middleware","text":"Token 能力 Middleware (Token Ability Middleware)","level":4},{"id":"第一方-ui-發起的請求-first-party-ui-initiated-requests","text":"第一方 UI 發起的請求 (First-Party UI Initiated Requests)","level":4},{"id":"保護路由-protecting-routes","text":"保護路由 (Protecting Routes)","level":3},{"id":"撤銷-token-revoking-tokens","text":"撤銷 Token (Revoking Tokens)","level":3},{"id":"token-過期-token-expiration","text":"Token 過期 (Token Expiration)","level":3},{"id":"spa-驗證-spa-authentication","text":"SPA 驗證 (SPA Authentication)","level":2},{"id":"設定-configuration","text":"設定 (Configuration)","level":3},{"id":"設定你的第一方網域-configuring-your-first-party-domains","text":"設定你的第一方網域 (Configuring Your First-Party Domains)","level":4},{"id":"sanctum-middleware","text":"Sanctum Middleware","level":4},{"id":"cors-和-cookies-cors-and-cookies","text":"CORS 和 Cookies (CORS and Cookies)","level":4},{"id":"驗證-authenticating","text":"驗證 (Authenticating)","level":3},{"id":"csrf-保護-csrf-protection","text":"CSRF 保護 (CSRF Protection)","level":4},{"id":"登入-logging-in","text":"登入 (Logging In)","level":4},{"id":"保護路由-protecting-routes","text":"保護路由 (Protecting Routes)","level":3},{"id":"授權私有廣播頻道-authorizing-private-broadcast-channels","text":"授權私有廣播頻道 (Authorizing Private Broadcast Channels)","level":3},{"id":"行動應用程式驗證-mobile-application-authentication","text":"行動應用程式驗證 (Mobile Application Authentication)","level":2},{"id":"發行-api-token-issuing-api-tokens","text":"發行 API Token (Issuing API Tokens)","level":3},{"id":"保護路由-protecting-routes","text":"保護路由 (Protecting Routes)","level":3},{"id":"撤銷-token-revoking-tokens","text":"撤銷 Token (Revoking Tokens)","level":3},{"id":"測試-testing","text":"測試 (Testing)","level":2}]}]
8f:["$","script","script-0",{"src":"/_next/static/chunks/a76a0998b696e151.js","async":true}]
90:["$","$Lb1",null,{"children":["$","$b2",null,{"name":"Next.MetadataOutlet","children":"$@b3"}]}]
92:["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", {"}]
93:["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"            socket_id: socketId,"}]}]
94:["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"            channel_name: channel.name,"}]}]
95:["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"          })"}]}]
96:["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"          ."}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"then"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"(("}],["$","span",null,{"style":{"color":"#FFAB70","--shiki-light":"#E36209"},"children":"response"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":") "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"=>"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]]}]
97:["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"            callback"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"false"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", response.data);"}]]}]
98:["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"          })"}]}]
99:["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"          ."}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"catch"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"(("}],["$","span",null,{"style":{"color":"#FFAB70","--shiki-light":"#E36209"},"children":"error"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":") "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"=>"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" {"}]]}]
9a:["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"            callback"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"true"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", error);"}]]}]
9b:["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"          });"}]}]
9c:["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"      },"}]}]
9d:["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"    };"}]}]
9e:["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"  },"}]}]
9f:["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"});"}]}]
a0:["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'email'"}]
a1:["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":", $request"}]
a2:["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}]
a3:["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"email)"}]
a4:["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}]
a5:["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"first"}]
a6:["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"();"}]
a7:["$","span",null,{"className":"line"}]
a8:["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"    if"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" ("}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"!"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $user "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"||"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" !"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Hash"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"check"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"($request"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"password, $user"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"password)) {"}]]}]
a9:["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"        throw"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" ValidationException"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"withMessages"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"(["}]]}]
aa:["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"            'email'"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":" =>"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" ["}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'The provided credentials are incorrect.'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"],"}]]}]
ab:["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"        ]);"}]}]
ac:["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"    }"}]}]
ad:["$","span",null,{"className":"line"}]
ae:["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"    return"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" $user"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"createToken"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"($request"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"device_name)"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"plainTextToken;"}]]}]
af:["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"});"}]}]
b3:null
