<!DOCTYPE html><!--c2cpI4EdIeAozP6eEqxqR--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/8d8bfdb8c7183f74.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/cbd55ab9639e1e66.js"/><script src="/_next/static/chunks/87a939617be2fa8c.js" async=""></script><script src="/_next/static/chunks/8368f298651cbd89.js" async=""></script><script src="/_next/static/chunks/6740f161f60c6ab5.js" async=""></script><script src="/_next/static/chunks/turbopack-929fc2ce3ca903db.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/247eb132b7f7b574.js" async=""></script><script src="/_next/static/chunks/796e69ae18b2784c.js" async=""></script><script src="/_next/static/chunks/97c0560122aa0f49.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased"><div hidden=""><!--$--><!--/$--></div><div class="flex min-h-screen bg-background"><div class="w-64 border-r bg-background h-screen sticky top-0 hidden md:block"><div class="p-6 font-bold text-xl border-b flex items-center gap-2"><span class="text-red-600">Laravel</span> Docs（中文）</div><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-65px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="p-4 space-y-2"><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>前言</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">發行說明</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>入門</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/installation"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">安裝</button></a><a class="block" href="/docs/configuration"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">配置</button></a><a class="block" href="/docs/structure"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">目錄結構</button></a><a class="block" href="/docs/lifecycle"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">生命週期</button></a><a class="block" href="/docs/frontend"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">前端</button></a><a class="block" href="/docs/starter-kits"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">啟動套件</button></a><a class="block" href="/docs/deployment"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">部署</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>架構</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>基礎功能</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>深入探討</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>安全性</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>資料庫</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>Eloquent ORM</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>測試</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>其他</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>官方套件</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div class="border-t pt-4 space-y-2"><a class="block" href="/docs/api"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">API 文件</button></a><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">更新日誌</button></a></div></div></div></div></div></div><main class="flex-1 relative"><div class="container mx-auto py-10"><div class="mx-auto max-w-3xl"><div class="mb-8"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Eloquent Mutators</h1><p class="text-xl text-muted-foreground mt-2">Eloquent mutators 和 casts 讓你轉換屬性值</p></div><article class="prose prose-slate dark:prose-invert max-w-none"><h1 id="eloquent-mutators--casting"><a href="#eloquent-mutators--casting">Eloquent: Mutators &amp; Casting</a></h1>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#accessors-and-mutators">Accessors and Mutators</a>
<ul>
<li><a href="#defining-an-accessor">Defining an Accessor</a></li>
<li><a href="#defining-a-mutator">Defining a Mutator</a></li>
</ul>
</li>
<li><a href="#attribute-casting">Attribute Casting</a>
<ul>
<li><a href="#array-and-json-casting">Array and JSON Casting</a></li>
<li><a href="#date-casting">Date Casting</a></li>
<li><a href="#enum-casting">Enum Casting</a></li>
<li><a href="#encrypted-casting">Encrypted Casting</a></li>
<li><a href="#query-time-casting">Query Time Casting</a></li>
</ul>
</li>
<li><a href="#custom-casts">Custom Casts</a>
<ul>
<li><a href="#value-object-casting">Value Object Casting</a></li>
<li><a href="#array-json-serialization">Array / JSON Serialization</a></li>
<li><a href="#inbound-casting">Inbound Casting</a></li>
<li><a href="#cast-parameters">Cast Parameters</a></li>
<li><a href="#comparing-cast-values">Comparing Cast Values</a></li>
<li><a href="#castables">Castables</a></li>
</ul>
</li>
</ul>
<a name="introduction"></a>
<h2 id="簡介"><a href="#簡介">簡介</a></h2>
<p>Accessors, mutators, and attribute casting allow you to transform Eloquent attribute values when you retrieve or set them on model instances. For example, you may want to use the <a href="/docs/%7B&#x27;12.x&#x27;%7D/encryption">Laravel encrypter</a> to encrypt a value while it is stored in the database, and then automatically decrypt the attribute when you access it on an Eloquent model. Or, you may want to convert a JSON string that is stored in your database to an array when it is accessed via your Eloquent model.</p>
<a name="accessors-and-mutators"></a>
<h2 id="accessors-and-mutators"><a href="#accessors-and-mutators">Accessors and Mutators</a></h2>
<a name="defining-an-accessor"></a>
<h3 id="defining-an-accessor"><a href="#defining-an-accessor">Defining an Accessor</a></h3>
<p>An accessor transforms an Eloquent attribute value when it is accessed. To define an accessor, create a protected method on your model to represent the accessible attribute. This method name should correspond to the &quot;camel case&quot; representation of the true underlying model attribute / database column when applicable.</p>
<p>In this example, we&#x27;ll define an accessor for the <code>first_name</code> attribute. The accessor will automatically be called by Eloquent when attempting to retrieve the value of the <code>first_name</code> attribute. All attribute accessor / mutator methods must declare a return type-hint of <code>Illuminate\Database\Eloquent\Casts\Attribute</code>:</p>
<pre><code class="language-php">&lt;?php

namespace App\Models;

use Illuminate\Database\Eloquent\Casts\Attribute;
use Illuminate\Database\Eloquent\Model;

class User extends Model
{
    /**
     * Get the user&#x27;s first name.
     */
    protected function firstName(): Attribute
    {
        return Attribute::make(
            get: fn (string $value) =&gt; ucfirst($value),
        );
    }
}
</code></pre>
<p>All accessor methods return an <code>Attribute</code> instance which defines how the attribute will be accessed and, optionally, mutated. In this example, we are only defining how the attribute will be accessed. To do so, we supply the <code>get</code> argument to the <code>Attribute</code> class constructor.</p>
<p>As you can see, the original value of the column is passed to the accessor, allowing you to manipulate and return the value. To access the value of the accessor, you may simply access the <code>first_name</code> attribute on a model instance:</p>
<pre><code class="language-php">use App\Models\User;

$user = User::find(1);

$firstName = $user-&gt;first_name;
</code></pre>
<blockquote>
<p>[!NOTE]
If you would like these computed values to be added to the array / JSON representations of your model, <a href="/docs/%7B&#x27;12.x&#x27;%7D/eloquent-serialization#appending-values-to-json">you will need to append them</a>.</p>
</blockquote>
<a name="building-value-objects-from-multiple-attributes"></a>
<h4 id="building-value-objects-from-multiple-attributes"><a href="#building-value-objects-from-multiple-attributes">Building Value Objects From Multiple Attributes</a></h4>
<p>Sometimes your accessor may need to transform multiple model attributes into a single &quot;value object&quot;. To do so, your <code>get</code> closure may accept a second argument of <code>$attributes</code>, which will be automatically supplied to the closure and will contain an array of all of the model&#x27;s current attributes:</p>
<pre><code class="language-php">use App\Support\Address;
use Illuminate\Database\Eloquent\Casts\Attribute;

/**
 * Interact with the user&#x27;s address.
 */
protected function address(): Attribute
{
    return Attribute::make(
        get: fn (mixed $value, array $attributes) =&gt; new Address(
            $attributes[&#x27;address_line_one&#x27;],
            $attributes[&#x27;address_line_two&#x27;],
        ),
    );
}
</code></pre>
<a name="accessor-caching"></a>
<h4 id="accessor-caching"><a href="#accessor-caching">Accessor Caching</a></h4>
<p>When returning value objects from accessors, any changes made to the value object will automatically be synced back to the model before the model is saved. This is possible because Eloquent retains instances returned by accessors so it can return the same instance each time the accessor is invoked:</p>
<pre><code class="language-php">use App\Models\User;

$user = User::find(1);

$user-&gt;address-&gt;lineOne = &#x27;Updated Address Line 1 Value&#x27;;
$user-&gt;address-&gt;lineTwo = &#x27;Updated Address Line 2 Value&#x27;;

$user-&gt;save();
</code></pre>
<p>However, you may sometimes wish to enable caching for primitive values like strings and booleans, particularly if they are computationally intensive. To accomplish this, you may invoke the <code>shouldCache</code> method when defining your accessor:</p>
<pre><code class="language-php">protected function hash(): Attribute
{
    return Attribute::make(
        get: fn (string $value) =&gt; bcrypt(gzuncompress($value)),
    )-&gt;shouldCache();
}
</code></pre>
<p>If you would like to disable the object caching behavior of attributes, you may invoke the <code>withoutObjectCaching</code> method when defining the attribute:</p>
<pre><code class="language-php">/**
 * Interact with the user&#x27;s address.
 */
protected function address(): Attribute
{
    return Attribute::make(
        get: fn (mixed $value, array $attributes) =&gt; new Address(
            $attributes[&#x27;address_line_one&#x27;],
            $attributes[&#x27;address_line_two&#x27;],
        ),
    )-&gt;withoutObjectCaching();
}
</code></pre>
<a name="defining-a-mutator"></a>
<h3 id="defining-a-mutator"><a href="#defining-a-mutator">Defining a Mutator</a></h3>
<p>A mutator transforms an Eloquent attribute value when it is set. To define a mutator, you may provide the <code>set</code> argument when defining your attribute. Let&#x27;s define a mutator for the <code>first_name</code> attribute. This mutator will be automatically called when we attempt to set the value of the <code>first_name</code> attribute on the model:</p>
<pre><code class="language-php">&lt;?php

namespace App\Models;

use Illuminate\Database\Eloquent\Casts\Attribute;
use Illuminate\Database\Eloquent\Model;

class User extends Model
{
    /**
     * Interact with the user&#x27;s first name.
     */
    protected function firstName(): Attribute
    {
        return Attribute::make(
            get: fn (string $value) =&gt; ucfirst($value),
            set: fn (string $value) =&gt; strtolower($value),
        );
    }
}
</code></pre>
<p>The mutator closure will receive the value that is being set on the attribute, allowing you to manipulate the value and return the manipulated value. To use our mutator, we only need to set the <code>first_name</code> attribute on an Eloquent model:</p>
<pre><code class="language-php">use App\Models\User;

$user = User::find(1);

$user-&gt;first_name = &#x27;Sally&#x27;;
</code></pre>
<p>In this example, the <code>set</code> callback will be called with the value <code>Sally</code>. The mutator will then apply the <code>strtolower</code> function to the name and set its resulting value in the model&#x27;s internal <code>$attributes</code> array.</p>
<a name="mutating-multiple-attributes"></a>
<h4 id="mutating-multiple-attributes"><a href="#mutating-multiple-attributes">Mutating Multiple Attributes</a></h4>
<p>Sometimes your mutator may need to set multiple attributes on the underlying model. To do so, you may return an array from the <code>set</code> closure. Each key in the array should correspond with an underlying attribute / database column associated with the model:</p>
<pre><code class="language-php">use App\Support\Address;
use Illuminate\Database\Eloquent\Casts\Attribute;

/**
 * Interact with the user&#x27;s address.
 */
protected function address(): Attribute
{
    return Attribute::make(
        get: fn (mixed $value, array $attributes) =&gt; new Address(
            $attributes[&#x27;address_line_one&#x27;],
            $attributes[&#x27;address_line_two&#x27;],
        ),
        set: fn (Address $value) =&gt; [
            &#x27;address_line_one&#x27; =&gt; $value-&gt;lineOne,
            &#x27;address_line_two&#x27; =&gt; $value-&gt;lineTwo,
        ],
    );
}
</code></pre>
<a name="attribute-casting"></a>
<h2 id="attribute-casting"><a href="#attribute-casting">Attribute Casting</a></h2>
<p>Attribute casting provides functionality similar to accessors and mutators without requiring you to define any additional methods on your model. Instead, your model&#x27;s <code>casts</code> method provides a convenient way of converting attributes to common data types.</p>
<p>The <code>casts</code> method should return an array where the key is the name of the attribute being cast and the value is the type you wish to cast the column to. The supported cast types are:</p>
<div class="content-list" markdown="1"><ul>
<li><code>array</code></li>
<li><code>AsFluent::class</code></li>
<li><code>AsStringable::class</code></li>
<li><code>AsUri::class</code></li>
<li><code>boolean</code></li>
<li><code>collection</code></li>
<li><code>date</code></li>
<li><code>datetime</code></li>
<li><code>immutable_date</code></li>
<li><code>immutable_datetime</code></li>
<li>
<code>decimal:&lt;precision&gt;</code>
</li>
<li><code>double</code></li>
<li><code>encrypted</code></li>
<li><code>encrypted:array</code></li>
<li><code>encrypted:collection</code></li>
<li><code>encrypted:object</code></li>
<li><code>float</code></li>
<li><code>hashed</code></li>
<li><code>integer</code></li>
<li><code>object</code></li>
<li><code>real</code></li>
<li><code>string</code></li>
<li><code>timestamp</code></li>
</ul></div>
<p>To demonstrate attribute casting, let&#x27;s cast the <code>is_admin</code> attribute, which is stored in our database as an integer (<code>0</code> or <code>1</code>) to a boolean value:</p>
<pre><code class="language-php">&lt;?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;

class User extends Model
{
    /**
     * Get the attributes that should be cast.
     *
     * @return array&lt;string, string&gt;
     */
    protected function casts(): array
    {
        return [
            &#x27;is_admin&#x27; =&gt; &#x27;boolean&#x27;,
        ];
    }
}
</code></pre>
<p>After defining the cast, the <code>is_admin</code> attribute will always be cast to a boolean when you access it, even if the underlying value is stored in the database as an integer:</p>
<pre><code class="language-php">$user = App\Models\User::find(1);

if ($user-&gt;is_admin) {
    // ...
}
</code></pre>
<p>If you need to add a new, temporary cast at runtime, you may use the <code>mergeCasts</code> method. These cast definitions will be added to any of the casts already defined on the model:</p>
<pre><code class="language-php">$user-&gt;mergeCasts([
    &#x27;is_admin&#x27; =&gt; &#x27;integer&#x27;,
    &#x27;options&#x27; =&gt; &#x27;object&#x27;,
]);
</code></pre>
<blockquote>
<p>[!WARNING]
Attributes that are <code>null</code> will not be cast. In addition, you should never define a cast (or an attribute) that has the same name as a relationship or assign a cast to the model&#x27;s primary key.</p>
</blockquote>
<a name="stringable-casting"></a>
<h4 id="stringable-casting"><a href="#stringable-casting">Stringable Casting</a></h4>
<p>You may use the <code>Illuminate\Database\Eloquent\Casts\AsStringable</code> cast class to cast a model attribute to a <a href="/docs/%7B&#x27;12.x&#x27;%7D/strings#fluent-strings-method-list">fluent Illuminate\Support\Stringable object</a>:</p>
<pre><code class="language-php">&lt;?php

namespace App\Models;

use Illuminate\Database\Eloquent\Casts\AsStringable;
use Illuminate\Database\Eloquent\Model;

class User extends Model
{
    /**
     * Get the attributes that should be cast.
     *
     * @return array&lt;string, string&gt;
     */
    protected function casts(): array
    {
        return [
            &#x27;directory&#x27; =&gt; AsStringable::class,
        ];
    }
}
</code></pre>
<a name="array-and-json-casting"></a>
<h3 id="array-and-json-casting"><a href="#array-and-json-casting">Array and JSON Casting</a></h3>
<p>The <code>array</code> cast is particularly useful when working with columns that are stored as serialized JSON. For example, if your database has a <code>JSON</code> or <code>TEXT</code> field type that contains serialized JSON, adding the <code>array</code> cast to that attribute will automatically deserialize the attribute to a PHP array when you access it on your Eloquent model:</p>
<pre><code class="language-php">&lt;?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;

class User extends Model
{
    /**
     * Get the attributes that should be cast.
     *
     * @return array&lt;string, string&gt;
     */
    protected function casts(): array
    {
        return [
            &#x27;options&#x27; =&gt; &#x27;array&#x27;,
        ];
    }
}
</code></pre>
<p>Once the cast is defined, you may access the <code>options</code> attribute and it will automatically be deserialized from JSON into a PHP array. When you set the value of the <code>options</code> attribute, the given array will automatically be serialized back into JSON for storage:</p>
<pre><code class="language-php">use App\Models\User;

$user = User::find(1);

$options = $user-&gt;options;

$options[&#x27;key&#x27;] = &#x27;value&#x27;;

$user-&gt;options = $options;

$user-&gt;save();
</code></pre>
<p>To update a single field of a JSON attribute with a more terse syntax, you may <a href="/docs/%7B&#x27;12.x&#x27;%7D/eloquent#mass-assignment-json-columns">make the attribute mass assignable</a> and use the <code>-&gt;</code> operator when calling the <code>update</code> method:</p>
<pre><code class="language-php">$user = User::find(1);

$user-&gt;update([&#x27;options-&gt;key&#x27; =&gt; &#x27;value&#x27;]);
</code></pre>
<a name="json-and-unicode"></a>
<h4 id="json-and-unicode"><a href="#json-and-unicode">JSON and Unicode</a></h4>
<p>If you would like to store an array attribute as JSON with unescaped Unicode characters, you may use the <code>json:unicode</code> cast:</p>
<pre><code class="language-php">/**
 * Get the attributes that should be cast.
 *
 * @return array&lt;string, string&gt;
 */
protected function casts(): array
{
    return [
        &#x27;options&#x27; =&gt; &#x27;json:unicode&#x27;,
    ];
}
</code></pre>
<a name="array-object-and-collection-casting"></a>
<h4 id="array-object-and-collection-casting"><a href="#array-object-and-collection-casting">Array Object and Collection Casting</a></h4>
<p>Although the standard <code>array</code> cast is sufficient for many applications, it does have some disadvantages. Since the <code>array</code> cast returns a primitive type, it is not possible to mutate an offset of the array directly. For example, the following code will trigger a PHP error:</p>
<pre><code class="language-php">$user = User::find(1);

$user-&gt;options[&#x27;key&#x27;] = $value;
</code></pre>
<p>To solve this, Laravel offers an <code>AsArrayObject</code> cast that casts your JSON attribute to an <a href="https://www.php.net/manual/en/class.arrayobject.php">ArrayObject</a> class. This feature is implemented using Laravel&#x27;s <a href="#custom-casts">custom cast</a> implementation, which allows Laravel to intelligently cache and transform the mutated object such that individual offsets may be modified without triggering a PHP error. To use the <code>AsArrayObject</code> cast, simply assign it to an attribute:</p>
<pre><code class="language-php">use Illuminate\Database\Eloquent\Casts\AsArrayObject;

/**
 * Get the attributes that should be cast.
 *
 * @return array&lt;string, string&gt;
 */
protected function casts(): array
{
    return [
        &#x27;options&#x27; =&gt; AsArrayObject::class,
    ];
}
</code></pre>
<p>Similarly, Laravel offers an <code>AsCollection</code> cast that casts your JSON attribute to a Laravel <a href="/docs/%7B&#x27;12.x&#x27;%7D/collections">Collection</a> instance:</p>
<pre><code class="language-php">use Illuminate\Database\Eloquent\Casts\AsCollection;

/**
 * Get the attributes that should be cast.
 *
 * @return array&lt;string, string&gt;
 */
protected function casts(): array
{
    return [
        &#x27;options&#x27; =&gt; AsCollection::class,
    ];
}
</code></pre>
<p>If you would like the <code>AsCollection</code> cast to instantiate a custom collection class instead of Laravel&#x27;s base collection class, you may provide the collection class name as a cast argument:</p>
<pre><code class="language-php">use App\Collections\OptionCollection;
use Illuminate\Database\Eloquent\Casts\AsCollection;

/**
 * Get the attributes that should be cast.
 *
 * @return array&lt;string, string&gt;
 */
protected function casts(): array
{
    return [
        &#x27;options&#x27; =&gt; AsCollection::using(OptionCollection::class),
    ];
}
</code></pre>
<p>The <code>of</code> method may be used to indicate collection items should be mapped into a given class via the collection&#x27;s <a href="/docs/%7B&#x27;12.x&#x27;%7D/collections#method-mapinto">mapInto method</a>:</p>
<pre><code class="language-php">use App\ValueObjects\Option;
use Illuminate\Database\Eloquent\Casts\AsCollection;

/**
 * Get the attributes that should be cast.
 *
 * @return array&lt;string, string&gt;
 */
protected function casts(): array
{
    return [
        &#x27;options&#x27; =&gt; AsCollection::of(Option::class)
    ];
}
</code></pre>
<p>When mapping collections to objects, the object should implement the <code>Illuminate\Contracts\Support\Arrayable</code> and <code>JsonSerializable</code> interfaces to define how their instances should be serialized into the database as JSON:</p>
<pre><code class="language-php">&lt;?php

namespace App\ValueObjects;

use Illuminate\Contracts\Support\Arrayable;
use JsonSerializable;

class Option implements Arrayable, JsonSerializable
{
    public string $name;
    public mixed $value;
    public bool $isLocked;

    /**
     * Create a new Option instance.
     */
    public function __construct(array $data)
    {
        $this-&gt;name = $data[&#x27;name&#x27;];
        $this-&gt;value = $data[&#x27;value&#x27;];
        $this-&gt;isLocked = $data[&#x27;is_locked&#x27;];
    }

    /**
     * Get the instance as an array.
     *
     * @return array{name: string, data: string, is_locked: bool}
     */
    public function toArray(): array
    {
        return [
            &#x27;name&#x27; =&gt; $this-&gt;name,
            &#x27;value&#x27; =&gt; $this-&gt;value,
            &#x27;is_locked&#x27; =&gt; $this-&gt;isLocked,
        ];
    }

    /**
     * Specify the data which should be serialized to JSON.
     *
     * @return array{name: string, data: string, is_locked: bool}
     */
    public function jsonSerialize(): array
    {
        return $this-&gt;toArray();
    }
}
</code></pre>
<a name="date-casting"></a>
<h3 id="date-casting"><a href="#date-casting">Date Casting</a></h3>
<p>By default, Eloquent will cast the <code>created_at</code> and <code>updated_at</code> columns to instances of <a href="https://github.com/briannesbitt/Carbon">Carbon</a>, which extends the PHP <code>DateTime</code> class and provides an assortment of helpful methods. You may cast additional date attributes by defining additional date casts within your model&#x27;s <code>casts</code> method. Typically, dates should be cast using the <code>datetime</code> or <code>immutable_datetime</code> cast types.</p>
<p>When defining a <code>date</code> or <code>datetime</code> cast, you may also specify the date&#x27;s format. This format will be used when the <a href="/docs/%7B&#x27;12.x&#x27;%7D/eloquent-serialization">model is serialized to an array or JSON</a>:</p>
<pre><code class="language-php">/**
 * Get the attributes that should be cast.
 *
 * @return array&lt;string, string&gt;
 */
protected function casts(): array
{
    return [
        &#x27;created_at&#x27; =&gt; &#x27;datetime:Y-m-d&#x27;,
    ];
}
</code></pre>
<p>When a column is cast as a date, you may set the corresponding model attribute value to a UNIX timestamp, date string (<code>Y-m-d</code>), date-time string, or a <code>DateTime</code> / <code>Carbon</code> instance. The date&#x27;s value will be correctly converted and stored in your database.</p>
<p>You may customize the default serialization format for all of your model&#x27;s dates by defining a <code>serializeDate</code> method on your model. This method does not affect how your dates are formatted for storage in the database:</p>
<pre><code class="language-php">/**
 * Prepare a date for array / JSON serialization.
 */
protected function serializeDate(DateTimeInterface $date): string
{
    return $date-&gt;format(&#x27;Y-m-d&#x27;);
}
</code></pre>
<p>To specify the format that should be used when actually storing a model&#x27;s dates within your database, you should define a <code>$dateFormat</code> property on your model:</p>
<pre><code class="language-php">/**
 * The storage format of the model&#x27;s date columns.
 *
 * @var string
 */
protected $dateFormat = &#x27;U&#x27;;
</code></pre>
<a name="date-casting-and-timezones"></a>
<h4 id="date-casting-serialization-and-timezones"><a href="#date-casting-serialization-and-timezones">Date Casting, Serialization, and Timezones</a></h4>
<p>By default, the <code>date</code> and <code>datetime</code> casts will serialize dates to a UTC ISO-8601 date string (<code>YYYY-MM-DDTHH:MM:SS.uuuuuuZ</code>), regardless of the timezone specified in your application&#x27;s <code>timezone</code> configuration option. You are strongly encouraged to always use this serialization format, as well as to store your application&#x27;s dates in the UTC timezone by not changing your application&#x27;s <code>timezone</code> configuration option from its default <code>UTC</code> value. Consistently using the UTC timezone throughout your application will provide the maximum level of interoperability with other date manipulation libraries written in PHP and JavaScript.</p>
<p>If a custom format is applied to the <code>date</code> or <code>datetime</code> cast, such as <code>datetime:Y-m-d H:i:s</code>, the inner timezone of the Carbon instance will be used during date serialization. Typically, this will be the timezone specified in your application&#x27;s <code>timezone</code> configuration option. However, it&#x27;s important to note that <code>timestamp</code> columns such as <code>created_at</code> and <code>updated_at</code> are exempt from this behavior and are always formatted in UTC, regardless of the application&#x27;s timezone setting.</p>
<a name="enum-casting"></a>
<h3 id="enum-casting"><a href="#enum-casting">Enum Casting</a></h3>
<p>Eloquent also allows you to cast your attribute values to PHP <a href="https://www.php.net/manual/en/language.enumerations.backed.php">Enums</a>. To accomplish this, you may specify the attribute and enum you wish to cast in your model&#x27;s <code>casts</code> method:</p>
<pre><code class="language-php">use App\Enums\ServerStatus;

/**
 * Get the attributes that should be cast.
 *
 * @return array&lt;string, string&gt;
 */
protected function casts(): array
{
    return [
        &#x27;status&#x27; =&gt; ServerStatus::class,
    ];
}
</code></pre>
<p>Once you have defined the cast on your model, the specified attribute will be automatically cast to and from an enum when you interact with the attribute:</p>
<pre><code class="language-php">if ($server-&gt;status == ServerStatus::Provisioned) {
    $server-&gt;status = ServerStatus::Ready;

    $server-&gt;save();
}
</code></pre>
<a name="casting-arrays-of-enums"></a>
<h4 id="casting-arrays-of-enums"><a href="#casting-arrays-of-enums">Casting Arrays of Enums</a></h4>
<p>Sometimes you may need your model to store an array of enum values within a single column. To accomplish this, you may utilize the <code>AsEnumArrayObject</code> or <code>AsEnumCollection</code> casts provided by Laravel:</p>
<pre><code class="language-php">use App\Enums\ServerStatus;
use Illuminate\Database\Eloquent\Casts\AsEnumCollection;

/**
 * Get the attributes that should be cast.
 *
 * @return array&lt;string, string&gt;
 */
protected function casts(): array
{
    return [
        &#x27;statuses&#x27; =&gt; AsEnumCollection::of(ServerStatus::class),
    ];
}
</code></pre>
<a name="encrypted-casting"></a>
<h3 id="encrypted-casting"><a href="#encrypted-casting">Encrypted Casting</a></h3>
<p>The <code>encrypted</code> cast will encrypt a model&#x27;s attribute value using Laravel&#x27;s built-in <a href="/docs/%7B&#x27;12.x&#x27;%7D/encryption">encryption</a> features. In addition, the <code>encrypted:array</code>, <code>encrypted:collection</code>, <code>encrypted:object</code>, <code>AsEncryptedArrayObject</code>, and <code>AsEncryptedCollection</code> casts work like their unencrypted counterparts; however, as you might expect, the underlying value is encrypted when stored in your database.</p>
<p>As the final length of the encrypted text is not predictable and is longer than its plain text counterpart, make sure the associated database column is of <code>TEXT</code> type or larger. In addition, since the values are encrypted in the database, you will not be able to query or search encrypted attribute values.</p>
<a name="key-rotation"></a>
<h4 id="key-rotation"><a href="#key-rotation">Key Rotation</a></h4>
<p>As you may know, Laravel encrypts strings using the <code>key</code> configuration value specified in your application&#x27;s <code>app</code> configuration file. Typically, this value corresponds to the value of the <code>APP_KEY</code> environment variable. If you need to rotate your application&#x27;s encryption key, you will need to manually re-encrypt your encrypted attributes using the new key.</p>
<a name="query-time-casting"></a>
<h3 id="query-time-casting"><a href="#query-time-casting">Query Time Casting</a></h3>
<p>Sometimes you may need to apply casts while executing a query, such as when selecting a raw value from a table. For example, consider the following query:</p>
<pre><code class="language-php">use App\Models\Post;
use App\Models\User;

$users = User::select([
    &#x27;users.*&#x27;,
    &#x27;last_posted_at&#x27; =&gt; Post::selectRaw(&#x27;MAX(created_at)&#x27;)
        -&gt;whereColumn(&#x27;user_id&#x27;, &#x27;users.id&#x27;)
])-&gt;get();
</code></pre>
<p>The <code>last_posted_at</code> attribute on the results of this query will be a simple string. It would be wonderful if we could apply a <code>datetime</code> cast to this attribute when executing the query. Thankfully, we may accomplish this using the <code>withCasts</code> method:</p>
<pre><code class="language-php">$users = User::select([
    &#x27;users.*&#x27;,
    &#x27;last_posted_at&#x27; =&gt; Post::selectRaw(&#x27;MAX(created_at)&#x27;)
        -&gt;whereColumn(&#x27;user_id&#x27;, &#x27;users.id&#x27;)
])-&gt;withCasts([
    &#x27;last_posted_at&#x27; =&gt; &#x27;datetime&#x27;
])-&gt;get();
</code></pre>
<a name="custom-casts"></a>
<h2 id="custom-casts"><a href="#custom-casts">Custom Casts</a></h2>
<p>Laravel has a variety of built-in, helpful cast types; however, you may occasionally need to define your own cast types. To create a cast, execute the <code>make:cast</code> Artisan command. The new cast class will be placed in your <code>app/Casts</code> directory:</p>
<pre><code class="language-shell">php artisan make:cast AsJson
</code></pre>
<p>All custom cast classes implement the <code>CastsAttributes</code> interface. Classes that implement this interface must define a <code>get</code> and <code>set</code> method. The <code>get</code> method is responsible for transforming a raw value from the database into a cast value, while the <code>set</code> method should transform a cast value into a raw value that can be stored in the database. As an example, we will re-implement the built-in <code>json</code> cast type as a custom cast type:</p>
<pre><code class="language-php">&lt;?php

namespace App\Casts;

use Illuminate\Contracts\Database\Eloquent\CastsAttributes;
use Illuminate\Database\Eloquent\Model;

class AsJson implements CastsAttributes
{
    /**
     * Cast the given value.
     *
     * @param  array&lt;string, mixed&gt;  $attributes
     * @return array&lt;string, mixed&gt;
     */
    public function get(
        Model $model,
        string $key,
        mixed $value,
        array $attributes,
    ): array {
        return json_decode($value, true);
    }

    /**
     * Prepare the given value for storage.
     *
     * @param  array&lt;string, mixed&gt;  $attributes
     */
    public function set(
        Model $model,
        string $key,
        mixed $value,
        array $attributes,
    ): string {
        return json_encode($value);
    }
}
</code></pre>
<p>Once you have defined a custom cast type, you may attach it to a model attribute using its class name:</p>
<pre><code class="language-php">&lt;?php

namespace App\Models;

use App\Casts\AsJson;
use Illuminate\Database\Eloquent\Model;

class User extends Model
{
    /**
     * Get the attributes that should be cast.
     *
     * @return array&lt;string, string&gt;
     */
    protected function casts(): array
    {
        return [
            &#x27;options&#x27; =&gt; AsJson::class,
        ];
    }
}
</code></pre>
<a name="value-object-casting"></a>
<h3 id="value-object-casting"><a href="#value-object-casting">Value Object Casting</a></h3>
<p>You are not limited to casting values to primitive types. You may also cast values to objects. Defining custom casts that cast values to objects is very similar to casting to primitive types; however, if your value object encompasses more than one database column, the <code>set</code> method must return an array of key / value pairs that will be used to set raw, storable values on the model. If your value object only affects a single column, you should simply return the storable value.</p>
<p>As an example, we will define a custom cast class that casts multiple model values into a single <code>Address</code> value object. We will assume the <code>Address</code> value object has two public properties: <code>lineOne</code> and <code>lineTwo</code>:</p>
<pre><code class="language-php">&lt;?php

namespace App\Casts;

use App\ValueObjects\Address;
use Illuminate\Contracts\Database\Eloquent\CastsAttributes;
use Illuminate\Database\Eloquent\Model;
use InvalidArgumentException;

class AsAddress implements CastsAttributes
{
    /**
     * Cast the given value.
     *
     * @param  array&lt;string, mixed&gt;  $attributes
     */
    public function get(
        Model $model,
        string $key,
        mixed $value,
        array $attributes,
    ): Address {
        return new Address(
            $attributes[&#x27;address_line_one&#x27;],
            $attributes[&#x27;address_line_two&#x27;]
        );
    }

    /**
     * Prepare the given value for storage.
     *
     * @param  array&lt;string, mixed&gt;  $attributes
     * @return array&lt;string, string&gt;
     */
    public function set(
        Model $model,
        string $key,
        mixed $value,
        array $attributes,
    ): array {
        if (! $value instanceof Address) {
            throw new InvalidArgumentException(&#x27;The given value is not an Address instance.&#x27;);
        }

        return [
            &#x27;address_line_one&#x27; =&gt; $value-&gt;lineOne,
            &#x27;address_line_two&#x27; =&gt; $value-&gt;lineTwo,
        ];
    }
}
</code></pre>
<p>When casting to value objects, any changes made to the value object will automatically be synced back to the model before the model is saved:</p>
<pre><code class="language-php">use App\Models\User;

$user = User::find(1);

$user-&gt;address-&gt;lineOne = &#x27;Updated Address Value&#x27;;

$user-&gt;save();
</code></pre>
<blockquote>
<p>[!NOTE]
If you plan to serialize your Eloquent models containing value objects to JSON or arrays, you should implement the <code>Illuminate\Contracts\Support\Arrayable</code> and <code>JsonSerializable</code> interfaces on the value object.</p>
</blockquote>
<a name="value-object-caching"></a>
<h4 id="value-object-caching"><a href="#value-object-caching">Value Object Caching</a></h4>
<p>When attributes that are cast to value objects are resolved, they are cached by Eloquent. Therefore, the same object instance will be returned if the attribute is accessed again.</p>
<p>If you would like to disable the object caching behavior of custom cast classes, you may declare a public <code>withoutObjectCaching</code> property on your custom cast class:</p>
<pre><code class="language-php">class AsAddress implements CastsAttributes
{
    public bool $withoutObjectCaching = true;

    // ...
}
</code></pre>
<a name="array-json-serialization"></a>
<h3 id="array--json-serialization"><a href="#array--json-serialization">Array / JSON Serialization</a></h3>
<p>When an Eloquent model is converted to an array or JSON using the <code>toArray</code> and <code>toJson</code> methods, your custom cast value objects will typically be serialized as well as long as they implement the <code>Illuminate\Contracts\Support\Arrayable</code> and <code>JsonSerializable</code> interfaces. However, when using value objects provided by third-party libraries, you may not have the ability to add these interfaces to the object.</p>
<p>Therefore, you may specify that your custom cast class will be responsible for serializing the value object. To do so, your custom cast class should implement the <code>Illuminate\Contracts\Database\Eloquent\SerializesCastableAttributes</code> interface. This interface states that your class should contain a <code>serialize</code> method which should return the serialized form of your value object:</p>
<pre><code class="language-php">/**
 * Get the serialized representation of the value.
 *
 * @param  array&lt;string, mixed&gt;  $attributes
 */
public function serialize(
    Model $model,
    string $key,
    mixed $value,
    array $attributes,
): string {
    return (string) $value;
}
</code></pre>
<a name="inbound-casting"></a>
<h3 id="inbound-casting"><a href="#inbound-casting">Inbound Casting</a></h3>
<p>Occasionally, you may need to write a custom cast class that only transforms values that are being set on the model and does not perform any operations when attributes are being retrieved from the model.</p>
<p>Inbound only custom casts should implement the <code>CastsInboundAttributes</code> interface, which only requires a <code>set</code> method to be defined. The <code>make:cast</code> Artisan command may be invoked with the <code>--inbound</code> option to generate an inbound only cast class:</p>
<pre><code class="language-shell">php artisan make:cast AsHash --inbound
</code></pre>
<p>A classic example of an inbound only cast is a &quot;hashing&quot; cast. For example, we may define a cast that hashes inbound values via a given algorithm:</p>
<pre><code class="language-php">&lt;?php

namespace App\Casts;

use Illuminate\Contracts\Database\Eloquent\CastsInboundAttributes;
use Illuminate\Database\Eloquent\Model;

class AsHash implements CastsInboundAttributes
{
    /**
     * Create a new cast class instance.
     */
    public function __construct(
        protected string|null $algorithm = null,
    ) {}

    /**
     * Prepare the given value for storage.
     *
     * @param  array&lt;string, mixed&gt;  $attributes
     */
    public function set(
        Model $model,
        string $key,
        mixed $value,
        array $attributes,
    ): string {
        return is_null($this-&gt;algorithm)
            ? bcrypt($value)
            : hash($this-&gt;algorithm, $value);
    }
}
</code></pre>
<a name="cast-parameters"></a>
<h3 id="cast-parameters"><a href="#cast-parameters">Cast Parameters</a></h3>
<p>When attaching a custom cast to a model, cast parameters may be specified by separating them from the class name using a <code>:</code> character and comma-delimiting multiple parameters. The parameters will be passed to the constructor of the cast class:</p>
<pre><code class="language-php">/**
 * Get the attributes that should be cast.
 *
 * @return array&lt;string, string&gt;
 */
protected function casts(): array
{
    return [
        &#x27;secret&#x27; =&gt; AsHash::class.&#x27;:sha256&#x27;,
    ];
}
</code></pre>
<a name="comparing-cast-values"></a>
<h3 id="comparing-cast-values"><a href="#comparing-cast-values">Comparing Cast Values</a></h3>
<p>If you would like to define how two given cast values should be compared to determine if they have been changed, your custom cast class may implement the <code>Illuminate\Contracts\Database\Eloquent\ComparesCastableAttributes</code> interface. This allows you to have fine-grained control over which values Eloquent considers changed and thus saves to the database when a model is updated.</p>
<p>This interface states that your class should contain a <code>compare</code> method which should return <code>true</code> if the given values are considered equal:</p>
<pre><code class="language-php">/**
 * Determine if the given values are equal.
 *
 * @param  \Illuminate\Database\Eloquent\Model  $model
 * @param  string  $key
 * @param  mixed  $firstValue
 * @param  mixed  $secondValue
 * @return bool
 */
public function compare(
    Model $model,
    string $key,
    mixed $firstValue,
    mixed $secondValue
): bool {
    return $firstValue === $secondValue;
}
</code></pre>
<a name="castables"></a>
<h3 id="castables"><a href="#castables">Castables</a></h3>
<p>You may want to allow your application&#x27;s value objects to define their own custom cast classes. Instead of attaching the custom cast class to your model, you may alternatively attach a value object class that implements the <code>Illuminate\Contracts\Database\Eloquent\Castable</code> interface:</p>
<pre><code class="language-php">use App\ValueObjects\Address;

protected function casts(): array
{
    return [
        &#x27;address&#x27; =&gt; Address::class,
    ];
}
</code></pre>
<p>Objects that implement the <code>Castable</code> interface must define a <code>castUsing</code> method that returns the class name of the custom caster class that is responsible for casting to and from the <code>Castable</code> class:</p>
<pre><code class="language-php">&lt;?php

namespace App\ValueObjects;

use Illuminate\Contracts\Database\Eloquent\Castable;
use App\Casts\AsAddress;

class Address implements Castable
{
    /**
     * Get the name of the caster class to use when casting from / to this cast target.
     *
     * @param  array&lt;string, mixed&gt;  $arguments
     */
    public static function castUsing(array $arguments): string
    {
        return AsAddress::class;
    }
}
</code></pre>
<p>When using <code>Castable</code> classes, you may still provide arguments in the <code>casts</code> method definition. The arguments will be passed to the <code>castUsing</code> method:</p>
<pre><code class="language-php">use App\ValueObjects\Address;

protected function casts(): array
{
    return [
        &#x27;address&#x27; =&gt; Address::class.&#x27;:argument&#x27;,
    ];
}
</code></pre>
<a name="anonymous-cast-classes"></a>
<h4 id="castables--anonymous-cast-classes"><a href="#castables--anonymous-cast-classes">Castables &amp; Anonymous Cast Classes</a></h4>
<p>By combining &quot;castables&quot; with PHP&#x27;s <a href="https://www.php.net/manual/en/language.oop5.anonymous.php">anonymous classes</a>, you may define a value object and its casting logic as a single castable object. To accomplish this, return an anonymous class from your value object&#x27;s <code>castUsing</code> method. The anonymous class should implement the <code>CastsAttributes</code> interface:</p>
<pre><code class="language-php">&lt;?php

namespace App\ValueObjects;

use Illuminate\Contracts\Database\Eloquent\Castable;
use Illuminate\Contracts\Database\Eloquent\CastsAttributes;

class Address implements Castable
{
    // ...

    /**
     * Get the caster class to use when casting from / to this cast target.
     *
     * @param  array&lt;string, mixed&gt;  $arguments
     */
    public static function castUsing(array $arguments): CastsAttributes
    {
        return new class implements CastsAttributes
        {
            public function get(
                Model $model,
                string $key,
                mixed $value,
                array $attributes,
            ): Address {
                return new Address(
                    $attributes[&#x27;address_line_one&#x27;],
                    $attributes[&#x27;address_line_two&#x27;]
                );
            }

            public function set(
                Model $model,
                string $key,
                mixed $value,
                array $attributes,
            ): array {
                return [
                    &#x27;address_line_one&#x27; =&gt; $value-&gt;lineOne,
                    &#x27;address_line_two&#x27; =&gt; $value-&gt;lineTwo,
                ];
            }
        };
    }
}
</code></pre></article></div></div><!--$--><!--/$--></main></div><script src="/_next/static/chunks/cbd55ab9639e1e66.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n4:I[93649,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/97c0560122aa0f49.js\"],\"DocsSidebar\"]\n6:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"ViewportBoundary\"]\nb:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"MetadataBoundary\"]\nd:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/8d8bfdb8c7183f74.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"c2cpI4EdIeAozP6eEqxqR\",\"c\":[\"\",\"docs\",\"eloquent-mutators\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"eloquent-mutators\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/8d8bfdb8c7183f74.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/796e69ae18b2784c.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/97c0560122aa0f49.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"div\",null,{\"className\":\"flex min-h-screen bg-background\",\"children\":[[\"$\",\"$L4\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 relative\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"className\":\"container mx-auto py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-3xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl\",\"children\":\"Eloquent Mutators\"}],[\"$\",\"p\",null,{\"className\":\"text-xl text-muted-foreground mt-2\",\"children\":\"Eloquent mutators 和 casts 讓你轉換屬性值\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"eloquent-mutators--casting\",\"children\":[\"$\",\"a\",null,{\"href\":\"#eloquent-mutators--casting\",\"children\":\"Eloquent: Mutators \u0026 Casting\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#introduction\",\"children\":\"Introduction\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#accessors-and-mutators\",\"children\":\"Accessors and Mutators\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#defining-an-accessor\",\"children\":\"Defining an Accessor\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#defining-a-mutator\",\"children\":\"Defining a Mutator\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#attribute-casting\",\"children\":\"Attribute Casting\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#array-and-json-casting\",\"children\":\"Array and JSON Casting\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#date-casting\",\"children\":\"Date Casting\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#enum-casting\",\"children\":\"Enum Casting\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#encrypted-casting\",\"children\":\"Encrypted Casting\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#query-time-casting\",\"children\":\"Query Time Casting\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#custom-casts\",\"children\":\"Custom Casts\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#value-object-casting\",\"children\":\"Value Object Casting\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#array-json-serialization\",\"children\":\"Array / JSON Serialization\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#inbound-casting\",\"children\":\"Inbound Casting\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#cast-parameters\",\"children\":\"Cast Parameters\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#comparing-cast-values\",\"children\":\"Comparing Cast Values\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#castables\",\"children\":\"Castables\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"introduction\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"簡介\",\"children\":[\"$\",\"a\",null,{\"href\":\"#簡介\",\"children\":\"簡介\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Accessors, mutators, and attribute casting allow you to transform Eloquent attribute values when you retrieve or set them on model instances. For example, you may want to use the \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/encryption\",\"children\":\"Laravel encrypter\"}],\" to encrypt a value while it is stored in the database, and then automatically decrypt the attribute when you access it on an Eloquent model. Or, you may want to convert a JSON string that is stored in your database to an array when it is accessed via your Eloquent model.\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"accessors-and-mutators\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"accessors-and-mutators\",\"children\":[\"$\",\"a\",null,{\"href\":\"#accessors-and-mutators\",\"children\":\"Accessors and Mutators\"}]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"defining-an-accessor\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"defining-an-accessor\",\"children\":[\"$\",\"a\",null,{\"href\":\"#defining-an-accessor\",\"children\":\"Defining an Accessor\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"An accessor transforms an Eloquent attribute value when it is accessed. To define an accessor, create a protected method on your model to represent the accessible attribute. This method name should correspond to the \\\"camel case\\\" representation of the true underlying model attribute / database column when applicable.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"In this example, we'll define an accessor for the \",[\"$\",\"code\",null,{\"children\":\"first_name\"}],\" attribute. The accessor will automatically be called by Eloquent when attempting to retrieve the value of the \",[\"$\",\"code\",null,{\"children\":\"first_name\"}],\" attribute. All attribute accessor / mutator methods must declare a return type-hint of \",\"$Le\",\":\"]}],\"\\n\",\"$Lf\",\"\\n\",\"$L10\",\"\\n\",\"$L11\",\"\\n\",\"$L12\",\"\\n\",\"$L13\",\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\",\"\\n\",\"$L55\",\"\\n\",\"$L56\",\"\\n\",\"$L57\",\"\\n\",\"$L58\",\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\",\"\\n\",\"$L5c\",\"\\n\",\"$L5d\",\"\\n\",\"$L5e\",\"\\n\",\"$L5f\",\"\\n\",\"$L60\",\"\\n\",\"$L61\",\"\\n\",\"$L62\",\"\\n\",\"$L63\",\"\\n\",\"$L64\",\"\\n\",\"$L65\",\"\\n\",\"$L66\",\"\\n\",\"$L67\",\"\\n\",\"$L68\",\"\\n\",\"$L69\",\"\\n\",\"$L6a\",\"\\n\",\"$L6b\",\"\\n\",\"$L6c\",\"\\n\",\"$L6d\",\"\\n\",\"$L6e\",\"\\n\",\"$L6f\",\"\\n\",\"$L70\",\"\\n\",\"$L71\",\"\\n\",\"$L72\",\"\\n\",\"$L73\",\"\\n\",\"$L74\",\"\\n\",\"$L75\",\"\\n\",\"$L76\",\"\\n\",\"$L77\",\"\\n\",\"$L78\",\"\\n\",\"$L79\",\"\\n\",\"$L7a\",\"\\n\",\"$L7b\",\"\\n\",\"$L7c\",\"\\n\",\"$L7d\",\"\\n\",\"$L7e\",\"\\n\",\"$L7f\",\"\\n\",\"$L80\",\"\\n\",\"$L81\",\"\\n\",\"$L82\",\"\\n\",\"$L83\",\"\\n\",\"$L84\",\"\\n\",\"$L85\",\"\\n\",\"$L86\",\"\\n\",\"$L87\",\"\\n\",\"$L88\",\"\\n\",\"$L89\",\"\\n\",\"$L8a\",\"\\n\",\"$L8b\",\"\\n\",\"$L8c\",\"\\n\",\"$L8d\",\"\\n\",\"$L8e\",\"\\n\",\"$L8f\",\"\\n\",\"$L90\",\"\\n\",\"$L91\",\"\\n\",\"$L92\",\"\\n\",\"$L93\",\"\\n\",\"$L94\",\"\\n\",\"$L95\",\"\\n\",\"$L96\",\"\\n\",\"$L97\",\"\\n\",\"$L98\",\"\\n\",\"$L99\",\"\\n\",\"$L9a\",\"\\n\",\"$L9b\",\"\\n\",\"$L9c\",\"\\n\",\"$L9d\",\"\\n\",\"$L9e\",\"\\n\",\"$L9f\",\"\\n\",\"$La0\",\"\\n\",\"$La1\",\"\\n\",\"$La2\",\"\\n\",\"$La3\",\"\\n\",\"$La4\",\"\\n\",\"$La5\",\"\\n\",\"$La6\",\"\\n\",\"$La7\",\"\\n\",\"$La8\",\"\\n\",\"$La9\",\"\\n\",\"$Laa\",\"\\n\",\"$Lab\",\"\\n\",\"$Lac\",\"\\n\",\"$Lad\",\"\\n\",\"$Lae\",\"\\n\",\"$Laf\"]}]]}]}]\n"])</script><script>self.__next_f.push([1,"e:[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Database\\\\Eloquent\\\\Casts\\\\Attribute\"}]\nf:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Models;\\n\\nuse Illuminate\\\\Database\\\\Eloquent\\\\Casts\\\\Attribute;\\nuse Illuminate\\\\Database\\\\Eloquent\\\\Model;\\n\\nclass User extends Model\\n{\\n    /**\\n     * Get the user's first name.\\n     */\\n    protected function firstName(): Attribute\\n    {\\n        return Attribute::make(\\n            get: fn (string $value) =\u003e ucfirst($value),\\n        );\\n    }\\n}\\n\"}]}]\n10:[\"$\",\"p\",null,{\"children\":[\"All accessor methods return an \",[\"$\",\"code\",null,{\"children\":\"Attribute\"}],\" instance which defines how the attribute will be accessed and, optionally, mutated. In this example, we are only defining how the attribute will be accessed. To do so, we supply the \",[\"$\",\"code\",null,{\"children\":\"get\"}],\" argument to the \",[\"$\",\"code\",null,{\"children\":\"Attribute\"}],\" class constructor.\"]}]\n11:[\"$\",\"p\",null,{\"children\":[\"As you can see, the original value of the column is passed to the accessor, allowing you to manipulate and return the value. To access the value of the accessor, you may simply access the \",[\"$\",\"code\",null,{\"children\":\"first_name\"}],\" attribute on a model instance:\"]}]\n12:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Models\\\\User;\\n\\n$user = User::find(1);\\n\\n$firstName = $user-\u003efirst_name;\\n\"}]}]\n13:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\nIf you would like these computed values to be added to the array / JSON representations of your model, \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/eloquent-serialization#appending-values-to-json\",\"children\":\"you will need to append them\"}],\".\"]}],\"\\n\"]}]\n14:[\"$\",\"a\",null,{\"name\":\"building-value-objects-from-multiple-attributes\"}]\n15:[\"$\",\"h4\",null,{\"id\":\"building-value-objects-from-multiple-attributes\",\"children\":[\"$\",\"a\",null,{\"href\":\"#building-value-objects-from-multiple-attributes\",\"children\":\"Building Value Objects From Multiple Attributes\"}]}]\n16:[\"$\",\"p\",null,{\"children\":[\"Sometimes your accessor may need to transform multiple model attributes into a single \\\"value object\\\". To do so, your \",[\"$\",\"code\",null,{\"children\":\"get\"}],\" closure may accept a second argument of \",[\"$\",\"code\",null,{\"children\":\"$$attributes\"}],\", which will be automatically supplied to the closure and will contain an array of all of the model's current attributes:\"]}]\n17:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Support\\\\Address;\\nuse Illuminate\\\\Database\\\\Eloquent\\\\Casts\\\\Attribute;\\n\\n/**\\n * Interact with the user's address.\\n */\\nprotected function address(): Attribute\\n{\\n    return Attribute::make(\\n        get: fn (mixed $value, array $attributes) =\u003e new Address(\\n            $attributes['address_line_one'],\\n            $attributes['address_line_two'],\\n        ),\\n    );\\n}\\n\"}]}]\n18:[\"$\",\"a\",null,{\"name\":\"accessor-caching\"}]\n19:[\"$\",\"h4\",null,{\"id\":\"accessor-caching\",\"children\":[\"$\",\"a\",null,{\"href\":\"#accessor-caching\",\"children\":\"Accessor Caching\"}]}]\n1a:[\"$\",\"p\",null,{\"children\":\"When returning value objects from accessors, any changes made to the value object will automatically be synced back to the model before the model is saved. This is possible because Eloquent retains instances returned by accessors so it can return the same instance each time the accessor is invoked:\"}]\n1b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Models\\\\User;\\n\\n$user = User::find(1);\\n\\n$user-\u003eaddress-\u003elineOne = 'Updated Address Line 1 Value';\\n$user-\u003eaddress-\u003elineTwo = 'Updated Address Line 2 Value';\\n\\n$user-\u003esave();\\n\"}]}]\n1c:[\"$\",\"p\",null,{\"children\":[\"However, you may sometimes wish to enable caching for primitive values like strings and booleans, particularly if they are computationally intensive. To accomplish this, you may invoke the \",[\"$\",\"code\",null,{\"children\":\"shouldCache\"}],\" method when defining your accessor:\"]}]\n1d:[\"$\",\"pre"])</script><script>self.__next_f.push([1,"\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"protected function hash(): Attribute\\n{\\n    return Attribute::make(\\n        get: fn (string $value) =\u003e bcrypt(gzuncompress($value)),\\n    )-\u003eshouldCache();\\n}\\n\"}]}]\n1e:[\"$\",\"p\",null,{\"children\":[\"If you would like to disable the object caching behavior of attributes, you may invoke the \",[\"$\",\"code\",null,{\"children\":\"withoutObjectCaching\"}],\" method when defining the attribute:\"]}]\n1f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"/**\\n * Interact with the user's address.\\n */\\nprotected function address(): Attribute\\n{\\n    return Attribute::make(\\n        get: fn (mixed $value, array $attributes) =\u003e new Address(\\n            $attributes['address_line_one'],\\n            $attributes['address_line_two'],\\n        ),\\n    )-\u003ewithoutObjectCaching();\\n}\\n\"}]}]\n20:[\"$\",\"a\",null,{\"name\":\"defining-a-mutator\"}]\n21:[\"$\",\"h3\",null,{\"id\":\"defining-a-mutator\",\"children\":[\"$\",\"a\",null,{\"href\":\"#defining-a-mutator\",\"children\":\"Defining a Mutator\"}]}]\n22:[\"$\",\"p\",null,{\"children\":[\"A mutator transforms an Eloquent attribute value when it is set. To define a mutator, you may provide the \",[\"$\",\"code\",null,{\"children\":\"set\"}],\" argument when defining your attribute. Let's define a mutator for the \",[\"$\",\"code\",null,{\"children\":\"first_name\"}],\" attribute. This mutator will be automatically called when we attempt to set the value of the \",[\"$\",\"code\",null,{\"children\":\"first_name\"}],\" attribute on the model:\"]}]\n23:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Models;\\n\\nuse Illuminate\\\\Database\\\\Eloquent\\\\Casts\\\\Attribute;\\nuse Illuminate\\\\Database\\\\Eloquent\\\\Model;\\n\\nclass User extends Model\\n{\\n    /**\\n     * Interact with the user's first name.\\n     */\\n    protected function firstName(): Attribute\\n    {\\n        return Attribute::make(\\n            get: fn (string $value) =\u003e ucfirst($value),\\n            set: fn (string $value) =\u003e strtolower($value),\\n        );\\n    }\\n}\\n\"}]}]\n24:[\"$\",\"p\",null,{\"children\":[\"The mutator closure will receive the value that is being set on the attribute, allowing you to manipulate the value and return the manipulated value. To use our mutator, we only need to set the \",[\"$\",\"code\",null,{\"children\":\"first_name\"}],\" attribute on an Eloquent model:\"]}]\n25:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Models\\\\User;\\n\\n$user = User::find(1);\\n\\n$user-\u003efirst_name = 'Sally';\\n\"}]}]\n26:[\"$\",\"p\",null,{\"children\":[\"In this example, the \",[\"$\",\"code\",null,{\"children\":\"set\"}],\" callback will be called with the value \",[\"$\",\"code\",null,{\"children\":\"Sally\"}],\". The mutator will then apply the \",[\"$\",\"code\",null,{\"children\":\"strtolower\"}],\" function to the name and set its resulting value in the model's internal \",[\"$\",\"code\",null,{\"children\":\"$$attributes\"}],\" array.\"]}]\n27:[\"$\",\"a\",null,{\"name\":\"mutating-multiple-attributes\"}]\n28:[\"$\",\"h4\",null,{\"id\":\"mutating-multiple-attributes\",\"children\":[\"$\",\"a\",null,{\"href\":\"#mutating-multiple-attributes\",\"children\":\"Mutating Multiple Attributes\"}]}]\n29:[\"$\",\"p\",null,{\"children\":[\"Sometimes your mutator may need to set multiple attributes on the underlying model. To do so, you may return an array from the \",[\"$\",\"code\",null,{\"children\":\"set\"}],\" closure. Each key in the array should correspond with an underlying attribute / database column associated with the model:\"]}]\n2a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Support\\\\Address;\\nuse Illuminate\\\\Database\\\\Eloquent\\\\Casts\\\\Attribute;\\n\\n/**\\n * Interact with the user's address.\\n */\\nprotected function address(): Attribute\\n{\\n    return Attribute::make(\\n        get: fn (mixed $value, array $attributes) =\u003e new Address(\\n            $attributes['address_line_one'],\\n            $attributes['address_line_two'],\\n        ),\\n        set: fn (Address $value) =\u003e [\\n            'address_line_one' =\u003e $value-\u003elineOne,\\n            'address_line_two' =\u003e"])</script><script>self.__next_f.push([1," $value-\u003elineTwo,\\n        ],\\n    );\\n}\\n\"}]}]\n2b:[\"$\",\"a\",null,{\"name\":\"attribute-casting\"}]\n2c:[\"$\",\"h2\",null,{\"id\":\"attribute-casting\",\"children\":[\"$\",\"a\",null,{\"href\":\"#attribute-casting\",\"children\":\"Attribute Casting\"}]}]\n2d:[\"$\",\"p\",null,{\"children\":[\"Attribute casting provides functionality similar to accessors and mutators without requiring you to define any additional methods on your model. Instead, your model's \",[\"$\",\"code\",null,{\"children\":\"casts\"}],\" method provides a convenient way of converting attributes to common data types.\"]}]\n2e:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"casts\"}],\" method should return an array where the key is the name of the attribute being cast and the value is the type you wish to cast the column to. The supported cast types are:\"]}]\n"])</script><script>self.__next_f.push([1,"2f:[\"$\",\"div\",null,{\"className\":\"content-list\",\"markdown\":\"1\",\"children\":[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"array\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"AsFluent::class\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"AsStringable::class\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"AsUri::class\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"boolean\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"collection\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"date\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"datetime\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"immutable_date\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"immutable_datetime\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"code\",null,{\"children\":\"decimal:\u003cprecision\u003e\"}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"double\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"encrypted\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"encrypted:array\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"encrypted:collection\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"encrypted:object\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"float\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"hashed\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"integer\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"object\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"real\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"string\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"timestamp\"}]}],\"\\n\"]}]}]\n"])</script><script>self.__next_f.push([1,"30:[\"$\",\"p\",null,{\"children\":[\"To demonstrate attribute casting, let's cast the \",[\"$\",\"code\",null,{\"children\":\"is_admin\"}],\" attribute, which is stored in our database as an integer (\",[\"$\",\"code\",null,{\"children\":\"0\"}],\" or \",[\"$\",\"code\",null,{\"children\":\"1\"}],\") to a boolean value:\"]}]\n31:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Models;\\n\\nuse Illuminate\\\\Database\\\\Eloquent\\\\Model;\\n\\nclass User extends Model\\n{\\n    /**\\n     * Get the attributes that should be cast.\\n     *\\n     * @return array\u003cstring, string\u003e\\n     */\\n    protected function casts(): array\\n    {\\n        return [\\n            'is_admin' =\u003e 'boolean',\\n        ];\\n    }\\n}\\n\"}]}]\n32:[\"$\",\"p\",null,{\"children\":[\"After defining the cast, the \",[\"$\",\"code\",null,{\"children\":\"is_admin\"}],\" attribute will always be cast to a boolean when you access it, even if the underlying value is stored in the database as an integer:\"]}]\n33:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$user = App\\\\Models\\\\User::find(1);\\n\\nif ($user-\u003eis_admin) {\\n    // ...\\n}\\n\"}]}]\n34:[\"$\",\"p\",null,{\"children\":[\"If you need to add a new, temporary cast at runtime, you may use the \",[\"$\",\"code\",null,{\"children\":\"mergeCasts\"}],\" method. These cast definitions will be added to any of the casts already defined on the model:\"]}]\n35:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$user-\u003emergeCasts([\\n    'is_admin' =\u003e 'integer',\\n    'options' =\u003e 'object',\\n]);\\n\"}]}]\n36:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\nAttributes that are \",[\"$\",\"code\",null,{\"children\":\"null\"}],\" will not be cast. In addition, you should never define a cast (or an attribute) that has the same name as a relationship or assign a cast to the model's primary key.\"]}],\"\\n\"]}]\n37:[\"$\",\"a\",null,{\"name\":\"stringable-casting\"}]\n38:[\"$\",\"h4\",null,{\"id\":\"stringable-casting\",\"children\":[\"$\",\"a\",null,{\"href\":\"#stringable-casting\",\"children\":\"Stringable Casting\"}]}]\n39:[\"$\",\"p\",null,{\"children\":[\"You may use the \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Database\\\\Eloquent\\\\Casts\\\\AsStringable\"}],\" cast class to cast a model attribute to a \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/strings#fluent-strings-method-list\",\"children\":\"fluent Illuminate\\\\Support\\\\Stringable object\"}],\":\"]}]\n3a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Models;\\n\\nuse Illuminate\\\\Database\\\\Eloquent\\\\Casts\\\\AsStringable;\\nuse Illuminate\\\\Database\\\\Eloquent\\\\Model;\\n\\nclass User extends Model\\n{\\n    /**\\n     * Get the attributes that should be cast.\\n     *\\n     * @return array\u003cstring, string\u003e\\n     */\\n    protected function casts(): array\\n    {\\n        return [\\n            'directory' =\u003e AsStringable::class,\\n        ];\\n    }\\n}\\n\"}]}]\n3b:[\"$\",\"a\",null,{\"name\":\"array-and-json-casting\"}]\n3c:[\"$\",\"h3\",null,{\"id\":\"array-and-json-casting\",\"children\":[\"$\",\"a\",null,{\"href\":\"#array-and-json-casting\",\"children\":\"Array and JSON Casting\"}]}]\n3d:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"array\"}],\" cast is particularly useful when working with columns that are stored as serialized JSON. For example, if your database has a \",[\"$\",\"code\",null,{\"children\":\"JSON\"}],\" or \",[\"$\",\"code\",null,{\"children\":\"TEXT\"}],\" field type that contains serialized JSON, adding the \",[\"$\",\"code\",null,{\"children\":\"array\"}],\" cast to that attribute will automatically deserialize the attribute to a PHP array when you access it on your Eloquent model:\"]}]\n3e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Models;\\n\\nuse Illuminate\\\\Database\\\\Eloquent\\\\Model;\\n\\nclass User extends Model\\n{\\n    /**\\n     * Get the attributes that should be cast.\\n     *\\n     * @return array\u003cstring, string\u003e\\n     */\\n    protected function casts(): array\\n    {\\n        return [\\n            'options' =\u003e 'array',\\n        ];\\n    }\\n}\\n\"}]}]\n3f:[\"$\",\"p\",null,{\"children"])</script><script>self.__next_f.push([1,"\":[\"Once the cast is defined, you may access the \",[\"$\",\"code\",null,{\"children\":\"options\"}],\" attribute and it will automatically be deserialized from JSON into a PHP array. When you set the value of the \",[\"$\",\"code\",null,{\"children\":\"options\"}],\" attribute, the given array will automatically be serialized back into JSON for storage:\"]}]\n40:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Models\\\\User;\\n\\n$user = User::find(1);\\n\\n$options = $user-\u003eoptions;\\n\\n$options['key'] = 'value';\\n\\n$user-\u003eoptions = $options;\\n\\n$user-\u003esave();\\n\"}]}]\n41:[\"$\",\"p\",null,{\"children\":[\"To update a single field of a JSON attribute with a more terse syntax, you may \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/eloquent#mass-assignment-json-columns\",\"children\":\"make the attribute mass assignable\"}],\" and use the \",[\"$\",\"code\",null,{\"children\":\"-\u003e\"}],\" operator when calling the \",[\"$\",\"code\",null,{\"children\":\"update\"}],\" method:\"]}]\n42:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$user = User::find(1);\\n\\n$user-\u003eupdate(['options-\u003ekey' =\u003e 'value']);\\n\"}]}]\n43:[\"$\",\"a\",null,{\"name\":\"json-and-unicode\"}]\n44:[\"$\",\"h4\",null,{\"id\":\"json-and-unicode\",\"children\":[\"$\",\"a\",null,{\"href\":\"#json-and-unicode\",\"children\":\"JSON and Unicode\"}]}]\n45:[\"$\",\"p\",null,{\"children\":[\"If you would like to store an array attribute as JSON with unescaped Unicode characters, you may use the \",[\"$\",\"code\",null,{\"children\":\"json:unicode\"}],\" cast:\"]}]\n46:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"/**\\n * Get the attributes that should be cast.\\n *\\n * @return array\u003cstring, string\u003e\\n */\\nprotected function casts(): array\\n{\\n    return [\\n        'options' =\u003e 'json:unicode',\\n    ];\\n}\\n\"}]}]\n47:[\"$\",\"a\",null,{\"name\":\"array-object-and-collection-casting\"}]\n48:[\"$\",\"h4\",null,{\"id\":\"array-object-and-collection-casting\",\"children\":[\"$\",\"a\",null,{\"href\":\"#array-object-and-collection-casting\",\"children\":\"Array Object and Collection Casting\"}]}]\n49:[\"$\",\"p\",null,{\"children\":[\"Although the standard \",[\"$\",\"code\",null,{\"children\":\"array\"}],\" cast is sufficient for many applications, it does have some disadvantages. Since the \",[\"$\",\"code\",null,{\"children\":\"array\"}],\" cast returns a primitive type, it is not possible to mutate an offset of the array directly. For example, the following code will trigger a PHP error:\"]}]\n4a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$user = User::find(1);\\n\\n$user-\u003eoptions['key'] = $value;\\n\"}]}]\n4b:[\"$\",\"p\",null,{\"children\":[\"To solve this, Laravel offers an \",[\"$\",\"code\",null,{\"children\":\"AsArrayObject\"}],\" cast that casts your JSON attribute to an \",[\"$\",\"a\",null,{\"href\":\"https://www.php.net/manual/en/class.arrayobject.php\",\"children\":\"ArrayObject\"}],\" class. This feature is implemented using Laravel's \",[\"$\",\"a\",null,{\"href\":\"#custom-casts\",\"children\":\"custom cast\"}],\" implementation, which allows Laravel to intelligently cache and transform the mutated object such that individual offsets may be modified without triggering a PHP error. To use the \",[\"$\",\"code\",null,{\"children\":\"AsArrayObject\"}],\" cast, simply assign it to an attribute:\"]}]\n4c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Database\\\\Eloquent\\\\Casts\\\\AsArrayObject;\\n\\n/**\\n * Get the attributes that should be cast.\\n *\\n * @return array\u003cstring, string\u003e\\n */\\nprotected function casts(): array\\n{\\n    return [\\n        'options' =\u003e AsArrayObject::class,\\n    ];\\n}\\n\"}]}]\n4d:[\"$\",\"p\",null,{\"children\":[\"Similarly, Laravel offers an \",[\"$\",\"code\",null,{\"children\":\"AsCollection\"}],\" cast that casts your JSON attribute to a Laravel \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/collections\",\"children\":\"Collection\"}],\" instance:\"]}]\n4e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Database\\\\Eloquent\\\\Casts\\\\AsCollection;\\n\\n/**\\n * Get the attributes that should be cast.\\n *\\n * @return array\u003cstring, string\u003e\\n */\\npr"])</script><script>self.__next_f.push([1,"otected function casts(): array\\n{\\n    return [\\n        'options' =\u003e AsCollection::class,\\n    ];\\n}\\n\"}]}]\n4f:[\"$\",\"p\",null,{\"children\":[\"If you would like the \",[\"$\",\"code\",null,{\"children\":\"AsCollection\"}],\" cast to instantiate a custom collection class instead of Laravel's base collection class, you may provide the collection class name as a cast argument:\"]}]\n50:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Collections\\\\OptionCollection;\\nuse Illuminate\\\\Database\\\\Eloquent\\\\Casts\\\\AsCollection;\\n\\n/**\\n * Get the attributes that should be cast.\\n *\\n * @return array\u003cstring, string\u003e\\n */\\nprotected function casts(): array\\n{\\n    return [\\n        'options' =\u003e AsCollection::using(OptionCollection::class),\\n    ];\\n}\\n\"}]}]\n51:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"of\"}],\" method may be used to indicate collection items should be mapped into a given class via the collection's \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/collections#method-mapinto\",\"children\":\"mapInto method\"}],\":\"]}]\n52:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\ValueObjects\\\\Option;\\nuse Illuminate\\\\Database\\\\Eloquent\\\\Casts\\\\AsCollection;\\n\\n/**\\n * Get the attributes that should be cast.\\n *\\n * @return array\u003cstring, string\u003e\\n */\\nprotected function casts(): array\\n{\\n    return [\\n        'options' =\u003e AsCollection::of(Option::class)\\n    ];\\n}\\n\"}]}]\n53:[\"$\",\"p\",null,{\"children\":[\"When mapping collections to objects, the object should implement the \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Contracts\\\\Support\\\\Arrayable\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"JsonSerializable\"}],\" interfaces to define how their instances should be serialized into the database as JSON:\"]}]\nb0:T403,\u003c?php\n\nnamespace App\\ValueObjects;\n\nuse Illuminate\\Contracts\\Support\\Arrayable;\nuse JsonSerializable;\n\nclass Option implements Arrayable, JsonSerializable\n{\n    public string $name;\n    public mixed $value;\n    public bool $isLocked;\n\n    /**\n     * Create a new Option instance.\n     */\n    public function __construct(array $data)\n    {\n        $this-\u003ename = $data['name'];\n        $this-\u003evalue = $data['value'];\n        $this-\u003eisLocked = $data['is_locked'];\n    }\n\n    /**\n     * Get the instance as an array.\n     *\n     * @return array{name: string, data: string, is_locked: bool}\n     */\n    public function toArray(): array\n    {\n        return [\n            'name' =\u003e $this-\u003ename,\n            'value' =\u003e $this-\u003evalue,\n            'is_locked' =\u003e $this-\u003eisLocked,\n        ];\n    }\n\n    /**\n     * Specify the data which should be serialized to JSON.\n     *\n     * @return array{name: string, data: string, is_locked: bool}\n     */\n    public function jsonSerialize(): array\n    {\n        return $this-\u003etoArray();\n    }\n}\n54:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$b0\"}]}]\n55:[\"$\",\"a\",null,{\"name\":\"date-casting\"}]\n56:[\"$\",\"h3\",null,{\"id\":\"date-casting\",\"children\":[\"$\",\"a\",null,{\"href\":\"#date-casting\",\"children\":\"Date Casting\"}]}]\n57:[\"$\",\"p\",null,{\"children\":[\"By default, Eloquent will cast the \",[\"$\",\"code\",null,{\"children\":\"created_at\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"updated_at\"}],\" columns to instances of \",[\"$\",\"a\",null,{\"href\":\"https://github.com/briannesbitt/Carbon\",\"children\":\"Carbon\"}],\", which extends the PHP \",[\"$\",\"code\",null,{\"children\":\"DateTime\"}],\" class and provides an assortment of helpful methods. You may cast additional date attributes by defining additional date casts within your model's \",[\"$\",\"code\",null,{\"children\":\"casts\"}],\" method. Typically, dates should be cast using the \",[\"$\",\"code\",null,{\"children\":\"datetime\"}],\" or \",[\"$\",\"code\",null,{\"children\":\"immutable_datetime\"}],\" cast types.\"]}]\n58:[\"$\",\"p\",null,{\"children\":[\"When defining a \",[\"$\",\"code\",null,{\"children\":\"date\"}],\" or \",[\"$\",\"code\",null,{\"children\":\"datetime\"}],\" cast, you may also specify the date's format. This format will be used when the \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/eloquent-serialization\",\"childre"])</script><script>self.__next_f.push([1,"n\":\"model is serialized to an array or JSON\"}],\":\"]}]\n59:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"/**\\n * Get the attributes that should be cast.\\n *\\n * @return array\u003cstring, string\u003e\\n */\\nprotected function casts(): array\\n{\\n    return [\\n        'created_at' =\u003e 'datetime:Y-m-d',\\n    ];\\n}\\n\"}]}]\n5a:[\"$\",\"p\",null,{\"children\":[\"When a column is cast as a date, you may set the corresponding model attribute value to a UNIX timestamp, date string (\",[\"$\",\"code\",null,{\"children\":\"Y-m-d\"}],\"), date-time string, or a \",[\"$\",\"code\",null,{\"children\":\"DateTime\"}],\" / \",[\"$\",\"code\",null,{\"children\":\"Carbon\"}],\" instance. The date's value will be correctly converted and stored in your database.\"]}]\n5b:[\"$\",\"p\",null,{\"children\":[\"You may customize the default serialization format for all of your model's dates by defining a \",[\"$\",\"code\",null,{\"children\":\"serializeDate\"}],\" method on your model. This method does not affect how your dates are formatted for storage in the database:\"]}]\n5c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"/**\\n * Prepare a date for array / JSON serialization.\\n */\\nprotected function serializeDate(DateTimeInterface $date): string\\n{\\n    return $date-\u003eformat('Y-m-d');\\n}\\n\"}]}]\n5d:[\"$\",\"p\",null,{\"children\":[\"To specify the format that should be used when actually storing a model's dates within your database, you should define a \",[\"$\",\"code\",null,{\"children\":\"$$dateFormat\"}],\" property on your model:\"]}]\n5e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"/**\\n * The storage format of the model's date columns.\\n *\\n * @var string\\n */\\nprotected $dateFormat = 'U';\\n\"}]}]\n5f:[\"$\",\"a\",null,{\"name\":\"date-casting-and-timezones\"}]\n60:[\"$\",\"h4\",null,{\"id\":\"date-casting-serialization-and-timezones\",\"children\":[\"$\",\"a\",null,{\"href\":\"#date-casting-serialization-and-timezones\",\"children\":\"Date Casting, Serialization, and Timezones\"}]}]\n61:[\"$\",\"p\",null,{\"children\":[\"By default, the \",[\"$\",\"code\",null,{\"children\":\"date\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"datetime\"}],\" casts will serialize dates to a UTC ISO-8601 date string (\",[\"$\",\"code\",null,{\"children\":\"YYYY-MM-DDTHH:MM:SS.uuuuuuZ\"}],\"), regardless of the timezone specified in your application's \",[\"$\",\"code\",null,{\"children\":\"timezone\"}],\" configuration option. You are strongly encouraged to always use this serialization format, as well as to store your application's dates in the UTC timezone by not changing your application's \",[\"$\",\"code\",null,{\"children\":\"timezone\"}],\" configuration option from its default \",[\"$\",\"code\",null,{\"children\":\"UTC\"}],\" value. Consistently using the UTC timezone throughout your application will provide the maximum level of interoperability with other date manipulation libraries written in PHP and JavaScript.\"]}]\n62:[\"$\",\"p\",null,{\"children\":[\"If a custom format is applied to the \",[\"$\",\"code\",null,{\"children\":\"date\"}],\" or \",[\"$\",\"code\",null,{\"children\":\"datetime\"}],\" cast, such as \",[\"$\",\"code\",null,{\"children\":\"datetime:Y-m-d H:i:s\"}],\", the inner timezone of the Carbon instance will be used during date serialization. Typically, this will be the timezone specified in your application's \",[\"$\",\"code\",null,{\"children\":\"timezone\"}],\" configuration option. However, it's important to note that \",[\"$\",\"code\",null,{\"children\":\"timestamp\"}],\" columns such as \",[\"$\",\"code\",null,{\"children\":\"created_at\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"updated_at\"}],\" are exempt from this behavior and are always formatted in UTC, regardless of the application's timezone setting.\"]}]\n63:[\"$\",\"a\",null,{\"name\":\"enum-casting\"}]\n64:[\"$\",\"h3\",null,{\"id\":\"enum-casting\",\"children\":[\"$\",\"a\",null,{\"href\":\"#enum-casting\",\"children\":\"Enum Casting\"}]}]\n65:[\"$\",\"p\",null,{\"children\":[\"Eloquent also allows you to cast your attribute values to PHP \",[\"$\",\"a\",null,{\"href\":\"https://www.php.net/manual/en/language.enumerations.backed.php\",\"children\":\"Enums\"}],\". To accomplish this, you may specify the attribute and enum you wish to cast in your mod"])</script><script>self.__next_f.push([1,"el's \",[\"$\",\"code\",null,{\"children\":\"casts\"}],\" method:\"]}]\n66:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Enums\\\\ServerStatus;\\n\\n/**\\n * Get the attributes that should be cast.\\n *\\n * @return array\u003cstring, string\u003e\\n */\\nprotected function casts(): array\\n{\\n    return [\\n        'status' =\u003e ServerStatus::class,\\n    ];\\n}\\n\"}]}]\n67:[\"$\",\"p\",null,{\"children\":\"Once you have defined the cast on your model, the specified attribute will be automatically cast to and from an enum when you interact with the attribute:\"}]\n68:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"if ($server-\u003estatus == ServerStatus::Provisioned) {\\n    $server-\u003estatus = ServerStatus::Ready;\\n\\n    $server-\u003esave();\\n}\\n\"}]}]\n69:[\"$\",\"a\",null,{\"name\":\"casting-arrays-of-enums\"}]\n6a:[\"$\",\"h4\",null,{\"id\":\"casting-arrays-of-enums\",\"children\":[\"$\",\"a\",null,{\"href\":\"#casting-arrays-of-enums\",\"children\":\"Casting Arrays of Enums\"}]}]\n6b:[\"$\",\"p\",null,{\"children\":[\"Sometimes you may need your model to store an array of enum values within a single column. To accomplish this, you may utilize the \",[\"$\",\"code\",null,{\"children\":\"AsEnumArrayObject\"}],\" or \",[\"$\",\"code\",null,{\"children\":\"AsEnumCollection\"}],\" casts provided by Laravel:\"]}]\n6c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Enums\\\\ServerStatus;\\nuse Illuminate\\\\Database\\\\Eloquent\\\\Casts\\\\AsEnumCollection;\\n\\n/**\\n * Get the attributes that should be cast.\\n *\\n * @return array\u003cstring, string\u003e\\n */\\nprotected function casts(): array\\n{\\n    return [\\n        'statuses' =\u003e AsEnumCollection::of(ServerStatus::class),\\n    ];\\n}\\n\"}]}]\n6d:[\"$\",\"a\",null,{\"name\":\"encrypted-casting\"}]\n6e:[\"$\",\"h3\",null,{\"id\":\"encrypted-casting\",\"children\":[\"$\",\"a\",null,{\"href\":\"#encrypted-casting\",\"children\":\"Encrypted Casting\"}]}]\n6f:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"encrypted\"}],\" cast will encrypt a model's attribute value using Laravel's built-in \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/encryption\",\"children\":\"encryption\"}],\" features. In addition, the \",[\"$\",\"code\",null,{\"children\":\"encrypted:array\"}],\", \",[\"$\",\"code\",null,{\"children\":\"encrypted:collection\"}],\", \",[\"$\",\"code\",null,{\"children\":\"encrypted:object\"}],\", \",[\"$\",\"code\",null,{\"children\":\"AsEncryptedArrayObject\"}],\", and \",[\"$\",\"code\",null,{\"children\":\"AsEncryptedCollection\"}],\" casts work like their unencrypted counterparts; however, as you might expect, the underlying value is encrypted when stored in your database.\"]}]\n70:[\"$\",\"p\",null,{\"children\":[\"As the final length of the encrypted text is not predictable and is longer than its plain text counterpart, make sure the associated database column is of \",[\"$\",\"code\",null,{\"children\":\"TEXT\"}],\" type or larger. In addition, since the values are encrypted in the database, you will not be able to query or search encrypted attribute values.\"]}]\n71:[\"$\",\"a\",null,{\"name\":\"key-rotation\"}]\n72:[\"$\",\"h4\",null,{\"id\":\"key-rotation\",\"children\":[\"$\",\"a\",null,{\"href\":\"#key-rotation\",\"children\":\"Key Rotation\"}]}]\n73:[\"$\",\"p\",null,{\"children\":[\"As you may know, Laravel encrypts strings using the \",[\"$\",\"code\",null,{\"children\":\"key\"}],\" configuration value specified in your application's \",[\"$\",\"code\",null,{\"children\":\"app\"}],\" configuration file. Typically, this value corresponds to the value of the \",[\"$\",\"code\",null,{\"children\":\"APP_KEY\"}],\" environment variable. If you need to rotate your application's encryption key, you will need to manually re-encrypt your encrypted attributes using the new key.\"]}]\n74:[\"$\",\"a\",null,{\"name\":\"query-time-casting\"}]\n75:[\"$\",\"h3\",null,{\"id\":\"query-time-casting\",\"children\":[\"$\",\"a\",null,{\"href\":\"#query-time-casting\",\"children\":\"Query Time Casting\"}]}]\n76:[\"$\",\"p\",null,{\"children\":\"Sometimes you may need to apply casts while executing a query, such as when selecting a raw value from a table. For example, consider the following query:\"}]\n77:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\"])</script><script>self.__next_f.push([1,"Models\\\\Post;\\nuse App\\\\Models\\\\User;\\n\\n$users = User::select([\\n    'users.*',\\n    'last_posted_at' =\u003e Post::selectRaw('MAX(created_at)')\\n        -\u003ewhereColumn('user_id', 'users.id')\\n])-\u003eget();\\n\"}]}]\n78:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"last_posted_at\"}],\" attribute on the results of this query will be a simple string. It would be wonderful if we could apply a \",[\"$\",\"code\",null,{\"children\":\"datetime\"}],\" cast to this attribute when executing the query. Thankfully, we may accomplish this using the \",[\"$\",\"code\",null,{\"children\":\"withCasts\"}],\" method:\"]}]\n79:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$users = User::select([\\n    'users.*',\\n    'last_posted_at' =\u003e Post::selectRaw('MAX(created_at)')\\n        -\u003ewhereColumn('user_id', 'users.id')\\n])-\u003ewithCasts([\\n    'last_posted_at' =\u003e 'datetime'\\n])-\u003eget();\\n\"}]}]\n7a:[\"$\",\"a\",null,{\"name\":\"custom-casts\"}]\n7b:[\"$\",\"h2\",null,{\"id\":\"custom-casts\",\"children\":[\"$\",\"a\",null,{\"href\":\"#custom-casts\",\"children\":\"Custom Casts\"}]}]\n7c:[\"$\",\"p\",null,{\"children\":[\"Laravel has a variety of built-in, helpful cast types; however, you may occasionally need to define your own cast types. To create a cast, execute the \",[\"$\",\"code\",null,{\"children\":\"make:cast\"}],\" Artisan command. The new cast class will be placed in your \",[\"$\",\"code\",null,{\"children\":\"app/Casts\"}],\" directory:\"]}]\n7d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan make:cast AsJson\\n\"}]}]\n7e:[\"$\",\"p\",null,{\"children\":[\"All custom cast classes implement the \",[\"$\",\"code\",null,{\"children\":\"CastsAttributes\"}],\" interface. Classes that implement this interface must define a \",[\"$\",\"code\",null,{\"children\":\"get\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"set\"}],\" method. The \",[\"$\",\"code\",null,{\"children\":\"get\"}],\" method is responsible for transforming a raw value from the database into a cast value, while the \",[\"$\",\"code\",null,{\"children\":\"set\"}],\" method should transform a cast value into a raw value that can be stored in the database. As an example, we will re-implement the built-in \",[\"$\",\"code\",null,{\"children\":\"json\"}],\" cast type as a custom cast type:\"]}]\n7f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Casts;\\n\\nuse Illuminate\\\\Contracts\\\\Database\\\\Eloquent\\\\CastsAttributes;\\nuse Illuminate\\\\Database\\\\Eloquent\\\\Model;\\n\\nclass AsJson implements CastsAttributes\\n{\\n    /**\\n     * Cast the given value.\\n     *\\n     * @param  array\u003cstring, mixed\u003e  $attributes\\n     * @return array\u003cstring, mixed\u003e\\n     */\\n    public function get(\\n        Model $model,\\n        string $key,\\n        mixed $value,\\n        array $attributes,\\n    ): array {\\n        return json_decode($value, true);\\n    }\\n\\n    /**\\n     * Prepare the given value for storage.\\n     *\\n     * @param  array\u003cstring, mixed\u003e  $attributes\\n     */\\n    public function set(\\n        Model $model,\\n        string $key,\\n        mixed $value,\\n        array $attributes,\\n    ): string {\\n        return json_encode($value);\\n    }\\n}\\n\"}]}]\n80:[\"$\",\"p\",null,{\"children\":\"Once you have defined a custom cast type, you may attach it to a model attribute using its class name:\"}]\n81:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Models;\\n\\nuse App\\\\Casts\\\\AsJson;\\nuse Illuminate\\\\Database\\\\Eloquent\\\\Model;\\n\\nclass User extends Model\\n{\\n    /**\\n     * Get the attributes that should be cast.\\n     *\\n     * @return array\u003cstring, string\u003e\\n     */\\n    protected function casts(): array\\n    {\\n        return [\\n            'options' =\u003e AsJson::class,\\n        ];\\n    }\\n}\\n\"}]}]\n82:[\"$\",\"a\",null,{\"name\":\"value-object-casting\"}]\n83:[\"$\",\"h3\",null,{\"id\":\"value-object-casting\",\"children\":[\"$\",\"a\",null,{\"href\":\"#value-object-casting\",\"children\":\"Value Object Casting\"}]}]\n84:[\"$\",\"p\",null,{\"children\":[\"You are not limited to casting values to primitive types. You may also cast values to objects. Defining custom casts that ca"])</script><script>self.__next_f.push([1,"st values to objects is very similar to casting to primitive types; however, if your value object encompasses more than one database column, the \",[\"$\",\"code\",null,{\"children\":\"set\"}],\" method must return an array of key / value pairs that will be used to set raw, storable values on the model. If your value object only affects a single column, you should simply return the storable value.\"]}]\n85:[\"$\",\"p\",null,{\"children\":[\"As an example, we will define a custom cast class that casts multiple model values into a single \",[\"$\",\"code\",null,{\"children\":\"Address\"}],\" value object. We will assume the \",[\"$\",\"code\",null,{\"children\":\"Address\"}],\" value object has two public properties: \",[\"$\",\"code\",null,{\"children\":\"lineOne\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"lineTwo\"}],\":\"]}]\nb1:T499,\u003c?php\n\nnamespace App\\Casts;\n\nuse App\\ValueObjects\\Address;\nuse Illuminate\\Contracts\\Database\\Eloquent\\CastsAttributes;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse InvalidArgumentException;\n\nclass AsAddress implements CastsAttributes\n{\n    /**\n     * Cast the given value.\n     *\n     * @param  array\u003cstring, mixed\u003e  $attributes\n     */\n    public function get(\n        Model $model,\n        string $key,\n        mixed $value,\n        array $attributes,\n    ): Address {\n        return new Address(\n            $attributes['address_line_one'],\n            $attributes['address_line_two']\n        );\n    }\n\n    /**\n     * Prepare the given value for storage.\n     *\n     * @param  array\u003cstring, mixed\u003e  $attributes\n     * @return array\u003cstring, string\u003e\n     */\n    public function set(\n        Model $model,\n        string $key,\n        mixed $value,\n        array $attributes,\n    ): array {\n        if (! $value instanceof Address) {\n            throw new InvalidArgumentException('The given value is not an Address instance.');\n        }\n\n        return [\n            'address_line_one' =\u003e $value-\u003elineOne,\n            'address_line_two' =\u003e $value-\u003elineTwo,\n        ];\n    }\n}\n86:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$b1\"}]}]\n87:[\"$\",\"p\",null,{\"children\":\"When casting to value objects, any changes made to the value object will automatically be synced back to the model before the model is saved:\"}]\n88:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Models\\\\User;\\n\\n$user = User::find(1);\\n\\n$user-\u003eaddress-\u003elineOne = 'Updated Address Value';\\n\\n$user-\u003esave();\\n\"}]}]\n89:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\nIf you plan to serialize your Eloquent models containing value objects to JSON or arrays, you should implement the \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Contracts\\\\Support\\\\Arrayable\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"JsonSerializable\"}],\" interfaces on the value object.\"]}],\"\\n\"]}]\n8a:[\"$\",\"a\",null,{\"name\":\"value-object-caching\"}]\n8b:[\"$\",\"h4\",null,{\"id\":\"value-object-caching\",\"children\":[\"$\",\"a\",null,{\"href\":\"#value-object-caching\",\"children\":\"Value Object Caching\"}]}]\n8c:[\"$\",\"p\",null,{\"children\":\"When attributes that are cast to value objects are resolved, they are cached by Eloquent. Therefore, the same object instance will be returned if the attribute is accessed again.\"}]\n8d:[\"$\",\"p\",null,{\"children\":[\"If you would like to disable the object caching behavior of custom cast classes, you may declare a public \",[\"$\",\"code\",null,{\"children\":\"withoutObjectCaching\"}],\" property on your custom cast class:\"]}]\n8e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"class AsAddress implements CastsAttributes\\n{\\n    public bool $withoutObjectCaching = true;\\n\\n    // ...\\n}\\n\"}]}]\n8f:[\"$\",\"a\",null,{\"name\":\"array-json-serialization\"}]\n90:[\"$\",\"h3\",null,{\"id\":\"array--json-serialization\",\"children\":[\"$\",\"a\",null,{\"href\":\"#array--json-serialization\",\"children\":\"Array / JSON Serialization\"}]}]\n91:[\"$\",\"p\",null,{\"children\":[\"When an Eloquent model is converted to an array or JSON using the \",[\"$\",\"code\",null,{\"children\":\"toArray\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"toJson\"}],\" methods, your c"])</script><script>self.__next_f.push([1,"ustom cast value objects will typically be serialized as well as long as they implement the \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Contracts\\\\Support\\\\Arrayable\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"JsonSerializable\"}],\" interfaces. However, when using value objects provided by third-party libraries, you may not have the ability to add these interfaces to the object.\"]}]\n92:[\"$\",\"p\",null,{\"children\":[\"Therefore, you may specify that your custom cast class will be responsible for serializing the value object. To do so, your custom cast class should implement the \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Contracts\\\\Database\\\\Eloquent\\\\SerializesCastableAttributes\"}],\" interface. This interface states that your class should contain a \",[\"$\",\"code\",null,{\"children\":\"serialize\"}],\" method which should return the serialized form of your value object:\"]}]\n93:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"/**\\n * Get the serialized representation of the value.\\n *\\n * @param  array\u003cstring, mixed\u003e  $attributes\\n */\\npublic function serialize(\\n    Model $model,\\n    string $key,\\n    mixed $value,\\n    array $attributes,\\n): string {\\n    return (string) $value;\\n}\\n\"}]}]\n94:[\"$\",\"a\",null,{\"name\":\"inbound-casting\"}]\n95:[\"$\",\"h3\",null,{\"id\":\"inbound-casting\",\"children\":[\"$\",\"a\",null,{\"href\":\"#inbound-casting\",\"children\":\"Inbound Casting\"}]}]\n96:[\"$\",\"p\",null,{\"children\":\"Occasionally, you may need to write a custom cast class that only transforms values that are being set on the model and does not perform any operations when attributes are being retrieved from the model.\"}]\n97:[\"$\",\"p\",null,{\"children\":[\"Inbound only custom casts should implement the \",[\"$\",\"code\",null,{\"children\":\"CastsInboundAttributes\"}],\" interface, which only requires a \",[\"$\",\"code\",null,{\"children\":\"set\"}],\" method to be defined. The \",[\"$\",\"code\",null,{\"children\":\"make:cast\"}],\" Artisan command may be invoked with the \",[\"$\",\"code\",null,{\"children\":\"--inbound\"}],\" option to generate an inbound only cast class:\"]}]\n98:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan make:cast AsHash --inbound\\n\"}]}]\n99:[\"$\",\"p\",null,{\"children\":\"A classic example of an inbound only cast is a \\\"hashing\\\" cast. For example, we may define a cast that hashes inbound values via a given algorithm:\"}]\n9a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Casts;\\n\\nuse Illuminate\\\\Contracts\\\\Database\\\\Eloquent\\\\CastsInboundAttributes;\\nuse Illuminate\\\\Database\\\\Eloquent\\\\Model;\\n\\nclass AsHash implements CastsInboundAttributes\\n{\\n    /**\\n     * Create a new cast class instance.\\n     */\\n    public function __construct(\\n        protected string|null $algorithm = null,\\n    ) {}\\n\\n    /**\\n     * Prepare the given value for storage.\\n     *\\n     * @param  array\u003cstring, mixed\u003e  $attributes\\n     */\\n    public function set(\\n        Model $model,\\n        string $key,\\n        mixed $value,\\n        array $attributes,\\n    ): string {\\n        return is_null($this-\u003ealgorithm)\\n            ? bcrypt($value)\\n            : hash($this-\u003ealgorithm, $value);\\n    }\\n}\\n\"}]}]\n9b:[\"$\",\"a\",null,{\"name\":\"cast-parameters\"}]\n9c:[\"$\",\"h3\",null,{\"id\":\"cast-parameters\",\"children\":[\"$\",\"a\",null,{\"href\":\"#cast-parameters\",\"children\":\"Cast Parameters\"}]}]\n9d:[\"$\",\"p\",null,{\"children\":[\"When attaching a custom cast to a model, cast parameters may be specified by separating them from the class name using a \",[\"$\",\"code\",null,{\"children\":\":\"}],\" character and comma-delimiting multiple parameters. The parameters will be passed to the constructor of the cast class:\"]}]\n9e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"/**\\n * Get the attributes that should be cast.\\n *\\n * @return array\u003cstring, string\u003e\\n */\\nprotected function casts(): array\\n{\\n    return [\\n        'secret' =\u003e AsHash::class.':sha256',\\n    ];\\n}\\n\"}]}]\n9f:[\"$\",\"a\",null,{\"name\":\"comparing-cast-values\"}]\na0:[\"$\",\"h3\",null,{\"id\":\"comparing-cast-v"])</script><script>self.__next_f.push([1,"alues\",\"children\":[\"$\",\"a\",null,{\"href\":\"#comparing-cast-values\",\"children\":\"Comparing Cast Values\"}]}]\na1:[\"$\",\"p\",null,{\"children\":[\"If you would like to define how two given cast values should be compared to determine if they have been changed, your custom cast class may implement the \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Contracts\\\\Database\\\\Eloquent\\\\ComparesCastableAttributes\"}],\" interface. This allows you to have fine-grained control over which values Eloquent considers changed and thus saves to the database when a model is updated.\"]}]\na2:[\"$\",\"p\",null,{\"children\":[\"This interface states that your class should contain a \",[\"$\",\"code\",null,{\"children\":\"compare\"}],\" method which should return \",[\"$\",\"code\",null,{\"children\":\"true\"}],\" if the given values are considered equal:\"]}]\na3:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"/**\\n * Determine if the given values are equal.\\n *\\n * @param  \\\\Illuminate\\\\Database\\\\Eloquent\\\\Model  $model\\n * @param  string  $key\\n * @param  mixed  $firstValue\\n * @param  mixed  $secondValue\\n * @return bool\\n */\\npublic function compare(\\n    Model $model,\\n    string $key,\\n    mixed $firstValue,\\n    mixed $secondValue\\n): bool {\\n    return $firstValue === $secondValue;\\n}\\n\"}]}]\na4:[\"$\",\"a\",null,{\"name\":\"castables\"}]\na5:[\"$\",\"h3\",null,{\"id\":\"castables\",\"children\":[\"$\",\"a\",null,{\"href\":\"#castables\",\"children\":\"Castables\"}]}]\na6:[\"$\",\"p\",null,{\"children\":[\"You may want to allow your application's value objects to define their own custom cast classes. Instead of attaching the custom cast class to your model, you may alternatively attach a value object class that implements the \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Contracts\\\\Database\\\\Eloquent\\\\Castable\"}],\" interface:\"]}]\na7:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\ValueObjects\\\\Address;\\n\\nprotected function casts(): array\\n{\\n    return [\\n        'address' =\u003e Address::class,\\n    ];\\n}\\n\"}]}]\na8:[\"$\",\"p\",null,{\"children\":[\"Objects that implement the \",[\"$\",\"code\",null,{\"children\":\"Castable\"}],\" interface must define a \",[\"$\",\"code\",null,{\"children\":\"castUsing\"}],\" method that returns the class name of the custom caster class that is responsible for casting to and from the \",[\"$\",\"code\",null,{\"children\":\"Castable\"}],\" class:\"]}]\na9:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\ValueObjects;\\n\\nuse Illuminate\\\\Contracts\\\\Database\\\\Eloquent\\\\Castable;\\nuse App\\\\Casts\\\\AsAddress;\\n\\nclass Address implements Castable\\n{\\n    /**\\n     * Get the name of the caster class to use when casting from / to this cast target.\\n     *\\n     * @param  array\u003cstring, mixed\u003e  $arguments\\n     */\\n    public static function castUsing(array $arguments): string\\n    {\\n        return AsAddress::class;\\n    }\\n}\\n\"}]}]\naa:[\"$\",\"p\",null,{\"children\":[\"When using \",[\"$\",\"code\",null,{\"children\":\"Castable\"}],\" classes, you may still provide arguments in the \",[\"$\",\"code\",null,{\"children\":\"casts\"}],\" method definition. The arguments will be passed to the \",[\"$\",\"code\",null,{\"children\":\"castUsing\"}],\" method:\"]}]\nab:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\ValueObjects\\\\Address;\\n\\nprotected function casts(): array\\n{\\n    return [\\n        'address' =\u003e Address::class.':argument',\\n    ];\\n}\\n\"}]}]\nac:[\"$\",\"a\",null,{\"name\":\"anonymous-cast-classes\"}]\nad:[\"$\",\"h4\",null,{\"id\":\"castables--anonymous-cast-classes\",\"children\":[\"$\",\"a\",null,{\"href\":\"#castables--anonymous-cast-classes\",\"children\":\"Castables \u0026 Anonymous Cast Classes\"}]}]\nae:[\"$\",\"p\",null,{\"children\":[\"By combining \\\"castables\\\" with PHP's \",[\"$\",\"a\",null,{\"href\":\"https://www.php.net/manual/en/language.oop5.anonymous.php\",\"children\":\"anonymous classes\"}],\", you may define a value object and its casting logic as a single castable object. To accomplish this, return an anonymous class from your value object's \",[\"$\",\"code\",null,{\"children\":\"castUsing\"}],\" method. The anonymous class shou"])</script><script>self.__next_f.push([1,"ld implement the \",[\"$\",\"code\",null,{\"children\":\"CastsAttributes\"}],\" interface:\"]}]\nb2:T4c1,\u003c?php\n\nnamespace App\\ValueObjects;\n\nuse Illuminate\\Contracts\\Database\\Eloquent\\Castable;\nuse Illuminate\\Contracts\\Database\\Eloquent\\CastsAttributes;\n\nclass Address implements Castable\n{\n    // ...\n\n    /**\n     * Get the caster class to use when casting from / to this cast target.\n     *\n     * @param  array\u003cstring, mixed\u003e  $arguments\n     */\n    public static function castUsing(array $arguments): CastsAttributes\n    {\n        return new class implements CastsAttributes\n        {\n            public function get(\n                Model $model,\n                string $key,\n                mixed $value,\n                array $attributes,\n            ): Address {\n                return new Address(\n                    $attributes['address_line_one'],\n                    $attributes['address_line_two']\n                );\n            }\n\n            public function set(\n                Model $model,\n                string $key,\n                mixed $value,\n                array $attributes,\n            ): array {\n                return [\n                    'address_line_one' =\u003e $value-\u003elineOne,\n                    'address_line_two' =\u003e $value-\u003elineTwo,\n                ];\n            }\n        };\n    }\n}\naf:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$b2\"}]}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"b3:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$Lb3\",\"3\",{}]]\n8:null\n"])</script></body></html>