<!DOCTYPE html><!--nnU_zX1rdsG27Kj4AIESC--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/c9244a6c0749cc53.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/cbd55ab9639e1e66.js"/><script src="/_next/static/chunks/87a939617be2fa8c.js" async=""></script><script src="/_next/static/chunks/8368f298651cbd89.js" async=""></script><script src="/_next/static/chunks/6740f161f60c6ab5.js" async=""></script><script src="/_next/static/chunks/turbopack-929fc2ce3ca903db.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/247eb132b7f7b574.js" async=""></script><script src="/_next/static/chunks/796e69ae18b2784c.js" async=""></script><script src="/_next/static/chunks/2b257daea29fbb42.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased"><div hidden=""><!--$--><!--/$--></div><div class="flex min-h-screen bg-background"><div class="w-64 border-r bg-background h-screen sticky top-0 hidden md:block"><div class="p-6 font-bold text-xl border-b flex items-center gap-2"><span class="text-red-600">Laravel</span> Docs（中文）</div><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-65px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="p-4 space-y-2"><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>前言</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">發行說明</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>入門</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/installation"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">安裝</button></a><a class="block" href="/docs/configuration"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">配置</button></a><a class="block" href="/docs/structure"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">目錄結構</button></a><a class="block" href="/docs/lifecycle"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">生命週期</button></a><a class="block" href="/docs/frontend"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">前端</button></a><a class="block" href="/docs/starter-kits"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">啟動套件</button></a><a class="block" href="/docs/deployment"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">部署</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>架構</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>基礎功能</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>深入探討</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>安全性</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>資料庫</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>Eloquent ORM</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>測試</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>其他</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>官方套件</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div class="border-t pt-4 space-y-2"><a class="block" href="/docs/api"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">API 文件</button></a><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">更新日誌</button></a></div></div></div></div></div></div><main class="flex-1 relative"><div class="container mx-auto py-10"><div class="mx-auto max-w-3xl"><div class="mb-8"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">HTTP Client</h1><p class="text-xl text-muted-foreground mt-2">Laravel 提供表達性且最小化的 API 來發送 HTTP 請求</p></div><article class="prose prose-slate dark:prose-invert max-w-none"><h1 id="http-client"><a href="#http-client">HTTP Client</a></h1>
<ul>
<li><a href="#introduction">簡介</a></li>
<li><a href="#making-requests">發送請求</a>
<ul>
<li><a href="#request-data">請求資料</a></li>
<li><a href="#headers">標頭</a></li>
<li><a href="#authentication">認證</a></li>
<li><a href="#timeout">逾時</a></li>
<li><a href="#retries">重試</a></li>
<li><a href="#error-handling">錯誤處理</a></li>
<li><a href="#guzzle-middleware">Guzzle Middleware</a></li>
<li><a href="#guzzle-options">Guzzle 選項</a></li>
</ul>
</li>
<li><a href="#concurrent-requests">並發請求</a>
<ul>
<li><a href="#request-pooling">請求池</a></li>
<li><a href="#request-batching">請求批次處理</a></li>
</ul>
</li>
<li><a href="#macros">巨集</a></li>
<li><a href="#testing">測試</a>
<ul>
<li><a href="#faking-responses">偽造回應</a></li>
<li><a href="#inspecting-requests">檢查請求</a></li>
<li><a href="#preventing-stray-requests">防止意外請求</a></li>
</ul>
</li>
<li><a href="#events">事件</a></li>
</ul>
<a name="introduction"></a>
<h2 id="簡介"><a href="#簡介">簡介</a></h2>
<p>Laravel 為 <a href="http://docs.guzzlephp.org/en/stable/">Guzzle HTTP client</a> 提供了一套表達性強且簡潔的 API，讓你能夠快速發送 HTTP 請求與其他 Web 應用程式進行通訊。Laravel 對 Guzzle 的封裝專注於其最常見的使用案例，並提供極佳的開發者體驗。</p>
<a name="making-requests"></a>
<h2 id="發送請求"><a href="#發送請求">發送請求</a></h2>
<p>要發送請求，你可以使用 <code>Http</code> facade 提供的 <code>head</code>, <code>get</code>, <code>post</code>, <code>put</code>, <code>patch</code>, 和 <code>delete</code> 方法。首先，讓我們看看如何發送一個基本的 <code>GET</code> 請求到另一個 URL：</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Http;

$response = Http::get(&#x27;http://example.com&#x27;);
</code></pre>
<p><code>get</code> 方法回傳一個 <code>Illuminate\Http\Client\Response</code> 實例，該實例提供了多種方法來檢查回應：</p>
<pre><code class="language-php">$response-&gt;body() : string;
$response-&gt;json($key = null, $default = null) : mixed;
$response-&gt;object() : object;
$response-&gt;collect($key = null) : Illuminate\Support\Collection;
$response-&gt;resource() : resource;
$response-&gt;status() : int;
$response-&gt;successful() : bool;
$response-&gt;redirect(): bool;
$response-&gt;failed() : bool;
$response-&gt;clientError() : bool;
$response-&gt;header($header) : string;
$response-&gt;headers() : array;
</code></pre>
<p><code>Illuminate\Http\Client\Response</code> 物件也實作了 PHP 的 <code>ArrayAccess</code> 介面，允許你直接存取回應中的 JSON 資料：</p>
<pre><code class="language-php">return Http::get(&#x27;http://example.com/users/1&#x27;)[&#x27;name&#x27;];
</code></pre>
<p>除了上述的回應方法外，還可以使用以下方法來判斷回應是否具有特定的狀態碼：</p>
<pre><code class="language-php">$response-&gt;ok() : bool;                  // 200 OK
$response-&gt;created() : bool;             // 201 Created
$response-&gt;accepted() : bool;            // 202 Accepted
$response-&gt;noContent() : bool;           // 204 No Content
$response-&gt;movedPermanently() : bool;    // 301 Moved Permanently
$response-&gt;found() : bool;               // 302 Found
$response-&gt;badRequest() : bool;          // 400 Bad Request
$response-&gt;unauthorized() : bool;        // 401 Unauthorized
$response-&gt;paymentRequired() : bool;     // 402 Payment Required
$response-&gt;forbidden() : bool;           // 403 Forbidden
$response-&gt;notFound() : bool;            // 404 Not Found
$response-&gt;requestTimeout() : bool;      // 408 Request Timeout
$response-&gt;conflict() : bool;            // 409 Conflict
$response-&gt;unprocessableEntity() : bool; // 422 Unprocessable Entity
$response-&gt;tooManyRequests() : bool;     // 429 Too Many Requests
$response-&gt;serverError() : bool;         // 500 Internal Server Error
</code></pre>
<a name="uri-templates"></a>
<h4 id="uri-模板"><a href="#uri-模板">URI 模板</a></h4>
<p>HTTP Client 也允許你使用 <a href="https://www.rfc-editor.org/rfc/rfc6570">URI 模板規範</a> 來建構請求 URL。要定義可由 URI 模板擴展的 URL 參數，你可以使用 <code>withUrlParameters</code> 方法：</p>
<pre><code class="language-php">Http::withUrlParameters([
    &#x27;endpoint&#x27; =&gt; &#x27;https://laravel.com&#x27;,
    &#x27;page&#x27; =&gt; &#x27;docs&#x27;,
    &#x27;version&#x27; =&gt; &#x27;12.x&#x27;,
    &#x27;topic&#x27; =&gt; &#x27;validation&#x27;,
])-&gt;get(&#x27;{+endpoint}/{page}/{version}/{topic}&#x27;);
</code></pre>
<a name="dumping-requests"></a>
<h4 id="傾印請求"><a href="#傾印請求">傾印請求</a></h4>
<p>如果你想在發送請求之前傾印 (dump) 輸出的請求實例並終止腳本執行，你可以在請求定義的開頭加上 <code>dd</code> 方法：</p>
<pre><code class="language-php">return Http::dd()-&gt;get(&#x27;http://example.com&#x27;);
</code></pre>
<a name="request-data"></a>
<h3 id="請求資料"><a href="#請求資料">請求資料</a></h3>
<p>當然，在發送 <code>POST</code>, <code>PUT</code>, 和 <code>PATCH</code> 請求時，通常會隨請求發送額外的資料，因此這些方法接受一個資料陣列作為第二個參數。預設情況下，資料將使用 <code>application/json</code> 內容類型發送：</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Http;

$response = Http::post(&#x27;http://example.com/users&#x27;, [
    &#x27;name&#x27; =&gt; &#x27;Steve&#x27;,
    &#x27;role&#x27; =&gt; &#x27;Network Administrator&#x27;,
]);
</code></pre>
<a name="get-request-query-parameters"></a>
<h4 id="get-請求查詢參數"><a href="#get-請求查詢參數">GET 請求查詢參數</a></h4>
<p>在發送 <code>GET</code> 請求時，你可以直接將查詢字串附加到 URL，或是將鍵/值對陣列作為第二個參數傳遞給 <code>get</code> 方法：</p>
<pre><code class="language-php">$response = Http::get(&#x27;http://example.com/users&#x27;, [
    &#x27;name&#x27; =&gt; &#x27;Taylor&#x27;,
    &#x27;page&#x27; =&gt; 1,
]);
</code></pre>
<p>或者，也可以使用 <code>withQueryParameters</code> 方法：</p>
<pre><code class="language-php">Http::retry(3, 100)-&gt;withQueryParameters([
    &#x27;name&#x27; =&gt; &#x27;Taylor&#x27;,
    &#x27;page&#x27; =&gt; 1,
])-&gt;get(&#x27;http://example.com/users&#x27;);
</code></pre>
<a name="sending-form-url-encoded-requests"></a>
<h4 id="發送-form-url-encoded-請求"><a href="#發送-form-url-encoded-請求">發送 Form URL Encoded 請求</a></h4>
<p>如果你想使用 <code>application/x-www-form-urlencoded</code> 內容類型發送資料，你應該在發送請求之前呼叫 <code>asForm</code> 方法：</p>
<pre><code class="language-php">$response = Http::asForm()-&gt;post(&#x27;http://example.com/users&#x27;, [
    &#x27;name&#x27; =&gt; &#x27;Sara&#x27;,
    &#x27;role&#x27; =&gt; &#x27;Privacy Consultant&#x27;,
]);
</code></pre>
<a name="sending-a-raw-request-body"></a>
<h4 id="發送原始請求內容-raw-request-body"><a href="#發送原始請求內容-raw-request-body">發送原始請求內容 (Raw Request Body)</a></h4>
<p>如果你想在發送請求時提供原始請求內容，可以使用 <code>withBody</code> 方法。內容類型可以透過該方法的第二個參數提供：</p>
<pre><code class="language-php">$response = Http::withBody(
    base64_encode($photo), &#x27;image/jpeg&#x27;
)-&gt;post(&#x27;http://example.com/photo&#x27;);
</code></pre>
<a name="multi-part-requests"></a>
<h4 id="multi-part-請求"><a href="#multi-part-請求">Multi-Part 請求</a></h4>
<p>如果你想將檔案作為 multi-part 請求發送，你應該在發送請求之前呼叫 <code>attach</code> 方法。此方法接受檔案名稱及其內容。如果需要，你可以提供第三個參數作為檔案的檔名，而第四個參數可用於提供與該檔案相關的標頭：</p>
<pre><code class="language-php">$response = Http::attach(
    &#x27;attachment&#x27;, file_get_contents(&#x27;photo.jpg&#x27;), &#x27;photo.jpg&#x27;, [&#x27;Content-Type&#x27; =&gt; &#x27;image/jpeg&#x27;]
)-&gt;post(&#x27;http://example.com/attachments&#x27;);
</code></pre>
<p>除了傳遞檔案的原始內容，你也可以傳遞一個 stream resource：</p>
<pre><code class="language-php">$photo = fopen(&#x27;photo.jpg&#x27;, &#x27;r&#x27;);

$response = Http::attach(
    &#x27;attachment&#x27;, $photo, &#x27;photo.jpg&#x27;
)-&gt;post(&#x27;http://example.com/attachments&#x27;);
</code></pre>
<a name="headers"></a>
<h3 id="標頭"><a href="#標頭">標頭</a></h3>
<p>可以使用 <code>withHeaders</code> 方法將標頭添加到請求中。此 <code>withHeaders</code> 方法接受一個鍵/值對陣列：</p>
<pre><code class="language-php">$response = Http::withHeaders([
    &#x27;X-First&#x27; =&gt; &#x27;foo&#x27;,
    &#x27;X-Second&#x27; =&gt; &#x27;bar&#x27;
])-&gt;post(&#x27;http://example.com/users&#x27;, [
    &#x27;name&#x27; =&gt; &#x27;Taylor&#x27;,
]);
</code></pre>
<p>你可以使用 <code>accept</code> 方法指定你的應用程式期望回應的內容類型：</p>
<pre><code class="language-php">$response = Http::accept(&#x27;application/json&#x27;)-&gt;get(&#x27;http://example.com/users&#x27;);
</code></pre>
<p>為了方便起見，你可以使用 <code>acceptJson</code> 方法快速指定你的應用程式期望回應 <code>application/json</code> 內容類型：</p>
<pre><code class="language-php">$response = Http::acceptJson()-&gt;get(&#x27;http://example.com/users&#x27;);
</code></pre>
<p><code>withHeaders</code> 方法會將新的標頭合併到請求現有的標頭中。如果需要，你可以使用 <code>replaceHeaders</code> 方法完全替換所有標頭：</p>
<pre><code class="language-php">$response = Http::withHeaders([
    &#x27;X-Original&#x27; =&gt; &#x27;foo&#x27;,
])-&gt;replaceHeaders([
    &#x27;X-Replacement&#x27; =&gt; &#x27;bar&#x27;,
])-&gt;post(&#x27;http://example.com/users&#x27;, [
    &#x27;name&#x27; =&gt; &#x27;Taylor&#x27;,
]);
</code></pre>
<a name="authentication"></a>
<h3 id="認證"><a href="#認證">認證</a></h3>
<p>你可以分別使用 <code>withBasicAuth</code> 和 <code>withDigestAuth</code> 方法指定 Basic 和 Digest 認證憑證：</p>
<pre><code class="language-php">// Basic authentication...
$response = Http::withBasicAuth(&#x27;taylor@laravel.com&#x27;, &#x27;secret&#x27;)-&gt;post(/* ... */);

// Digest authentication...
$response = Http::withDigestAuth(&#x27;taylor@laravel.com&#x27;, &#x27;secret&#x27;)-&gt;post(/* ... */);
</code></pre>
<a name="bearer-tokens"></a>
<h4 id="bearer-tokens"><a href="#bearer-tokens">Bearer Tokens</a></h4>
<p>如果你想快速將 Bearer token 添加到請求的 <code>Authorization</code> 標頭，可以使用 <code>withToken</code> 方法：</p>
<pre><code class="language-php">$response = Http::withToken(&#x27;token&#x27;)-&gt;post(/* ... */);
</code></pre>
<a name="timeout"></a>
<h3 id="逾時"><a href="#逾時">逾時</a></h3>
<p><code>timeout</code> 方法可用於指定等待回應的最大秒數。預設情況下，HTTP client 將在 30 秒後逾時：</p>
<pre><code class="language-php">$response = Http::timeout(3)-&gt;get(/* ... */);
</code></pre>
<p>如果超過給定的逾時時間，將會拋出 <code>Illuminate\Http\Client\ConnectionException</code> 實例。</p>
<p>你可以使用 <code>connectTimeout</code> 方法指定嘗試連線到伺服器的最大等待秒數。預設為 10 秒：</p>
<pre><code class="language-php">$response = Http::connectTimeout(3)-&gt;get(/* ... */);
</code></pre>
<a name="retries"></a>
<h3 id="重試"><a href="#重試">重試</a></h3>
<p>如果你希望 HTTP client 在發生客戶端或伺服器錯誤時自動重試請求，可以使用 <code>retry</code> 方法。<code>retry</code> 方法接受請求應嘗試的最大次數以及 Laravel 在兩次嘗試之間應等待的毫秒數：</p>
<pre><code class="language-php">$response = Http::retry(3, 100)-&gt;post(/* ... */);
</code></pre>
<p>如果你想手動計算嘗試之間休眠的毫秒數，可以傳遞一個閉包作為 <code>retry</code> 方法的第二個參數：</p>
<pre><code class="language-php">use Exception;

$response = Http::retry(3, function (int $attempt, Exception $exception) {
    return $attempt * 100;
})-&gt;post(/* ... */);
</code></pre>
<p>為了方便起見，你也可以提供一個陣列作為 <code>retry</code> 方法的第一個參數。此陣列將用於確定在後續嘗試之間休眠多少毫秒：</p>
<pre><code class="language-php">$response = Http::retry([100, 200])-&gt;post(/* ... */);
</code></pre>
<p>如果需要，你可以傳遞第三個參數給 <code>retry</code> 方法。第三個參數應該是一個 callable，用於確定是否應該實際嘗試重試。例如，你可能只想在初始請求遇到 <code>ConnectionException</code> 時重試請求：</p>
<pre><code class="language-php">use Exception;
use Illuminate\Http\Client\PendingRequest;

$response = Http::retry(3, 100, function (Exception $exception, PendingRequest $request) {
    return $exception instanceof ConnectionException;
})-&gt;post(/* ... */);
</code></pre>
<p>如果請求嘗試失敗，你可能希望在進行新的嘗試之前更改請求。你可以透過修改提供給 <code>retry</code> 方法的 callable 的 request 參數來實現這一點。例如，如果第一次嘗試返回了身份驗證錯誤，你可能希望使用新的授權 token 重試請求：</p>
<pre><code class="language-php">use Exception;
use Illuminate\Http\Client\PendingRequest;
use Illuminate\Http\Client\RequestException;

$response = Http::withToken($this-&gt;getToken())-&gt;retry(2, 0, function (Exception $exception, PendingRequest $request) {
    if (! $exception instanceof RequestException || $exception-&gt;response-&gt;status() !== 401) {
        return false;
    }

    $request-&gt;withToken($this-&gt;getNewToken());

    return true;
})-&gt;post(/* ... */);
</code></pre>
<p>如果所有請求都失敗，將拋出 <code>Illuminate\Http\Client\RequestException</code> 實例。如果你想禁用此行為，可以提供一個值為 <code>false</code> 的 <code>throw</code> 參數。禁用時，在所有重試都嘗試過後，將回傳客戶端收到的最後一個回應：</p>
<pre><code class="language-php">$response = Http::retry(3, 100, throw: false)-&gt;post(/* ... */);
</code></pre>
<blockquote>
<p>[!WARNING]
如果所有請求都因為連線問題而失敗，即使 <code>throw</code> 參數設定為 <code>false</code>，仍然會拋出 <code>Illuminate\Http\Client\ConnectionException</code>。</p>
</blockquote>
<a name="error-handling"></a>
<h3 id="錯誤處理"><a href="#錯誤處理">錯誤處理</a></h3>
<p>與 Guzzle 的預設行為不同，Laravel 的 HTTP client 封裝器不會在客戶端或伺服器錯誤（來自伺服器的 <code>400</code> 和 <code>500</code> 級別回應）時拋出異常。你可以使用 <code>successful</code>, <code>clientError</code>, 或 <code>serverError</code> 方法來判斷是否返回了這些錯誤之一：</p>
<pre><code class="language-php">// Determine if the status code is &gt;= 200 and &lt; 300...
$response-&gt;successful();

// Determine if the status code is &gt;= 400...
$response-&gt;failed();

// Determine if the response has a 400 level status code...
$response-&gt;clientError();

// Determine if the response has a 500 level status code...
$response-&gt;serverError();

// Immediately execute the given callback if there was a client or server error...
$response-&gt;onError(callable $callback);
</code></pre>
<a name="throwing-exceptions"></a>
<h4 id="拋出異常"><a href="#拋出異常">拋出異常</a></h4>
<p>如果你有一個回應實例，並且希望在回應狀態碼指示客戶端或伺服器錯誤時拋出 <code>Illuminate\Http\Client\RequestException</code> 實例，你可以使用 <code>throw</code> 或 <code>throwIf</code> 方法：</p>
<pre><code class="language-php">use Illuminate\Http\Client\Response;

$response = Http::post(/* ... */);

// Throw an exception if a client or server error occurred...
$response-&gt;throw();

// Throw an exception if an error occurred and the given condition is true...
$response-&gt;throwIf($condition);

// Throw an exception if an error occurred and the given closure resolves to true...
$response-&gt;throwIf(fn (Response $response) =&gt; true);

// Throw an exception if an error occurred and the given condition is false...
$response-&gt;throwUnless($condition);

// Throw an exception if an error occurred and the given closure resolves to false...
$response-&gt;throwUnless(fn (Response $response) =&gt; false);

// Throw an exception if the response has a specific status code...
$response-&gt;throwIfStatus(403);

// Throw an exception unless the response has a specific status code...
$response-&gt;throwUnlessStatus(200);

return $response[&#x27;user&#x27;][&#x27;id&#x27;];
</code></pre>
<p><code>Illuminate\Http\Client\RequestException</code> 實例有一個公開的 <code>$response</code> 屬性，允許你檢查返回的回應。</p>
<p>如果沒有發生錯誤，<code>throw</code> 方法將回傳回應實例，允許你將其他操作鏈接到 <code>throw</code> 方法上：</p>
<pre><code class="language-php">return Http::post(/* ... */)-&gt;throw()-&gt;json();
</code></pre>
<p>如果你想在拋出異常之前執行一些額外的邏輯，你可以將一個閉包傳遞給 <code>throw</code> 方法。異常將在閉包被調用後自動拋出，因此你不需要在閉包內重新拋出異常：</p>
<pre><code class="language-php">use Illuminate\Http\Client\Response;
use Illuminate\Http\Client\RequestException;

return Http::post(/* ... */)-&gt;throw(function (Response $response, RequestException $e) {
    // ...
})-&gt;json();
</code></pre>
<p>預設情況下，<code>RequestException</code> 訊息在記錄或報告時會被截斷為 120 個字元。要自定義或禁用此行為，你可以在 <code>bootstrap/app.php</code> 檔案中配置應用程式的註冊行為時使用 <code>truncateAt</code> 和 <code>dontTruncate</code> 方法：</p>
<pre><code class="language-php">use Illuminate\Http\Client\RequestException;

-&gt;registered(function (): void {
    // Truncate request exception messages to 240 characters...
    RequestException::truncateAt(240);

    // Disable request exception message truncation...
    RequestException::dontTruncate();
})
</code></pre>
<p>或者，你可以使用 <code>truncateExceptionsAt</code> 方法自定義每個請求的異常截斷行為：</p>
<pre><code class="language-php">return Http::truncateExceptionsAt(240)-&gt;post(/* ... */);
</code></pre>
<a name="guzzle-middleware"></a>
<h3 id="guzzle-middleware"><a href="#guzzle-middleware">Guzzle Middleware</a></h3>
<p>由於 Laravel 的 HTTP client 是由 Guzzle 驅動的，你可以利用 <a href="https://docs.guzzlephp.org/en/stable/handlers-and-middleware.html">Guzzle Middleware</a> 來操作輸出的請求或檢查輸入的回應。要操作輸出的請求，請透過 <code>withRequestMiddleware</code> 方法註冊 Guzzle middleware：</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Http;
use Psr\Http\Message\RequestInterface;

$response = Http::withRequestMiddleware(
    function (RequestInterface $request) {
        return $request-&gt;withHeader(&#x27;X-Example&#x27;, &#x27;Value&#x27;);
    }
)-&gt;get(&#x27;http://example.com&#x27;);
</code></pre>
<p>同樣地，你可以透過 <code>withResponseMiddleware</code> 方法註冊 middleware 來檢查輸入的 HTTP 回應：</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Http;
use Psr\Http\Message\ResponseInterface;

$response = Http::withResponseMiddleware(
    function (ResponseInterface $response) {
        $header = $response-&gt;getHeader(&#x27;X-Example&#x27;);

        // ...

        return $response;
    }
)-&gt;get(&#x27;http://example.com&#x27;);
</code></pre>
<a name="global-middleware"></a>
<h4 id="全域-middleware"><a href="#全域-middleware">全域 Middleware</a></h4>
<p>有時，你可能希望註冊一個適用於每個輸出請求和輸入回應的 middleware。要實現這一點，你可以使用 <code>globalRequestMiddleware</code> 和 <code>globalResponseMiddleware</code> 方法。通常，這些方法應該在應用程式的 <code>AppServiceProvider</code> 的 <code>boot</code> 方法中調用：</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Http;

Http::globalRequestMiddleware(fn ($request) =&gt; $request-&gt;withHeader(
    &#x27;User-Agent&#x27;, &#x27;Example Application/1.0&#x27;
));

Http::globalResponseMiddleware(fn ($response) =&gt; $response-&gt;withHeader(
    &#x27;X-Finished-At&#x27;, now()-&gt;toDateTimeString()
));
</code></pre>
<a name="guzzle-options"></a>
<h3 id="guzzle-選項"><a href="#guzzle-選項">Guzzle 選項</a></h3>
<p>你可以使用 <code>withOptions</code> 方法為輸出請求指定額外的 <a href="http://docs.guzzlephp.org/en/stable/request-options.html">Guzzle 請求選項</a>。<code>withOptions</code> 方法接受一個鍵/值對陣列：</p>
<pre><code class="language-php">$response = Http::withOptions([
    &#x27;debug&#x27; =&gt; true,
])-&gt;get(&#x27;http://example.com/users&#x27;);
</code></pre>
<a name="global-options"></a>
<h4 id="全域選項"><a href="#全域選項">全域選項</a></h4>
<p>要為每個輸出請求配置預設選項，你可以利用 <code>globalOptions</code> 方法。通常，此方法應該從應用程式的 <code>AppServiceProvider</code> 的 <code>boot</code> 方法中調用：</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Http;

/**
 * Bootstrap any application services.
 */
public function boot(): void
{
    Http::globalOptions([
        &#x27;allow_redirects&#x27; =&gt; false,
    ]);
}
</code></pre>
<a name="concurrent-requests"></a>
<h2 id="並發請求"><a href="#並發請求">並發請求</a></h2>
<p>有時，你可能希望並發發送多個 HTTP 請求。換句話說，你希望同時發送多個請求，而不是按順序發送請求。這在與緩慢的 HTTP API 互動時可以顯著提高效能。</p>
<a name="request-pooling"></a>
<h3 id="請求池"><a href="#請求池">請求池</a></h3>
<p>幸運的是，你可以使用 <code>pool</code> 方法來實現這一點。<code>pool</code> 方法接受一個閉包，該閉包接收一個 <code>Illuminate\Http\Client\Pool</code> 實例，允許你輕鬆地將請求添加到請求池中以進行調度：</p>
<pre><code class="language-php">use Illuminate\Http\Client\Pool;
use Illuminate\Support\Facades\Http;

$responses = Http::pool(fn (Pool $pool) =&gt; [
    $pool-&gt;get(&#x27;http://localhost/first&#x27;),
    $pool-&gt;get(&#x27;http://localhost/second&#x27;),
    $pool-&gt;get(&#x27;http://localhost/third&#x27;),
]);

return $responses[0]-&gt;ok() &amp;&amp;
       $responses[1]-&gt;ok() &amp;&amp;
       $responses[2]-&gt;ok();
</code></pre>
<p>如你所見，每個回應實例都可以根據它被添加到池中的順序來存取。如果你願意，你可以使用 <code>as</code> 方法為請求命名，這允許你按名稱存取相應的回應：</p>
<pre><code class="language-php">use Illuminate\Http\Client\Pool;
use Illuminate\Support\Facades\Http;

$responses = Http::pool(fn (Pool $pool) =&gt; [
    $pool-&gt;as(&#x27;first&#x27;)-&gt;get(&#x27;http://localhost/first&#x27;),
    $pool-&gt;as(&#x27;second&#x27;)-&gt;get(&#x27;http://localhost/second&#x27;),
    $pool-&gt;as(&#x27;third&#x27;)-&gt;get(&#x27;http://localhost/third&#x27;),
]);

return $responses[&#x27;first&#x27;]-&gt;ok();
</code></pre>
<p>請求池的最大並發數可以透過向 <code>pool</code> 方法提供 <code>concurrency</code> 參數來控制。此值決定了在處理請求池時可以同時進行的最大 HTTP 請求數量：</p>
<pre><code class="language-php">$responses = Http::pool(fn (Pool $pool) =&gt; [
    // ...
], concurrency: 5);
</code></pre>
<a name="customizing-concurrent-requests"></a>
<h4 id="自定義並發請求"><a href="#自定義並發請求">自定義並發請求</a></h4>
<p><code>pool</code> 方法不能與其他 HTTP client 方法（如 <code>withHeaders</code> 或 <code>middleware</code> 方法）鏈接。如果你想將自定義標頭或 middleware 應用於池中的請求，你應該在池中的每個請求上配置這些選項：</p>
<pre><code class="language-php">use Illuminate\Http\Client\Pool;
use Illuminate\Support\Facades\Http;

$headers = [
    &#x27;X-Example&#x27; =&gt; &#x27;example&#x27;,
];

$responses = Http::pool(fn (Pool $pool) =&gt; [
    $pool-&gt;withHeaders($headers)-&gt;get(&#x27;http://laravel.test/test&#x27;),
    $pool-&gt;withHeaders($headers)-&gt;get(&#x27;http://laravel.test/test&#x27;),
    $pool-&gt;withHeaders($headers)-&gt;get(&#x27;http://laravel.test/test&#x27;),
]);
</code></pre>
<a name="request-batching"></a>
<h3 id="請求批次處理"><a href="#請求批次處理">請求批次處理</a></h3>
<p>在 Laravel 中處理並發請求的另一種方法是使用 <code>batch</code> 方法。與 <code>pool</code> 方法一樣，它接受一個閉包，該閉包接收一個 <code>Illuminate\Http\Client\Batch</code> 實例，允許你輕鬆地將請求添加到請求池中以進行調度，但它也允許你定義完成回呼：</p>
<pre><code class="language-php">use Illuminate\Http\Client\Batch;
use Illuminate\Http\Client\ConnectionException;
use Illuminate\Http\Client\RequestException;
use Illuminate\Http\Client\Response;
use Illuminate\Support\Facades\Http;

$responses = Http::batch(fn (Batch $batch) =&gt; [
    $batch-&gt;get(&#x27;http://localhost/first&#x27;),
    $batch-&gt;get(&#x27;http://localhost/second&#x27;),
    $batch-&gt;get(&#x27;http://localhost/third&#x27;),
])-&gt;before(function (Batch $batch) {
    // The batch has been created but no requests have been initialized...
})-&gt;progress(function (Batch $batch, int|string $key, Response $response) {
    // An individual request has completed successfully...
})-&gt;then(function (Batch $batch, array $results) {
    // All requests completed successfully...
})-&gt;catch(function (Batch $batch, int|string $key, Response|RequestException|ConnectionException $response) {
    // First batch request failure detected...
})-&gt;finally(function (Batch $batch, array $results) {
    // The batch has finished executing...
})-&gt;send();
</code></pre>
<p>與 <code>pool</code> 方法一樣，你可以使用 <code>as</code> 方法為你的請求命名：</p>
<pre><code class="language-php">$responses = Http::batch(fn (Batch $batch) =&gt; [
    $batch-&gt;as(&#x27;first&#x27;)-&gt;get(&#x27;http://localhost/first&#x27;),
    $batch-&gt;as(&#x27;second&#x27;)-&gt;get(&#x27;http://localhost/second&#x27;),
    $batch-&gt;as(&#x27;third&#x27;)-&gt;get(&#x27;http://localhost/third&#x27;),
])-&gt;send();
</code></pre>
<p>在呼叫 <code>send</code> 方法啟動 <code>batch</code> 後，你不能向其添加新請求。嘗試這樣做將導致拋出 <code>Illuminate\Http\Client\BatchInProgressException</code> 異常。</p>
<p>請求批次處理的最大並發數可以透過 <code>concurrency</code> 方法控制。此值決定了在處理請求批次處理時可以同時進行的最大 HTTP 請求數量：</p>
<pre><code class="language-php">$responses = Http::batch(fn (Batch $batch) =&gt; [
    // ...
])-&gt;concurrency(5)-&gt;send();
</code></pre>
<a name="inspecting-batches"></a>
<h4 id="檢查批次處理"><a href="#檢查批次處理">檢查批次處理</a></h4>
<p>提供給批次處理完成回呼的 <code>Illuminate\Http\Client\Batch</code> 實例具有各種屬性和方法，可協助你與給定的請求批次處理進行互動和檢查：</p>
<pre><code class="language-php">// The number of requests assigned to the batch...
$batch-&gt;totalRequests;
 
// The number of requests that have not been processed yet...
$batch-&gt;pendingRequests;
 
// The number of requests that have failed...
$batch-&gt;failedRequests;

// The number of requests that have been processed thus far...
$batch-&gt;processedRequests();

// Indicates if the batch has finished executing...
$batch-&gt;finished();

// Indicates if the batch has request failures...
$batch-&gt;hasFailures();
</code></pre>
<a name="deferring-batches"></a>
<h4 id="延遲批次處理"><a href="#延遲批次處理">延遲批次處理</a></h4>
<p>當呼叫 <code>defer</code> 方法時，請求批次處理不會立即執行。相反，Laravel 將在當前應用程式請求的 HTTP 回應發送給使用者後執行批次處理，讓你的應用程式感覺快速且反應靈敏：</p>
<pre><code class="language-php">use Illuminate\Http\Client\Batch;
use Illuminate\Support\Facades\Http;

$responses = Http::batch(fn (Batch $batch) =&gt; [
    $batch-&gt;get(&#x27;http://localhost/first&#x27;),
    $batch-&gt;get(&#x27;http://localhost/second&#x27;),
    $batch-&gt;get(&#x27;http://localhost/third&#x27;),
])-&gt;then(function (Batch $batch, array $results) {
    // All requests completed successfully...
})-&gt;defer();
</code></pre>
<a name="macros"></a>
<h2 id="巨集"><a href="#巨集">巨集</a></h2>
<p>Laravel HTTP client 允許你定義「巨集 (macros)」，這可以作為一種流暢、表達性強的機制，在與應用程式中的服務互動時配置常見的請求路徑和標頭。要開始使用，你可以在應用程式的 <code>App\Providers\AppServiceProvider</code> 類別的 <code>boot</code> 方法中定義巨集：</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Http;

/**
 * Bootstrap any application services.
 */
public function boot(): void
{
    Http::macro(&#x27;github&#x27;, function () {
        return Http::withHeaders([
            &#x27;X-Example&#x27; =&gt; &#x27;example&#x27;,
        ])-&gt;baseUrl(&#x27;https://github.com&#x27;);
    });
}
</code></pre>
<p>配置好巨集後，你可以從應用程式的任何位置調用它，以建立具有指定配置的待處理請求：</p>
<pre><code class="language-php">$response = Http::github()-&gt;get(&#x27;/&#x27;);
</code></pre>
<a name="testing"></a>
<h2 id="測試"><a href="#測試">測試</a></h2>
<p>許多 Laravel 服務提供功能來幫助你輕鬆且表達性地編寫測試，Laravel 的 HTTP client 也不例外。<code>Http</code> facade 的 <code>fake</code> 方法允許你指示 HTTP client 在發出請求時返回 stubbed / dummy 回應。</p>
<a name="faking-responses"></a>
<h3 id="偽造回應"><a href="#偽造回應">偽造回應</a></h3>
<p>例如，要指示 HTTP client 為每個請求返回空的 <code>200</code> 狀態碼回應，你可以不帶參數呼叫 <code>fake</code> 方法：</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Http;

Http::fake();

$response = Http::post(/* ... */);
</code></pre>
<a name="faking-specific-urls"></a>
<h4 id="偽造特定-url"><a href="#偽造特定-url">偽造特定 URL</a></h4>
<p>或者，你可以將一個陣列傳遞給 <code>fake</code> 方法。陣列的鍵應該代表你希望偽造的 URL 模式及其關聯的回應。<code>*</code> 字元可用作萬用字元。你可以使用 <code>Http</code> facade 的 <code>response</code> 方法為這些端點建構 stub / fake 回應：</p>
<pre><code class="language-php">Http::fake([
    // Stub a JSON response for GitHub endpoints...
    &#x27;github.com/*&#x27; =&gt; Http::response([&#x27;foo&#x27; =&gt; &#x27;bar&#x27;], 200, $headers),

    // Stub a string response for Google endpoints...
    &#x27;google.com/*&#x27; =&gt; Http::response(&#x27;Hello World&#x27;, 200, $headers),
]);
</code></pre>
<p>任何向未被偽造的 URL 發出的請求都將實際執行。如果你想指定一個 fallback URL 模式來 stub 所有未匹配的 URL，你可以使用單個 <code>*</code> 字元：</p>
<pre><code class="language-php">Http::fake([
    // Stub a JSON response for GitHub endpoints...
    &#x27;github.com/*&#x27; =&gt; Http::response([&#x27;foo&#x27; =&gt; &#x27;bar&#x27;], 200, [&#x27;Headers&#x27;]),

    // Stub a string response for all other endpoints...
    &#x27;*&#x27; =&gt; Http::response(&#x27;Hello World&#x27;, 200, [&#x27;Headers&#x27;]),
]);
</code></pre>
<p>為了方便起見，可以透過提供字串、陣列或整數作為回應來生成簡單的字串、JSON 和空回應：</p>
<pre><code class="language-php">Http::fake([
    &#x27;google.com/*&#x27; =&gt; &#x27;Hello World&#x27;,
    &#x27;github.com/*&#x27; =&gt; [&#x27;foo&#x27; =&gt; &#x27;bar&#x27;],
    &#x27;chatgpt.com/*&#x27; =&gt; 200,
]);
</code></pre>
<a name="faking-connection-exceptions"></a>
<h4 id="偽造異常"><a href="#偽造異常">偽造異常</a></h4>
<p>有時你可能需要測試你的應用程式在 HTTP client 嘗試發出請求時遇到 <code>Illuminate\Http\Client\ConnectionException</code> 的行為。你可以使用 <code>failedConnection</code> 方法指示 HTTP client 拋出連線異常：</p>
<pre><code class="language-php">Http::fake([
    &#x27;github.com/*&#x27; =&gt; Http::failedConnection(),
]);
</code></pre>
<p>要測試你的應用程式在拋出 <code>Illuminate\Http\Client\RequestException</code> 時的行為，你可以使用 <code>failedRequest</code> 方法：</p>
<pre><code class="language-php">Http::fake([
    &#x27;github.com/*&#x27; =&gt; Http::failedRequest([&#x27;code&#x27; =&gt; &#x27;not_found&#x27;], 404),
]);
</code></pre>
<a name="faking-response-sequences"></a>
<h4 id="偽造回應序列"><a href="#偽造回應序列">偽造回應序列</a></h4>
<p>有時你可能需要指定單個 URL 應按特定順序返回一系列偽造回應。你可以使用 <code>Http::sequence</code> 方法來建構回應：</p>
<pre><code class="language-php">Http::fake([
    // Stub a series of responses for GitHub endpoints...
    &#x27;github.com/*&#x27; =&gt; Http::sequence()
        -&gt;push(&#x27;Hello World&#x27;, 200)
        -&gt;push([&#x27;foo&#x27; =&gt; &#x27;bar&#x27;], 200)
        -&gt;pushStatus(404),
]);
</code></pre>
<p>當回應序列中的所有回應都被消耗後，任何進一步的請求都將導致回應序列拋出異常。如果你想指定當序列為空時應返回的預設回應，可以使用 <code>whenEmpty</code> 方法：</p>
<pre><code class="language-php">Http::fake([
    // Stub a series of responses for GitHub endpoints...
    &#x27;github.com/*&#x27; =&gt; Http::sequence()
        -&gt;push(&#x27;Hello World&#x27;, 200)
        -&gt;push([&#x27;foo&#x27; =&gt; &#x27;bar&#x27;], 200)
        -&gt;whenEmpty(Http::response()),
]);
</code></pre>
<p>如果你想偽造一系列回應，但不需要指定應偽造的特定 URL 模式，可以使用 <code>Http::fakeSequence</code> 方法：</p>
<pre><code class="language-php">Http::fakeSequence()
    -&gt;push(&#x27;Hello World&#x27;, 200)
    -&gt;whenEmpty(Http::response());
</code></pre>
<a name="fake-callback"></a>
<h4 id="fake-callback"><a href="#fake-callback">Fake Callback</a></h4>
<p>如果你需要更複雜的邏輯來確定為某些端點返回什麼回應，你可以將一個閉包傳遞給 <code>fake</code> 方法。此閉包將接收一個 <code>Illuminate\Http\Client\Request</code> 實例，並應返回一個回應實例。在你的閉包中，你可以執行任何必要的邏輯來確定要返回什麼類型的回應：</p>
<pre><code class="language-php">use Illuminate\Http\Client\Request;

Http::fake(function (Request $request) {
    return Http::response(&#x27;Hello World&#x27;, 200);
});
</code></pre>
<a name="inspecting-requests"></a>
<h3 id="檢查請求"><a href="#檢查請求">檢查請求</a></h3>
<p>在偽造回應時，你可能偶爾希望檢查客戶端收到的請求，以確保你的應用程式發送了正確的資料或標頭。你可以在呼叫 <code>Http::fake</code> 之後呼叫 <code>Http::assertSent</code> 方法來實現這一點。</p>
<p><code>assertSent</code> 方法接受一個閉包，該閉包將接收一個 <code>Illuminate\Http\Client\Request</code> 實例，並應返回一個布林值，指示請求是否符合你的期望。為了使測試通過，必須至少發出一個符合給定期望的請求：</p>
<pre><code class="language-php">use Illuminate\Http\Client\Request;
use Illuminate\Support\Facades\Http;

Http::fake();

Http::withHeaders([
    &#x27;X-First&#x27; =&gt; &#x27;foo&#x27;,
])-&gt;post(&#x27;http://example.com/users&#x27;, [
    &#x27;name&#x27; =&gt; &#x27;Taylor&#x27;,
    &#x27;role&#x27; =&gt; &#x27;Developer&#x27;,
]);

Http::assertSent(function (Request $request) {
    return $request-&gt;hasHeader(&#x27;X-First&#x27;, &#x27;foo&#x27;) &amp;&amp;
           $request-&gt;url() == &#x27;http://example.com/users&#x27; &amp;&amp;
           $request[&#x27;name&#x27;] == &#x27;Taylor&#x27; &amp;&amp;
           $request[&#x27;role&#x27;] == &#x27;Developer&#x27;;
});
</code></pre>
<p>如果需要，你可以使用 <code>assertNotSent</code> 方法斷言未發送特定請求：</p>
<pre><code class="language-php">use Illuminate\Http\Client\Request;
use Illuminate\Support\Facades\Http;

Http::fake();

Http::post(&#x27;http://example.com/users&#x27;, [
    &#x27;name&#x27; =&gt; &#x27;Taylor&#x27;,
    &#x27;role&#x27; =&gt; &#x27;Developer&#x27;,
]);

Http::assertNotSent(function (Request $request) {
    return $request-&gt;url() === &#x27;http://example.com/posts&#x27;;
});
</code></pre>
<p>你可以使用 <code>assertSentCount</code> 方法斷言在測試期間「發送」了多少個請求：</p>
<pre><code class="language-php">Http::fake();

Http::assertSentCount(5);
</code></pre>
<p>或者，你可以使用 <code>assertNothingSent</code> 方法斷言在測試期間沒有發送任何請求：</p>
<pre><code class="language-php">Http::fake();

Http::assertNothingSent();
</code></pre>
<a name="recording-requests-and-responses"></a>
<h4 id="記錄請求--回應"><a href="#記錄請求--回應">記錄請求 / 回應</a></h4>
<p>你可以使用 <code>recorded</code> 方法收集所有請求及其相應的回應。<code>recorded</code> 方法返回一個包含 <code>Illuminate\Http\Client\Request</code> 和 <code>Illuminate\Http\Client\Response</code> 實例的陣列集合：</p>
<pre><code class="language-php">Http::fake([
    &#x27;https://laravel.com&#x27; =&gt; Http::response(status: 500),
    &#x27;https://nova.laravel.com/&#x27; =&gt; Http::response(),
]);

Http::get(&#x27;https://laravel.com&#x27;);
Http::get(&#x27;https://nova.laravel.com/&#x27;);

$recorded = Http::recorded();

[$request, $response] = $recorded[0];
</code></pre>
<p>此外，<code>recorded</code> 方法接受一個閉包，該閉包將接收 <code>Illuminate\Http\Client\Request</code> 和 <code>Illuminate\Http\Client\Response</code> 實例，並可用於根據你的期望過濾請求 / 回應對：</p>
<pre><code class="language-php">use Illuminate\Http\Client\Request;
use Illuminate\Http\Client\Response;

Http::fake([
    &#x27;https://laravel.com&#x27; =&gt; Http::response(status: 500),
    &#x27;https://nova.laravel.com/&#x27; =&gt; Http::response(),
]);

Http::get(&#x27;https://laravel.com&#x27;);
Http::get(&#x27;https://nova.laravel.com/&#x27;);

$recorded = Http::recorded(function (Request $request, Response $response) {
    return $request-&gt;url() !== &#x27;https://laravel.com&#x27; &amp;&amp;
           $response-&gt;successful();
});
</code></pre>
<a name="preventing-stray-requests"></a>
<h3 id="防止意外請求"><a href="#防止意外請求">防止意外請求</a></h3>
<p>如果你想確保在整個單個測試或完整測試套件中透過 HTTP client 發送的所有請求都已被偽造，你可以呼叫 <code>preventStrayRequests</code> 方法。呼叫此方法後，任何沒有相應偽造回應的請求都將拋出異常，而不是發出實際的 HTTP 請求：</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Http;

Http::preventStrayRequests();

Http::fake([
    &#x27;github.com/*&#x27; =&gt; Http::response(&#x27;ok&#x27;),
]);

// An &quot;ok&quot; response is returned...
Http::get(&#x27;https://github.com/laravel/framework&#x27;);

// An exception is thrown...
Http::get(&#x27;https://laravel.com&#x27;);
</code></pre>
<p>有時，你可能希望防止大多數意外請求，但仍允許執行特定請求。要實現這一點，你可以將 URL 模式陣列傳遞給 <code>allowStrayRequests</code> 方法。任何匹配給定模式之一的請求都將被允許，而所有其他請求將繼續拋出異常：</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Http;

Http::preventStrayRequests();

Http::allowStrayRequests([
    &#x27;http://127.0.0.1:5000/*&#x27;,
]);

// This request is executed...
Http::get(&#x27;http://127.0.0.1:5000/generate&#x27;);

// An exception is thrown...
Http::get(&#x27;https://laravel.com&#x27;);
</code></pre>
<a name="events"></a>
<h2 id="事件"><a href="#事件">事件</a></h2>
<p>Laravel 在發送 HTTP 請求的過程中會觸發三個事件。<code>RequestSending</code> 事件在發送請求之前觸發，而 <code>ResponseReceived</code> 事件在收到給定請求的回應後觸發。如果未收到給定請求的回應，則會觸發 <code>ConnectionFailed</code> 事件。</p>
<p><code>RequestSending</code> 和 <code>ConnectionFailed</code> 事件都包含一個公開的 <code>$request</code> 屬性，你可以使用它來檢查 <code>Illuminate\Http\Client\Request</code> 實例。同樣地，<code>ResponseReceived</code> 事件包含一個 <code>$request</code> 屬性以及一個 <code>$response</code> 屬性，可用於檢查 <code>Illuminate\Http\Client\Response</code> 實例。你可以在應用程式中為這些事件建立 <a href="/docs/events">event listeners</a>：</p>
<pre><code class="language-php">use Illuminate\Http\Client\Events\RequestSending;

class LogRequest
{
    /**
     * Handle the event.
     */
    public function handle(RequestSending $event): void
    {
        // $event-&gt;request ...
    }
}
</code></pre></article></div></div><!--$--><!--/$--></main></div><script src="/_next/static/chunks/cbd55ab9639e1e66.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n4:I[93649,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/2b257daea29fbb42.js\"],\"DocsSidebar\"]\n6:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"ViewportBoundary\"]\nb:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"MetadataBoundary\"]\nd:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/c9244a6c0749cc53.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"nnU_zX1rdsG27Kj4AIESC\",\"c\":[\"\",\"docs\",\"http-client\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"http-client\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/c9244a6c0749cc53.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/796e69ae18b2784c.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/2b257daea29fbb42.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"div\",null,{\"className\":\"flex min-h-screen bg-background\",\"children\":[[\"$\",\"$L4\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 relative\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"className\":\"container mx-auto py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-3xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl\",\"children\":\"HTTP Client\"}],[\"$\",\"p\",null,{\"className\":\"text-xl text-muted-foreground mt-2\",\"children\":\"Laravel 提供表達性且最小化的 API 來發送 HTTP 請求\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"http-client\",\"children\":[\"$\",\"a\",null,{\"href\":\"#http-client\",\"children\":\"HTTP Client\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#introduction\",\"children\":\"簡介\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#making-requests\",\"children\":\"發送請求\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#request-data\",\"children\":\"請求資料\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#headers\",\"children\":\"標頭\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#authentication\",\"children\":\"認證\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#timeout\",\"children\":\"逾時\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#retries\",\"children\":\"重試\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#error-handling\",\"children\":\"錯誤處理\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#guzzle-middleware\",\"children\":\"Guzzle Middleware\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#guzzle-options\",\"children\":\"Guzzle 選項\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#concurrent-requests\",\"children\":\"並發請求\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#request-pooling\",\"children\":\"請求池\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#request-batching\",\"children\":\"請求批次處理\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#macros\",\"children\":\"巨集\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#testing\",\"children\":\"測試\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#faking-responses\",\"children\":\"偽造回應\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#inspecting-requests\",\"children\":\"檢查請求\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#preventing-stray-requests\",\"children\":\"防止意外請求\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#events\",\"children\":\"事件\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"introduction\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"簡介\",\"children\":[\"$\",\"a\",null,{\"href\":\"#簡介\",\"children\":\"簡介\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Laravel 為 \",[\"$\",\"a\",null,{\"href\":\"http://docs.guzzlephp.org/en/stable/\",\"children\":\"Guzzle HTTP client\"}],\" 提供了一套表達性強且簡潔的 API，讓你能夠快速發送 HTTP 請求與其他 Web 應用程式進行通訊。Laravel 對 Guzzle 的封裝專注於其最常見的使用案例，並提供極佳的開發者體驗。\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"making-requests\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"發送請求\",\"children\":[\"$\",\"a\",null,{\"href\":\"#發送請求\",\"children\":\"發送請求\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"要發送請求，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"Http\"}],\" facade 提供的 \",[\"$\",\"code\",null,{\"children\":\"head\"}],\", \",[\"$\",\"code\",null,{\"children\":\"get\"}],\", \",[\"$\",\"code\",null,{\"children\":\"post\"}],\", \",[\"$\",\"code\",null,{\"children\":\"put\"}],\", \",[\"$\",\"code\",null,{\"children\":\"patch\"}],\", 和 \",[\"$\",\"code\",null,{\"children\":\"delete\"}],\" 方法。首先，讓我們看看如何發送一個基本的 \",[\"$\",\"code\",null,{\"children\":\"GET\"}],\" 請求到另一個 URL：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Http;\\n\\n$response = Http::get('http://example.com');\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"get\"}],\" 方法回傳一個 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\Response\"}],\" 實例，該實例提供了多種方法來檢查回應：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$response-\u003ebody() : string;\\n$response-\u003ejson($key = null, $default = null) : mixed;\\n$response-\u003eobject() : object;\\n$response-\u003ecollect($key = null) : Illuminate\\\\Support\\\\Collection;\\n$response-\u003eresource() : resource;\\n$response-\u003estatus() : int;\\n$response-\u003esuccessful() : bool;\\n$response-\u003eredirect(): bool;\\n$response-\u003efailed() : bool;\\n$response-\u003eclientError() : bool;\\n$response-\u003eheader($header) : string;\\n$response-\u003eheaders() : array;\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\Response\"}],\" 物件也實作了 PHP 的 \",[\"$\",\"code\",null,{\"children\":\"ArrayAccess\"}],\" 介面，允許你直接存取回應中的 JSON 資料：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return Http::get('http://example.com/users/1')['name'];\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"除了上述的回應方法外，還可以使用以下方法來判斷回應是否具有特定的狀態碼：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":\"$Le\"}],\"\\n\",\"$Lf\",\"\\n\",\"$L10\",\"\\n\",\"$L11\",\"\\n\",\"$L12\",\"\\n\",\"$L13\",\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\",\"\\n\",\"$L55\",\"\\n\",\"$L56\",\"\\n\",\"$L57\",\"\\n\",\"$L58\",\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\",\"\\n\",\"$L5c\",\"\\n\",\"$L5d\",\"\\n\",\"$L5e\",\"\\n\",\"$L5f\",\"\\n\",\"$L60\",\"\\n\",\"$L61\",\"\\n\",\"$L62\",\"\\n\",\"$L63\",\"\\n\",\"$L64\",\"\\n\",\"$L65\",\"\\n\",\"$L66\",\"\\n\",\"$L67\",\"\\n\",\"$L68\",\"\\n\",\"$L69\",\"\\n\",\"$L6a\",\"\\n\",\"$L6b\",\"\\n\",\"$L6c\",\"\\n\",\"$L6d\",\"\\n\",\"$L6e\",\"\\n\",\"$L6f\",\"\\n\",\"$L70\",\"\\n\",\"$L71\",\"\\n\",\"$L72\",\"\\n\",\"$L73\",\"\\n\",\"$L74\",\"\\n\",\"$L75\",\"\\n\",\"$L76\",\"\\n\",\"$L77\",\"\\n\",\"$L78\",\"\\n\",\"$L79\",\"\\n\",\"$L7a\",\"\\n\",\"$L7b\",\"\\n\",\"$L7c\",\"\\n\",\"$L7d\",\"\\n\",\"$L7e\",\"\\n\",\"$L7f\",\"\\n\",\"$L80\",\"\\n\",\"$L81\",\"\\n\",\"$L82\",\"\\n\",\"$L83\",\"\\n\",\"$L84\",\"\\n\",\"$L85\",\"\\n\",\"$L86\",\"\\n\",\"$L87\",\"\\n\",\"$L88\",\"\\n\",\"$L89\",\"\\n\",\"$L8a\",\"\\n\",\"$L8b\",\"\\n\",\"$L8c\",\"\\n\",\"$L8d\",\"\\n\",\"$L8e\",\"\\n\",\"$L8f\",\"\\n\",\"$L90\",\"\\n\",\"$L91\",\"\\n\",\"$L92\",\"\\n\",\"$L93\",\"\\n\",\"$L94\",\"\\n\",\"$L95\",\"\\n\",\"$L96\",\"\\n\",\"$L97\",\"\\n\",\"$L98\",\"\\n\",\"$L99\",\"\\n\",\"$L9a\",\"\\n\",\"$L9b\",\"\\n\",\"$L9c\",\"\\n\",\"$L9d\",\"\\n\",\"$L9e\",\"\\n\",\"$L9f\",\"\\n\",\"$La0\",\"\\n\",\"$La1\",\"\\n\",\"$La2\",\"\\n\",\"$La3\",\"\\n\",\"$La4\",\"\\n\",\"$La5\",\"\\n\",\"$La6\",\"\\n\",\"$La7\",\"\\n\",\"$La8\",\"\\n\",\"$La9\",\"\\n\",\"$Laa\",\"\\n\",\"$Lab\",\"\\n\",\"$Lac\",\"\\n\",\"$Lad\",\"\\n\",\"$Lae\",\"\\n\",\"$Laf\",\"\\n\",\"$Lb0\",\"\\n\",\"$Lb1\",\"\\n\",\"$Lb2\",\"\\n\",\"$Lb3\",\"\\n\",\"$Lb4\",\"\\n\",\"$Lb5\",\"\\n\",\"$Lb6\",\"\\n\",\"$Lb7\",\"\\n\",\"$Lb8\",\"\\n\",\"$Lb9\",\"\\n\",\"$Lba\",\"\\n\",\"$Lbb\",\"\\n\",\"$Lbc\",\"\\n\",\"$Lbd\",\"\\n\",\"$Lbe\",\"\\n\",\"$Lbf\",\"\\n\",\"$Lc0\",\"\\n\",\"$Lc1\",\"\\n\",\"$Lc2\",\"\\n\",\"$Lc3\",\"\\n\",\"$Lc4\",\"\\n\",\"$Lc5\",\"\\n\",\"$Lc6\",\"\\n\",\"$Lc7\",\"\\n\",\"$Lc8\",\"\\n\",\"$Lc9\",\"\\n\",\"$Lca\",\"\\n\",\"$Lcb\",\"\\n\",\"$Lcc\",\"\\n\",\"$Lcd\",\"\\n\",\"$Lce\",\"\\n\",\"$Lcf\",\"\\n\",\"$Ld0\",\"\\n\",\"$Ld1\",\"\\n\",\"$Ld2\",\"\\n\",\"$Ld3\",\"\\n\",\"$Ld4\",\"\\n\",\"$Ld5\",\"\\n\",\"$Ld6\",\"\\n\",\"$Ld7\",\"\\n\",\"$Ld8\",\"\\n\",\"$Ld9\",\"\\n\",\"$Lda\",\"\\n\",\"$Ldb\",\"\\n\",\"$Ldc\"]}]]}]}]\n"])</script><script>self.__next_f.push([1,"e:[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$response-\u003eok() : bool;                  // 200 OK\\n$response-\u003ecreated() : bool;             // 201 Created\\n$response-\u003eaccepted() : bool;            // 202 Accepted\\n$response-\u003enoContent() : bool;           // 204 No Content\\n$response-\u003emovedPermanently() : bool;    // 301 Moved Permanently\\n$response-\u003efound() : bool;               // 302 Found\\n$response-\u003ebadRequest() : bool;          // 400 Bad Request\\n$response-\u003eunauthorized() : bool;        // 401 Unauthorized\\n$response-\u003epaymentRequired() : bool;     // 402 Payment Required\\n$response-\u003eforbidden() : bool;           // 403 Forbidden\\n$response-\u003enotFound() : bool;            // 404 Not Found\\n$response-\u003erequestTimeout() : bool;      // 408 Request Timeout\\n$response-\u003econflict() : bool;            // 409 Conflict\\n$response-\u003eunprocessableEntity() : bool; // 422 Unprocessable Entity\\n$response-\u003etooManyRequests() : bool;     // 429 Too Many Requests\\n$response-\u003eserverError() : bool;         // 500 Internal Server Error\\n\"}]\nf:[\"$\",\"a\",null,{\"name\":\"uri-templates\"}]\n10:[\"$\",\"h4\",null,{\"id\":\"uri-模板\",\"children\":[\"$\",\"a\",null,{\"href\":\"#uri-模板\",\"children\":\"URI 模板\"}]}]\n11:[\"$\",\"p\",null,{\"children\":[\"HTTP Client 也允許你使用 \",[\"$\",\"a\",null,{\"href\":\"https://www.rfc-editor.org/rfc/rfc6570\",\"children\":\"URI 模板規範\"}],\" 來建構請求 URL。要定義可由 URI 模板擴展的 URL 參數，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"withUrlParameters\"}],\" 方法：\"]}]\n12:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Http::withUrlParameters([\\n    'endpoint' =\u003e 'https://laravel.com',\\n    'page' =\u003e 'docs',\\n    'version' =\u003e '12.x',\\n    'topic' =\u003e 'validation',\\n])-\u003eget('{+endpoint}/{page}/{version}/{topic}');\\n\"}]}]\n13:[\"$\",\"a\",null,{\"name\":\"dumping-requests\"}]\n14:[\"$\",\"h4\",null,{\"id\":\"傾印請求\",\"children\":[\"$\",\"a\",null,{\"href\":\"#傾印請求\",\"children\":\"傾印請求\"}]}]\n15:[\"$\",\"p\",null,{\"children\":[\"如果你想在發送請求之前傾印 (dump) 輸出的請求實例並終止腳本執行，你可以在請求定義的開頭加上 \",[\"$\",\"code\",null,{\"children\":\"dd\"}],\" 方法：\"]}]\n16:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return Http::dd()-\u003eget('http://example.com');\\n\"}]}]\n17:[\"$\",\"a\",null,{\"name\":\"request-data\"}]\n18:[\"$\",\"h3\",null,{\"id\":\"請求資料\",\"children\":[\"$\",\"a\",null,{\"href\":\"#請求資料\",\"children\":\"請求資料\"}]}]\n19:[\"$\",\"p\",null,{\"children\":[\"當然，在發送 \",[\"$\",\"code\",null,{\"children\":\"POST\"}],\", \",[\"$\",\"code\",null,{\"children\":\"PUT\"}],\", 和 \",[\"$\",\"code\",null,{\"children\":\"PATCH\"}],\" 請求時，通常會隨請求發送額外的資料，因此這些方法接受一個資料陣列作為第二個參數。預設情況下，資料將使用 \",[\"$\",\"code\",null,{\"children\":\"application/json\"}],\" 內容類型發送：\"]}]\n1a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Http;\\n\\n$response = Http::post('http://example.com/users', [\\n    'name' =\u003e 'Steve',\\n    'role' =\u003e 'Network Administrator',\\n]);\\n\"}]}]\n1b:[\"$\",\"a\",null,{\"name\":\"get-request-query-parameters\"}]\n1c:[\"$\",\"h4\",null,{\"id\":\"get-請求查詢參數\",\"children\":[\"$\",\"a\",null,{\"href\":\"#get-請求查詢參數\",\"children\":\"GET 請求查詢參數\"}]}]\n1d:[\"$\",\"p\",null,{\"children\":[\"在發送 \",[\"$\",\"code\",null,{\"children\":\"GET\"}],\" 請求時，你可以直接將查詢字串附加到 URL，或是將鍵/值對陣列作為第二個參數傳遞給 \",[\"$\",\"code\",null,{\"children\":\"get\"}],\" 方法：\"]}]\n1e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$response = Http::get('http://example.com/users', [\\n    'name' =\u003e 'Taylor',\\n    'page' =\u003e 1,\\n]);\\n\"}]}]\n1f:[\"$\",\"p\",null,{\"children\":[\"或者，也可以使用 \",[\"$\",\"code\",null,{\"children\":\"withQueryParameters\"}],\" 方法：\"]}]\n20:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Http::retry(3, 100)-\u003ewithQueryParameters([\\n    'name' ="])</script><script>self.__next_f.push([1,"\u003e 'Taylor',\\n    'page' =\u003e 1,\\n])-\u003eget('http://example.com/users');\\n\"}]}]\n21:[\"$\",\"a\",null,{\"name\":\"sending-form-url-encoded-requests\"}]\n22:[\"$\",\"h4\",null,{\"id\":\"發送-form-url-encoded-請求\",\"children\":[\"$\",\"a\",null,{\"href\":\"#發送-form-url-encoded-請求\",\"children\":\"發送 Form URL Encoded 請求\"}]}]\n23:[\"$\",\"p\",null,{\"children\":[\"如果你想使用 \",[\"$\",\"code\",null,{\"children\":\"application/x-www-form-urlencoded\"}],\" 內容類型發送資料，你應該在發送請求之前呼叫 \",[\"$\",\"code\",null,{\"children\":\"asForm\"}],\" 方法：\"]}]\n24:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$response = Http::asForm()-\u003epost('http://example.com/users', [\\n    'name' =\u003e 'Sara',\\n    'role' =\u003e 'Privacy Consultant',\\n]);\\n\"}]}]\n25:[\"$\",\"a\",null,{\"name\":\"sending-a-raw-request-body\"}]\n26:[\"$\",\"h4\",null,{\"id\":\"發送原始請求內容-raw-request-body\",\"children\":[\"$\",\"a\",null,{\"href\":\"#發送原始請求內容-raw-request-body\",\"children\":\"發送原始請求內容 (Raw Request Body)\"}]}]\n27:[\"$\",\"p\",null,{\"children\":[\"如果你想在發送請求時提供原始請求內容，可以使用 \",[\"$\",\"code\",null,{\"children\":\"withBody\"}],\" 方法。內容類型可以透過該方法的第二個參數提供：\"]}]\n28:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$response = Http::withBody(\\n    base64_encode($photo), 'image/jpeg'\\n)-\u003epost('http://example.com/photo');\\n\"}]}]\n29:[\"$\",\"a\",null,{\"name\":\"multi-part-requests\"}]\n2a:[\"$\",\"h4\",null,{\"id\":\"multi-part-請求\",\"children\":[\"$\",\"a\",null,{\"href\":\"#multi-part-請求\",\"children\":\"Multi-Part 請求\"}]}]\n2b:[\"$\",\"p\",null,{\"children\":[\"如果你想將檔案作為 multi-part 請求發送，你應該在發送請求之前呼叫 \",[\"$\",\"code\",null,{\"children\":\"attach\"}],\" 方法。此方法接受檔案名稱及其內容。如果需要，你可以提供第三個參數作為檔案的檔名，而第四個參數可用於提供與該檔案相關的標頭：\"]}]\n2c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$response = Http::attach(\\n    'attachment', file_get_contents('photo.jpg'), 'photo.jpg', ['Content-Type' =\u003e 'image/jpeg']\\n)-\u003epost('http://example.com/attachments');\\n\"}]}]\n2d:[\"$\",\"p\",null,{\"children\":\"除了傳遞檔案的原始內容，你也可以傳遞一個 stream resource：\"}]\n2e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$photo = fopen('photo.jpg', 'r');\\n\\n$response = Http::attach(\\n    'attachment', $photo, 'photo.jpg'\\n)-\u003epost('http://example.com/attachments');\\n\"}]}]\n2f:[\"$\",\"a\",null,{\"name\":\"headers\"}]\n30:[\"$\",\"h3\",null,{\"id\":\"標頭\",\"children\":[\"$\",\"a\",null,{\"href\":\"#標頭\",\"children\":\"標頭\"}]}]\n31:[\"$\",\"p\",null,{\"children\":[\"可以使用 \",[\"$\",\"code\",null,{\"children\":\"withHeaders\"}],\" 方法將標頭添加到請求中。此 \",[\"$\",\"code\",null,{\"children\":\"withHeaders\"}],\" 方法接受一個鍵/值對陣列：\"]}]\n32:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$response = Http::withHeaders([\\n    'X-First' =\u003e 'foo',\\n    'X-Second' =\u003e 'bar'\\n])-\u003epost('http://example.com/users', [\\n    'name' =\u003e 'Taylor',\\n]);\\n\"}]}]\n33:[\"$\",\"p\",null,{\"children\":[\"你可以使用 \",[\"$\",\"code\",null,{\"children\":\"accept\"}],\" 方法指定你的應用程式期望回應的內容類型：\"]}]\n34:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$response = Http::accept('application/json')-\u003eget('http://example.com/users');\\n\"}]}]\n35:[\"$\",\"p\",null,{\"children\":[\"為了方便起見，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"acceptJson\"}],\" 方法快速指定你的應用程式期望回應 \",[\"$\",\"code\",null,{\"children\":\"application/json\"}],\" 內容類型：\"]}]\n36:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$response = Http::acceptJson()-\u003eget('http://example.com/users');\\n\"}]}]\n37:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"withHeaders\"}],\" 方法會將新的標頭合併到請求現有的標頭中。"])</script><script>self.__next_f.push([1,"如果需要，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"replaceHeaders\"}],\" 方法完全替換所有標頭：\"]}]\n38:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$response = Http::withHeaders([\\n    'X-Original' =\u003e 'foo',\\n])-\u003ereplaceHeaders([\\n    'X-Replacement' =\u003e 'bar',\\n])-\u003epost('http://example.com/users', [\\n    'name' =\u003e 'Taylor',\\n]);\\n\"}]}]\n39:[\"$\",\"a\",null,{\"name\":\"authentication\"}]\n3a:[\"$\",\"h3\",null,{\"id\":\"認證\",\"children\":[\"$\",\"a\",null,{\"href\":\"#認證\",\"children\":\"認證\"}]}]\n3b:[\"$\",\"p\",null,{\"children\":[\"你可以分別使用 \",[\"$\",\"code\",null,{\"children\":\"withBasicAuth\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"withDigestAuth\"}],\" 方法指定 Basic 和 Digest 認證憑證：\"]}]\n3c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"// Basic authentication...\\n$response = Http::withBasicAuth('taylor@laravel.com', 'secret')-\u003epost(/* ... */);\\n\\n// Digest authentication...\\n$response = Http::withDigestAuth('taylor@laravel.com', 'secret')-\u003epost(/* ... */);\\n\"}]}]\n3d:[\"$\",\"a\",null,{\"name\":\"bearer-tokens\"}]\n3e:[\"$\",\"h4\",null,{\"id\":\"bearer-tokens\",\"children\":[\"$\",\"a\",null,{\"href\":\"#bearer-tokens\",\"children\":\"Bearer Tokens\"}]}]\n3f:[\"$\",\"p\",null,{\"children\":[\"如果你想快速將 Bearer token 添加到請求的 \",[\"$\",\"code\",null,{\"children\":\"Authorization\"}],\" 標頭，可以使用 \",[\"$\",\"code\",null,{\"children\":\"withToken\"}],\" 方法：\"]}]\n40:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$response = Http::withToken('token')-\u003epost(/* ... */);\\n\"}]}]\n41:[\"$\",\"a\",null,{\"name\":\"timeout\"}]\n42:[\"$\",\"h3\",null,{\"id\":\"逾時\",\"children\":[\"$\",\"a\",null,{\"href\":\"#逾時\",\"children\":\"逾時\"}]}]\n43:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"timeout\"}],\" 方法可用於指定等待回應的最大秒數。預設情況下，HTTP client 將在 30 秒後逾時：\"]}]\n44:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$response = Http::timeout(3)-\u003eget(/* ... */);\\n\"}]}]\n45:[\"$\",\"p\",null,{\"children\":[\"如果超過給定的逾時時間，將會拋出 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\ConnectionException\"}],\" 實例。\"]}]\n46:[\"$\",\"p\",null,{\"children\":[\"你可以使用 \",[\"$\",\"code\",null,{\"children\":\"connectTimeout\"}],\" 方法指定嘗試連線到伺服器的最大等待秒數。預設為 10 秒：\"]}]\n47:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$response = Http::connectTimeout(3)-\u003eget(/* ... */);\\n\"}]}]\n48:[\"$\",\"a\",null,{\"name\":\"retries\"}]\n49:[\"$\",\"h3\",null,{\"id\":\"重試\",\"children\":[\"$\",\"a\",null,{\"href\":\"#重試\",\"children\":\"重試\"}]}]\n4a:[\"$\",\"p\",null,{\"children\":[\"如果你希望 HTTP client 在發生客戶端或伺服器錯誤時自動重試請求，可以使用 \",[\"$\",\"code\",null,{\"children\":\"retry\"}],\" 方法。\",[\"$\",\"code\",null,{\"children\":\"retry\"}],\" 方法接受請求應嘗試的最大次數以及 Laravel 在兩次嘗試之間應等待的毫秒數：\"]}]\n4b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$response = Http::retry(3, 100)-\u003epost(/* ... */);\\n\"}]}]\n4c:[\"$\",\"p\",null,{\"children\":[\"如果你想手動計算嘗試之間休眠的毫秒數，可以傳遞一個閉包作為 \",[\"$\",\"code\",null,{\"children\":\"retry\"}],\" 方法的第二個參數：\"]}]\n4d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Exception;\\n\\n$response = Http::retry(3, function (int $attempt, Exception $exception) {\\n    return $attempt * 100;\\n})-\u003epost(/* ... */);\\n\"}]}]\n4e:[\"$\",\"p\",null,{\"children\":[\"為了方便起見，你也可以提供一個陣列作為 \",[\"$\",\"code\",null,{\"children\":\"retry\"}],\" 方法的第一個參數。此陣列將用於確定在後續嘗試之間休眠多少毫秒：\"]}]\n4f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$response = Http::retry([100, 200])-\u003epost(/* ... */);\\n\"}]}]\n50:[\"$\",\"p\",null,{\"children\":[\"如果需要，你可以傳遞第三個參數給 \",[\"$\","])</script><script>self.__next_f.push([1,"\"code\",null,{\"children\":\"retry\"}],\" 方法。第三個參數應該是一個 callable，用於確定是否應該實際嘗試重試。例如，你可能只想在初始請求遇到 \",[\"$\",\"code\",null,{\"children\":\"ConnectionException\"}],\" 時重試請求：\"]}]\n51:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Exception;\\nuse Illuminate\\\\Http\\\\Client\\\\PendingRequest;\\n\\n$response = Http::retry(3, 100, function (Exception $exception, PendingRequest $request) {\\n    return $exception instanceof ConnectionException;\\n})-\u003epost(/* ... */);\\n\"}]}]\n52:[\"$\",\"p\",null,{\"children\":[\"如果請求嘗試失敗，你可能希望在進行新的嘗試之前更改請求。你可以透過修改提供給 \",[\"$\",\"code\",null,{\"children\":\"retry\"}],\" 方法的 callable 的 request 參數來實現這一點。例如，如果第一次嘗試返回了身份驗證錯誤，你可能希望使用新的授權 token 重試請求：\"]}]\n53:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Exception;\\nuse Illuminate\\\\Http\\\\Client\\\\PendingRequest;\\nuse Illuminate\\\\Http\\\\Client\\\\RequestException;\\n\\n$response = Http::withToken($this-\u003egetToken())-\u003eretry(2, 0, function (Exception $exception, PendingRequest $request) {\\n    if (! $exception instanceof RequestException || $exception-\u003eresponse-\u003estatus() !== 401) {\\n        return false;\\n    }\\n\\n    $request-\u003ewithToken($this-\u003egetNewToken());\\n\\n    return true;\\n})-\u003epost(/* ... */);\\n\"}]}]\n54:[\"$\",\"p\",null,{\"children\":[\"如果所有請求都失敗，將拋出 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\RequestException\"}],\" 實例。如果你想禁用此行為，可以提供一個值為 \",[\"$\",\"code\",null,{\"children\":\"false\"}],\" 的 \",[\"$\",\"code\",null,{\"children\":\"throw\"}],\" 參數。禁用時，在所有重試都嘗試過後，將回傳客戶端收到的最後一個回應：\"]}]\n55:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$response = Http::retry(3, 100, throw: false)-\u003epost(/* ... */);\\n\"}]}]\n56:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\n如果所有請求都因為連線問題而失敗，即使 \",[\"$\",\"code\",null,{\"children\":\"throw\"}],\" 參數設定為 \",[\"$\",\"code\",null,{\"children\":\"false\"}],\"，仍然會拋出 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\ConnectionException\"}],\"。\"]}],\"\\n\"]}]\n57:[\"$\",\"a\",null,{\"name\":\"error-handling\"}]\n58:[\"$\",\"h3\",null,{\"id\":\"錯誤處理\",\"children\":[\"$\",\"a\",null,{\"href\":\"#錯誤處理\",\"children\":\"錯誤處理\"}]}]\n59:[\"$\",\"p\",null,{\"children\":[\"與 Guzzle 的預設行為不同，Laravel 的 HTTP client 封裝器不會在客戶端或伺服器錯誤（來自伺服器的 \",[\"$\",\"code\",null,{\"children\":\"400\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"500\"}],\" 級別回應）時拋出異常。你可以使用 \",[\"$\",\"code\",null,{\"children\":\"successful\"}],\", \",[\"$\",\"code\",null,{\"children\":\"clientError\"}],\", 或 \",[\"$\",\"code\",null,{\"children\":\"serverError\"}],\" 方法來判斷是否返回了這些錯誤之一：\"]}]\n5a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"// Determine if the status code is \u003e= 200 and \u003c 300...\\n$response-\u003esuccessful();\\n\\n// Determine if the status code is \u003e= 400...\\n$response-\u003efailed();\\n\\n// Determine if the response has a 400 level status code...\\n$response-\u003eclientError();\\n\\n// Determine if the response has a 500 level status code...\\n$response-\u003eserverError();\\n\\n// Immediately execute the given callback if there was a client or server error...\\n$response-\u003eonError(callable $callback);\\n\"}]}]\n5b:[\"$\",\"a\",null,{\"name\":\"throwing-exceptions\"}]\n5c:[\"$\",\"h4\",null,{\"id\":\"拋出異常\",\"children\":[\"$\",\"a\",null,{\"href\":\"#拋出異常\",\"children\":\"拋出異常\"}]}]\n5d:[\"$\",\"p\",null,{\"children\":[\"如果你有一個回應實例，並且希望在回應狀態碼指示客戶端或伺服器錯誤時拋出 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\RequestException\"}],\" 實例，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"throw\"}],\""])</script><script>self.__next_f.push([1," 或 \",[\"$\",\"code\",null,{\"children\":\"throwIf\"}],\" 方法：\"]}]\n5e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Http\\\\Client\\\\Response;\\n\\n$response = Http::post(/* ... */);\\n\\n// Throw an exception if a client or server error occurred...\\n$response-\u003ethrow();\\n\\n// Throw an exception if an error occurred and the given condition is true...\\n$response-\u003ethrowIf($condition);\\n\\n// Throw an exception if an error occurred and the given closure resolves to true...\\n$response-\u003ethrowIf(fn (Response $response) =\u003e true);\\n\\n// Throw an exception if an error occurred and the given condition is false...\\n$response-\u003ethrowUnless($condition);\\n\\n// Throw an exception if an error occurred and the given closure resolves to false...\\n$response-\u003ethrowUnless(fn (Response $response) =\u003e false);\\n\\n// Throw an exception if the response has a specific status code...\\n$response-\u003ethrowIfStatus(403);\\n\\n// Throw an exception unless the response has a specific status code...\\n$response-\u003ethrowUnlessStatus(200);\\n\\nreturn $response['user']['id'];\\n\"}]}]\n5f:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\RequestException\"}],\" 實例有一個公開的 \",[\"$\",\"code\",null,{\"children\":\"$$response\"}],\" 屬性，允許你檢查返回的回應。\"]}]\n60:[\"$\",\"p\",null,{\"children\":[\"如果沒有發生錯誤，\",[\"$\",\"code\",null,{\"children\":\"throw\"}],\" 方法將回傳回應實例，允許你將其他操作鏈接到 \",[\"$\",\"code\",null,{\"children\":\"throw\"}],\" 方法上：\"]}]\n61:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return Http::post(/* ... */)-\u003ethrow()-\u003ejson();\\n\"}]}]\n62:[\"$\",\"p\",null,{\"children\":[\"如果你想在拋出異常之前執行一些額外的邏輯，你可以將一個閉包傳遞給 \",[\"$\",\"code\",null,{\"children\":\"throw\"}],\" 方法。異常將在閉包被調用後自動拋出，因此你不需要在閉包內重新拋出異常：\"]}]\n63:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Http\\\\Client\\\\Response;\\nuse Illuminate\\\\Http\\\\Client\\\\RequestException;\\n\\nreturn Http::post(/* ... */)-\u003ethrow(function (Response $response, RequestException $e) {\\n    // ...\\n})-\u003ejson();\\n\"}]}]\n64:[\"$\",\"p\",null,{\"children\":[\"預設情況下，\",[\"$\",\"code\",null,{\"children\":\"RequestException\"}],\" 訊息在記錄或報告時會被截斷為 120 個字元。要自定義或禁用此行為，你可以在 \",[\"$\",\"code\",null,{\"children\":\"bootstrap/app.php\"}],\" 檔案中配置應用程式的註冊行為時使用 \",[\"$\",\"code\",null,{\"children\":\"truncateAt\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"dontTruncate\"}],\" 方法：\"]}]\n65:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Http\\\\Client\\\\RequestException;\\n\\n-\u003eregistered(function (): void {\\n    // Truncate request exception messages to 240 characters...\\n    RequestException::truncateAt(240);\\n\\n    // Disable request exception message truncation...\\n    RequestException::dontTruncate();\\n})\\n\"}]}]\n66:[\"$\",\"p\",null,{\"children\":[\"或者，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"truncateExceptionsAt\"}],\" 方法自定義每個請求的異常截斷行為：\"]}]\n67:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return Http::truncateExceptionsAt(240)-\u003epost(/* ... */);\\n\"}]}]\n68:[\"$\",\"a\",null,{\"name\":\"guzzle-middleware\"}]\n69:[\"$\",\"h3\",null,{\"id\":\"guzzle-middleware\",\"children\":[\"$\",\"a\",null,{\"href\":\"#guzzle-middleware\",\"children\":\"Guzzle Middleware\"}]}]\n6a:[\"$\",\"p\",null,{\"children\":[\"由於 Laravel 的 HTTP client 是由 Guzzle 驅動的，你可以利用 \",[\"$\",\"a\",null,{\"href\":\"https://docs.guzzlephp.org/en/stable/handlers-and-middleware.html\",\"children\":\"Guzzle Middleware\"}],\" 來操作輸出的請求或檢查輸入的回應。要操作輸出的請求，請透過 \",[\"$\",\"code\",null,{\"children\":\"withRequestMiddleware\"}],\" 方法註冊 Guzzle middleware：\"]}]\n6b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"us"])</script><script>self.__next_f.push([1,"e Illuminate\\\\Support\\\\Facades\\\\Http;\\nuse Psr\\\\Http\\\\Message\\\\RequestInterface;\\n\\n$response = Http::withRequestMiddleware(\\n    function (RequestInterface $request) {\\n        return $request-\u003ewithHeader('X-Example', 'Value');\\n    }\\n)-\u003eget('http://example.com');\\n\"}]}]\n6c:[\"$\",\"p\",null,{\"children\":[\"同樣地，你可以透過 \",[\"$\",\"code\",null,{\"children\":\"withResponseMiddleware\"}],\" 方法註冊 middleware 來檢查輸入的 HTTP 回應：\"]}]\n6d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Http;\\nuse Psr\\\\Http\\\\Message\\\\ResponseInterface;\\n\\n$response = Http::withResponseMiddleware(\\n    function (ResponseInterface $response) {\\n        $header = $response-\u003egetHeader('X-Example');\\n\\n        // ...\\n\\n        return $response;\\n    }\\n)-\u003eget('http://example.com');\\n\"}]}]\n6e:[\"$\",\"a\",null,{\"name\":\"global-middleware\"}]\n6f:[\"$\",\"h4\",null,{\"id\":\"全域-middleware\",\"children\":[\"$\",\"a\",null,{\"href\":\"#全域-middleware\",\"children\":\"全域 Middleware\"}]}]\n70:[\"$\",\"p\",null,{\"children\":[\"有時，你可能希望註冊一個適用於每個輸出請求和輸入回應的 middleware。要實現這一點，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"globalRequestMiddleware\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"globalResponseMiddleware\"}],\" 方法。通常，這些方法應該在應用程式的 \",[\"$\",\"code\",null,{\"children\":\"AppServiceProvider\"}],\" 的 \",[\"$\",\"code\",null,{\"children\":\"boot\"}],\" 方法中調用：\"]}]\n71:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Http;\\n\\nHttp::globalRequestMiddleware(fn ($request) =\u003e $request-\u003ewithHeader(\\n    'User-Agent', 'Example Application/1.0'\\n));\\n\\nHttp::globalResponseMiddleware(fn ($response) =\u003e $response-\u003ewithHeader(\\n    'X-Finished-At', now()-\u003etoDateTimeString()\\n));\\n\"}]}]\n72:[\"$\",\"a\",null,{\"name\":\"guzzle-options\"}]\n73:[\"$\",\"h3\",null,{\"id\":\"guzzle-選項\",\"children\":[\"$\",\"a\",null,{\"href\":\"#guzzle-選項\",\"children\":\"Guzzle 選項\"}]}]\n74:[\"$\",\"p\",null,{\"children\":[\"你可以使用 \",[\"$\",\"code\",null,{\"children\":\"withOptions\"}],\" 方法為輸出請求指定額外的 \",[\"$\",\"a\",null,{\"href\":\"http://docs.guzzlephp.org/en/stable/request-options.html\",\"children\":\"Guzzle 請求選項\"}],\"。\",[\"$\",\"code\",null,{\"children\":\"withOptions\"}],\" 方法接受一個鍵/值對陣列：\"]}]\n75:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$response = Http::withOptions([\\n    'debug' =\u003e true,\\n])-\u003eget('http://example.com/users');\\n\"}]}]\n76:[\"$\",\"a\",null,{\"name\":\"global-options\"}]\n77:[\"$\",\"h4\",null,{\"id\":\"全域選項\",\"children\":[\"$\",\"a\",null,{\"href\":\"#全域選項\",\"children\":\"全域選項\"}]}]\n78:[\"$\",\"p\",null,{\"children\":[\"要為每個輸出請求配置預設選項，你可以利用 \",[\"$\",\"code\",null,{\"children\":\"globalOptions\"}],\" 方法。通常，此方法應該從應用程式的 \",[\"$\",\"code\",null,{\"children\":\"AppServiceProvider\"}],\" 的 \",[\"$\",\"code\",null,{\"children\":\"boot\"}],\" 方法中調用：\"]}]\n79:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Http;\\n\\n/**\\n * Bootstrap any application services.\\n */\\npublic function boot(): void\\n{\\n    Http::globalOptions([\\n        'allow_redirects' =\u003e false,\\n    ]);\\n}\\n\"}]}]\n7a:[\"$\",\"a\",null,{\"name\":\"concurrent-requests\"}]\n7b:[\"$\",\"h2\",null,{\"id\":\"並發請求\",\"children\":[\"$\",\"a\",null,{\"href\":\"#並發請求\",\"children\":\"並發請求\"}]}]\n7c:[\"$\",\"p\",null,{\"children\":\"有時，你可能希望並發發送多個 HTTP 請求。換句話說，你希望同時發送多個請求，而不是按順序發送請求。這在與緩慢的 HTTP API 互動時可以顯著提高效能。\"}]\n7d:[\"$\",\"a\",null,{\"name\":\"request-pooling\"}]\n7e:[\"$\",\"h3\",null,{\"id\":\"請求池\",\"children\":[\"$\",\"a\",null,{\"href\":\"#請求池\",\"children\":\"請求池\"}]}]\n7f:[\"$\",\"p\",null,{\"children\":[\"幸運的是，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"pool\"}],\" 方法來實現這一點。\",[\"$\",\"code\",null,{\"children"])</script><script>self.__next_f.push([1,"\":\"pool\"}],\" 方法接受一個閉包，該閉包接收一個 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\Pool\"}],\" 實例，允許你輕鬆地將請求添加到請求池中以進行調度：\"]}]\n80:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Http\\\\Client\\\\Pool;\\nuse Illuminate\\\\Support\\\\Facades\\\\Http;\\n\\n$responses = Http::pool(fn (Pool $pool) =\u003e [\\n    $pool-\u003eget('http://localhost/first'),\\n    $pool-\u003eget('http://localhost/second'),\\n    $pool-\u003eget('http://localhost/third'),\\n]);\\n\\nreturn $responses[0]-\u003eok() \u0026\u0026\\n       $responses[1]-\u003eok() \u0026\u0026\\n       $responses[2]-\u003eok();\\n\"}]}]\n81:[\"$\",\"p\",null,{\"children\":[\"如你所見，每個回應實例都可以根據它被添加到池中的順序來存取。如果你願意，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"as\"}],\" 方法為請求命名，這允許你按名稱存取相應的回應：\"]}]\n82:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Http\\\\Client\\\\Pool;\\nuse Illuminate\\\\Support\\\\Facades\\\\Http;\\n\\n$responses = Http::pool(fn (Pool $pool) =\u003e [\\n    $pool-\u003eas('first')-\u003eget('http://localhost/first'),\\n    $pool-\u003eas('second')-\u003eget('http://localhost/second'),\\n    $pool-\u003eas('third')-\u003eget('http://localhost/third'),\\n]);\\n\\nreturn $responses['first']-\u003eok();\\n\"}]}]\n83:[\"$\",\"p\",null,{\"children\":[\"請求池的最大並發數可以透過向 \",[\"$\",\"code\",null,{\"children\":\"pool\"}],\" 方法提供 \",[\"$\",\"code\",null,{\"children\":\"concurrency\"}],\" 參數來控制。此值決定了在處理請求池時可以同時進行的最大 HTTP 請求數量：\"]}]\n84:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$responses = Http::pool(fn (Pool $pool) =\u003e [\\n    // ...\\n], concurrency: 5);\\n\"}]}]\n85:[\"$\",\"a\",null,{\"name\":\"customizing-concurrent-requests\"}]\n86:[\"$\",\"h4\",null,{\"id\":\"自定義並發請求\",\"children\":[\"$\",\"a\",null,{\"href\":\"#自定義並發請求\",\"children\":\"自定義並發請求\"}]}]\n87:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"pool\"}],\" 方法不能與其他 HTTP client 方法（如 \",[\"$\",\"code\",null,{\"children\":\"withHeaders\"}],\" 或 \",[\"$\",\"code\",null,{\"children\":\"middleware\"}],\" 方法）鏈接。如果你想將自定義標頭或 middleware 應用於池中的請求，你應該在池中的每個請求上配置這些選項：\"]}]\n88:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Http\\\\Client\\\\Pool;\\nuse Illuminate\\\\Support\\\\Facades\\\\Http;\\n\\n$headers = [\\n    'X-Example' =\u003e 'example',\\n];\\n\\n$responses = Http::pool(fn (Pool $pool) =\u003e [\\n    $pool-\u003ewithHeaders($headers)-\u003eget('http://laravel.test/test'),\\n    $pool-\u003ewithHeaders($headers)-\u003eget('http://laravel.test/test'),\\n    $pool-\u003ewithHeaders($headers)-\u003eget('http://laravel.test/test'),\\n]);\\n\"}]}]\n89:[\"$\",\"a\",null,{\"name\":\"request-batching\"}]\n8a:[\"$\",\"h3\",null,{\"id\":\"請求批次處理\",\"children\":[\"$\",\"a\",null,{\"href\":\"#請求批次處理\",\"children\":\"請求批次處理\"}]}]\n8b:[\"$\",\"p\",null,{\"children\":[\"在 Laravel 中處理並發請求的另一種方法是使用 \",[\"$\",\"code\",null,{\"children\":\"batch\"}],\" 方法。與 \",[\"$\",\"code\",null,{\"children\":\"pool\"}],\" 方法一樣，它接受一個閉包，該閉包接收一個 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\Batch\"}],\" 實例，允許你輕鬆地將請求添加到請求池中以進行調度，但它也允許你定義完成回呼：\"]}]\n8c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Http\\\\Client\\\\Batch;\\nuse Illuminate\\\\Http\\\\Client\\\\ConnectionException;\\nuse Illuminate\\\\Http\\\\Client\\\\RequestException;\\nuse Illuminate\\\\Http\\\\Client\\\\Response;\\nuse Illuminate\\\\Support\\\\Facades\\\\Http;\\n\\n$responses = Http::batch(fn (Batch $batch) =\u003e [\\n    $batch-\u003eget('http://localhost/first'),\\n    $batch-\u003eget('http://localhost/second'),\\n    $batch-\u003eget('http://localhost/third'),\\n])-\u003ebefore(function (Batch $batch) {\\n    // The batch has been created but no requests have been initialize"])</script><script>self.__next_f.push([1,"d...\\n})-\u003eprogress(function (Batch $batch, int|string $key, Response $response) {\\n    // An individual request has completed successfully...\\n})-\u003ethen(function (Batch $batch, array $results) {\\n    // All requests completed successfully...\\n})-\u003ecatch(function (Batch $batch, int|string $key, Response|RequestException|ConnectionException $response) {\\n    // First batch request failure detected...\\n})-\u003efinally(function (Batch $batch, array $results) {\\n    // The batch has finished executing...\\n})-\u003esend();\\n\"}]}]\n8d:[\"$\",\"p\",null,{\"children\":[\"與 \",[\"$\",\"code\",null,{\"children\":\"pool\"}],\" 方法一樣，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"as\"}],\" 方法為你的請求命名：\"]}]\n8e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$responses = Http::batch(fn (Batch $batch) =\u003e [\\n    $batch-\u003eas('first')-\u003eget('http://localhost/first'),\\n    $batch-\u003eas('second')-\u003eget('http://localhost/second'),\\n    $batch-\u003eas('third')-\u003eget('http://localhost/third'),\\n])-\u003esend();\\n\"}]}]\n8f:[\"$\",\"p\",null,{\"children\":[\"在呼叫 \",[\"$\",\"code\",null,{\"children\":\"send\"}],\" 方法啟動 \",[\"$\",\"code\",null,{\"children\":\"batch\"}],\" 後，你不能向其添加新請求。嘗試這樣做將導致拋出 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\BatchInProgressException\"}],\" 異常。\"]}]\n90:[\"$\",\"p\",null,{\"children\":[\"請求批次處理的最大並發數可以透過 \",[\"$\",\"code\",null,{\"children\":\"concurrency\"}],\" 方法控制。此值決定了在處理請求批次處理時可以同時進行的最大 HTTP 請求數量：\"]}]\n91:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$responses = Http::batch(fn (Batch $batch) =\u003e [\\n    // ...\\n])-\u003econcurrency(5)-\u003esend();\\n\"}]}]\n92:[\"$\",\"a\",null,{\"name\":\"inspecting-batches\"}]\n93:[\"$\",\"h4\",null,{\"id\":\"檢查批次處理\",\"children\":[\"$\",\"a\",null,{\"href\":\"#檢查批次處理\",\"children\":\"檢查批次處理\"}]}]\n94:[\"$\",\"p\",null,{\"children\":[\"提供給批次處理完成回呼的 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\Batch\"}],\" 實例具有各種屬性和方法，可協助你與給定的請求批次處理進行互動和檢查：\"]}]\n95:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"// The number of requests assigned to the batch...\\n$batch-\u003etotalRequests;\\n \\n// The number of requests that have not been processed yet...\\n$batch-\u003ependingRequests;\\n \\n// The number of requests that have failed...\\n$batch-\u003efailedRequests;\\n\\n// The number of requests that have been processed thus far...\\n$batch-\u003eprocessedRequests();\\n\\n// Indicates if the batch has finished executing...\\n$batch-\u003efinished();\\n\\n// Indicates if the batch has request failures...\\n$batch-\u003ehasFailures();\\n\"}]}]\n96:[\"$\",\"a\",null,{\"name\":\"deferring-batches\"}]\n97:[\"$\",\"h4\",null,{\"id\":\"延遲批次處理\",\"children\":[\"$\",\"a\",null,{\"href\":\"#延遲批次處理\",\"children\":\"延遲批次處理\"}]}]\n98:[\"$\",\"p\",null,{\"children\":[\"當呼叫 \",[\"$\",\"code\",null,{\"children\":\"defer\"}],\" 方法時，請求批次處理不會立即執行。相反，Laravel 將在當前應用程式請求的 HTTP 回應發送給使用者後執行批次處理，讓你的應用程式感覺快速且反應靈敏：\"]}]\n99:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Http\\\\Client\\\\Batch;\\nuse Illuminate\\\\Support\\\\Facades\\\\Http;\\n\\n$responses = Http::batch(fn (Batch $batch) =\u003e [\\n    $batch-\u003eget('http://localhost/first'),\\n    $batch-\u003eget('http://localhost/second'),\\n    $batch-\u003eget('http://localhost/third'),\\n])-\u003ethen(function (Batch $batch, array $results) {\\n    // All requests completed successfully...\\n})-\u003edefer();\\n\"}]}]\n9a:[\"$\",\"a\",null,{\"name\":\"macros\"}]\n9b:[\"$\",\"h2\",null,{\"id\":\"巨集\",\"children\":[\"$\",\"a\",null,{\"href\":\"#巨集\",\"children\":\"巨集\"}]}]\n9c:[\"$\",\"p\",null,{\"children\":[\"Laravel HTTP client 允許你定義「巨集 (macros)」，這可以作為一種流暢、表達性強的機制，在與應用程式中的服務互動時配置常見的請求路徑和標頭。要開"])</script><script>self.__next_f.push([1,"始使用，你可以在應用程式的 \",[\"$\",\"code\",null,{\"children\":\"App\\\\Providers\\\\AppServiceProvider\"}],\" 類別的 \",[\"$\",\"code\",null,{\"children\":\"boot\"}],\" 方法中定義巨集：\"]}]\n9d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Http;\\n\\n/**\\n * Bootstrap any application services.\\n */\\npublic function boot(): void\\n{\\n    Http::macro('github', function () {\\n        return Http::withHeaders([\\n            'X-Example' =\u003e 'example',\\n        ])-\u003ebaseUrl('https://github.com');\\n    });\\n}\\n\"}]}]\n9e:[\"$\",\"p\",null,{\"children\":\"配置好巨集後，你可以從應用程式的任何位置調用它，以建立具有指定配置的待處理請求：\"}]\n9f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$response = Http::github()-\u003eget('/');\\n\"}]}]\na0:[\"$\",\"a\",null,{\"name\":\"testing\"}]\na1:[\"$\",\"h2\",null,{\"id\":\"測試\",\"children\":[\"$\",\"a\",null,{\"href\":\"#測試\",\"children\":\"測試\"}]}]\na2:[\"$\",\"p\",null,{\"children\":[\"許多 Laravel 服務提供功能來幫助你輕鬆且表達性地編寫測試，Laravel 的 HTTP client 也不例外。\",[\"$\",\"code\",null,{\"children\":\"Http\"}],\" facade 的 \",[\"$\",\"code\",null,{\"children\":\"fake\"}],\" 方法允許你指示 HTTP client 在發出請求時返回 stubbed / dummy 回應。\"]}]\na3:[\"$\",\"a\",null,{\"name\":\"faking-responses\"}]\na4:[\"$\",\"h3\",null,{\"id\":\"偽造回應\",\"children\":[\"$\",\"a\",null,{\"href\":\"#偽造回應\",\"children\":\"偽造回應\"}]}]\na5:[\"$\",\"p\",null,{\"children\":[\"例如，要指示 HTTP client 為每個請求返回空的 \",[\"$\",\"code\",null,{\"children\":\"200\"}],\" 狀態碼回應，你可以不帶參數呼叫 \",[\"$\",\"code\",null,{\"children\":\"fake\"}],\" 方法：\"]}]\na6:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Http;\\n\\nHttp::fake();\\n\\n$response = Http::post(/* ... */);\\n\"}]}]\na7:[\"$\",\"a\",null,{\"name\":\"faking-specific-urls\"}]\na8:[\"$\",\"h4\",null,{\"id\":\"偽造特定-url\",\"children\":[\"$\",\"a\",null,{\"href\":\"#偽造特定-url\",\"children\":\"偽造特定 URL\"}]}]\na9:[\"$\",\"p\",null,{\"children\":[\"或者，你可以將一個陣列傳遞給 \",[\"$\",\"code\",null,{\"children\":\"fake\"}],\" 方法。陣列的鍵應該代表你希望偽造的 URL 模式及其關聯的回應。\",[\"$\",\"code\",null,{\"children\":\"*\"}],\" 字元可用作萬用字元。你可以使用 \",[\"$\",\"code\",null,{\"children\":\"Http\"}],\" facade 的 \",[\"$\",\"code\",null,{\"children\":\"response\"}],\" 方法為這些端點建構 stub / fake 回應：\"]}]\naa:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Http::fake([\\n    // Stub a JSON response for GitHub endpoints...\\n    'github.com/*' =\u003e Http::response(['foo' =\u003e 'bar'], 200, $headers),\\n\\n    // Stub a string response for Google endpoints...\\n    'google.com/*' =\u003e Http::response('Hello World', 200, $headers),\\n]);\\n\"}]}]\nab:[\"$\",\"p\",null,{\"children\":[\"任何向未被偽造的 URL 發出的請求都將實際執行。如果你想指定一個 fallback URL 模式來 stub 所有未匹配的 URL，你可以使用單個 \",[\"$\",\"code\",null,{\"children\":\"*\"}],\" 字元：\"]}]\nac:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Http::fake([\\n    // Stub a JSON response for GitHub endpoints...\\n    'github.com/*' =\u003e Http::response(['foo' =\u003e 'bar'], 200, ['Headers']),\\n\\n    // Stub a string response for all other endpoints...\\n    '*' =\u003e Http::response('Hello World', 200, ['Headers']),\\n]);\\n\"}]}]\nad:[\"$\",\"p\",null,{\"children\":\"為了方便起見，可以透過提供字串、陣列或整數作為回應來生成簡單的字串、JSON 和空回應：\"}]\nae:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Http::fake([\\n    'google.com/*' =\u003e 'Hello World',\\n    'github.com/*' =\u003e ['foo' =\u003e 'bar'],\\n    'chatgpt.com/*' =\u003e 200,\\n]);\\n\"}]}]\naf:[\"$\",\"a\",null,{\"name\":\"faking-connection-exceptions\"}]\nb0:[\"$\",\"h4\",null,{\"id\":\"偽造異常\",\"children\":[\"$\",\"a\",null,{\"href\":\"#偽造異常\",\"children\":\"偽造異常\"}]}]\nb1:[\"$\",\"p\",null"])</script><script>self.__next_f.push([1,",{\"children\":[\"有時你可能需要測試你的應用程式在 HTTP client 嘗試發出請求時遇到 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\ConnectionException\"}],\" 的行為。你可以使用 \",[\"$\",\"code\",null,{\"children\":\"failedConnection\"}],\" 方法指示 HTTP client 拋出連線異常：\"]}]\nb2:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Http::fake([\\n    'github.com/*' =\u003e Http::failedConnection(),\\n]);\\n\"}]}]\nb3:[\"$\",\"p\",null,{\"children\":[\"要測試你的應用程式在拋出 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\RequestException\"}],\" 時的行為，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"failedRequest\"}],\" 方法：\"]}]\nb4:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Http::fake([\\n    'github.com/*' =\u003e Http::failedRequest(['code' =\u003e 'not_found'], 404),\\n]);\\n\"}]}]\nb5:[\"$\",\"a\",null,{\"name\":\"faking-response-sequences\"}]\nb6:[\"$\",\"h4\",null,{\"id\":\"偽造回應序列\",\"children\":[\"$\",\"a\",null,{\"href\":\"#偽造回應序列\",\"children\":\"偽造回應序列\"}]}]\nb7:[\"$\",\"p\",null,{\"children\":[\"有時你可能需要指定單個 URL 應按特定順序返回一系列偽造回應。你可以使用 \",[\"$\",\"code\",null,{\"children\":\"Http::sequence\"}],\" 方法來建構回應：\"]}]\nb8:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Http::fake([\\n    // Stub a series of responses for GitHub endpoints...\\n    'github.com/*' =\u003e Http::sequence()\\n        -\u003epush('Hello World', 200)\\n        -\u003epush(['foo' =\u003e 'bar'], 200)\\n        -\u003epushStatus(404),\\n]);\\n\"}]}]\nb9:[\"$\",\"p\",null,{\"children\":[\"當回應序列中的所有回應都被消耗後，任何進一步的請求都將導致回應序列拋出異常。如果你想指定當序列為空時應返回的預設回應，可以使用 \",[\"$\",\"code\",null,{\"children\":\"whenEmpty\"}],\" 方法：\"]}]\nba:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Http::fake([\\n    // Stub a series of responses for GitHub endpoints...\\n    'github.com/*' =\u003e Http::sequence()\\n        -\u003epush('Hello World', 200)\\n        -\u003epush(['foo' =\u003e 'bar'], 200)\\n        -\u003ewhenEmpty(Http::response()),\\n]);\\n\"}]}]\nbb:[\"$\",\"p\",null,{\"children\":[\"如果你想偽造一系列回應，但不需要指定應偽造的特定 URL 模式，可以使用 \",[\"$\",\"code\",null,{\"children\":\"Http::fakeSequence\"}],\" 方法：\"]}]\nbc:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Http::fakeSequence()\\n    -\u003epush('Hello World', 200)\\n    -\u003ewhenEmpty(Http::response());\\n\"}]}]\nbd:[\"$\",\"a\",null,{\"name\":\"fake-callback\"}]\nbe:[\"$\",\"h4\",null,{\"id\":\"fake-callback\",\"children\":[\"$\",\"a\",null,{\"href\":\"#fake-callback\",\"children\":\"Fake Callback\"}]}]\nbf:[\"$\",\"p\",null,{\"children\":[\"如果你需要更複雜的邏輯來確定為某些端點返回什麼回應，你可以將一個閉包傳遞給 \",[\"$\",\"code\",null,{\"children\":\"fake\"}],\" 方法。此閉包將接收一個 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\Request\"}],\" 實例，並應返回一個回應實例。在你的閉包中，你可以執行任何必要的邏輯來確定要返回什麼類型的回應：\"]}]\nc0:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Http\\\\Client\\\\Request;\\n\\nHttp::fake(function (Request $request) {\\n    return Http::response('Hello World', 200);\\n});\\n\"}]}]\nc1:[\"$\",\"a\",null,{\"name\":\"inspecting-requests\"}]\nc2:[\"$\",\"h3\",null,{\"id\":\"檢查請求\",\"children\":[\"$\",\"a\",null,{\"href\":\"#檢查請求\",\"children\":\"檢查請求\"}]}]\nc3:[\"$\",\"p\",null,{\"children\":[\"在偽造回應時，你可能偶爾希望檢查客戶端收到的請求，以確保你的應用程式發送了正確的資料或標頭。你可以在呼叫 \",[\"$\",\"code\",null,{\"children\":\"Http::fake\"}],\" 之後呼叫 \",[\"$\",\"code\",null,{\"children\":\"Http::assertSent\"}],\" 方法來實現這一點。\"]}]\nc4:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"assertSent\"}],\" 方法接受一個閉包，該閉包將接收一個 \",[\"$\",\"c"])</script><script>self.__next_f.push([1,"ode\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\Request\"}],\" 實例，並應返回一個布林值，指示請求是否符合你的期望。為了使測試通過，必須至少發出一個符合給定期望的請求：\"]}]\nc5:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Http\\\\Client\\\\Request;\\nuse Illuminate\\\\Support\\\\Facades\\\\Http;\\n\\nHttp::fake();\\n\\nHttp::withHeaders([\\n    'X-First' =\u003e 'foo',\\n])-\u003epost('http://example.com/users', [\\n    'name' =\u003e 'Taylor',\\n    'role' =\u003e 'Developer',\\n]);\\n\\nHttp::assertSent(function (Request $request) {\\n    return $request-\u003ehasHeader('X-First', 'foo') \u0026\u0026\\n           $request-\u003eurl() == 'http://example.com/users' \u0026\u0026\\n           $request['name'] == 'Taylor' \u0026\u0026\\n           $request['role'] == 'Developer';\\n});\\n\"}]}]\nc6:[\"$\",\"p\",null,{\"children\":[\"如果需要，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"assertNotSent\"}],\" 方法斷言未發送特定請求：\"]}]\nc7:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Http\\\\Client\\\\Request;\\nuse Illuminate\\\\Support\\\\Facades\\\\Http;\\n\\nHttp::fake();\\n\\nHttp::post('http://example.com/users', [\\n    'name' =\u003e 'Taylor',\\n    'role' =\u003e 'Developer',\\n]);\\n\\nHttp::assertNotSent(function (Request $request) {\\n    return $request-\u003eurl() === 'http://example.com/posts';\\n});\\n\"}]}]\nc8:[\"$\",\"p\",null,{\"children\":[\"你可以使用 \",[\"$\",\"code\",null,{\"children\":\"assertSentCount\"}],\" 方法斷言在測試期間「發送」了多少個請求：\"]}]\nc9:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Http::fake();\\n\\nHttp::assertSentCount(5);\\n\"}]}]\nca:[\"$\",\"p\",null,{\"children\":[\"或者，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"assertNothingSent\"}],\" 方法斷言在測試期間沒有發送任何請求：\"]}]\ncb:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Http::fake();\\n\\nHttp::assertNothingSent();\\n\"}]}]\ncc:[\"$\",\"a\",null,{\"name\":\"recording-requests-and-responses\"}]\ncd:[\"$\",\"h4\",null,{\"id\":\"記錄請求--回應\",\"children\":[\"$\",\"a\",null,{\"href\":\"#記錄請求--回應\",\"children\":\"記錄請求 / 回應\"}]}]\nce:[\"$\",\"p\",null,{\"children\":[\"你可以使用 \",[\"$\",\"code\",null,{\"children\":\"recorded\"}],\" 方法收集所有請求及其相應的回應。\",[\"$\",\"code\",null,{\"children\":\"recorded\"}],\" 方法返回一個包含 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\Request\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\Response\"}],\" 實例的陣列集合：\"]}]\ncf:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Http::fake([\\n    'https://laravel.com' =\u003e Http::response(status: 500),\\n    'https://nova.laravel.com/' =\u003e Http::response(),\\n]);\\n\\nHttp::get('https://laravel.com');\\nHttp::get('https://nova.laravel.com/');\\n\\n$recorded = Http::recorded();\\n\\n[$request, $response] = $recorded[0];\\n\"}]}]\nd0:[\"$\",\"p\",null,{\"children\":[\"此外，\",[\"$\",\"code\",null,{\"children\":\"recorded\"}],\" 方法接受一個閉包，該閉包將接收 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\Request\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\Response\"}],\" 實例，並可用於根據你的期望過濾請求 / 回應對：\"]}]\nd1:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Http\\\\Client\\\\Request;\\nuse Illuminate\\\\Http\\\\Client\\\\Response;\\n\\nHttp::fake([\\n    'https://laravel.com' =\u003e Http::response(status: 500),\\n    'https://nova.laravel.com/' =\u003e Http::response(),\\n]);\\n\\nHttp::get('https://laravel.com');\\nHttp::get('https://nova.laravel.com/');\\n\\n$recorded = Http::recorded(function (Request $request, Response $response) {\\n    return $request-\u003eurl() !== 'https://laravel.com' \u0026\u0026\\n           $response-\u003esuccessful();\\n});\\n\"}]}]\nd2:[\"$\",\"a\",null,{\"name\":\"preventing-stray-requests\"}]\nd3:[\"$\",\"h3\",null,{\"id\":\"防止意外請求\",\"children\":[\"$\",\"a\",null,{\"href\":\"#防止意外請求\",\"children\":\"防止意外請求\"}]}]\nd4:[\"$\",\"p\",null,{\"ch"])</script><script>self.__next_f.push([1,"ildren\":[\"如果你想確保在整個單個測試或完整測試套件中透過 HTTP client 發送的所有請求都已被偽造，你可以呼叫 \",[\"$\",\"code\",null,{\"children\":\"preventStrayRequests\"}],\" 方法。呼叫此方法後，任何沒有相應偽造回應的請求都將拋出異常，而不是發出實際的 HTTP 請求：\"]}]\nd5:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Http;\\n\\nHttp::preventStrayRequests();\\n\\nHttp::fake([\\n    'github.com/*' =\u003e Http::response('ok'),\\n]);\\n\\n// An \\\"ok\\\" response is returned...\\nHttp::get('https://github.com/laravel/framework');\\n\\n// An exception is thrown...\\nHttp::get('https://laravel.com');\\n\"}]}]\nd6:[\"$\",\"p\",null,{\"children\":[\"有時，你可能希望防止大多數意外請求，但仍允許執行特定請求。要實現這一點，你可以將 URL 模式陣列傳遞給 \",[\"$\",\"code\",null,{\"children\":\"allowStrayRequests\"}],\" 方法。任何匹配給定模式之一的請求都將被允許，而所有其他請求將繼續拋出異常：\"]}]\nd7:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Http;\\n\\nHttp::preventStrayRequests();\\n\\nHttp::allowStrayRequests([\\n    'http://127.0.0.1:5000/*',\\n]);\\n\\n// This request is executed...\\nHttp::get('http://127.0.0.1:5000/generate');\\n\\n// An exception is thrown...\\nHttp::get('https://laravel.com');\\n\"}]}]\nd8:[\"$\",\"a\",null,{\"name\":\"events\"}]\nd9:[\"$\",\"h2\",null,{\"id\":\"事件\",\"children\":[\"$\",\"a\",null,{\"href\":\"#事件\",\"children\":\"事件\"}]}]\nda:[\"$\",\"p\",null,{\"children\":[\"Laravel 在發送 HTTP 請求的過程中會觸發三個事件。\",[\"$\",\"code\",null,{\"children\":\"RequestSending\"}],\" 事件在發送請求之前觸發，而 \",[\"$\",\"code\",null,{\"children\":\"ResponseReceived\"}],\" 事件在收到給定請求的回應後觸發。如果未收到給定請求的回應，則會觸發 \",[\"$\",\"code\",null,{\"children\":\"ConnectionFailed\"}],\" 事件。\"]}]\ndb:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"RequestSending\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"ConnectionFailed\"}],\" 事件都包含一個公開的 \",[\"$\",\"code\",null,{\"children\":\"$$request\"}],\" 屬性，你可以使用它來檢查 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\Request\"}],\" 實例。同樣地，\",[\"$\",\"code\",null,{\"children\":\"ResponseReceived\"}],\" 事件包含一個 \",[\"$\",\"code\",null,{\"children\":\"$$request\"}],\" 屬性以及一個 \",[\"$\",\"code\",null,{\"children\":\"$$response\"}],\" 屬性，可用於檢查 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Client\\\\Response\"}],\" 實例。你可以在應用程式中為這些事件建立 \",[\"$\",\"a\",null,{\"href\":\"/docs/events\",\"children\":\"event listeners\"}],\"：\"]}]\ndc:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Http\\\\Client\\\\Events\\\\RequestSending;\\n\\nclass LogRequest\\n{\\n    /**\\n     * Handle the event.\\n     */\\n    public function handle(RequestSending $event): void\\n    {\\n        // $event-\u003erequest ...\\n    }\\n}\\n\"}]}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"dd:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$Ldd\",\"3\",{}]]\n8:null\n"])</script></body></html>