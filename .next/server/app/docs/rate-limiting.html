<!DOCTYPE html><!--0lISzds8vnU9N34ubzJcA--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/bc6e94e20a39014e.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/cbd55ab9639e1e66.js"/><script src="/_next/static/chunks/87a939617be2fa8c.js" async=""></script><script src="/_next/static/chunks/8368f298651cbd89.js" async=""></script><script src="/_next/static/chunks/6740f161f60c6ab5.js" async=""></script><script src="/_next/static/chunks/turbopack-929fc2ce3ca903db.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/247eb132b7f7b574.js" async=""></script><script src="/_next/static/chunks/796e69ae18b2784c.js" async=""></script><script src="/_next/static/chunks/2b257daea29fbb42.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased"><div hidden=""><!--$--><!--/$--></div><div class="flex min-h-screen bg-background"><div class="w-64 border-r bg-background h-screen sticky top-0 hidden md:block"><div class="p-6 font-bold text-xl border-b flex items-center gap-2"><span class="text-red-600">Laravel</span> Docs（中文）</div><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-65px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="p-4 space-y-2"><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>前言</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">發行說明</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>入門</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/installation"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">安裝</button></a><a class="block" href="/docs/configuration"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">配置</button></a><a class="block" href="/docs/structure"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">目錄結構</button></a><a class="block" href="/docs/lifecycle"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">生命週期</button></a><a class="block" href="/docs/frontend"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">前端</button></a><a class="block" href="/docs/starter-kits"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">啟動套件</button></a><a class="block" href="/docs/deployment"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">部署</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>架構</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>基礎功能</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>深入探討</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>安全性</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>資料庫</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>Eloquent ORM</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>測試</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>其他</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>官方套件</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div class="border-t pt-4 space-y-2"><a class="block" href="/docs/api"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">API 文件</button></a><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">更新日誌</button></a></div></div></div></div></div></div><main class="flex-1 relative"><div class="container mx-auto py-10"><div class="mx-auto max-w-3xl"><div class="mb-8"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Rate Limiting</h1><p class="text-xl text-muted-foreground mt-2">Laravel 提供了簡單易用的速率限制功能</p></div><article class="prose prose-slate dark:prose-invert max-w-none"><h1 id="速率限制-rate-limiting"><a href="#速率限制-rate-limiting">速率限制 (Rate Limiting)</a></h1>
<ul>
<li><a href="#introduction">簡介 (Introduction)</a>
<ul>
<li><a href="#cache-configuration">快取設定 (Cache Configuration)</a></li>
</ul>
</li>
<li><a href="#basic-usage">基本用法 (Basic Usage)</a>
<ul>
<li><a href="#manually-incrementing-attempts">手動遞增嘗試次數 (Manually Incrementing Attempts)</a></li>
<li><a href="#clearing-attempts">清除嘗試次數 (Clearing Attempts)</a></li>
</ul>
</li>
</ul>
<a name="introduction"></a>
<h2 id="簡介"><a href="#簡介">簡介</a></h2>
<p>Laravel 包含一個簡單易用的速率限制抽象層，它結合你的應用程式的 <a href="cache">快取</a>，提供了一種簡單的方法來限制在指定時間視窗內的任何動作。</p>
<blockquote>
<p>[!NOTE]
如果你對限制傳入 HTTP 請求的速率感興趣，請參閱 <a href="/docs/routing#rate-limiting">速率限制器 middleware 文件</a>。</p>
</blockquote>
<a name="cache-configuration"></a>
<h3 id="快取設定"><a href="#快取設定">快取設定</a></h3>
<p>通常，速率限制器會使用你的應用程式的 <code>cache</code> 設定檔中 <code>default</code> 鍵定義的預設應用程式快取。但是，你可以透過在應用程式的 <code>cache</code> 設定檔中定義 <code>limiter</code> 鍵來指定速率限制器應使用哪個快取驅動程式：</p>
<pre><code class="language-php">&#x27;default&#x27; =&gt; env(&#x27;CACHE_STORE&#x27;, &#x27;database&#x27;),

&#x27;limiter&#x27; =&gt; &#x27;redis&#x27;, // [tl! add]
</code></pre>
<a name="basic-usage"></a>
<h2 id="基本用法"><a href="#基本用法">基本用法</a></h2>
<p><code>Illuminate\Support\Facades\RateLimiter</code> facade 可用於與速率限制器互動。速率限制器提供的最簡單方法是 <code>attempt</code> 方法，它會在給定秒數內對給定的回呼進行速率限制。</p>
<p>當回呼沒有剩餘的嘗試次數時，<code>attempt</code> 方法會傳回 <code>false</code>；否則，<code>attempt</code> 方法將傳回回呼的結果或 <code>true</code>。<code>attempt</code> 方法接受的第一個參數是速率限制器「鍵」，它可以是你選擇的任何字串，代表正在進行速率限制的動作：</p>
<pre><code class="language-php">use Illuminate\Support\Facades\RateLimiter;

$executed = RateLimiter::attempt(
    &#x27;send-message:&#x27;.$user-&gt;id,
    $perMinute = 5,
    function() {
        // Send message...
    }
);

if (! $executed) {
    return &#x27;Too many messages sent!&#x27;;
}
</code></pre>
<p>如果需要，你可以向 <code>attempt</code> 方法提供第四個參數，即「衰減率」，或直到可用嘗試次數重置的秒數。例如，我們可以修改上面的範例，允許每兩分鐘五次嘗試：</p>
<pre><code class="language-php">$executed = RateLimiter::attempt(
    &#x27;send-message:&#x27;.$user-&gt;id,
    $perTwoMinutes = 5,
    function() {
        // Send message...
    },
    $decayRate = 120,
);
</code></pre>
<a name="manually-incrementing-attempts"></a>
<h3 id="手動遞增嘗試次數"><a href="#手動遞增嘗試次數">手動遞增嘗試次數</a></h3>
<p>如果你想手動與速率限制器互動，還有多種其他方法可用。例如，你可以呼叫 <code>tooManyAttempts</code> 方法來確定給定的速率限制器鍵是否已超過其每分鐘允許的最大嘗試次數：</p>
<pre><code class="language-php">use Illuminate\Support\Facades\RateLimiter;

if (RateLimiter::tooManyAttempts(&#x27;send-message:&#x27;.$user-&gt;id, $perMinute = 5)) {
    return &#x27;Too many attempts!&#x27;;
}

RateLimiter::increment(&#x27;send-message:&#x27;.$user-&gt;id);

// Send message...
</code></pre>
<p>或者，你可以使用 <code>remaining</code> 方法來擷取給定鍵的剩餘嘗試次數。如果給定鍵還有剩餘的重試次數，你可以呼叫 <code>increment</code> 方法來遞增總嘗試次數：</p>
<pre><code class="language-php">use Illuminate\Support\Facades\RateLimiter;

if (RateLimiter::remaining(&#x27;send-message:&#x27;.$user-&gt;id, $perMinute = 5)) {
    RateLimiter::increment(&#x27;send-message:&#x27;.$user-&gt;id);

    // Send message...
}
</code></pre>
<p>如果你想將給定速率限制器鍵的值遞增超過一，你可以向 <code>increment</code> 方法提供所需的數量：</p>
<pre><code class="language-php">RateLimiter::increment(&#x27;send-message:&#x27;.$user-&gt;id, amount: 5);
</code></pre>
<a name="determining-limiter-availability"></a>
<h4 id="判斷限制器可用性"><a href="#判斷限制器可用性">判斷限制器可用性</a></h4>
<p>當一個鍵沒有剩餘嘗試次數時，<code>availableIn</code> 方法會傳回直到有更多嘗試次數可用為止的剩餘秒數：</p>
<pre><code class="language-php">use Illuminate\Support\Facades\RateLimiter;

if (RateLimiter::tooManyAttempts(&#x27;send-message:&#x27;.$user-&gt;id, $perMinute = 5)) {
    $seconds = RateLimiter::availableIn(&#x27;send-message:&#x27;.$user-&gt;id);

    return &#x27;You may try again in &#x27;.$seconds.&#x27; seconds.&#x27;;
}

RateLimiter::increment(&#x27;send-message:&#x27;.$user-&gt;id);

// Send message...
</code></pre>
<a name="clearing-attempts"></a>
<h3 id="清除嘗試次數"><a href="#清除嘗試次數">清除嘗試次數</a></h3>
<p>你可以使用 <code>clear</code> 方法重置給定速率限制器鍵的嘗試次數。例如，當收件者閱讀給定訊息時，你可以重置嘗試次數：</p>
<pre><code class="language-php">use App\Models\Message;
use Illuminate\Support\Facades\RateLimiter;

/**
 * Mark the message as read.
 */
public function read(Message $message): Message
{
    $message-&gt;markAsRead();

    RateLimiter::clear(&#x27;send-message:&#x27;.$message-&gt;user_id);

    return $message;
}
</code></pre></article></div></div><!--$--><!--/$--></main></div><script src="/_next/static/chunks/cbd55ab9639e1e66.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n4:I[93649,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/2b257daea29fbb42.js\"],\"DocsSidebar\"]\n6:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"ViewportBoundary\"]\nb:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"MetadataBoundary\"]\nd:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/bc6e94e20a39014e.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"0lISzds8vnU9N34ubzJcA\",\"c\":[\"\",\"docs\",\"rate-limiting\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"rate-limiting\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/bc6e94e20a39014e.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/796e69ae18b2784c.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/2b257daea29fbb42.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"div\",null,{\"className\":\"flex min-h-screen bg-background\",\"children\":[[\"$\",\"$L4\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 relative\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"className\":\"container mx-auto py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-3xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl\",\"children\":\"Rate Limiting\"}],[\"$\",\"p\",null,{\"className\":\"text-xl text-muted-foreground mt-2\",\"children\":\"Laravel 提供了簡單易用的速率限制功能\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"速率限制-rate-limiting\",\"children\":[\"$\",\"a\",null,{\"href\":\"#速率限制-rate-limiting\",\"children\":\"速率限制 (Rate Limiting)\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#introduction\",\"children\":\"簡介 (Introduction)\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#cache-configuration\",\"children\":\"快取設定 (Cache Configuration)\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#basic-usage\",\"children\":\"基本用法 (Basic Usage)\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#manually-incrementing-attempts\",\"children\":\"手動遞增嘗試次數 (Manually Incrementing Attempts)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#clearing-attempts\",\"children\":\"清除嘗試次數 (Clearing Attempts)\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"introduction\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"簡介\",\"children\":[\"$\",\"a\",null,{\"href\":\"#簡介\",\"children\":\"簡介\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Laravel 包含一個簡單易用的速率限制抽象層，它結合你的應用程式的 \",[\"$\",\"a\",null,{\"href\":\"cache\",\"children\":\"快取\"}],\"，提供了一種簡單的方法來限制在指定時間視窗內的任何動作。\"]}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\n如果你對限制傳入 HTTP 請求的速率感興趣，請參閱 \",[\"$\",\"a\",null,{\"href\":\"/docs/routing#rate-limiting\",\"children\":\"速率限制器 middleware 文件\"}],\"。\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"cache-configuration\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"快取設定\",\"children\":[\"$\",\"a\",null,{\"href\":\"#快取設定\",\"children\":\"快取設定\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"通常，速率限制器會使用你的應用程式的 \",[\"$\",\"code\",null,{\"children\":\"cache\"}],\" 設定檔中 \",[\"$\",\"code\",null,{\"children\":\"default\"}],\" 鍵定義的預設應用程式快取。但是，你可以透過在應用程式的 \",[\"$\",\"code\",null,{\"children\":\"cache\"}],\" 設定檔中定義 \",[\"$\",\"code\",null,{\"children\":\"limiter\"}],\" 鍵來指定速率限制器應使用哪個快取驅動程式：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'default' =\u003e env('CACHE_STORE', 'database'),\\n\\n'limiter' =\u003e 'redis', // [tl! add]\\n\"}]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"basic-usage\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"基本用法\",\"children\":[\"$\",\"a\",null,{\"href\":\"#基本用法\",\"children\":\"基本用法\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Support\\\\Facades\\\\RateLimiter\"}],\" facade 可用於與速率限制器互動。速率限制器提供的最簡單方法是 \",[\"$\",\"code\",null,{\"children\":\"attempt\"}],\" 方法，它會在給定秒數內對給定的回呼進行速率限制。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"當回呼沒有剩餘的嘗試次數時，\",[\"$\",\"code\",null,{\"children\":\"attempt\"}],\" 方法會傳回 \",[\"$\",\"code\",null,{\"children\":\"false\"}],\"；否則，\",[\"$\",\"code\",null,{\"children\":\"attempt\"}],\" 方法將傳回回呼的結果或 \",[\"$\",\"code\",null,{\"children\":\"true\"}],\"。\",[\"$\",\"code\",null,{\"children\":\"attempt\"}],\" 方法接受的第一個參數是速率限制器「鍵」，它可以是你選擇的任何字串，代表正在進行速率限制的動作：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\RateLimiter;\\n\\n$executed = RateLimiter::attempt(\\n    'send-message:'.$user-\u003eid,\\n    $perMinute = 5,\\n    function() {\\n        // Send message...\\n    }\\n);\\n\\nif (! $executed) {\\n    return 'Too many messages sent!';\\n}\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"如果需要，你可以向 \",[\"$\",\"code\",null,{\"children\":\"attempt\"}],\" 方法提供第四個參數，即「衰減率」，或直到可用嘗試次數重置的秒數。例如，我們可以修改上面的範例，允許每兩分鐘五次嘗試：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$executed = RateLimiter::attempt(\\n    'send-message:'.$user-\u003eid,\\n    $perTwoMinutes = 5,\\n    function() {\\n        // Send message...\\n    },\\n    $decayRate = 120,\\n);\\n\"}]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"manually-incrementing-attempts\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"手動遞增嘗試次數\",\"children\":[\"$\",\"a\",null,{\"href\":\"#手動遞增嘗試次數\",\"children\":\"手動遞增嘗試次數\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"如果你想手動與速率限制器互動，還有多種其他方法可用。例如，你可以呼叫 \",[\"$\",\"code\",null,{\"children\":\"tooManyAttempts\"}],\" 方法來確定給定的速率限制器鍵是否已超過其每分鐘允許的最大嘗試次數：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\RateLimiter;\\n\\nif (RateLimiter::tooManyAttempts('send-message:'.$user-\u003eid, $perMinute = 5)) {\\n    return 'Too many attempts!';\\n}\\n\\nRateLimiter::increment('send-message:'.$user-\u003eid);\\n\\n// Send message...\\n\"}]}],\"\\n\",\"$Le\",\"\\n\",\"$Lf\",\"\\n\",\"$L10\",\"\\n\",\"$L11\",\"\\n\",\"$L12\",\"\\n\",\"$L13\",\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\"]}]]}]}]\n"])</script><script>self.__next_f.push([1,"e:[\"$\",\"p\",null,{\"children\":[\"或者，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"remaining\"}],\" 方法來擷取給定鍵的剩餘嘗試次數。如果給定鍵還有剩餘的重試次數，你可以呼叫 \",[\"$\",\"code\",null,{\"children\":\"increment\"}],\" 方法來遞增總嘗試次數：\"]}]\nf:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\RateLimiter;\\n\\nif (RateLimiter::remaining('send-message:'.$user-\u003eid, $perMinute = 5)) {\\n    RateLimiter::increment('send-message:'.$user-\u003eid);\\n\\n    // Send message...\\n}\\n\"}]}]\n10:[\"$\",\"p\",null,{\"children\":[\"如果你想將給定速率限制器鍵的值遞增超過一，你可以向 \",[\"$\",\"code\",null,{\"children\":\"increment\"}],\" 方法提供所需的數量：\"]}]\n11:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"RateLimiter::increment('send-message:'.$user-\u003eid, amount: 5);\\n\"}]}]\n12:[\"$\",\"a\",null,{\"name\":\"determining-limiter-availability\"}]\n13:[\"$\",\"h4\",null,{\"id\":\"判斷限制器可用性\",\"children\":[\"$\",\"a\",null,{\"href\":\"#判斷限制器可用性\",\"children\":\"判斷限制器可用性\"}]}]\n14:[\"$\",\"p\",null,{\"children\":[\"當一個鍵沒有剩餘嘗試次數時，\",[\"$\",\"code\",null,{\"children\":\"availableIn\"}],\" 方法會傳回直到有更多嘗試次數可用為止的剩餘秒數：\"]}]\n15:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\RateLimiter;\\n\\nif (RateLimiter::tooManyAttempts('send-message:'.$user-\u003eid, $perMinute = 5)) {\\n    $seconds = RateLimiter::availableIn('send-message:'.$user-\u003eid);\\n\\n    return 'You may try again in '.$seconds.' seconds.';\\n}\\n\\nRateLimiter::increment('send-message:'.$user-\u003eid);\\n\\n// Send message...\\n\"}]}]\n16:[\"$\",\"a\",null,{\"name\":\"clearing-attempts\"}]\n17:[\"$\",\"h3\",null,{\"id\":\"清除嘗試次數\",\"children\":[\"$\",\"a\",null,{\"href\":\"#清除嘗試次數\",\"children\":\"清除嘗試次數\"}]}]\n18:[\"$\",\"p\",null,{\"children\":[\"你可以使用 \",[\"$\",\"code\",null,{\"children\":\"clear\"}],\" 方法重置給定速率限制器鍵的嘗試次數。例如，當收件者閱讀給定訊息時，你可以重置嘗試次數：\"]}]\n19:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Models\\\\Message;\\nuse Illuminate\\\\Support\\\\Facades\\\\RateLimiter;\\n\\n/**\\n * Mark the message as read.\\n */\\npublic function read(Message $message): Message\\n{\\n    $message-\u003emarkAsRead();\\n\\n    RateLimiter::clear('send-message:'.$message-\u003euser_id);\\n\\n    return $message;\\n}\\n\"}]}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"1a:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$L1a\",\"3\",{}]]\n8:null\n"])</script></body></html>