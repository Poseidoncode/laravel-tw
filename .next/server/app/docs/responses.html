<!DOCTYPE html><!--064VbOcPM65IQylKQ_S9h--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/8d8bfdb8c7183f74.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/cbd55ab9639e1e66.js"/><script src="/_next/static/chunks/87a939617be2fa8c.js" async=""></script><script src="/_next/static/chunks/8368f298651cbd89.js" async=""></script><script src="/_next/static/chunks/6740f161f60c6ab5.js" async=""></script><script src="/_next/static/chunks/turbopack-929fc2ce3ca903db.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/247eb132b7f7b574.js" async=""></script><script src="/_next/static/chunks/796e69ae18b2784c.js" async=""></script><script src="/_next/static/chunks/16ad486f9df855f5.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased"><div hidden=""><!--$--><!--/$--></div><div class="flex min-h-screen bg-background"><div class="w-64 border-r bg-background h-screen sticky top-0 hidden md:block"><div class="p-6 font-bold text-xl border-b flex items-center gap-2"><span class="text-red-600">Laravel</span> Docs（中文）</div><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-65px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="p-4 space-y-2"><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>前言</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">發行說明</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>入門</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/installation"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">安裝</button></a><a class="block" href="/docs/configuration"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">配置</button></a><a class="block" href="/docs/structure"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">目錄結構</button></a><a class="block" href="/docs/lifecycle"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">生命週期</button></a><a class="block" href="/docs/frontend"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">前端</button></a><a class="block" href="/docs/starter-kits"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">啟動套件</button></a><a class="block" href="/docs/deployment"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">部署</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>架構</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>基礎功能</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>深入探討</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>安全性</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>資料庫</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>Eloquent ORM</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>測試</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>其他</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>官方套件</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div class="border-t pt-4 space-y-2"><a class="block" href="/docs/api"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">API 文件</button></a><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">更新日誌</button></a></div></div></div></div></div></div><main class="flex-1 relative"><div class="container mx-auto py-10"><div class="mx-auto max-w-3xl"><div class="mb-8"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">HTTP Response</h1><p class="text-xl text-muted-foreground mt-2">Laravel 提供多種方式回傳 Response,包括字串、陣列、JSON、檔案下載、串流回應等。</p></div><article class="prose prose-slate dark:prose-invert max-w-none"><h1 id="http-response"><a href="#http-response">HTTP Response</a></h1>
<ul>
<li><a href="#creating-responses">建立 Response</a>
<ul>
<li><a href="#attaching-headers-to-responses">將標頭附加到 Response</a></li>
<li><a href="#attaching-cookies-to-responses">將 Cookie 附加到 Response</a></li>
<li><a href="#cookies-and-encryption">Cookie 與加密</a></li>
</ul>
</li>
<li><a href="#redirects">重新導向</a>
<ul>
<li><a href="#redirecting-named-routes">重新導向到命名路由</a></li>
<li><a href="#redirecting-controller-actions">重新導向到 Controller 動作</a></li>
<li><a href="#redirecting-external-domains">重新導向到外部網域</a></li>
<li><a href="#redirecting-with-flashed-session-data">使用快閃的 Session 資料重新導向</a></li>
</ul>
</li>
<li><a href="#other-response-types">其他 Response 類型</a>
<ul>
<li><a href="#view-responses">View Response</a></li>
<li><a href="#json-responses">JSON Response</a></li>
<li><a href="#file-downloads">檔案下載</a></li>
<li><a href="#file-responses">檔案 Response</a></li>
</ul>
</li>
<li><a href="#streamed-responses">串流 Response</a>
<ul>
<li><a href="#consuming-streamed-responses">使用串流 Response</a></li>
<li><a href="#streamed-json-responses">串流 JSON Response</a></li>
<li><a href="#event-streams">事件串流 (SSE)</a></li>
<li><a href="#streamed-downloads">串流下載</a></li>
</ul>
</li>
<li><a href="#response-macros">Response 巨集</a></li>
</ul>
<a name="creating-responses"></a>
<h2 id="建立-response"><a href="#建立-response">建立 Response</a></h2>
<a name="strings-arrays"></a>
<h4 id="字串與陣列"><a href="#字串與陣列">字串與陣列</a></h4>
<p>所有路由和 Controller 都應該回傳一個 Response 以發送回使用者的瀏覽器。Laravel 提供了幾種不同的方式來回傳 Response。最基本的 Response 是從路由或 Controller 回傳字串。框架會自動將字串轉換為完整的 HTTP Response:</p>
<pre><code class="language-php">Route::get(&#x27;/&#x27;, function () {
    return &#x27;Hello World&#x27;;
});
</code></pre>
<p>除了從路由和 Controller 回傳字串之外,你還可以回傳陣列。框架會自動將陣列轉換為 JSON Response:</p>
<pre><code class="language-php">Route::get(&#x27;/&#x27;, function () {
    return [1, 2, 3];
});
</code></pre>
<blockquote>
<p>[!NOTE]
你知道你也可以從路由或 Controller 回傳 <a href="/docs/%7B&#x27;12.x&#x27;%7D/eloquent-collections">Eloquent 集合</a>嗎?它們會自動轉換為 JSON。試試看!</p>
</blockquote>
<a name="response-objects"></a>
<h4 id="response-物件"><a href="#response-物件">Response 物件</a></h4>
<p>通常,你不會只是從路由動作回傳簡單的字串或陣列。相反,你將回傳完整的 <code>Illuminate\Http\Response</code> 實例或 <a href="/docs/%7B&#x27;12.x&#x27;%7D/views">view</a>。</p>
<p>回傳完整的 <code>Response</code> 實例允許你自訂 Response 的 HTTP 狀態碼和標頭。<code>Response</code> 實例繼承自 <code>Symfony\Component\HttpFoundation\Response</code> 類別,它提供了各種建立 HTTP Response 的方法:</p>
<pre><code class="language-php">Route::get(&#x27;/home&#x27;, function () {
    return response(&#x27;Hello World&#x27;, 200)
        -&gt;header(&#x27;Content-Type&#x27;, &#x27;text/plain&#x27;);
});
</code></pre>
<a name="eloquent-models-and-collections"></a>
<h4 id="eloquent-模型與集合"><a href="#eloquent-模型與集合">Eloquent 模型與集合</a></h4>
<p>你也可以直接從路由和 Controller 回傳 <a href="/docs/%7B&#x27;12.x&#x27;%7D/eloquent">Eloquent ORM</a> 模型和集合。當你這樣做時,Laravel 會自動將模型和集合轉換為 JSON Response,同時遵守模型的<a href="/docs/%7B&#x27;12.x&#x27;%7D/eloquent-serialization#hiding-attributes-from-json">隱藏屬性</a>:</p>
<pre><code class="language-php">use App\Models\User;

Route::get(&#x27;/user/{&#x27;{user}&#x27;}&#x27;, function (User $user) {
    return $user;
});
</code></pre>
<a name="attaching-headers-to-responses"></a>
<h3 id="將標頭附加到-response"><a href="#將標頭附加到-response">將標頭附加到 Response</a></h3>
<p>請記住,大多數 Response 方法都是可鏈結的,允許流暢地建構 Response 實例。例如,你可以使用 <code>header</code> 方法在將 Response 發送回使用者之前向 Response 新增一系列標頭:</p>
<pre><code class="language-php">return response($content)
    -&gt;header(&#x27;Content-Type&#x27;, $type)
    -&gt;header(&#x27;X-Header-One&#x27;, &#x27;Header Value&#x27;)
    -&gt;header(&#x27;X-Header-Two&#x27;, &#x27;Header Value&#x27;);
</code></pre>
<p>或者,你可以使用 <code>withHeaders</code> 方法指定要新增到 Response 的標頭陣列:</p>
<pre><code class="language-php">return response($content)
    -&gt;withHeaders([
        &#x27;Content-Type&#x27; =&gt; $type,
        &#x27;X-Header-One&#x27; =&gt; &#x27;Header Value&#x27;,
        &#x27;X-Header-Two&#x27; =&gt; &#x27;Header Value&#x27;,
    ]);
</code></pre>
<a name="cache-control-middleware"></a>
<h4 id="cache-control-middleware"><a href="#cache-control-middleware">Cache Control Middleware</a></h4>
<p>Laravel 包含一個 <code>cache.headers</code> Middleware,可用於快速設定一組路由的 <code>Cache-Control</code> 標頭。指令應使用對應的 cache-control 指令的「蛇形命名法」等效項提供,並應以分號分隔。如果在指令列表中指定了 <code>etag</code>,Response 內容的 MD5 雜湊將自動設定為 ETag 識別碼:</p>
<pre><code class="language-php">Route::middleware(&#x27;cache.headers:public;max_age=2628000;etag&#x27;)-&gt;group(function () {
    Route::get(&#x27;/privacy&#x27;, function () {
        // ...
    });

    Route::get(&#x27;/terms&#x27;, function () {
        // ...
    });
});
</code></pre>
<a name="attaching-cookies-to-responses"></a>
<h3 id="將-cookie-附加到-response"><a href="#將-cookie-附加到-response">將 Cookie 附加到 Response</a></h3>
<p>你可以使用 <code>cookie</code> 方法將 Cookie 附加到傳出的 <code>Illuminate\Http\Response</code> 實例。你應該將名稱、值和 Cookie 應被視為有效的分鐘數傳遞給此方法:</p>
<pre><code class="language-php">return response(&#x27;Hello World&#x27;)-&gt;cookie(
    &#x27;name&#x27;, &#x27;value&#x27;, $minutes
);
</code></pre>
<p><code>cookie</code> 方法還接受一些使用頻率較低的參數。通常,這些參數與給予 PHP 原生 <a href="https://secure.php.net/manual/en/function.setcookie.php">setcookie</a> 方法的參數具有相同的目的和意義:</p>
<pre><code class="language-php">return response(&#x27;Hello World&#x27;)-&gt;cookie(
    &#x27;name&#x27;, &#x27;value&#x27;, $minutes, $path, $domain, $secure, $httpOnly
);
</code></pre>
<p>如果你想確保 Cookie 與傳出的 Response 一起發送,但你還沒有該 Response 的實例,你可以使用 <code>Cookie</code> Facade 將 Cookie 「排隊」以在發送 Response 時附加到 Response。<code>queue</code> 方法接受建立 Cookie 實例所需的參數。這些 Cookie 會在發送到瀏覽器之前附加到傳出的 Response:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Cookie;

Cookie::queue(&#x27;name&#x27;, &#x27;value&#x27;, $minutes);
</code></pre>
<a name="generating-cookie-instances"></a>
<h4 id="產生-cookie-實例"><a href="#產生-cookie-實例">產生 Cookie 實例</a></h4>
<p>如果你想產生一個 <code>Symfony\Component\HttpFoundation\Cookie</code> 實例,該實例可以在稍後附加到 Response 實例,你可以使用全域 <code>cookie</code> 輔助函式。除非將此 Cookie 附加到 Response 實例,否則不會發送回客戶端:</p>
<pre><code class="language-php">$cookie = cookie(&#x27;name&#x27;, &#x27;value&#x27;, $minutes);

return response(&#x27;Hello World&#x27;)-&gt;cookie($cookie);
</code></pre>
<a name="expiring-cookies-early"></a>
<h4 id="提前過期-cookie"><a href="#提前過期-cookie">提前過期 Cookie</a></h4>
<p>你可以透過傳出 Response 的 <code>withoutCookie</code> 方法使其過期來移除 Cookie:</p>
<pre><code class="language-php">return response(&#x27;Hello World&#x27;)-&gt;withoutCookie(&#x27;name&#x27;);
</code></pre>
<p>如果你還沒有傳出 Response 的實例,你可以使用 <code>Cookie</code> Facade 的 <code>expire</code> 方法使 Cookie 過期:</p>
<pre><code class="language-php">Cookie::expire(&#x27;name&#x27;);
</code></pre>
<a name="cookies-and-encryption"></a>
<h3 id="cookie-與加密"><a href="#cookie-與加密">Cookie 與加密</a></h3>
<p>預設情況下,由於 <code>Illuminate\Cookie\Middleware\EncryptCookies</code> Middleware,Laravel 產生的所有 Cookie 都經過加密和簽名,因此客戶端無法修改或讀取它們。如果你想為應用程式產生的 Cookie 子集停用加密,你可以在應用程式的 <code>bootstrap/app.php</code> 檔案中使用 <code>encryptCookies</code> 方法:</p>
<pre><code class="language-php">-&gt;withMiddleware(function (Middleware $middleware): void {
    $middleware-&gt;encryptCookies(except: [
        &#x27;cookie_name&#x27;,
    ]);
})
</code></pre>
<a name="redirects"></a>
<h2 id="重新導向"><a href="#重新導向">重新導向</a></h2>
<p>重新導向 Response 是 <code>Illuminate\Http\RedirectResponse</code> 類別的實例,並包含將使用者重新導向到另一個 URL 所需的適當標頭。有幾種方法可以產生 <code>RedirectResponse</code> 實例。最簡單的方法是使用全域 <code>redirect</code> 輔助函式:</p>
<pre><code class="language-php">Route::get(&#x27;/dashboard&#x27;, function () {
    return redirect(&#x27;/home/dashboard&#x27;);
});
</code></pre>
<p>有時你可能希望將使用者重新導向到其先前的位置,例如當提交的表單無效時。你可以使用全域 <code>back</code> 輔助函式來實現。由於此功能使用 <a href="/docs/%7B&#x27;12.x&#x27;%7D/session">Session</a>,請確保呼叫 <code>back</code> 函式的路由使用 <code>web</code> Middleware 群組:</p>
<pre><code class="language-php">Route::post(&#x27;/user/profile&#x27;, function () {
    // Validate the request...

    return back()-&gt;withInput();
});
</code></pre>
<a name="redirecting-named-routes"></a>
<h3 id="重新導向到命名路由"><a href="#重新導向到命名路由">重新導向到命名路由</a></h3>
<p>當你在沒有參數的情況下呼叫 <code>redirect</code> 輔助函式時,會回傳 <code>Illuminate\Routing\Redirector</code> 的實例,允許你呼叫 <code>Redirector</code> 實例上的任何方法。例如,要產生到命名路由的 <code>RedirectResponse</code>,你可以使用 <code>route</code> 方法:</p>
<pre><code class="language-php">return redirect()-&gt;route(&#x27;login&#x27;);
</code></pre>
<p>如果你的路由有參數,你可以將它們作為第二個參數傳遞給 <code>route</code> 方法:</p>
<pre><code class="language-php">// For a route with the following URI: /profile/{&#x27;{id}&#x27;}

return redirect()-&gt;route(&#x27;profile&#x27;, [&#x27;id&#x27; =&gt; 1]);
</code></pre>
<a name="populating-parameters-via-eloquent-models"></a>
<h4 id="透過-eloquent-模型填充參數"><a href="#透過-eloquent-模型填充參數">透過 Eloquent 模型填充參數</a></h4>
<p>如果你要重新導向到具有從 Eloquent 模型填充的「ID」參數的路由,你可以直接傳遞模型本身。ID 將自動提取:</p>
<pre><code class="language-php">// For a route with the following URI: /profile/{&#x27;{id}&#x27;}

return redirect()-&gt;route(&#x27;profile&#x27;, [$user]);
</code></pre>
<p>如果你想自訂放置在路由參數中的值,你可以在路由參數定義中指定欄位 (<code>/profile/{id:slug}</code>),或者你可以覆寫 Eloquent 模型上的 <code>getRouteKey</code> 方法:</p>
<pre><code class="language-php">/**
 * Get the value of the model&#x27;s route key.
 */
public function getRouteKey(): mixed
{
    return $this-&gt;slug;
}
</code></pre>
<a name="redirecting-controller-actions"></a>
<h3 id="重新導向到-controller-動作"><a href="#重新導向到-controller-動作">重新導向到 Controller 動作</a></h3>
<p>你也可以產生到 <a href="/docs/%7B&#x27;12.x&#x27;%7D/controllers">Controller 動作</a>的重新導向。為此,將 Controller 和動作名稱傳遞給 <code>action</code> 方法:</p>
<pre><code class="language-php">use App\Http\Controllers\UserController;

return redirect()-&gt;action([UserController::class, &#x27;index&#x27;]);
</code></pre>
<p>如果你的 Controller 路由需要參數,你可以將它們作為第二個參數傳遞給 <code>action</code> 方法:</p>
<pre><code class="language-php">return redirect()-&gt;action(
    [UserController::class, &#x27;profile&#x27;], [&#x27;id&#x27; =&gt; 1]
);
</code></pre>
<a name="redirecting-external-domains"></a>
<h3 id="重新導向到外部網域"><a href="#重新導向到外部網域">重新導向到外部網域</a></h3>
<p>有時你可能需要重新導向到應用程式之外的網域。你可以透過呼叫 <code>away</code> 方法來實現,該方法會建立一個 <code>RedirectResponse</code>,而不進行任何額外的 URL 編碼、驗證或驗證:</p>
<pre><code class="language-php">return redirect()-&gt;away(&#x27;https://www.google.com&#x27;);
</code></pre>
<a name="redirecting-with-flashed-session-data"></a>
<h3 id="使用快閃的-session-資料重新導向"><a href="#使用快閃的-session-資料重新導向">使用快閃的 Session 資料重新導向</a></h3>
<p>重新導向到新 URL 並<a href="/docs/%7B&#x27;12.x&#x27;%7D/session#flash-data">將資料快閃到 Session</a> 通常同時完成。通常,這是在成功執行動作後完成的,當你向 Session 快閃成功訊息時。為了方便起見,你可以建立一個 <code>RedirectResponse</code> 實例並在單一流暢的方法鏈中將資料快閃到 Session:</p>
<pre><code class="language-php">Route::post(&#x27;/user/profile&#x27;, function () {
    // ...

    return redirect(&#x27;/dashboard&#x27;)-&gt;with(&#x27;status&#x27;, &#x27;Profile updated!&#x27;);
});
</code></pre>
<p>使用者重新導向後,你可以從 <a href="/docs/%7B&#x27;12.x&#x27;%7D/session">Session</a> 顯示快閃的訊息。例如,使用 <a href="/docs/%7B&#x27;12.x&#x27;%7D/blade">Blade 語法</a>:</p>
<pre><code class="language-blade">@if (session(&#x27;status&#x27;))
    &lt;div className=&quot;alert alert-success&quot;&gt;
        {{ session(&#x27;status&#x27;) }}
    &lt;/div&gt;
@endif
</code></pre>
<a name="redirecting-with-input"></a>
<h4 id="使用輸入重新導向"><a href="#使用輸入重新導向">使用輸入重新導向</a></h4>
<p>你可以使用 <code>RedirectResponse</code> 實例提供的 <code>withInput</code> 方法在將使用者重新導向到新位置之前將當前請求的輸入資料快閃到 Session。如果使用者遇到驗證錯誤,通常會這樣做。一旦輸入被快閃到 Session,你可以在下一次請求期間輕鬆<a href="/docs/%7B&#x27;12.x&#x27;%7D/requests#retrieving-old-input">取得它</a>以重新填充表單:</p>
<pre><code class="language-php">return back()-&gt;withInput();
</code></pre>
<a name="other-response-types"></a>
<h2 id="其他-response-類型"><a href="#其他-response-類型">其他 Response 類型</a></h2>
<p><code>response</code> 輔助函式可用於產生其他類型的 Response 實例。當在沒有參數的情況下呼叫 <code>response</code> 輔助函式時,會回傳 <code>Illuminate\Contracts\Routing\ResponseFactory</code> <a href="/docs/%7B&#x27;12.x&#x27;%7D/contracts">Contract</a> 的實作。此 Contract 提供了幾種有用的方法來產生 Response。</p>
<a name="view-responses"></a>
<h3 id="view-response"><a href="#view-response">View Response</a></h3>
<p>如果你需要控制 Response 的狀態和標頭,但還需要回傳 <a href="/docs/%7B&#x27;12.x&#x27;%7D/views">view</a> 作為 Response 的內容,你應該使用 <code>view</code> 方法:</p>
<pre><code class="language-php">return response()
    -&gt;view(&#x27;hello&#x27;, $data, 200)
    -&gt;header(&#x27;Content-Type&#x27;, $type);
</code></pre>
<p>當然,如果你不需要傳遞自訂 HTTP 狀態碼或自訂標頭,你可以使用全域 <code>view</code> 輔助函式。</p>
<a name="json-responses"></a>
<h3 id="json-response"><a href="#json-response">JSON Response</a></h3>
<p><code>json</code> 方法會自動將 <code>Content-Type</code> 標頭設定為 <code>application/json</code>,並使用 <code>json_encode</code> PHP 函式將給定的陣列轉換為 JSON:</p>
<pre><code class="language-php">return response()-&gt;json([
    &#x27;name&#x27; =&gt; &#x27;Abigail&#x27;,
    &#x27;state&#x27; =&gt; &#x27;CA&#x27;,
]);
</code></pre>
<p>如果你想建立 JSONP Response,你可以將 <code>json</code> 方法與 <code>withCallback</code> 方法結合使用:</p>
<pre><code class="language-php">return response()
    -&gt;json([&#x27;name&#x27; =&gt; &#x27;Abigail&#x27;, &#x27;state&#x27; =&gt; &#x27;CA&#x27;])
    -&gt;withCallback($request-&gt;input(&#x27;callback&#x27;));
</code></pre>
<a name="file-downloads"></a>
<h3 id="檔案下載"><a href="#檔案下載">檔案下載</a></h3>
<p><code>download</code> 方法可用於產生強制使用者瀏覽器下載給定路徑檔案的 Response。<code>download</code> 方法接受檔案名稱作為該方法的第二個參數,這將決定下載檔案的使用者看到的檔案名稱。最後,你可以將 HTTP 標頭陣列作為該方法的第三個參數傳遞:</p>
<pre><code class="language-php">return response()-&gt;download($pathToFile);

return response()-&gt;download($pathToFile, $name, $headers);
</code></pre>
<blockquote>
<p>[!WARNING]
管理檔案下載的 Symfony HttpFoundation 要求正在下載的檔案具有 ASCII 檔案名稱。</p>
</blockquote>
<a name="file-responses"></a>
<h3 id="檔案-response"><a href="#檔案-response">檔案 Response</a></h3>
<p><code>file</code> 方法可用於直接在使用者的瀏覽器中顯示檔案(例如圖片或 PDF),而不是啟動下載。此方法接受檔案的絕對路徑作為其第一個參數,並將標頭陣列作為其第二個參數:</p>
<pre><code class="language-php">return response()-&gt;file($pathToFile);

return response()-&gt;file($pathToFile, $headers);
</code></pre>
<a name="streamed-responses"></a>
<h2 id="串流-response"><a href="#串流-response">串流 Response</a></h2>
<p>透過在產生資料時將其串流到客戶端,你可以顯著減少記憶體使用並提高效能,尤其是對於非常大的 Response。串流 Response 允許客戶端在伺服器完成發送之前開始處理資料:</p>
<pre><code class="language-php">Route::get(&#x27;/stream&#x27;, function () {
    return response()-&gt;stream(function (): void {
        foreach ([&#x27;developer&#x27;, &#x27;admin&#x27;] as $string) {
            echo $string;
            ob_flush();
            flush();
            sleep(2); // Simulate delay between chunks...
        }
    }, 200, [&#x27;X-Accel-Buffering&#x27; =&gt; &#x27;no&#x27;]);
});
</code></pre>
<p>為了方便起見,如果你提供給 <code>stream</code> 方法的閉包回傳一個 <a href="https://www.php.net/manual/en/language.generators.overview.php">Generator</a>,Laravel 會自動在產生器回傳的字串之間刷新輸出緩衝區,並停用 Nginx 輸出緩衝:</p>
<pre><code class="language-php">Route::post(&#x27;/chat&#x27;, function () {
    return response()-&gt;stream(function (): Generator {
        $stream = OpenAI::client()-&gt;chat()-&gt;createStreamed(...);

        foreach ($stream as $response) {
            yield $response-&gt;choices[0];
        }
    });
});
</code></pre>
<a name="consuming-streamed-responses"></a>
<h3 id="使用串流-response"><a href="#使用串流-response">使用串流 Response</a></h3>
<p>串流 Response 可以使用 Laravel 的 <code>stream</code> npm 套件使用,它提供了一個方便的 API 來與 Laravel Response 和事件串流互動。要開始使用,請安裝 <code>@laravel/stream-react</code> 或 <code>@laravel/stream-vue</code> 套件:</p>
<pre><code class="language-shell">npm install @laravel/stream-react
</code></pre>
<pre><code class="language-shell">npm install @laravel/stream-vue
</code></pre>
<p>然後,<code>useStream</code> 可用於使用事件串流。提供你的串流 URL 後,hook 會在從你的 Laravel 應用程式回傳內容時自動使用串聯的 Response 更新 <code>data</code>:</p>
<pre><code class="language-tsx">import { useStream } from &quot;@laravel/stream-react&quot;;

function App() {
  const { data, isFetching, isStreaming, send } = useStream(&quot;chat&quot;);

  const sendMessage = () =&gt; {
    send({
      message: `Current timestamp: ${Date.now()}`,
    });
  };

  return (
    &lt;div&gt;
      &lt;div&gt;{&#x27;{data}&#x27;}&lt;/div&gt;
      {isFetching &amp;&amp; &lt;div&gt;Connecting...&lt;/div&gt;}
      {isStreaming &amp;&amp; &lt;div&gt;Generating...&lt;/div&gt;}
      &lt;button onClick={sendMessage}&gt;Send Message&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<pre><code class="language-vue">&lt;script setup lang=&quot;ts&quot;&gt;
import { useStream } from &quot;@laravel/stream-vue&quot;;

const { data, isFetching, isStreaming, send } = useStream(&quot;chat&quot;);

const sendMessage = () =&gt; {
  send({
    message: `Current timestamp: ${Date.now()}`,
  });
};
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;div&gt;{{ data }}&lt;/div&gt;
    &lt;div v-if=&quot;isFetching&quot;&gt;Connecting...&lt;/div&gt;
    &lt;div v-if=&quot;isStreaming&quot;&gt;Generating...&lt;/div&gt;
    &lt;button @click=&quot;sendMessage&quot;&gt;Send Message&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<p>透過 <code>send</code> 將資料發送回串流時,在發送新資料之前會取消與串流的活動連線。所有請求都作為 JSON <code>POST</code> 請求發送。</p>
<blockquote>
<p>[!WARNING]
由於 <code>useStream</code> hook 向你的應用程式發出 <code>POST</code> 請求,因此需要有效的 CSRF token。提供 CSRF token 的最簡單方法是<a href="/docs/%7B&#x27;12.x&#x27;%7D/csrf#csrf-x-csrf-token">透過應用程式佈局的 head 中的 meta 標籤包含它</a>。</p>
</blockquote>
<p>給予 <code>useStream</code> 的第二個參數是一個選項物件,你可以使用它來自訂串流使用行為。此物件的預設值如下所示:</p>
<pre><code class="language-tsx">import { useStream } from &quot;@laravel/stream-react&quot;;

function App() {
    const { data } = useStream(&quot;chat&quot;, {
        id: undefined,
        initialInput: undefined,
        headers: undefined,
        csrfToken: undefined,
        onResponse: (response: Response) =&gt; void,
        onData: (data: string) =&gt; void,
        onCancel: () =&gt; void,
        onFinish: () =&gt; void,
        onError: (error: Error) =&gt; void,
    });

    return &lt;div&gt;{&#x27;{data}&#x27;}&lt;/div&gt;;
}
</code></pre>
<pre><code class="language-vue">&lt;script setup lang=&quot;ts&quot;&gt;
import { useStream } from &quot;@laravel/stream-vue&quot;;

const { data } = useStream(&quot;chat&quot;, {
    id: undefined,
    initialInput: undefined,
    headers: undefined,
    csrfToken: undefined,
    onResponse: (response: Response) =&gt; void,
    onData: (data: string) =&gt; void,
    onCancel: () =&gt; void,
    onFinish: () =&gt; void,
    onError: (error: Error) =&gt; void,
});
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;{{ data }}&lt;/div&gt;
&lt;/template&gt;
</code></pre>
<p><code>onResponse</code> 在從串流獲得成功的初始回應後觸發,並將原始 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response">Response</a> 傳遞給回呼。<code>onData</code> 在接收到每個區塊時呼叫 - 當前區塊傳遞給回呼。<code>onFinish</code> 在串流完成時以及在 fetch / read 週期期間拋出錯誤時呼叫。</p>
<p>預設情況下,初始化時不會向串流發出請求。你可以使用 <code>initialInput</code> 選項將初始負載傳遞給串流:</p>
<pre><code class="language-tsx">import { useStream } from &quot;@laravel/stream-react&quot;;

function App() {
  const { data } = useStream(&quot;chat&quot;, {
    initialInput: {
      message: &quot;Introduce yourself.&quot;,
    },
  });

  return &lt;div&gt;{&#x27;{data}&#x27;}&lt;/div&gt;;
}
</code></pre>
<pre><code class="language-vue">&lt;script setup lang=&quot;ts&quot;&gt;
import { useStream } from &quot;@laravel/stream-vue&quot;;

const { data } = useStream(&quot;chat&quot;, {
  initialInput: {
    message: &quot;Introduce yourself.&quot;,
  },
});
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;{{ data }}&lt;/div&gt;
&lt;/template&gt;
</code></pre>
<p>要手動取消串流,你可以使用從 hook 回傳的 <code>cancel</code> 方法:</p>
<pre><code class="language-tsx">import { useStream } from &quot;@laravel/stream-react&quot;;

function App() {
  const { data, cancel } = useStream(&quot;chat&quot;);

  return (
    &lt;div&gt;
      &lt;div&gt;{&#x27;{data}&#x27;}&lt;/div&gt;
      &lt;button onClick={&#x27;{cancel}&#x27;}&gt;Cancel&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<pre><code class="language-vue">&lt;script setup lang=&quot;ts&quot;&gt;
import { useStream } from &quot;@laravel/stream-vue&quot;;

const { data, cancel } = useStream(&quot;chat&quot;);
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;div&gt;{{ data }}&lt;/div&gt;
    &lt;button @click=&quot;cancel&quot;&gt;Cancel&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<p>每次使用 <code>useStream</code> hook 時,都會產生一個隨機 <code>id</code> 來識別串流。這會在 <code>X-STREAM-ID</code> 標頭中與每個請求一起發送回伺服器。從多個元件使用相同的串流時,你可以透過提供自己的 <code>id</code> 來讀取和寫入串流:</p>
<pre><code class="language-tsx">// App.tsx
import { useStream } from &quot;@laravel/stream-react&quot;;

function App() {
  const { data, id } = useStream(&quot;chat&quot;);

  return (
    &lt;div&gt;
      &lt;div&gt;{&#x27;{data}&#x27;}&lt;/div&gt;
      &lt;StreamStatus id={&#x27;{id}&#x27;} /&gt;
    &lt;/div&gt;
  );
}

// StreamStatus.tsx
import { useStream } from &quot;@laravel/stream-react&quot;;

function StreamStatus({ id }) {
  const { isFetching, isStreaming } = useStream(&quot;chat&quot;, { id });

  return (
    &lt;div&gt;
      {isFetching &amp;&amp; &lt;div&gt;Connecting...&lt;/div&gt;}
      {isStreaming &amp;&amp; &lt;div&gt;Generating...&lt;/div&gt;}
    &lt;/div&gt;
  );
}
</code></pre>
<pre><code class="language-vue">&lt;!-- App.vue --&gt;
&lt;script setup lang=&quot;ts&quot;&gt;
import { useStream } from &quot;@laravel/stream-vue&quot;;
import StreamStatus from &quot;./StreamStatus.vue&quot;;

const { data, id } = useStream(&quot;chat&quot;);
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;div&gt;{{ data }}&lt;/div&gt;
    &lt;StreamStatus :id=&quot;id&quot; /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;!-- StreamStatus.vue --&gt;
&lt;script setup lang=&quot;ts&quot;&gt;
import { useStream } from &quot;@laravel/stream-vue&quot;;

const props = defineProps&lt;{
  id: string;
}&gt;();

const { isFetching, isStreaming } = useStream(&quot;chat&quot;, { id: props.id });
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;div v-if=&quot;isFetching&quot;&gt;Connecting...&lt;/div&gt;
    &lt;div v-if=&quot;isStreaming&quot;&gt;Generating...&lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<a name="streamed-json-responses"></a>
<h3 id="串流-json-response"><a href="#串流-json-response">串流 JSON Response</a></h3>
<p>如果你需要逐步串流 JSON 資料,你可以使用 <code>streamJson</code> 方法。此方法對於需要逐步發送到瀏覽器的大型資料集特別有用,其格式可以由 JavaScript 輕鬆解析:</p>
<pre><code class="language-php">use App\Models\User;

Route::get(&#x27;/users.json&#x27;, function () {
    return response()-&gt;streamJson([
        &#x27;users&#x27; =&gt; User::cursor(),
    ]);
});
</code></pre>
<p><code>useJsonStream</code> hook 與 <a href="#consuming-streamed-responses">useStream hook</a> 相同,只是它會在串流完成後嘗試將資料解析為 JSON:</p>
<pre><code class="language-tsx">import { useJsonStream } from &quot;@laravel/stream-react&quot;;

type User = {
  id: number;
  name: string;
  email: string;
};

function App() {
  const { data, send } = useJsonStream&lt;{ users: User[] }&gt;(&quot;users&quot;);

  const loadUsers = () =&gt; {
    send({
      query: &quot;taylor&quot;,
    });
  };

  return (
    &lt;div&gt;
      &lt;ul&gt;
        {data?.users.map((user) =&gt; (
          &lt;li&gt;
            {user.id}: {user.name}
          &lt;/li&gt;
        ))}
      &lt;/ul&gt;
      &lt;button onClick={loadUsers}&gt;Load Users&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<pre><code class="language-vue">&lt;script setup lang=&quot;ts&quot;&gt;
import { useJsonStream } from &quot;@laravel/stream-vue&quot;;

type User = {
  id: number;
  name: string;
  email: string;
};

const { data, send } = useJsonStream&lt;{ users: User[] }&gt;(&quot;users&quot;);

const loadUsers = () =&gt; {
  send({
    query: &quot;taylor&quot;,
  });
};
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;ul&gt;
      &lt;li v-for=&quot;user in data?.users&quot; :key=&quot;user.id&quot;&gt;
        {{ user.id }}: {{ user.name }}
      &lt;/li&gt;
    &lt;/ul&gt;
    &lt;button @click=&quot;loadUsers&quot;&gt;Load Users&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<a name="event-streams"></a>
<h3 id="事件串流-sse"><a href="#事件串流-sse">事件串流 (SSE)</a></h3>
<p><code>eventStream</code> 方法可用於使用 <code>text/event-stream</code> 內容類型回傳伺服器發送事件 (SSE) 串流 Response。<code>eventStream</code> 方法接受一個閉包,該閉包應在回應可用時<a href="https://www.php.net/manual/en/language.generators.overview.php">產生</a> Response 到串流:</p>
<pre><code class="language-php">Route::get(&#x27;/chat&#x27;, function () {
    return response()-&gt;eventStream(function () {
        $stream = OpenAI::client()-&gt;chat()-&gt;createStreamed(...);

        foreach ($stream as $response) {
            yield $response-&gt;choices[0];
        }
    });
});
</code></pre>
<p>如果你想自訂事件的名稱,你可以產生 <code>StreamedEvent</code> 類別的實例:</p>
<pre><code class="language-php">use Illuminate\Http\StreamedEvent;

yield new StreamedEvent(
    event: &#x27;update&#x27;,
    data: $response-&gt;choices[0],
);
</code></pre>
<a name="consuming-event-streams"></a>
<h4 id="使用事件串流"><a href="#使用事件串流">使用事件串流</a></h4>
<p>事件串流可以使用 Laravel 的 <code>stream</code> npm 套件使用,它提供了一個方便的 API 來與 Laravel 事件串流互動。要開始使用,請安裝 <code>@laravel/stream-react</code> 或 <code>@laravel/stream-vue</code> 套件:</p>
<pre><code class="language-shell">npm install @laravel/stream-react
</code></pre>
<pre><code class="language-shell">npm install @laravel/stream-vue
</code></pre>
<p>然後,<code>useEventStream</code> 可用於使用事件串流。提供你的串流 URL 後,hook 會在從你的 Laravel 應用程式回傳訊息時自動使用串聯的 Response 更新 <code>message</code>:</p>
<pre><code class="language-jsx">import { useEventStream } from &quot;@laravel/stream-react&quot;;

function App() {
  const { message } = useEventStream(&quot;/chat&quot;);

  return &lt;div&gt;{&#x27;{message}&#x27;}&lt;/div&gt;;
}
</code></pre>
<pre><code class="language-vue">&lt;script setup lang=&quot;ts&quot;&gt;
import { useEventStream } from &quot;@laravel/stream-vue&quot;;

const { message } = useEventStream(&quot;/chat&quot;);
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;{{ message }}&lt;/div&gt;
&lt;/template&gt;
</code></pre>
<p>給予 <code>useEventStream</code> 的第二個參數是一個選項物件,你可以使用它來自訂串流使用行為。此物件的預設值如下所示:</p>
<pre><code class="language-jsx">import { useEventStream } from &quot;@laravel/stream-react&quot;;

function App() {
  const { message } = useEventStream(&quot;/stream&quot;, {
    eventName: &quot;update&quot;,
    onMessage: (message) =&gt; {
      //
    },
    onError: (error) =&gt; {
      //
    },
    onComplete: () =&gt; {
      //
    },
    endSignal: &quot;&lt;/stream&gt;&quot;,
    glue: &quot; &quot;,
  });

  return &lt;div&gt;{&#x27;{message}&#x27;}&lt;/div&gt;;
}
</code></pre>
<pre><code class="language-vue">&lt;script setup lang=&quot;ts&quot;&gt;
import { useEventStream } from &quot;@laravel/stream-vue&quot;;

const { message } = useEventStream(&quot;/chat&quot;, {
  eventName: &quot;update&quot;,
  onMessage: (message) =&gt; {
    // ...
  },
  onError: (error) =&gt; {
    // ...
  },
  onComplete: () =&gt; {
    // ...
  },
  endSignal: &quot;&lt;/stream&gt;&quot;,
  glue: &quot; &quot;,
});
&lt;/script&gt;
</code></pre>
<p>事件串流也可以由你的應用程式前端透過 <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventSource">EventSource</a> 物件手動使用。當串流完成時,<code>eventStream</code> 方法會自動向事件串流發送 <code>&lt;/stream&gt;</code> 更新:</p>
<pre><code class="language-js">const source = new EventSource(&quot;/chat&quot;);

source.addEventListener(&quot;update&quot;, (event) =&gt; {
  if (event.data === &quot;&lt;/stream&gt;&quot;) {
    source.close();

    return;
  }

  console.log(event.data);
});
</code></pre>
<p>要自訂發送到事件串流的最終事件,你可以將 <code>StreamedEvent</code> 實例提供給 <code>eventStream</code> 方法的 <code>endStreamWith</code> 參數:</p>
<pre><code class="language-php">return response()-&gt;eventStream(function () {
    // ...
}, endStreamWith: new StreamedEvent(event: &#x27;update&#x27;, data: &#x27;&lt;/stream&gt;&#x27;));
</code></pre>
<a name="streamed-downloads"></a>
<h3 id="串流下載"><a href="#串流下載">串流下載</a></h3>
<p>有時你可能希望將給定操作的字串 Response 轉換為可下載的 Response,而無需將操作的內容寫入磁碟。在這種情況下,你可以使用 <code>streamDownload</code> 方法。此方法接受回呼、檔案名稱和可選的標頭陣列作為其參數:</p>
<pre><code class="language-php">use App\Services\GitHub;

return response()-&gt;streamDownload(function () {
    echo GitHub::api(&#x27;repo&#x27;)
        -&gt;contents()
        -&gt;readme(&#x27;laravel&#x27;, &#x27;laravel&#x27;)[&#x27;contents&#x27;];
}, &#x27;laravel-readme.md&#x27;);
</code></pre>
<a name="response-macros"></a>
<h2 id="response-巨集"><a href="#response-巨集">Response 巨集</a></h2>
<p>如果你想定義可以在各種路由和 Controller 中重複使用的自訂 Response,你可以使用 <code>Response</code> Facade 上的 <code>macro</code> 方法。通常,你應該從應用程式的<a href="/docs/%7B&#x27;12.x&#x27;%7D/providers">Service Provider</a> 之一的 <code>boot</code> 方法呼叫此方法,例如 <code>App\Providers\AppServiceProvider</code> Service Provider:</p>
<pre><code class="language-php">&lt;?php

namespace App\Providers;

use Illuminate\Support\Facades\Response;
use Illuminate\Support\ServiceProvider;

class AppServiceProvider extends ServiceProvider
{
    /**
     * Bootstrap any application services.
     */
    public function boot(): void
    {
        Response::macro(&#x27;caps&#x27;, function (string $value) {
            return Response::make(strtoupper($value));
        });
    }
}
</code></pre>
<p><code>macro</code> 函式接受名稱作為其第一個參數,閉包作為其第二個參數。當從 <code>ResponseFactory</code> 實作或 <code>response</code> 輔助函式呼叫巨集名稱時,將執行巨集的閉包:</p>
<pre><code class="language-php">return response()-&gt;caps(&#x27;foo&#x27;);
</code></pre></article></div></div><!--$--><!--/$--></main></div><script src="/_next/static/chunks/cbd55ab9639e1e66.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n4:I[93649,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/16ad486f9df855f5.js\"],\"DocsSidebar\"]\n6:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"ViewportBoundary\"]\nb:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"MetadataBoundary\"]\nd:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/8d8bfdb8c7183f74.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"064VbOcPM65IQylKQ-S9h\",\"c\":[\"\",\"docs\",\"responses\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"responses\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/8d8bfdb8c7183f74.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/796e69ae18b2784c.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/16ad486f9df855f5.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"div\",null,{\"className\":\"flex min-h-screen bg-background\",\"children\":[[\"$\",\"$L4\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 relative\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"className\":\"container mx-auto py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-3xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl\",\"children\":\"HTTP Response\"}],[\"$\",\"p\",null,{\"className\":\"text-xl text-muted-foreground mt-2\",\"children\":\"Laravel 提供多種方式回傳 Response,包括字串、陣列、JSON、檔案下載、串流回應等。\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"http-response\",\"children\":[\"$\",\"a\",null,{\"href\":\"#http-response\",\"children\":\"HTTP Response\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#creating-responses\",\"children\":\"建立 Response\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#attaching-headers-to-responses\",\"children\":\"將標頭附加到 Response\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#attaching-cookies-to-responses\",\"children\":\"將 Cookie 附加到 Response\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#cookies-and-encryption\",\"children\":\"Cookie 與加密\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#redirects\",\"children\":\"重新導向\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#redirecting-named-routes\",\"children\":\"重新導向到命名路由\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#redirecting-controller-actions\",\"children\":\"重新導向到 Controller 動作\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#redirecting-external-domains\",\"children\":\"重新導向到外部網域\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#redirecting-with-flashed-session-data\",\"children\":\"使用快閃的 Session 資料重新導向\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#other-response-types\",\"children\":\"其他 Response 類型\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#view-responses\",\"children\":\"View Response\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#json-responses\",\"children\":\"JSON Response\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#file-downloads\",\"children\":\"檔案下載\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#file-responses\",\"children\":\"檔案 Response\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#streamed-responses\",\"children\":\"串流 Response\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#consuming-streamed-responses\",\"children\":\"使用串流 Response\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#streamed-json-responses\",\"children\":\"串流 JSON Response\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#event-streams\",\"children\":\"事件串流 (SSE)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#streamed-downloads\",\"children\":\"串流下載\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#response-macros\",\"children\":\"Response 巨集\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"creating-responses\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"建立-response\",\"children\":[\"$\",\"a\",null,{\"href\":\"#建立-response\",\"children\":\"建立 Response\"}]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"strings-arrays\"}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"字串與陣列\",\"children\":[\"$\",\"a\",null,{\"href\":\"#字串與陣列\",\"children\":\"字串與陣列\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"所有路由和 Controller 都應該回傳一個 Response 以發送回使用者的瀏覽器。Laravel 提供了幾種不同的方式來回傳 Response。最基本的 Response 是從路由或 Controller 回傳字串。框架會自動將字串轉換為完整的 HTTP Response:\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::get('/', function () {\\n    return 'Hello World';\\n});\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"除了從路由和 Controller 回傳字串之外,你還可以回傳陣列。框架會自動將陣列轉換為 JSON Response:\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::get('/', function () {\\n    return [1, 2, 3];\\n});\\n\"}]}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\n你知道你也可以從路由或 Controller 回傳 \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/eloquent-collections\",\"children\":\"Eloquent 集合\"}],\"嗎?它們會自動轉換為 JSON。試試看!\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"response-objects\"}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"response-物件\",\"children\":[\"$\",\"a\",null,{\"href\":\"#response-物件\",\"children\":\"Response 物件\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"通常,你不會只是從路由動作回傳簡單的字串或陣列。相反,你將回傳完整的 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Response\"}],\" 實例或 \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/views\",\"children\":\"view\"}],\"。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"回傳完整的 \",[\"$\",\"code\",null,{\"children\":\"Response\"}],\" 實例允許你自訂 Response 的 HTTP 狀態碼和標頭。\",[\"$\",\"code\",null,{\"children\":\"Response\"}],\" 實例繼承自 \",[\"$\",\"code\",null,{\"children\":\"Symfony\\\\Component\\\\HttpFoundation\\\\Response\"}],\" 類別,它提供了各種建立 HTTP Response 的方法:\"]}],\"\\n\",\"$Le\",\"\\n\",\"$Lf\",\"\\n\",\"$L10\",\"\\n\",\"$L11\",\"\\n\",\"$L12\",\"\\n\",\"$L13\",\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\",\"\\n\",\"$L55\",\"\\n\",\"$L56\",\"\\n\",\"$L57\",\"\\n\",\"$L58\",\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\",\"\\n\",\"$L5c\",\"\\n\",\"$L5d\",\"\\n\",\"$L5e\",\"\\n\",\"$L5f\",\"\\n\",\"$L60\",\"\\n\",\"$L61\",\"\\n\",\"$L62\",\"\\n\",\"$L63\",\"\\n\",\"$L64\",\"\\n\",\"$L65\",\"\\n\",\"$L66\",\"\\n\",\"$L67\",\"\\n\",\"$L68\",\"\\n\",\"$L69\",\"\\n\",\"$L6a\",\"\\n\",\"$L6b\",\"\\n\",\"$L6c\",\"\\n\",\"$L6d\",\"\\n\",\"$L6e\",\"\\n\",\"$L6f\",\"\\n\",\"$L70\",\"\\n\",\"$L71\",\"\\n\",\"$L72\",\"\\n\",\"$L73\",\"\\n\",\"$L74\",\"\\n\",\"$L75\",\"\\n\",\"$L76\",\"\\n\",\"$L77\",\"\\n\",\"$L78\",\"\\n\",\"$L79\",\"\\n\",\"$L7a\",\"\\n\",\"$L7b\",\"\\n\",\"$L7c\",\"\\n\",\"$L7d\",\"\\n\",\"$L7e\",\"\\n\",\"$L7f\",\"\\n\",\"$L80\",\"\\n\",\"$L81\",\"\\n\",\"$L82\",\"\\n\",\"$L83\",\"\\n\",\"$L84\",\"\\n\",\"$L85\",\"\\n\",\"$L86\",\"\\n\",\"$L87\",\"\\n\",\"$L88\",\"\\n\",\"$L89\",\"\\n\",\"$L8a\",\"\\n\",\"$L8b\",\"\\n\",\"$L8c\",\"\\n\",\"$L8d\",\"\\n\",\"$L8e\",\"\\n\",\"$L8f\",\"\\n\",\"$L90\",\"\\n\",\"$L91\",\"\\n\",\"$L92\",\"\\n\",\"$L93\",\"\\n\",\"$L94\",\"\\n\",\"$L95\",\"\\n\",\"$L96\",\"\\n\",\"$L97\",\"\\n\",\"$L98\",\"\\n\",\"$L99\",\"\\n\",\"$L9a\",\"\\n\",\"$L9b\",\"\\n\",\"$L9c\",\"\\n\",\"$L9d\",\"\\n\",\"$L9e\",\"\\n\",\"$L9f\",\"\\n\",\"$La0\",\"\\n\",\"$La1\",\"\\n\",\"$La2\",\"\\n\",\"$La3\",\"\\n\",\"$La4\",\"\\n\",\"$La5\",\"\\n\",\"$La6\",\"\\n\",\"$La7\",\"\\n\",\"$La8\",\"\\n\",\"$La9\",\"\\n\",\"$Laa\",\"\\n\",\"$Lab\",\"\\n\",\"$Lac\",\"\\n\",\"$Lad\",\"\\n\",\"$Lae\",\"\\n\",\"$Laf\",\"\\n\",\"$Lb0\",\"\\n\",\"$Lb1\",\"\\n\",\"$Lb2\"]}]]}]}]\n"])</script><script>self.__next_f.push([1,"e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::get('/home', function () {\\n    return response('Hello World', 200)\\n        -\u003eheader('Content-Type', 'text/plain');\\n});\\n\"}]}]\nf:[\"$\",\"a\",null,{\"name\":\"eloquent-models-and-collections\"}]\n10:[\"$\",\"h4\",null,{\"id\":\"eloquent-模型與集合\",\"children\":[\"$\",\"a\",null,{\"href\":\"#eloquent-模型與集合\",\"children\":\"Eloquent 模型與集合\"}]}]\n11:[\"$\",\"p\",null,{\"children\":[\"你也可以直接從路由和 Controller 回傳 \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/eloquent\",\"children\":\"Eloquent ORM\"}],\" 模型和集合。當你這樣做時,Laravel 會自動將模型和集合轉換為 JSON Response,同時遵守模型的\",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/eloquent-serialization#hiding-attributes-from-json\",\"children\":\"隱藏屬性\"}],\":\"]}]\n12:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Models\\\\User;\\n\\nRoute::get('/user/{'{user}'}', function (User $user) {\\n    return $user;\\n});\\n\"}]}]\n13:[\"$\",\"a\",null,{\"name\":\"attaching-headers-to-responses\"}]\n14:[\"$\",\"h3\",null,{\"id\":\"將標頭附加到-response\",\"children\":[\"$\",\"a\",null,{\"href\":\"#將標頭附加到-response\",\"children\":\"將標頭附加到 Response\"}]}]\n15:[\"$\",\"p\",null,{\"children\":[\"請記住,大多數 Response 方法都是可鏈結的,允許流暢地建構 Response 實例。例如,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"header\"}],\" 方法在將 Response 發送回使用者之前向 Response 新增一系列標頭:\"]}]\n16:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return response($content)\\n    -\u003eheader('Content-Type', $type)\\n    -\u003eheader('X-Header-One', 'Header Value')\\n    -\u003eheader('X-Header-Two', 'Header Value');\\n\"}]}]\n17:[\"$\",\"p\",null,{\"children\":[\"或者,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"withHeaders\"}],\" 方法指定要新增到 Response 的標頭陣列:\"]}]\n18:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return response($content)\\n    -\u003ewithHeaders([\\n        'Content-Type' =\u003e $type,\\n        'X-Header-One' =\u003e 'Header Value',\\n        'X-Header-Two' =\u003e 'Header Value',\\n    ]);\\n\"}]}]\n19:[\"$\",\"a\",null,{\"name\":\"cache-control-middleware\"}]\n1a:[\"$\",\"h4\",null,{\"id\":\"cache-control-middleware\",\"children\":[\"$\",\"a\",null,{\"href\":\"#cache-control-middleware\",\"children\":\"Cache Control Middleware\"}]}]\n1b:[\"$\",\"p\",null,{\"children\":[\"Laravel 包含一個 \",[\"$\",\"code\",null,{\"children\":\"cache.headers\"}],\" Middleware,可用於快速設定一組路由的 \",[\"$\",\"code\",null,{\"children\":\"Cache-Control\"}],\" 標頭。指令應使用對應的 cache-control 指令的「蛇形命名法」等效項提供,並應以分號分隔。如果在指令列表中指定了 \",[\"$\",\"code\",null,{\"children\":\"etag\"}],\",Response 內容的 MD5 雜湊將自動設定為 ETag 識別碼:\"]}]\n1c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::middleware('cache.headers:public;max_age=2628000;etag')-\u003egroup(function () {\\n    Route::get('/privacy', function () {\\n        // ...\\n    });\\n\\n    Route::get('/terms', function () {\\n        // ...\\n    });\\n});\\n\"}]}]\n1d:[\"$\",\"a\",null,{\"name\":\"attaching-cookies-to-responses\"}]\n1e:[\"$\",\"h3\",null,{\"id\":\"將-cookie-附加到-response\",\"children\":[\"$\",\"a\",null,{\"href\":\"#將-cookie-附加到-response\",\"children\":\"將 Cookie 附加到 Response\"}]}]\n1f:[\"$\",\"p\",null,{\"children\":[\"你可以使用 \",[\"$\",\"code\",null,{\"children\":\"cookie\"}],\" 方法將 Cookie 附加到傳出的 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Response\"}],\" 實例。你應該將名稱、值和 Cookie 應被視為有效的分鐘數傳遞給此方法:\"]}]\n20:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return response('Hello World')-\u003ecookie(\\n    'name', 'value', $minutes\\n);\\n\"}]}]\n21:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"cookie\"}],\" 方法還接受一些使用頻率較低的參數。通常,這些參數與給予 PHP 原生 \",[\"$\",\"a\",null,{\"href\":\""])</script><script>self.__next_f.push([1,"https://secure.php.net/manual/en/function.setcookie.php\",\"children\":\"setcookie\"}],\" 方法的參數具有相同的目的和意義:\"]}]\n22:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return response('Hello World')-\u003ecookie(\\n    'name', 'value', $minutes, $path, $domain, $secure, $httpOnly\\n);\\n\"}]}]\n23:[\"$\",\"p\",null,{\"children\":[\"如果你想確保 Cookie 與傳出的 Response 一起發送,但你還沒有該 Response 的實例,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"Cookie\"}],\" Facade 將 Cookie 「排隊」以在發送 Response 時附加到 Response。\",[\"$\",\"code\",null,{\"children\":\"queue\"}],\" 方法接受建立 Cookie 實例所需的參數。這些 Cookie 會在發送到瀏覽器之前附加到傳出的 Response:\"]}]\n24:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Cookie;\\n\\nCookie::queue('name', 'value', $minutes);\\n\"}]}]\n25:[\"$\",\"a\",null,{\"name\":\"generating-cookie-instances\"}]\n26:[\"$\",\"h4\",null,{\"id\":\"產生-cookie-實例\",\"children\":[\"$\",\"a\",null,{\"href\":\"#產生-cookie-實例\",\"children\":\"產生 Cookie 實例\"}]}]\n27:[\"$\",\"p\",null,{\"children\":[\"如果你想產生一個 \",[\"$\",\"code\",null,{\"children\":\"Symfony\\\\Component\\\\HttpFoundation\\\\Cookie\"}],\" 實例,該實例可以在稍後附加到 Response 實例,你可以使用全域 \",[\"$\",\"code\",null,{\"children\":\"cookie\"}],\" 輔助函式。除非將此 Cookie 附加到 Response 實例,否則不會發送回客戶端:\"]}]\n28:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$cookie = cookie('name', 'value', $minutes);\\n\\nreturn response('Hello World')-\u003ecookie($cookie);\\n\"}]}]\n29:[\"$\",\"a\",null,{\"name\":\"expiring-cookies-early\"}]\n2a:[\"$\",\"h4\",null,{\"id\":\"提前過期-cookie\",\"children\":[\"$\",\"a\",null,{\"href\":\"#提前過期-cookie\",\"children\":\"提前過期 Cookie\"}]}]\n2b:[\"$\",\"p\",null,{\"children\":[\"你可以透過傳出 Response 的 \",[\"$\",\"code\",null,{\"children\":\"withoutCookie\"}],\" 方法使其過期來移除 Cookie:\"]}]\n2c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return response('Hello World')-\u003ewithoutCookie('name');\\n\"}]}]\n2d:[\"$\",\"p\",null,{\"children\":[\"如果你還沒有傳出 Response 的實例,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"Cookie\"}],\" Facade 的 \",[\"$\",\"code\",null,{\"children\":\"expire\"}],\" 方法使 Cookie 過期:\"]}]\n2e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Cookie::expire('name');\\n\"}]}]\n2f:[\"$\",\"a\",null,{\"name\":\"cookies-and-encryption\"}]\n30:[\"$\",\"h3\",null,{\"id\":\"cookie-與加密\",\"children\":[\"$\",\"a\",null,{\"href\":\"#cookie-與加密\",\"children\":\"Cookie 與加密\"}]}]\n31:[\"$\",\"p\",null,{\"children\":[\"預設情況下,由於 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Cookie\\\\Middleware\\\\EncryptCookies\"}],\" Middleware,Laravel 產生的所有 Cookie 都經過加密和簽名,因此客戶端無法修改或讀取它們。如果你想為應用程式產生的 Cookie 子集停用加密,你可以在應用程式的 \",[\"$\",\"code\",null,{\"children\":\"bootstrap/app.php\"}],\" 檔案中使用 \",[\"$\",\"code\",null,{\"children\":\"encryptCookies\"}],\" 方法:\"]}]\n32:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"-\u003ewithMiddleware(function (Middleware $middleware): void {\\n    $middleware-\u003eencryptCookies(except: [\\n        'cookie_name',\\n    ]);\\n})\\n\"}]}]\n33:[\"$\",\"a\",null,{\"name\":\"redirects\"}]\n34:[\"$\",\"h2\",null,{\"id\":\"重新導向\",\"children\":[\"$\",\"a\",null,{\"href\":\"#重新導向\",\"children\":\"重新導向\"}]}]\n35:[\"$\",\"p\",null,{\"children\":[\"重新導向 Response 是 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\RedirectResponse\"}],\" 類別的實例,並包含將使用者重新導向到另一個 URL 所需的適當標頭。有幾種方法可以產生 \",[\"$\",\"code\",null,{\"children\":\"RedirectResponse\"}],\" 實例。最簡單的方法是使用全域 \",[\"$\",\"code\",null,{\"children\":\"redirect\"}],\" 輔助函式:\"]}]\n36:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::g"])</script><script>self.__next_f.push([1,"et('/dashboard', function () {\\n    return redirect('/home/dashboard');\\n});\\n\"}]}]\n37:[\"$\",\"p\",null,{\"children\":[\"有時你可能希望將使用者重新導向到其先前的位置,例如當提交的表單無效時。你可以使用全域 \",[\"$\",\"code\",null,{\"children\":\"back\"}],\" 輔助函式來實現。由於此功能使用 \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/session\",\"children\":\"Session\"}],\",請確保呼叫 \",[\"$\",\"code\",null,{\"children\":\"back\"}],\" 函式的路由使用 \",[\"$\",\"code\",null,{\"children\":\"web\"}],\" Middleware 群組:\"]}]\n38:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::post('/user/profile', function () {\\n    // Validate the request...\\n\\n    return back()-\u003ewithInput();\\n});\\n\"}]}]\n39:[\"$\",\"a\",null,{\"name\":\"redirecting-named-routes\"}]\n3a:[\"$\",\"h3\",null,{\"id\":\"重新導向到命名路由\",\"children\":[\"$\",\"a\",null,{\"href\":\"#重新導向到命名路由\",\"children\":\"重新導向到命名路由\"}]}]\n3b:[\"$\",\"p\",null,{\"children\":[\"當你在沒有參數的情況下呼叫 \",[\"$\",\"code\",null,{\"children\":\"redirect\"}],\" 輔助函式時,會回傳 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Routing\\\\Redirector\"}],\" 的實例,允許你呼叫 \",[\"$\",\"code\",null,{\"children\":\"Redirector\"}],\" 實例上的任何方法。例如,要產生到命名路由的 \",[\"$\",\"code\",null,{\"children\":\"RedirectResponse\"}],\",你可以使用 \",[\"$\",\"code\",null,{\"children\":\"route\"}],\" 方法:\"]}]\n3c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return redirect()-\u003eroute('login');\\n\"}]}]\n3d:[\"$\",\"p\",null,{\"children\":[\"如果你的路由有參數,你可以將它們作為第二個參數傳遞給 \",[\"$\",\"code\",null,{\"children\":\"route\"}],\" 方法:\"]}]\n3e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"// For a route with the following URI: /profile/{'{id}'}\\n\\nreturn redirect()-\u003eroute('profile', ['id' =\u003e 1]);\\n\"}]}]\n3f:[\"$\",\"a\",null,{\"name\":\"populating-parameters-via-eloquent-models\"}]\n40:[\"$\",\"h4\",null,{\"id\":\"透過-eloquent-模型填充參數\",\"children\":[\"$\",\"a\",null,{\"href\":\"#透過-eloquent-模型填充參數\",\"children\":\"透過 Eloquent 模型填充參數\"}]}]\n41:[\"$\",\"p\",null,{\"children\":\"如果你要重新導向到具有從 Eloquent 模型填充的「ID」參數的路由,你可以直接傳遞模型本身。ID 將自動提取:\"}]\n42:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"// For a route with the following URI: /profile/{'{id}'}\\n\\nreturn redirect()-\u003eroute('profile', [$user]);\\n\"}]}]\n43:[\"$\",\"p\",null,{\"children\":[\"如果你想自訂放置在路由參數中的值,你可以在路由參數定義中指定欄位 (\",[\"$\",\"code\",null,{\"children\":\"/profile/{id:slug}\"}],\"),或者你可以覆寫 Eloquent 模型上的 \",[\"$\",\"code\",null,{\"children\":\"getRouteKey\"}],\" 方法:\"]}]\n44:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"/**\\n * Get the value of the model's route key.\\n */\\npublic function getRouteKey(): mixed\\n{\\n    return $this-\u003eslug;\\n}\\n\"}]}]\n45:[\"$\",\"a\",null,{\"name\":\"redirecting-controller-actions\"}]\n46:[\"$\",\"h3\",null,{\"id\":\"重新導向到-controller-動作\",\"children\":[\"$\",\"a\",null,{\"href\":\"#重新導向到-controller-動作\",\"children\":\"重新導向到 Controller 動作\"}]}]\n47:[\"$\",\"p\",null,{\"children\":[\"你也可以產生到 \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/controllers\",\"children\":\"Controller 動作\"}],\"的重新導向。為此,將 Controller 和動作名稱傳遞給 \",[\"$\",\"code\",null,{\"children\":\"action\"}],\" 方法:\"]}]\n48:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Http\\\\Controllers\\\\UserController;\\n\\nreturn redirect()-\u003eaction([UserController::class, 'index']);\\n\"}]}]\n49:[\"$\",\"p\",null,{\"children\":[\"如果你的 Controller 路由需要參數,你可以將它們作為第二個參數傳遞給 \",[\"$\",\"code\",null,{\"children\":\"action\"}],\" 方法:\"]}]\n4a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return redirect()-\u003eaction(\\n    [Use"])</script><script>self.__next_f.push([1,"rController::class, 'profile'], ['id' =\u003e 1]\\n);\\n\"}]}]\n4b:[\"$\",\"a\",null,{\"name\":\"redirecting-external-domains\"}]\n4c:[\"$\",\"h3\",null,{\"id\":\"重新導向到外部網域\",\"children\":[\"$\",\"a\",null,{\"href\":\"#重新導向到外部網域\",\"children\":\"重新導向到外部網域\"}]}]\n4d:[\"$\",\"p\",null,{\"children\":[\"有時你可能需要重新導向到應用程式之外的網域。你可以透過呼叫 \",[\"$\",\"code\",null,{\"children\":\"away\"}],\" 方法來實現,該方法會建立一個 \",[\"$\",\"code\",null,{\"children\":\"RedirectResponse\"}],\",而不進行任何額外的 URL 編碼、驗證或驗證:\"]}]\n4e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return redirect()-\u003eaway('https://www.google.com');\\n\"}]}]\n4f:[\"$\",\"a\",null,{\"name\":\"redirecting-with-flashed-session-data\"}]\n50:[\"$\",\"h3\",null,{\"id\":\"使用快閃的-session-資料重新導向\",\"children\":[\"$\",\"a\",null,{\"href\":\"#使用快閃的-session-資料重新導向\",\"children\":\"使用快閃的 Session 資料重新導向\"}]}]\n51:[\"$\",\"p\",null,{\"children\":[\"重新導向到新 URL 並\",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/session#flash-data\",\"children\":\"將資料快閃到 Session\"}],\" 通常同時完成。通常,這是在成功執行動作後完成的,當你向 Session 快閃成功訊息時。為了方便起見,你可以建立一個 \",[\"$\",\"code\",null,{\"children\":\"RedirectResponse\"}],\" 實例並在單一流暢的方法鏈中將資料快閃到 Session:\"]}]\n52:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::post('/user/profile', function () {\\n    // ...\\n\\n    return redirect('/dashboard')-\u003ewith('status', 'Profile updated!');\\n});\\n\"}]}]\n53:[\"$\",\"p\",null,{\"children\":[\"使用者重新導向後,你可以從 \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/session\",\"children\":\"Session\"}],\" 顯示快閃的訊息。例如,使用 \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/blade\",\"children\":\"Blade 語法\"}],\":\"]}]\n54:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-blade\",\"children\":\"@if (session('status'))\\n    \u003cdiv className=\\\"alert alert-success\\\"\u003e\\n        {{ session('status') }}\\n    \u003c/div\u003e\\n@endif\\n\"}]}]\n55:[\"$\",\"a\",null,{\"name\":\"redirecting-with-input\"}]\n56:[\"$\",\"h4\",null,{\"id\":\"使用輸入重新導向\",\"children\":[\"$\",\"a\",null,{\"href\":\"#使用輸入重新導向\",\"children\":\"使用輸入重新導向\"}]}]\n57:[\"$\",\"p\",null,{\"children\":[\"你可以使用 \",[\"$\",\"code\",null,{\"children\":\"RedirectResponse\"}],\" 實例提供的 \",[\"$\",\"code\",null,{\"children\":\"withInput\"}],\" 方法在將使用者重新導向到新位置之前將當前請求的輸入資料快閃到 Session。如果使用者遇到驗證錯誤,通常會這樣做。一旦輸入被快閃到 Session,你可以在下一次請求期間輕鬆\",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/requests#retrieving-old-input\",\"children\":\"取得它\"}],\"以重新填充表單:\"]}]\n58:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return back()-\u003ewithInput();\\n\"}]}]\n59:[\"$\",\"a\",null,{\"name\":\"other-response-types\"}]\n5a:[\"$\",\"h2\",null,{\"id\":\"其他-response-類型\",\"children\":[\"$\",\"a\",null,{\"href\":\"#其他-response-類型\",\"children\":\"其他 Response 類型\"}]}]\n5b:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"response\"}],\" 輔助函式可用於產生其他類型的 Response 實例。當在沒有參數的情況下呼叫 \",[\"$\",\"code\",null,{\"children\":\"response\"}],\" 輔助函式時,會回傳 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Contracts\\\\Routing\\\\ResponseFactory\"}],\" \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/contracts\",\"children\":\"Contract\"}],\" 的實作。此 Contract 提供了幾種有用的方法來產生 Response。\"]}]\n5c:[\"$\",\"a\",null,{\"name\":\"view-responses\"}]\n5d:[\"$\",\"h3\",null,{\"id\":\"view-response\",\"children\":[\"$\",\"a\",null,{\"href\":\"#view-response\",\"children\":\"View Response\"}]}]\n5e:[\"$\",\"p\",null,{\"children\":[\"如果你需要控制 Response 的狀態和標頭,但還需要回傳 \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/views\",\"children\":\"view\"}],\" 作為 Response 的內容,你應該使用 \",["])</script><script>self.__next_f.push([1,"\"$\",\"code\",null,{\"children\":\"view\"}],\" 方法:\"]}]\n5f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return response()\\n    -\u003eview('hello', $data, 200)\\n    -\u003eheader('Content-Type', $type);\\n\"}]}]\n60:[\"$\",\"p\",null,{\"children\":[\"當然,如果你不需要傳遞自訂 HTTP 狀態碼或自訂標頭,你可以使用全域 \",[\"$\",\"code\",null,{\"children\":\"view\"}],\" 輔助函式。\"]}]\n61:[\"$\",\"a\",null,{\"name\":\"json-responses\"}]\n62:[\"$\",\"h3\",null,{\"id\":\"json-response\",\"children\":[\"$\",\"a\",null,{\"href\":\"#json-response\",\"children\":\"JSON Response\"}]}]\n63:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"json\"}],\" 方法會自動將 \",[\"$\",\"code\",null,{\"children\":\"Content-Type\"}],\" 標頭設定為 \",[\"$\",\"code\",null,{\"children\":\"application/json\"}],\",並使用 \",[\"$\",\"code\",null,{\"children\":\"json_encode\"}],\" PHP 函式將給定的陣列轉換為 JSON:\"]}]\n64:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return response()-\u003ejson([\\n    'name' =\u003e 'Abigail',\\n    'state' =\u003e 'CA',\\n]);\\n\"}]}]\n65:[\"$\",\"p\",null,{\"children\":[\"如果你想建立 JSONP Response,你可以將 \",[\"$\",\"code\",null,{\"children\":\"json\"}],\" 方法與 \",[\"$\",\"code\",null,{\"children\":\"withCallback\"}],\" 方法結合使用:\"]}]\n66:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return response()\\n    -\u003ejson(['name' =\u003e 'Abigail', 'state' =\u003e 'CA'])\\n    -\u003ewithCallback($request-\u003einput('callback'));\\n\"}]}]\n67:[\"$\",\"a\",null,{\"name\":\"file-downloads\"}]\n68:[\"$\",\"h3\",null,{\"id\":\"檔案下載\",\"children\":[\"$\",\"a\",null,{\"href\":\"#檔案下載\",\"children\":\"檔案下載\"}]}]\n69:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"download\"}],\" 方法可用於產生強制使用者瀏覽器下載給定路徑檔案的 Response。\",[\"$\",\"code\",null,{\"children\":\"download\"}],\" 方法接受檔案名稱作為該方法的第二個參數,這將決定下載檔案的使用者看到的檔案名稱。最後,你可以將 HTTP 標頭陣列作為該方法的第三個參數傳遞:\"]}]\n6a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return response()-\u003edownload($pathToFile);\\n\\nreturn response()-\u003edownload($pathToFile, $name, $headers);\\n\"}]}]\n6b:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"[!WARNING]\\n管理檔案下載的 Symfony HttpFoundation 要求正在下載的檔案具有 ASCII 檔案名稱。\"}],\"\\n\"]}]\n6c:[\"$\",\"a\",null,{\"name\":\"file-responses\"}]\n6d:[\"$\",\"h3\",null,{\"id\":\"檔案-response\",\"children\":[\"$\",\"a\",null,{\"href\":\"#檔案-response\",\"children\":\"檔案 Response\"}]}]\n6e:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"file\"}],\" 方法可用於直接在使用者的瀏覽器中顯示檔案(例如圖片或 PDF),而不是啟動下載。此方法接受檔案的絕對路徑作為其第一個參數,並將標頭陣列作為其第二個參數:\"]}]\n6f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return response()-\u003efile($pathToFile);\\n\\nreturn response()-\u003efile($pathToFile, $headers);\\n\"}]}]\n70:[\"$\",\"a\",null,{\"name\":\"streamed-responses\"}]\n71:[\"$\",\"h2\",null,{\"id\":\"串流-response\",\"children\":[\"$\",\"a\",null,{\"href\":\"#串流-response\",\"children\":\"串流 Response\"}]}]\n72:[\"$\",\"p\",null,{\"children\":\"透過在產生資料時將其串流到客戶端,你可以顯著減少記憶體使用並提高效能,尤其是對於非常大的 Response。串流 Response 允許客戶端在伺服器完成發送之前開始處理資料:\"}]\n73:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::get('/stream', function () {\\n    return response()-\u003estream(function (): void {\\n        foreach (['developer', 'admin'] as $string) {\\n            echo $string;\\n            ob_flush();\\n            flush();\\n            sleep(2); // Simulate delay between chunks...\\n        }\\n    }, 200, ['X-Accel-Buffering' =\u003e 'no']);\\n});\\n\"}]}]\n74:[\"$\",\"p\",null,{\"children\":[\"為了方便起見,如果你提供給 \",[\"$\",\"code\",null,{\"children\":\"stream\"}],\" 方法的閉包回傳一個 \",["])</script><script>self.__next_f.push([1,"\"$\",\"a\",null,{\"href\":\"https://www.php.net/manual/en/language.generators.overview.php\",\"children\":\"Generator\"}],\",Laravel 會自動在產生器回傳的字串之間刷新輸出緩衝區,並停用 Nginx 輸出緩衝:\"]}]\n75:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::post('/chat', function () {\\n    return response()-\u003estream(function (): Generator {\\n        $stream = OpenAI::client()-\u003echat()-\u003ecreateStreamed(...);\\n\\n        foreach ($stream as $response) {\\n            yield $response-\u003echoices[0];\\n        }\\n    });\\n});\\n\"}]}]\n76:[\"$\",\"a\",null,{\"name\":\"consuming-streamed-responses\"}]\n77:[\"$\",\"h3\",null,{\"id\":\"使用串流-response\",\"children\":[\"$\",\"a\",null,{\"href\":\"#使用串流-response\",\"children\":\"使用串流 Response\"}]}]\n78:[\"$\",\"p\",null,{\"children\":[\"串流 Response 可以使用 Laravel 的 \",[\"$\",\"code\",null,{\"children\":\"stream\"}],\" npm 套件使用,它提供了一個方便的 API 來與 Laravel Response 和事件串流互動。要開始使用,請安裝 \",[\"$\",\"code\",null,{\"children\":\"@laravel/stream-react\"}],\" 或 \",[\"$\",\"code\",null,{\"children\":\"@laravel/stream-vue\"}],\" 套件:\"]}]\n79:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"npm install @laravel/stream-react\\n\"}]}]\n7a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"npm install @laravel/stream-vue\\n\"}]}]\n7b:[\"$\",\"p\",null,{\"children\":[\"然後,\",[\"$\",\"code\",null,{\"children\":\"useStream\"}],\" 可用於使用事件串流。提供你的串流 URL 後,hook 會在從你的 Laravel 應用程式回傳內容時自動使用串聯的 Response 更新 \",[\"$\",\"code\",null,{\"children\":\"data\"}],\":\"]}]\n7c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-tsx\",\"children\":\"import { useStream } from \\\"@laravel/stream-react\\\";\\n\\nfunction App() {\\n  const { data, isFetching, isStreaming, send } = useStream(\\\"chat\\\");\\n\\n  const sendMessage = () =\u003e {\\n    send({\\n      message: `Current timestamp: ${Date.now()}`,\\n    });\\n  };\\n\\n  return (\\n    \u003cdiv\u003e\\n      \u003cdiv\u003e{'{data}'}\u003c/div\u003e\\n      {isFetching \u0026\u0026 \u003cdiv\u003eConnecting...\u003c/div\u003e}\\n      {isStreaming \u0026\u0026 \u003cdiv\u003eGenerating...\u003c/div\u003e}\\n      \u003cbutton onClick={sendMessage}\u003eSend Message\u003c/button\u003e\\n    \u003c/div\u003e\\n  );\\n}\\n\"}]}]\n7d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-vue\",\"children\":\"\u003cscript setup lang=\\\"ts\\\"\u003e\\nimport { useStream } from \\\"@laravel/stream-vue\\\";\\n\\nconst { data, isFetching, isStreaming, send } = useStream(\\\"chat\\\");\\n\\nconst sendMessage = () =\u003e {\\n  send({\\n    message: `Current timestamp: ${Date.now()}`,\\n  });\\n};\\n\u003c/script\u003e\\n\\n\u003ctemplate\u003e\\n  \u003cdiv\u003e\\n    \u003cdiv\u003e{{ data }}\u003c/div\u003e\\n    \u003cdiv v-if=\\\"isFetching\\\"\u003eConnecting...\u003c/div\u003e\\n    \u003cdiv v-if=\\\"isStreaming\\\"\u003eGenerating...\u003c/div\u003e\\n    \u003cbutton @click=\\\"sendMessage\\\"\u003eSend Message\u003c/button\u003e\\n  \u003c/div\u003e\\n\u003c/template\u003e\\n\"}]}]\n7e:[\"$\",\"p\",null,{\"children\":[\"透過 \",[\"$\",\"code\",null,{\"children\":\"send\"}],\" 將資料發送回串流時,在發送新資料之前會取消與串流的活動連線。所有請求都作為 JSON \",[\"$\",\"code\",null,{\"children\":\"POST\"}],\" 請求發送。\"]}]\n7f:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\n由於 \",[\"$\",\"code\",null,{\"children\":\"useStream\"}],\" hook 向你的應用程式發出 \",[\"$\",\"code\",null,{\"children\":\"POST\"}],\" 請求,因此需要有效的 CSRF token。提供 CSRF token 的最簡單方法是\",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/csrf#csrf-x-csrf-token\",\"children\":\"透過應用程式佈局的 head 中的 meta 標籤包含它\"}],\"。\"]}],\"\\n\"]}]\n80:[\"$\",\"p\",null,{\"children\":[\"給予 \",[\"$\",\"code\",null,{\"children\":\"useStream\"}],\" 的第二個參數是一個選項物件,你可以使用它來自訂串流使用行為。此物件的預設值如下所示:\"]}]\n81:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-tsx\",\"children\":\"import { useStream } from \\\"@laravel/stream-react\\\";\\n\\nfunction App() {\\n    const { data } = useStream(\\\"chat\\\", {\\n        id: undefined,\\n        initialInput: undefined,\\n        headers: undefined,\\n      "])</script><script>self.__next_f.push([1,"  csrfToken: undefined,\\n        onResponse: (response: Response) =\u003e void,\\n        onData: (data: string) =\u003e void,\\n        onCancel: () =\u003e void,\\n        onFinish: () =\u003e void,\\n        onError: (error: Error) =\u003e void,\\n    });\\n\\n    return \u003cdiv\u003e{'{data}'}\u003c/div\u003e;\\n}\\n\"}]}]\n82:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-vue\",\"children\":\"\u003cscript setup lang=\\\"ts\\\"\u003e\\nimport { useStream } from \\\"@laravel/stream-vue\\\";\\n\\nconst { data } = useStream(\\\"chat\\\", {\\n    id: undefined,\\n    initialInput: undefined,\\n    headers: undefined,\\n    csrfToken: undefined,\\n    onResponse: (response: Response) =\u003e void,\\n    onData: (data: string) =\u003e void,\\n    onCancel: () =\u003e void,\\n    onFinish: () =\u003e void,\\n    onError: (error: Error) =\u003e void,\\n});\\n\u003c/script\u003e\\n\\n\u003ctemplate\u003e\\n  \u003cdiv\u003e{{ data }}\u003c/div\u003e\\n\u003c/template\u003e\\n\"}]}]\n83:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"onResponse\"}],\" 在從串流獲得成功的初始回應後觸發,並將原始 \",[\"$\",\"a\",null,{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/Response\",\"children\":\"Response\"}],\" 傳遞給回呼。\",[\"$\",\"code\",null,{\"children\":\"onData\"}],\" 在接收到每個區塊時呼叫 - 當前區塊傳遞給回呼。\",[\"$\",\"code\",null,{\"children\":\"onFinish\"}],\" 在串流完成時以及在 fetch / read 週期期間拋出錯誤時呼叫。\"]}]\n84:[\"$\",\"p\",null,{\"children\":[\"預設情況下,初始化時不會向串流發出請求。你可以使用 \",[\"$\",\"code\",null,{\"children\":\"initialInput\"}],\" 選項將初始負載傳遞給串流:\"]}]\n85:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-tsx\",\"children\":\"import { useStream } from \\\"@laravel/stream-react\\\";\\n\\nfunction App() {\\n  const { data } = useStream(\\\"chat\\\", {\\n    initialInput: {\\n      message: \\\"Introduce yourself.\\\",\\n    },\\n  });\\n\\n  return \u003cdiv\u003e{'{data}'}\u003c/div\u003e;\\n}\\n\"}]}]\n86:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-vue\",\"children\":\"\u003cscript setup lang=\\\"ts\\\"\u003e\\nimport { useStream } from \\\"@laravel/stream-vue\\\";\\n\\nconst { data } = useStream(\\\"chat\\\", {\\n  initialInput: {\\n    message: \\\"Introduce yourself.\\\",\\n  },\\n});\\n\u003c/script\u003e\\n\\n\u003ctemplate\u003e\\n  \u003cdiv\u003e{{ data }}\u003c/div\u003e\\n\u003c/template\u003e\\n\"}]}]\n87:[\"$\",\"p\",null,{\"children\":[\"要手動取消串流,你可以使用從 hook 回傳的 \",[\"$\",\"code\",null,{\"children\":\"cancel\"}],\" 方法:\"]}]\n88:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-tsx\",\"children\":\"import { useStream } from \\\"@laravel/stream-react\\\";\\n\\nfunction App() {\\n  const { data, cancel } = useStream(\\\"chat\\\");\\n\\n  return (\\n    \u003cdiv\u003e\\n      \u003cdiv\u003e{'{data}'}\u003c/div\u003e\\n      \u003cbutton onClick={'{cancel}'}\u003eCancel\u003c/button\u003e\\n    \u003c/div\u003e\\n  );\\n}\\n\"}]}]\n89:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-vue\",\"children\":\"\u003cscript setup lang=\\\"ts\\\"\u003e\\nimport { useStream } from \\\"@laravel/stream-vue\\\";\\n\\nconst { data, cancel } = useStream(\\\"chat\\\");\\n\u003c/script\u003e\\n\\n\u003ctemplate\u003e\\n  \u003cdiv\u003e\\n    \u003cdiv\u003e{{ data }}\u003c/div\u003e\\n    \u003cbutton @click=\\\"cancel\\\"\u003eCancel\u003c/button\u003e\\n  \u003c/div\u003e\\n\u003c/template\u003e\\n\"}]}]\n8a:[\"$\",\"p\",null,{\"children\":[\"每次使用 \",[\"$\",\"code\",null,{\"children\":\"useStream\"}],\" hook 時,都會產生一個隨機 \",[\"$\",\"code\",null,{\"children\":\"id\"}],\" 來識別串流。這會在 \",[\"$\",\"code\",null,{\"children\":\"X-STREAM-ID\"}],\" 標頭中與每個請求一起發送回伺服器。從多個元件使用相同的串流時,你可以透過提供自己的 \",[\"$\",\"code\",null,{\"children\":\"id\"}],\" 來讀取和寫入串流:\"]}]\n8b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-tsx\",\"children\":\"// App.tsx\\nimport { useStream } from \\\"@laravel/stream-react\\\";\\n\\nfunction App() {\\n  const { data, id } = useStream(\\\"chat\\\");\\n\\n  return (\\n    \u003cdiv\u003e\\n      \u003cdiv\u003e{'{data}'}\u003c/div\u003e\\n      \u003cStreamStatus id={'{id}'} /\u003e\\n    \u003c/div\u003e\\n  );\\n}\\n\\n// StreamStatus.tsx\\nimport { useStream } from \\\"@laravel/stream-react\\\";\\n\\nfunction StreamStatus({ id }) {\\n  const { isFetching, isStreaming } = useStream(\\\"chat\\\", { id });\\n\\n  return (\\n    \u003cdiv\u003e\\n      {isFetching \u0026\u0026 \u003cdiv\u003eConnecting...\u003c/div\u003e}\\n      {isStreaming \u0026\u0026 \u003cdiv"])</script><script>self.__next_f.push([1,"\u003eGenerating...\u003c/div\u003e}\\n    \u003c/div\u003e\\n  );\\n}\\n\"}]}]\n8c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-vue\",\"children\":\"\u003c!-- App.vue --\u003e\\n\u003cscript setup lang=\\\"ts\\\"\u003e\\nimport { useStream } from \\\"@laravel/stream-vue\\\";\\nimport StreamStatus from \\\"./StreamStatus.vue\\\";\\n\\nconst { data, id } = useStream(\\\"chat\\\");\\n\u003c/script\u003e\\n\\n\u003ctemplate\u003e\\n  \u003cdiv\u003e\\n    \u003cdiv\u003e{{ data }}\u003c/div\u003e\\n    \u003cStreamStatus :id=\\\"id\\\" /\u003e\\n  \u003c/div\u003e\\n\u003c/template\u003e\\n\\n\u003c!-- StreamStatus.vue --\u003e\\n\u003cscript setup lang=\\\"ts\\\"\u003e\\nimport { useStream } from \\\"@laravel/stream-vue\\\";\\n\\nconst props = defineProps\u003c{\\n  id: string;\\n}\u003e();\\n\\nconst { isFetching, isStreaming } = useStream(\\\"chat\\\", { id: props.id });\\n\u003c/script\u003e\\n\\n\u003ctemplate\u003e\\n  \u003cdiv\u003e\\n    \u003cdiv v-if=\\\"isFetching\\\"\u003eConnecting...\u003c/div\u003e\\n    \u003cdiv v-if=\\\"isStreaming\\\"\u003eGenerating...\u003c/div\u003e\\n  \u003c/div\u003e\\n\u003c/template\u003e\\n\"}]}]\n8d:[\"$\",\"a\",null,{\"name\":\"streamed-json-responses\"}]\n8e:[\"$\",\"h3\",null,{\"id\":\"串流-json-response\",\"children\":[\"$\",\"a\",null,{\"href\":\"#串流-json-response\",\"children\":\"串流 JSON Response\"}]}]\n8f:[\"$\",\"p\",null,{\"children\":[\"如果你需要逐步串流 JSON 資料,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"streamJson\"}],\" 方法。此方法對於需要逐步發送到瀏覽器的大型資料集特別有用,其格式可以由 JavaScript 輕鬆解析:\"]}]\n90:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Models\\\\User;\\n\\nRoute::get('/users.json', function () {\\n    return response()-\u003estreamJson([\\n        'users' =\u003e User::cursor(),\\n    ]);\\n});\\n\"}]}]\n91:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"useJsonStream\"}],\" hook 與 \",[\"$\",\"a\",null,{\"href\":\"#consuming-streamed-responses\",\"children\":\"useStream hook\"}],\" 相同,只是它會在串流完成後嘗試將資料解析為 JSON:\"]}]\n92:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-tsx\",\"children\":\"import { useJsonStream } from \\\"@laravel/stream-react\\\";\\n\\ntype User = {\\n  id: number;\\n  name: string;\\n  email: string;\\n};\\n\\nfunction App() {\\n  const { data, send } = useJsonStream\u003c{ users: User[] }\u003e(\\\"users\\\");\\n\\n  const loadUsers = () =\u003e {\\n    send({\\n      query: \\\"taylor\\\",\\n    });\\n  };\\n\\n  return (\\n    \u003cdiv\u003e\\n      \u003cul\u003e\\n        {data?.users.map((user) =\u003e (\\n          \u003cli\u003e\\n            {user.id}: {user.name}\\n          \u003c/li\u003e\\n        ))}\\n      \u003c/ul\u003e\\n      \u003cbutton onClick={loadUsers}\u003eLoad Users\u003c/button\u003e\\n    \u003c/div\u003e\\n  );\\n}\\n\"}]}]\n93:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-vue\",\"children\":\"\u003cscript setup lang=\\\"ts\\\"\u003e\\nimport { useJsonStream } from \\\"@laravel/stream-vue\\\";\\n\\ntype User = {\\n  id: number;\\n  name: string;\\n  email: string;\\n};\\n\\nconst { data, send } = useJsonStream\u003c{ users: User[] }\u003e(\\\"users\\\");\\n\\nconst loadUsers = () =\u003e {\\n  send({\\n    query: \\\"taylor\\\",\\n  });\\n};\\n\u003c/script\u003e\\n\\n\u003ctemplate\u003e\\n  \u003cdiv\u003e\\n    \u003cul\u003e\\n      \u003cli v-for=\\\"user in data?.users\\\" :key=\\\"user.id\\\"\u003e\\n        {{ user.id }}: {{ user.name }}\\n      \u003c/li\u003e\\n    \u003c/ul\u003e\\n    \u003cbutton @click=\\\"loadUsers\\\"\u003eLoad Users\u003c/button\u003e\\n  \u003c/div\u003e\\n\u003c/template\u003e\\n\"}]}]\n94:[\"$\",\"a\",null,{\"name\":\"event-streams\"}]\n95:[\"$\",\"h3\",null,{\"id\":\"事件串流-sse\",\"children\":[\"$\",\"a\",null,{\"href\":\"#事件串流-sse\",\"children\":\"事件串流 (SSE)\"}]}]\n96:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"eventStream\"}],\" 方法可用於使用 \",[\"$\",\"code\",null,{\"children\":\"text/event-stream\"}],\" 內容類型回傳伺服器發送事件 (SSE) 串流 Response。\",[\"$\",\"code\",null,{\"children\":\"eventStream\"}],\" 方法接受一個閉包,該閉包應在回應可用時\",[\"$\",\"a\",null,{\"href\":\"https://www.php.net/manual/en/language.generators.overview.php\",\"children\":\"產生\"}],\" Response 到串流:\"]}]\n97:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::get('/chat', function () {\\n    return response()-\u003eeventStream(function () {\\n        $stream = OpenAI::client()-\u003echat()-\u003ecreateStreamed(...);\\n\\n        foreach ($stream as $response) {\\n            yield $response-\u003echoices[0];\\n        }\\n    });\\n});\\n\"}]}]\n98:[\"$\",\"p\",n"])</script><script>self.__next_f.push([1,"ull,{\"children\":[\"如果你想自訂事件的名稱,你可以產生 \",[\"$\",\"code\",null,{\"children\":\"StreamedEvent\"}],\" 類別的實例:\"]}]\n99:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Http\\\\StreamedEvent;\\n\\nyield new StreamedEvent(\\n    event: 'update',\\n    data: $response-\u003echoices[0],\\n);\\n\"}]}]\n9a:[\"$\",\"a\",null,{\"name\":\"consuming-event-streams\"}]\n9b:[\"$\",\"h4\",null,{\"id\":\"使用事件串流\",\"children\":[\"$\",\"a\",null,{\"href\":\"#使用事件串流\",\"children\":\"使用事件串流\"}]}]\n9c:[\"$\",\"p\",null,{\"children\":[\"事件串流可以使用 Laravel 的 \",[\"$\",\"code\",null,{\"children\":\"stream\"}],\" npm 套件使用,它提供了一個方便的 API 來與 Laravel 事件串流互動。要開始使用,請安裝 \",[\"$\",\"code\",null,{\"children\":\"@laravel/stream-react\"}],\" 或 \",[\"$\",\"code\",null,{\"children\":\"@laravel/stream-vue\"}],\" 套件:\"]}]\n9d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"npm install @laravel/stream-react\\n\"}]}]\n9e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"npm install @laravel/stream-vue\\n\"}]}]\n9f:[\"$\",\"p\",null,{\"children\":[\"然後,\",[\"$\",\"code\",null,{\"children\":\"useEventStream\"}],\" 可用於使用事件串流。提供你的串流 URL 後,hook 會在從你的 Laravel 應用程式回傳訊息時自動使用串聯的 Response 更新 \",[\"$\",\"code\",null,{\"children\":\"message\"}],\":\"]}]\na0:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-jsx\",\"children\":\"import { useEventStream } from \\\"@laravel/stream-react\\\";\\n\\nfunction App() {\\n  const { message } = useEventStream(\\\"/chat\\\");\\n\\n  return \u003cdiv\u003e{'{message}'}\u003c/div\u003e;\\n}\\n\"}]}]\na1:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-vue\",\"children\":\"\u003cscript setup lang=\\\"ts\\\"\u003e\\nimport { useEventStream } from \\\"@laravel/stream-vue\\\";\\n\\nconst { message } = useEventStream(\\\"/chat\\\");\\n\u003c/script\u003e\\n\\n\u003ctemplate\u003e\\n  \u003cdiv\u003e{{ message }}\u003c/div\u003e\\n\u003c/template\u003e\\n\"}]}]\na2:[\"$\",\"p\",null,{\"children\":[\"給予 \",[\"$\",\"code\",null,{\"children\":\"useEventStream\"}],\" 的第二個參數是一個選項物件,你可以使用它來自訂串流使用行為。此物件的預設值如下所示:\"]}]\na3:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-jsx\",\"children\":\"import { useEventStream } from \\\"@laravel/stream-react\\\";\\n\\nfunction App() {\\n  const { message } = useEventStream(\\\"/stream\\\", {\\n    eventName: \\\"update\\\",\\n    onMessage: (message) =\u003e {\\n      //\\n    },\\n    onError: (error) =\u003e {\\n      //\\n    },\\n    onComplete: () =\u003e {\\n      //\\n    },\\n    endSignal: \\\"\u003c/stream\u003e\\\",\\n    glue: \\\" \\\",\\n  });\\n\\n  return \u003cdiv\u003e{'{message}'}\u003c/div\u003e;\\n}\\n\"}]}]\na4:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-vue\",\"children\":\"\u003cscript setup lang=\\\"ts\\\"\u003e\\nimport { useEventStream } from \\\"@laravel/stream-vue\\\";\\n\\nconst { message } = useEventStream(\\\"/chat\\\", {\\n  eventName: \\\"update\\\",\\n  onMessage: (message) =\u003e {\\n    // ...\\n  },\\n  onError: (error) =\u003e {\\n    // ...\\n  },\\n  onComplete: () =\u003e {\\n    // ...\\n  },\\n  endSignal: \\\"\u003c/stream\u003e\\\",\\n  glue: \\\" \\\",\\n});\\n\u003c/script\u003e\\n\"}]}]\na5:[\"$\",\"p\",null,{\"children\":[\"事件串流也可以由你的應用程式前端透過 \",[\"$\",\"a\",null,{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/EventSource\",\"children\":\"EventSource\"}],\" 物件手動使用。當串流完成時,\",[\"$\",\"code\",null,{\"children\":\"eventStream\"}],\" 方法會自動向事件串流發送 \",[\"$\",\"code\",null,{\"children\":\"\u003c/stream\u003e\"}],\" 更新:\"]}]\na6:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-js\",\"children\":\"const source = new EventSource(\\\"/chat\\\");\\n\\nsource.addEventListener(\\\"update\\\", (event) =\u003e {\\n  if (event.data === \\\"\u003c/stream\u003e\\\") {\\n    source.close();\\n\\n    return;\\n  }\\n\\n  console.log(event.data);\\n});\\n\"}]}]\na7:[\"$\",\"p\",null,{\"children\":[\"要自訂發送到事件串流的最終事件,你可以將 \",[\"$\",\"code\",null,{\"children\":\"StreamedEvent\"}],\" 實例提供給 \",[\"$\",\"code\",null,{\"children\":\"eventStream\"}],\" 方法的 \",[\"$\",\"code\",null,{\"c"])</script><script>self.__next_f.push([1,"hildren\":\"endStreamWith\"}],\" 參數:\"]}]\na8:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return response()-\u003eeventStream(function () {\\n    // ...\\n}, endStreamWith: new StreamedEvent(event: 'update', data: '\u003c/stream\u003e'));\\n\"}]}]\na9:[\"$\",\"a\",null,{\"name\":\"streamed-downloads\"}]\naa:[\"$\",\"h3\",null,{\"id\":\"串流下載\",\"children\":[\"$\",\"a\",null,{\"href\":\"#串流下載\",\"children\":\"串流下載\"}]}]\nab:[\"$\",\"p\",null,{\"children\":[\"有時你可能希望將給定操作的字串 Response 轉換為可下載的 Response,而無需將操作的內容寫入磁碟。在這種情況下,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"streamDownload\"}],\" 方法。此方法接受回呼、檔案名稱和可選的標頭陣列作為其參數:\"]}]\nac:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Services\\\\GitHub;\\n\\nreturn response()-\u003estreamDownload(function () {\\n    echo GitHub::api('repo')\\n        -\u003econtents()\\n        -\u003ereadme('laravel', 'laravel')['contents'];\\n}, 'laravel-readme.md');\\n\"}]}]\nad:[\"$\",\"a\",null,{\"name\":\"response-macros\"}]\nae:[\"$\",\"h2\",null,{\"id\":\"response-巨集\",\"children\":[\"$\",\"a\",null,{\"href\":\"#response-巨集\",\"children\":\"Response 巨集\"}]}]\naf:[\"$\",\"p\",null,{\"children\":[\"如果你想定義可以在各種路由和 Controller 中重複使用的自訂 Response,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"Response\"}],\" Facade 上的 \",[\"$\",\"code\",null,{\"children\":\"macro\"}],\" 方法。通常,你應該從應用程式的\",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/providers\",\"children\":\"Service Provider\"}],\" 之一的 \",[\"$\",\"code\",null,{\"children\":\"boot\"}],\" 方法呼叫此方法,例如 \",[\"$\",\"code\",null,{\"children\":\"App\\\\Providers\\\\AppServiceProvider\"}],\" Service Provider:\"]}]\nb0:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Providers;\\n\\nuse Illuminate\\\\Support\\\\Facades\\\\Response;\\nuse Illuminate\\\\Support\\\\ServiceProvider;\\n\\nclass AppServiceProvider extends ServiceProvider\\n{\\n    /**\\n     * Bootstrap any application services.\\n     */\\n    public function boot(): void\\n    {\\n        Response::macro('caps', function (string $value) {\\n            return Response::make(strtoupper($value));\\n        });\\n    }\\n}\\n\"}]}]\nb1:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"macro\"}],\" 函式接受名稱作為其第一個參數,閉包作為其第二個參數。當從 \",[\"$\",\"code\",null,{\"children\":\"ResponseFactory\"}],\" 實作或 \",[\"$\",\"code\",null,{\"children\":\"response\"}],\" 輔助函式呼叫巨集名稱時,將執行巨集的閉包:\"]}]\nb2:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return response()-\u003ecaps('foo');\\n\"}]}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"b3:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$Lb3\",\"3\",{}]]\n8:null\n"])</script></body></html>