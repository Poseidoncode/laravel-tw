<!DOCTYPE html><!--0lISzds8vnU9N34ubzJcA--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/bc6e94e20a39014e.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/cbd55ab9639e1e66.js"/><script src="/_next/static/chunks/87a939617be2fa8c.js" async=""></script><script src="/_next/static/chunks/8368f298651cbd89.js" async=""></script><script src="/_next/static/chunks/6740f161f60c6ab5.js" async=""></script><script src="/_next/static/chunks/turbopack-929fc2ce3ca903db.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/247eb132b7f7b574.js" async=""></script><script src="/_next/static/chunks/796e69ae18b2784c.js" async=""></script><script src="/_next/static/chunks/2b257daea29fbb42.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased"><div hidden=""><!--$--><!--/$--></div><div class="flex min-h-screen bg-background"><div class="w-64 border-r bg-background h-screen sticky top-0 hidden md:block"><div class="p-6 font-bold text-xl border-b flex items-center gap-2"><span class="text-red-600">Laravel</span> Docs（中文）</div><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-65px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="p-4 space-y-2"><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>前言</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">發行說明</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>入門</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/installation"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">安裝</button></a><a class="block" href="/docs/configuration"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">配置</button></a><a class="block" href="/docs/structure"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">目錄結構</button></a><a class="block" href="/docs/lifecycle"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">生命週期</button></a><a class="block" href="/docs/frontend"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">前端</button></a><a class="block" href="/docs/starter-kits"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">啟動套件</button></a><a class="block" href="/docs/deployment"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">部署</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>架構</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>基礎功能</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>深入探討</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>安全性</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>資料庫</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>Eloquent ORM</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>測試</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>其他</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>官方套件</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div class="border-t pt-4 space-y-2"><a class="block" href="/docs/api"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">API 文件</button></a><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">更新日誌</button></a></div></div></div></div></div></div><main class="flex-1 relative"><div class="container mx-auto py-10"><div class="mx-auto max-w-3xl"><div class="mb-8"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Cache</h1><p class="text-xl text-muted-foreground mt-2">Laravel 為各種快取後端提供統一的 API</p></div><article class="prose prose-slate dark:prose-invert max-w-none"><h1 id="cache"><a href="#cache">Cache</a></h1>
<ul>
<li><a href="#introduction">簡介 (Introduction)</a></li>
<li><a href="#configuration">設定 (Configuration)</a>
<ul>
<li><a href="#driver-prerequisites">驅動程式先決條件 (Driver Prerequisites)</a></li>
</ul>
</li>
<li><a href="#cache-usage">快取使用 (Cache Usage)</a>
<ul>
<li><a href="#obtaining-a-cache-instance">取得快取實例 (Obtaining a Cache Instance)</a></li>
<li><a href="#retrieving-items-from-the-cache">從快取中檢索項目 (Retrieving Items From the Cache)</a></li>
<li><a href="#storing-items-in-the-cache">在快取中儲存項目 (Storing Items in the Cache)</a></li>
<li><a href="#removing-items-from-the-cache">從快取中刪除項目 (Removing Items From the Cache)</a></li>
<li><a href="#cache-memoization">快取記憶化 (Cache Memoization)</a></li>
<li><a href="#the-cache-helper">快取輔助函式 (The Cache Helper)</a></li>
</ul>
</li>
<li><a href="#cache-tags">快取標籤 (Cache Tags)</a></li>
<li><a href="#atomic-locks">原子鎖定 (Atomic Locks)</a>
<ul>
<li><a href="#managing-locks">管理鎖定 (Managing Locks)</a></li>
<li><a href="#managing-locks-across-processes">跨程序管理鎖定 (Managing Locks Across Processes)</a></li>
</ul>
</li>
<li><a href="#cache-failover">快取故障轉移 (Cache Failover)</a></li>
<li><a href="#adding-custom-cache-drivers">新增自訂快取驅動程式 (Adding Custom Cache Drivers)</a>
<ul>
<li><a href="#writing-the-driver">編寫驅動程式 (Writing the Driver)</a></li>
<li><a href="#registering-the-driver">註冊驅動程式 (Registering the Driver)</a></li>
</ul>
</li>
<li><a href="#events">事件 (Events)</a></li>
</ul>
<a name="introduction"></a>
<h2 id="簡介"><a href="#簡介">簡介</a></h2>
<p>你的應用程式執行的某些資料檢索或處理任務可能會耗費大量 CPU 資源或需要數秒才能完成。在這種情況下,通常會將檢索到的資料快取一段時間,以便在後續對相同資料的請求中快速檢索。快取的資料通常儲存在非常快速的資料儲存中,例如 <a href="https://memcached.org">Memcached</a> 或 <a href="https://redis.io">Redis</a>。</p>
<p>幸運的是,Laravel 為各種快取後端提供了富有表現力的統一 API,讓你可以利用它們極快的資料檢索速度來加速你的 Web 應用程式。</p>
<a name="configuration"></a>
<h2 id="設定"><a href="#設定">設定</a></h2>
<p>你的應用程式的快取設定檔位於 <code>config/cache.php</code>。在此檔案中,你可以指定預設要在整個應用程式中使用的快取儲存。Laravel 開箱即支援流行的快取後端,如 <a href="https://memcached.org">Memcached</a>、<a href="https://redis.io">Redis</a>、<a href="https://aws.amazon.com/dynamodb">DynamoDB</a> 和關聯式資料庫。此外,還提供基於檔案的快取驅動程式,而 <code>array</code> 和 <code>null</code> 快取驅動程式則為你的自動化測試提供方便的快取後端。</p>
<p>快取設定檔還包含你可以查看的各種其他選項。預設情況下,Laravel 設定為使用 <code>database</code> 快取驅動程式,它將序列化的快取物件儲存在應用程式的資料庫中。</p>
<a name="driver-prerequisites"></a>
<h3 id="驅動程式先決條件"><a href="#驅動程式先決條件">驅動程式先決條件</a></h3>
<a name="prerequisites-database"></a>
<h4 id="database"><a href="#database">Database</a></h4>
<p>使用 <code>database</code> 快取驅動程式時,你需要一個資料庫表來包含快取資料。通常,這包含在 Laravel 的預設 <code>0001_01_01_000001_create_cache_table.php</code> <a href="/docs/migrations">資料庫遷移</a> 中;但是,如果你的應用程式不包含此遷移,你可以使用 <code>make:cache-table</code> Artisan 指令來建立它:</p>
<pre><code class="language-shell">php artisan make:cache-table

php artisan migrate
</code></pre>
<a name="memcached"></a>
<h4 id="memcached"><a href="#memcached">Memcached</a></h4>
<p>使用 Memcached 驅動程式需要安裝 <a href="https://pecl.php.net/package/memcached">Memcached PECL 套件</a>。你可以在 <code>config/cache.php</code> 設定檔中列出所有 Memcached 伺服器。此檔案已包含 <code>memcached.servers</code> 項目以幫助你入門:</p>
<pre><code class="language-php">&#x27;memcached&#x27; =&gt; [
    // ...

    &#x27;servers&#x27; =&gt; [
        [
            &#x27;host&#x27; =&gt; env(&#x27;MEMCACHED_HOST&#x27;, &#x27;127.0.0.1&#x27;),
            &#x27;port&#x27; =&gt; env(&#x27;MEMCACHED_PORT&#x27;, 11211),
            &#x27;weight&#x27; =&gt; 100,
        ],
    ],
],
</code></pre>
<p>如果需要,你可以將 <code>host</code> 選項設定為 UNIX socket 路徑。如果這樣做,<code>port</code> 選項應設定為 <code>0</code>:</p>
<pre><code class="language-php">&#x27;memcached&#x27; =&gt; [
    // ...

    &#x27;servers&#x27; =&gt; [
        [
            &#x27;host&#x27; =&gt; &#x27;/var/run/memcached/memcached.sock&#x27;,
            &#x27;port&#x27; =&gt; 0,
            &#x27;weight&#x27; =&gt; 100
        ],
    ],
],
</code></pre>
<a name="redis"></a>
<h4 id="redis"><a href="#redis">Redis</a></h4>
<p>在 Laravel 中使用 Redis 快取之前,你需要透過 PECL 安裝 PhpRedis PHP 擴充套件,或透過 Composer 安裝 <code>predis/predis</code> 套件 (~2.0)。<a href="/docs/sail">Laravel Sail</a> 已包含此擴充套件。此外,官方 Laravel 應用程式平台(如 <a href="https://cloud.laravel.com">Laravel Cloud</a> 和 <a href="https://forge.laravel.com">Laravel Forge</a>)預設已安裝 PhpRedis 擴充套件。</p>
<p>有關設定 Redis 的更多資訊,請查閱其 <a href="/docs/redis#configuration">Laravel 文件頁面</a>。</p>
<a name="dynamodb"></a>
<h4 id="dynamodb"><a href="#dynamodb">DynamoDB</a></h4>
<p>在使用 <a href="https://aws.amazon.com/dynamodb">DynamoDB</a> 快取驅動程式之前,你必須建立一個 DynamoDB 表來儲存所有快取資料。通常,此表應命名為 <code>cache</code>。但是,你應該根據 <code>cache</code> 設定檔中 <code>stores.dynamodb.table</code> 設定值的值來命名表。表名稱也可以透過 <code>DYNAMODB_CACHE_TABLE</code> 環境變數設定。</p>
<p>此表還應該有一個字串分區鍵,其名稱對應於應用程式的 <code>cache</code> 設定檔中 <code>stores.dynamodb.attributes.key</code> 設定項目的值。預設情況下,分區鍵應命名為 <code>key</code>。</p>
<p>通常,DynamoDB 不會主動從表中刪除過期項目。因此,你應該在表上<a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/TTL.html">啟用 Time to Live (TTL)</a>。設定表的 TTL 設定時,你應該將 TTL 屬性名稱設定為 <code>expires_at</code>。</p>
<p>接下來,安裝 AWS SDK,以便你的 Laravel 應用程式可以與 DynamoDB 通訊:</p>
<pre><code class="language-shell">composer require aws/aws-sdk-php
</code></pre>
<p>此外,你應該確保為 DynamoDB 快取儲存設定選項提供值。通常,這些選項(如 <code>AWS_ACCESS_KEY_ID</code> 和 <code>AWS_SECRET_ACCESS_KEY</code>)應在應用程式的 <code>.env</code> 設定檔中定義:</p>
<pre><code class="language-php">&#x27;dynamodb&#x27; =&gt; [
    &#x27;driver&#x27; =&gt; &#x27;dynamodb&#x27;,
    &#x27;key&#x27; =&gt; env(&#x27;AWS_ACCESS_KEY_ID&#x27;),
    &#x27;secret&#x27; =&gt; env(&#x27;AWS_SECRET_ACCESS_KEY&#x27;),
    &#x27;region&#x27; =&gt; env(&#x27;AWS_DEFAULT_REGION&#x27;, &#x27;us-east-1&#x27;),
    &#x27;table&#x27; =&gt; env(&#x27;DYNAMODB_CACHE_TABLE&#x27;, &#x27;cache&#x27;),
    &#x27;endpoint&#x27; =&gt; env(&#x27;DYNAMODB_ENDPOINT&#x27;),
],
</code></pre>
<a name="mongodb"></a>
<h4 id="mongodb"><a href="#mongodb">MongoDB</a></h4>
<p>如果你使用 MongoDB,官方 <code>mongodb/laravel-mongodb</code> 套件提供了 <code>mongodb</code> 快取驅動程式,可以使用 <code>mongodb</code> 資料庫連線進行設定。MongoDB 支援 TTL 索引,可用於自動清除過期的快取項目。</p>
<p>有關設定 MongoDB 的更多資訊,請參閱 MongoDB <a href="https://www.mongodb.com/docs/drivers/php/laravel-mongodb/current/cache/">快取和鎖定文件</a>。</p>
<a name="cache-usage"></a>
<h2 id="快取使用"><a href="#快取使用">快取使用</a></h2>
<a name="obtaining-a-cache-instance"></a>
<h3 id="取得快取實例"><a href="#取得快取實例">取得快取實例</a></h3>
<p>要取得快取儲存實例,你可以使用 <code>Cache</code> facade,這是我們在整個文件中將使用的。<code>Cache</code> facade 提供了方便、簡潔的方式來存取 Laravel 快取契約的底層實現:</p>
<pre><code class="language-php">&lt;?php

namespace App\Http\Controllers;

use Illuminate\Support\Facades\Cache;

class UserController extends Controller
{
    /**
     * Show a list of all users of the application.
     */
    public function index(): array
    {
        $value = Cache::get(&#x27;key&#x27;);

        return [
            // ...
        ];
    }
}
</code></pre>
<a name="accessing-multiple-cache-stores"></a>
<h4 id="存取多個快取儲存"><a href="#存取多個快取儲存">存取多個快取儲存</a></h4>
<p>使用 <code>Cache</code> facade,你可以透過 <code>store</code> 方法存取各種快取儲存。傳遞給 <code>store</code> 方法的鍵應該對應於 <code>cache</code> 設定檔中 <code>stores</code> 設定陣列中列出的其中一個儲存:</p>
<pre><code class="language-php">$value = Cache::store(&#x27;file&#x27;)-&gt;get(&#x27;foo&#x27;);

Cache::store(&#x27;redis&#x27;)-&gt;put(&#x27;bar&#x27;, &#x27;baz&#x27;, 600); // 10 Minutes
</code></pre>
<a name="retrieving-items-from-the-cache"></a>
<h3 id="從快取中檢索項目"><a href="#從快取中檢索項目">從快取中檢索項目</a></h3>
<p><code>Cache</code> facade 的 <code>get</code> 方法用於從快取中檢索項目。如果項目不存在於快取中,將返回 <code>null</code>。如果你願意,可以將第二個參數傳遞給 <code>get</code> 方法,指定如果項目不存在時你希望返回的預設值:</p>
<pre><code class="language-php">$value = Cache::get(&#x27;key&#x27;);

$value = Cache::get(&#x27;key&#x27;, &#x27;default&#x27;);
</code></pre>
<p>你甚至可以傳遞一個閉包作為預設值。如果指定的項目不存在於快取中,將返回閉包的結果。傳遞閉包允許你延遲從資料庫或其他外部服務檢索預設值:</p>
<pre><code class="language-php">$value = Cache::get(&#x27;key&#x27;, function () {
    return DB::table(/* ... */)-&gt;get();
});
</code></pre>
<a name="determining-item-existence"></a>
<h4 id="確定項目是否存在"><a href="#確定項目是否存在">確定項目是否存在</a></h4>
<p><code>has</code> 方法可用於確定項目是否存在於快取中。如果項目存在但其值為 <code>null</code>,此方法也將返回 <code>false</code>:</p>
<pre><code class="language-php">if (Cache::has(&#x27;key&#x27;)) {
    // ...
}
</code></pre>
<a name="incrementing-decrementing-values"></a>
<h4 id="遞增--遞減值"><a href="#遞增--遞減值">遞增 / 遞減值</a></h4>
<p><code>increment</code> 和 <code>decrement</code> 方法可用於調整快取中整數項目的值。這兩個方法都接受一個可選的第二個參數,指示遞增或遞減項目值的量:</p>
<pre><code class="language-php">// Initialize the value if it does not exist...
Cache::add(&#x27;key&#x27;, 0, now()-&gt;addHours(4));

// Increment or decrement the value...
Cache::increment(&#x27;key&#x27;);
Cache::increment(&#x27;key&#x27;, $amount);
Cache::decrement(&#x27;key&#x27;);
Cache::decrement(&#x27;key&#x27;, $amount);
</code></pre>
<a name="retrieve-store"></a>
<h4 id="檢索和儲存"><a href="#檢索和儲存">檢索和儲存</a></h4>
<p>有時你可能希望從快取中檢索一個項目,但如果請求的項目不存在,也要儲存一個預設值。例如,你可能希望從快取中檢索所有使用者,或者如果他們不存在,從資料庫中檢索他們並將他們新增到快取中。你可以使用 <code>Cache::remember</code> 方法來完成此操作:</p>
<pre><code class="language-php">$value = Cache::remember(&#x27;users&#x27;, $seconds, function () {
    return DB::table(&#x27;users&#x27;)-&gt;get();
});
</code></pre>
<p>如果項目不存在於快取中,傳遞給 <code>remember</code> 方法的閉包將被執行,並且其結果將被放置在快取中。</p>
<p>你可以使用 <code>rememberForever</code> 方法從快取中檢索項目,或者如果它不存在則永久儲存它:</p>
<pre><code class="language-php">$value = Cache::rememberForever(&#x27;users&#x27;, function () {
    return DB::table(&#x27;users&#x27;)-&gt;get();
});
</code></pre>
<a name="swr"></a>
<h4 id="在重新驗證時使用過期資料"><a href="#在重新驗證時使用過期資料">在重新驗證時使用過期資料</a></h4>
<p>使用 <code>Cache::remember</code> 方法時,如果快取值已過期,某些使用者可能會遇到緩慢的回應時間。對於某些類型的資料,允許在背景中重新計算快取值的同時提供部分過期的資料可能是有用的,這可以防止某些使用者在計算快取值時遇到緩慢的回應時間。這通常稱為「在重新驗證時使用過期資料」模式,<code>Cache::flexible</code> 方法提供了此模式的實現。</p>
<p><code>flexible</code> 方法接受一個陣列,指定快取值被視為「新鮮」的時間以及何時變為「過期」。陣列中的第一個值表示快取被視為新鮮的秒數,而第二個值定義了在需要重新計算之前可以作為過期資料提供的時間。</p>
<p>如果在新鮮期間（第一個值之前）發出請求,快取會立即返回而不重新計算。如果在過期期間（兩個值之間）發出請求,過期值會提供給使用者,並且會註冊一個<a href="/docs/helpers#deferred-functions">延遲函式</a>來在回應發送給使用者後重新整理快取值。如果在第二個值之後發出請求,快取被視為已過期,並且值會立即重新計算,這可能會導致使用者的回應較慢:</p>
<pre><code class="language-php">$value = Cache::flexible(&#x27;users&#x27;, [5, 10], function () {
    return DB::table(&#x27;users&#x27;)-&gt;get();
});
</code></pre>
<a name="retrieve-delete"></a>
<h4 id="檢索和刪除"><a href="#檢索和刪除">檢索和刪除</a></h4>
<p>如果你需要從快取中檢索一個項目然後刪除該項目,你可以使用 <code>pull</code> 方法。與 <code>get</code> 方法一樣,如果項目不存在於快取中,將返回 <code>null</code>:</p>
<pre><code class="language-php">$value = Cache::pull(&#x27;key&#x27;);

$value = Cache::pull(&#x27;key&#x27;, &#x27;default&#x27;);
</code></pre>
<a name="storing-items-in-the-cache"></a>
<h3 id="在快取中儲存項目"><a href="#在快取中儲存項目">在快取中儲存項目</a></h3>
<p>你可以使用 <code>Cache</code> facade 上的 <code>put</code> 方法將項目儲存在快取中:</p>
<pre><code class="language-php">Cache::put(&#x27;key&#x27;, &#x27;value&#x27;, $seconds = 10);
</code></pre>
<p>如果沒有將儲存時間傳遞給 <code>put</code> 方法,項目將被無限期儲存:</p>
<pre><code class="language-php">Cache::put(&#x27;key&#x27;, &#x27;value&#x27;);
</code></pre>
<p>除了傳遞秒數作為整數之外,你還可以傳遞一個 <code>DateTime</code> 實例,表示快取項目的所需過期時間:</p>
<pre><code class="language-php">Cache::put(&#x27;key&#x27;, &#x27;value&#x27;, now()-&gt;addMinutes(10));
</code></pre>
<a name="store-if-not-present"></a>
<h4 id="如果不存在則儲存"><a href="#如果不存在則儲存">如果不存在則儲存</a></h4>
<p><code>add</code> 方法只會在項目不存在於快取儲存中時將其新增到快取中。如果項目實際上被新增到快取中,該方法將返回 <code>true</code>。否則,該方法將返回 <code>false</code>。<code>add</code> 方法是一個原子操作:</p>
<pre><code class="language-php">Cache::add(&#x27;key&#x27;, &#x27;value&#x27;, $seconds);
</code></pre>
<a name="storing-items-forever"></a>
<h4 id="永久儲存項目"><a href="#永久儲存項目">永久儲存項目</a></h4>
<p><code>forever</code> 方法可用於將項目永久儲存在快取中。由於這些項目不會過期,必須使用 <code>forget</code> 方法手動從快取中刪除它們:</p>
<pre><code class="language-php">Cache::forever(&#x27;key&#x27;, &#x27;value&#x27;);
</code></pre>
<blockquote>
<p>[!NOTE]
如果你使用 Memcached 驅動程式,當快取達到其大小限制時,「永久」儲存的項目可能會被刪除。</p>
</blockquote>
<a name="removing-items-from-the-cache"></a>
<h3 id="從快取中刪除項目"><a href="#從快取中刪除項目">從快取中刪除項目</a></h3>
<p>你可以使用 <code>forget</code> 方法從快取中刪除項目:</p>
<pre><code class="language-php">Cache::forget(&#x27;key&#x27;);
</code></pre>
<p>你也可以透過提供零或負數的過期秒數來刪除項目:</p>
<pre><code class="language-php">Cache::put(&#x27;key&#x27;, &#x27;value&#x27;, 0);

Cache::put(&#x27;key&#x27;, &#x27;value&#x27;, -5);
</code></pre>
<p>你可以使用 <code>flush</code> 方法清除整個快取:</p>
<pre><code class="language-php">Cache::flush();
</code></pre>
<blockquote>
<p>[!WARNING]
清除快取不會尊重你設定的快取「前綴」,並且將從快取中刪除所有項目。當清除由其他應用程式共享的快取時,請仔細考慮這一點。</p>
</blockquote>
<a name="cache-memoization"></a>
<h3 id="快取記憶化"><a href="#快取記憶化">快取記憶化</a></h3>
<p>Laravel 的 <code>memo</code> 快取驅動程式允許你在單個請求或任務執行期間將解析的快取值暫時儲存在記憶體中。這可以防止在同一執行中重複快取命中,顯著提高效能。</p>
<p>To use the memoized cache, invoke the <code>memo</code> method:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Cache;

$value = Cache::memo()-&gt;get(&#x27;key&#x27;);
</code></pre>
<p>The <code>memo</code> method optionally accepts the name of a cache store, which specifies the underlying cache store the memoized driver will decorate:</p>
<pre><code class="language-php">// Using the default cache store...
$value = Cache::memo()-&gt;get(&#x27;key&#x27;);

// Using the Redis cache store...
$value = Cache::memo(&#x27;redis&#x27;)-&gt;get(&#x27;key&#x27;);
</code></pre>
<p>The first <code>get</code> call for a given key retrieves the value from your cache store, but subsequent calls within the same request or job will retrieve the value from memory:</p>
<pre><code class="language-php">// Hits the cache...
$value = Cache::memo()-&gt;get(&#x27;key&#x27;);

// Does not hit the cache, returns memoized value...
$value = Cache::memo()-&gt;get(&#x27;key&#x27;);
</code></pre>
<p>When calling methods that modify cache values (such as <code>put</code>, <code>increment</code>, <code>remember</code>, etc.), the memoized cache automatically forgets the memoized value and delegates the mutating method call to the underlying cache store:</p>
<pre><code class="language-php">Cache::memo()-&gt;put(&#x27;name&#x27;, &#x27;Taylor&#x27;); // Writes to underlying cache...
Cache::memo()-&gt;get(&#x27;name&#x27;);           // Hits underlying cache...
Cache::memo()-&gt;get(&#x27;name&#x27;);           // Memoized, does not hit cache...

Cache::memo()-&gt;put(&#x27;name&#x27;, &#x27;Tim&#x27;);    // Forgets memoized value, writes new value...
Cache::memo()-&gt;get(&#x27;name&#x27;);           // Hits underlying cache again...
</code></pre>
<a name="the-cache-helper"></a>
<h3 id="快取輔助函式"><a href="#快取輔助函式">快取輔助函式</a></h3>
<p>除了使用 <code>Cache</code> facade 之外,你還可以使用全域 <code>cache</code> 函式透過快取檢索和儲存資料。當使用單個字串參數呼叫 <code>cache</code> 函式時,它將返回給定鍵的值:</p>
<pre><code class="language-php">$value = cache(&#x27;key&#x27;);
</code></pre>
<p>如果你向函式提供一個鍵 / 值對陣列和過期時間,它將在指定的持續時間內將值儲存在快取中:</p>
<pre><code class="language-php">cache([&#x27;key&#x27; =&gt; &#x27;value&#x27;], $seconds);

cache([&#x27;key&#x27; =&gt; &#x27;value&#x27;], now()-&gt;addMinutes(10));
</code></pre>
<p>當不帶任何參數呼叫 <code>cache</code> 函式時,它會返回 <code>Illuminate\Contracts\Cache\Factory</code> 實現的一個實例,允許你呼叫其他快取方法:</p>
<pre><code class="language-php">cache()-&gt;remember(&#x27;users&#x27;, $seconds, function () {
    return DB::table(&#x27;users&#x27;)-&gt;get();
});
</code></pre>
<blockquote>
<p>[!NOTE]
當測試對全域 <code>cache</code> 函式的呼叫時,你可以使用 <code>Cache::shouldReceive</code> 方法,就像你在<a href="/docs/mocking#mocking-facades">測試 facade</a> 一樣。</p>
</blockquote>
<a name="cache-tags"></a>
<h2 id="快取標籤"><a href="#快取標籤">快取標籤</a></h2>
<blockquote>
<p>[!WARNING]
使用 <code>file</code>、<code>dynamodb</code> 或 <code>database</code> 快取驅動程式時不支援快取標籤。</p>
</blockquote>
<a name="storing-tagged-cache-items"></a>
<h3 id="儲存帶標籤的快取項目"><a href="#儲存帶標籤的快取項目">儲存帶標籤的快取項目</a></h3>
<p>快取標籤允許你在快取中標記相關項目,然後清除所有已分配給定標籤的快取值。你可以透過傳遞有序的標籤名稱陣列來存取帶標籤的快取。例如,讓我們存取一個帶標籤的快取並將一個值 <code>put</code> 到快取中:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Cache;

Cache::tags([&#x27;people&#x27;, &#x27;artists&#x27;])-&gt;put(&#x27;John&#x27;, $john, $seconds);
Cache::tags([&#x27;people&#x27;, &#x27;authors&#x27;])-&gt;put(&#x27;Anne&#x27;, $anne, $seconds);
</code></pre>
<a name="accessing-tagged-cache-items"></a>
<h3 id="存取帶標籤的快取項目"><a href="#存取帶標籤的快取項目">存取帶標籤的快取項目</a></h3>
<p>透過標籤儲存的項目只有在也提供用於儲存值的標籤時才能存取。要檢索帶標籤的快取項目,請將相同的有序標籤列表傳遞給 <code>tags</code> 方法,然後使用你希望檢索的鍵呼叫 <code>get</code> 方法:</p>
<pre><code class="language-php">$john = Cache::tags([&#x27;people&#x27;, &#x27;artists&#x27;])-&gt;get(&#x27;John&#x27;);

$anne = Cache::tags([&#x27;people&#x27;, &#x27;authors&#x27;])-&gt;get(&#x27;Anne&#x27;);
</code></pre>
<a name="removing-tagged-cache-items"></a>
<h3 id="刪除帶標籤的快取項目"><a href="#刪除帶標籤的快取項目">刪除帶標籤的快取項目</a></h3>
<p>你可以清除分配給一個標籤或標籤列表的所有項目。例如,以下程式碼將刪除所有帶有 <code>people</code>、<code>authors</code> 或兩者標籤的快取。因此,<code>Anne</code> 和 <code>John</code> 都將從快取中刪除:</p>
<pre><code class="language-php">Cache::tags([&#x27;people&#x27;, &#x27;authors&#x27;])-&gt;flush();
</code></pre>
<p>相反,下面的程式碼只會刪除帶有 <code>authors</code> 標籤的快取值,因此 <code>Anne</code> 會被刪除,但 <code>John</code> 不會:</p>
<pre><code class="language-php">Cache::tags(&#x27;authors&#x27;)-&gt;flush();
</code></pre>
<a name="atomic-locks"></a>
<h2 id="原子鎖定"><a href="#原子鎖定">原子鎖定</a></h2>
<blockquote>
<p>[!WARNING]
要使用此功能,你的應用程式必須使用 <code>memcached</code>、<code>redis</code>、<code>dynamodb</code>、<code>database</code>、<code>file</code> 或 <code>array</code> 快取驅動程式作為應用程式的預設快取驅動程式。此外,所有伺服器必須與同一個中央快取伺服器通訊。</p>
</blockquote>
<a name="managing-locks"></a>
<h3 id="管理鎖定"><a href="#管理鎖定">管理鎖定</a></h3>
<p>原子鎖定允許操作分散鎖定而無需擔心競爭條件。例如,<a href="https://cloud.laravel.com">Laravel Cloud</a> 使用原子鎖定來確保一次只有一個遠端任務在伺服器上執行。你可以使用 <code>Cache::lock</code> 方法建立和管理鎖定:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Cache;

$lock = Cache::lock(&#x27;foo&#x27;, 10);

if ($lock-&gt;get()) {
    // Lock acquired for 10 seconds...

    $lock-&gt;release();
}
</code></pre>
<p><code>get</code> 方法也接受一個閉包。在閉包執行後,Laravel 將自動釋放鎖定:</p>
<pre><code class="language-php">Cache::lock(&#x27;foo&#x27;, 10)-&gt;get(function () {
    // Lock acquired for 10 seconds and automatically released...
});
</code></pre>
<p>如果鎖定在你請求時不可用,你可以指示 Laravel 等待指定的秒數。如果在指定的時間限制內無法獲取鎖定,將拋出 <code>Illuminate\Contracts\Cache\LockTimeoutException</code>:</p>
<pre><code class="language-php">use Illuminate\Contracts\Cache\LockTimeoutException;

$lock = Cache::lock(&#x27;foo&#x27;, 10);

try {
    $lock-&gt;block(5);

    // Lock acquired after waiting a maximum of 5 seconds...
} catch (LockTimeoutException $e) {
    // Unable to acquire lock...
} finally {
    $lock-&gt;release();
}
</code></pre>
<p>上面的範例可以透過將閉包傳遞給 <code>block</code> 方法來簡化。當將閉包傳遞給此方法時,Laravel 將嘗試在指定的秒數內獲取鎖定,並在閉包執行後自動釋放鎖定:</p>
<pre><code class="language-php">Cache::lock(&#x27;foo&#x27;, 10)-&gt;block(5, function () {
    // Lock acquired for 10 seconds after waiting a maximum of 5 seconds...
});
</code></pre>
<a name="managing-locks-across-processes"></a>
<h3 id="跨程序管理鎖定"><a href="#跨程序管理鎖定">跨程序管理鎖定</a></h3>
<p>有時,你可能希望在一個程序中獲取鎖定並在另一個程序中釋放它。例如,你可能在 Web 請求期間獲取鎖定,並希望在由該請求觸發的佇列任務結束時釋放鎖定。在這種情況下,你應該將鎖定的作用域「擁有者標記」傳遞給佇列任務,以便任務可以使用給定的標記重新實例化鎖定。</p>
<p>在下面的範例中,如果成功獲取鎖定,我們將分派一個佇列任務。此外,我們將透過鎖定的 <code>owner</code> 方法將鎖定的擁有者標記傳遞給佇列任務:</p>
<pre><code class="language-php">$podcast = Podcast::find($id);

$lock = Cache::lock(&#x27;processing&#x27;, 120);

if ($lock-&gt;get()) {
    ProcessPodcast::dispatch($podcast, $lock-&gt;owner());
}
</code></pre>
<p>在我們應用程式的 <code>ProcessPodcast</code> 任務中,我們可以使用擁有者標記還原和釋放鎖定:</p>
<pre><code class="language-php">Cache::restoreLock(&#x27;processing&#x27;, $this-&gt;owner)-&gt;release();
</code></pre>
<p>如果你想在不尊重其當前擁有者的情況下釋放鎖定,你可以使用 <code>forceRelease</code> 方法:</p>
<pre><code class="language-php">Cache::lock(&#x27;processing&#x27;)-&gt;forceRelease();
</code></pre>
<a name="cache-failover"></a>
<h2 id="快取故障轉移"><a href="#快取故障轉移">快取故障轉移</a></h2>
<p><code>failover</code> 快取驅動程式在與快取互動時提供自動故障轉移功能。如果主要快取儲存因任何原因失敗,Laravel 將自動嘗試使用列表中下一個設定的儲存。這對於確保生產環境中的高可用性特別有用,其中快取可靠性至關重要。</p>
<p>要設定故障轉移快取儲存,請指定 <code>failover</code> 驅動程式並提供一個按順序嘗試的儲存名稱陣列。預設情況下,Laravel 在你的應用程式的 <code>config/cache.php</code> 設定檔中包含一個故障轉移設定範例:</p>
<pre><code class="language-php">&#x27;failover&#x27; =&gt; [
    &#x27;driver&#x27; =&gt; &#x27;failover&#x27;,
    &#x27;stores&#x27; =&gt; [
        &#x27;database&#x27;,
        &#x27;array&#x27;,
    ],
],
</code></pre>
<p>一旦你設定了使用 <code>failover</code> 驅動程式的儲存,你可能會希望在應用程式的 <code>.env</code> 檔案中將故障轉移儲存設定為預設快取儲存:</p>
<pre><code class="language-ini">CACHE_STORE=failover
</code></pre>
<p>當快取儲存操作失敗並啟動故障轉移時,Laravel 將分派 <code>Illuminate\Cache\Events\CacheFailedOver</code> 事件,允許你報告或記錄快取儲存已失敗。</p>
<a name="adding-custom-cache-drivers"></a>
<h2 id="新增自訂快取驅動程式"><a href="#新增自訂快取驅動程式">新增自訂快取驅動程式</a></h2>
<a name="writing-the-driver"></a>
<h3 id="編寫驅動程式"><a href="#編寫驅動程式">編寫驅動程式</a></h3>
<p>要建立我們的自訂快取驅動程式,我們首先需要實現 <code>Illuminate\Contracts\Cache\Store</code> <a href="/docs/contracts">契約</a>。因此,MongoDB 快取實現可能看起來像這樣:</p>
<pre><code class="language-php">&lt;?php

namespace App\Extensions;

use Illuminate\Contracts\Cache\Store;

class MongoStore implements Store
{
    public function get($key) {}
    public function many(array $keys) {}
    public function put($key, $value, $seconds) {}
    public function putMany(array $values, $seconds) {}
    public function increment($key, $value = 1) {}
    public function decrement($key, $value = 1) {}
    public function forever($key, $value) {}
    public function forget($key) {}
    public function flush() {}
    public function getPrefix() {}
}
</code></pre>
<p>我們只需要使用 MongoDB 連線實現每個這些方法。有關如何實現每個這些方法的範例,請查看 <a href="https://github.com/laravel/framework">Laravel 框架原始碼</a> 中的 <code>Illuminate\Cache\MemcachedStore</code>。一旦我們的實現完成,我們可以透過呼叫 <code>Cache</code> facade 的 <code>extend</code> 方法來完成我們的自訂驅動程式註冊:</p>
<pre><code class="language-php">Cache::extend(&#x27;mongo&#x27;, function (Application $app) {
    return Cache::repository(new MongoStore);
});
</code></pre>
<blockquote>
<p>[!NOTE]
如果你想知道在哪裡放置你的自訂快取驅動程式程式碼,你可以在 <code>app</code> 目錄中建立一個 <code>Extensions</code> 命名空間。但是,請記住,Laravel 沒有固定的應用程式結構,你可以根據你的喜好自由組織你的應用程式。</p>
</blockquote>
<a name="registering-the-driver"></a>
<h3 id="註冊驅動程式"><a href="#註冊驅動程式">註冊驅動程式</a></h3>
<p>要向 Laravel 註冊自訂快取驅動程式,我們將在 <code>Cache</code> facade 上使用 <code>extend</code> 方法。由於其他服務提供者可能會嘗試在其 <code>boot</code> 方法中讀取快取值,我們將在 <code>booting</code> 回呼中註冊我們的自訂驅動程式。透過使用 <code>booting</code> 回呼,我們可以確保在應用程式的服務提供者上呼叫 <code>boot</code> 方法之前,但在所有服務提供者上呼叫 <code>register</code> 方法之後,註冊自訂驅動程式。我們將在應用程式的 <code>App\Providers\AppServiceProvider</code> 類別的 <code>register</code> 方法中註冊我們的 <code>booting</code> 回呼:</p>
<pre><code class="language-php">&lt;?php

namespace App\Providers;

use App\Extensions\MongoStore;
use Illuminate\Contracts\Foundation\Application;
use Illuminate\Support\Facades\Cache;
use Illuminate\Support\ServiceProvider;

class AppServiceProvider extends ServiceProvider
{
    /**
     * Register any application services.
     */
    public function register(): void
    {
        $this-&gt;app-&gt;booting(function () {
             Cache::extend(&#x27;mongo&#x27;, function (Application $app) {
                 return Cache::repository(new MongoStore);
             });
         });
    }

    /**
     * Bootstrap any application services.
     */
    public function boot(): void
    {
        // ...
    }
}
</code></pre>
<p>傳遞給 <code>extend</code> 方法的第一個參數是驅動程式的名稱。這將對應於 <code>config/cache.php</code> 設定檔中的 <code>driver</code> 選項。第二個參數是一個閉包,應該返回 <code>Illuminate\Cache\Repository</code> 實例。閉包將被傳遞一個 <code>$app</code> 實例,它是<a href="/docs/container">服務容器</a>的一個實例。</p>
<p>一旦你的擴充註冊完成,請將應用程式的 <code>config/cache.php</code> 設定檔中的 <code>CACHE_STORE</code> 環境變數或 <code>default</code> 選項更新為你的擴充名稱。</p>
<a name="events"></a>
<h2 id="事件"><a href="#事件">事件</a></h2>
<p>要在每個快取操作上執行程式碼,你可以監聽快取分派的各種<a href="/docs/events">事件</a>:</p>
<div class="overflow-auto"><table class="min-w-full text-left border-collapse"><thead><tr><th class="px-3 py-2">事件名稱</th></tr></thead><tbody><tr><td class="px-3 py-2"><code>Illuminate\Cache\Events\CacheFlushed</code></td></tr><tr><td class="px-3 py-2"><code>Illuminate\Cache\Events\CacheFlushing</code></td></tr><tr><td class="px-3 py-2"><code>Illuminate\Cache\Events\CacheHit</code></td></tr><tr><td class="px-3 py-2"><code>Illuminate\Cache\Events\CacheMissed</code></td></tr><tr><td class="px-3 py-2"><code>Illuminate\Cache\Events\ForgettingKey</code></td></tr><tr><td class="px-3 py-2"><code>Illuminate\Cache\Events\KeyForgetFailed</code></td></tr><tr><td class="px-3 py-2"><code>Illuminate\Cache\Events\KeyForgotten</code></td></tr><tr><td class="px-3 py-2"><code>Illuminate\Cache\Events\KeyWriteFailed</code></td></tr><tr><td class="px-3 py-2"><code>Illuminate\Cache\Events\KeyWritten</code></td></tr><tr><td class="px-3 py-2"><code>Illuminate\Cache\Events\RetrievingKey</code></td></tr><tr><td class="px-3 py-2"><code>Illuminate\Cache\Events\RetrievingManyKeys</code></td></tr><tr><td class="px-3 py-2"><code>Illuminate\Cache\Events\WritingKey</code></td></tr><tr><td class="px-3 py-2"><code>Illuminate\Cache\Events\WritingManyKeys</code></td></tr></tbody></table></div>
<p>要提高效能,你可以透過在應用程式的 <code>config/cache.php</code> 設定檔中將給定快取儲存的 <code>events</code> 設定選項設定為 <code>false</code> 來停用快取事件:</p>
<pre><code class="language-php">&#x27;database&#x27; =&gt; [
    &#x27;driver&#x27; =&gt; &#x27;database&#x27;,
    // ...
    &#x27;events&#x27; =&gt; false,
],
</code></pre></article></div></div><!--$--><!--/$--></main></div><script src="/_next/static/chunks/cbd55ab9639e1e66.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n4:I[93649,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/2b257daea29fbb42.js\"],\"DocsSidebar\"]\n6:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"ViewportBoundary\"]\nb:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"MetadataBoundary\"]\nd:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/bc6e94e20a39014e.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"0lISzds8vnU9N34ubzJcA\",\"c\":[\"\",\"docs\",\"cache\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"cache\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/bc6e94e20a39014e.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/796e69ae18b2784c.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/2b257daea29fbb42.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"div\",null,{\"className\":\"flex min-h-screen bg-background\",\"children\":[[\"$\",\"$L4\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 relative\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"className\":\"container mx-auto py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-3xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl\",\"children\":\"Cache\"}],[\"$\",\"p\",null,{\"className\":\"text-xl text-muted-foreground mt-2\",\"children\":\"Laravel 為各種快取後端提供統一的 API\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"cache\",\"children\":[\"$\",\"a\",null,{\"href\":\"#cache\",\"children\":\"Cache\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#introduction\",\"children\":\"簡介 (Introduction)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#configuration\",\"children\":\"設定 (Configuration)\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#driver-prerequisites\",\"children\":\"驅動程式先決條件 (Driver Prerequisites)\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#cache-usage\",\"children\":\"快取使用 (Cache Usage)\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#obtaining-a-cache-instance\",\"children\":\"取得快取實例 (Obtaining a Cache Instance)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#retrieving-items-from-the-cache\",\"children\":\"從快取中檢索項目 (Retrieving Items From the Cache)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#storing-items-in-the-cache\",\"children\":\"在快取中儲存項目 (Storing Items in the Cache)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#removing-items-from-the-cache\",\"children\":\"從快取中刪除項目 (Removing Items From the Cache)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#cache-memoization\",\"children\":\"快取記憶化 (Cache Memoization)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#the-cache-helper\",\"children\":\"快取輔助函式 (The Cache Helper)\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#cache-tags\",\"children\":\"快取標籤 (Cache Tags)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#atomic-locks\",\"children\":\"原子鎖定 (Atomic Locks)\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#managing-locks\",\"children\":\"管理鎖定 (Managing Locks)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#managing-locks-across-processes\",\"children\":\"跨程序管理鎖定 (Managing Locks Across Processes)\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#cache-failover\",\"children\":\"快取故障轉移 (Cache Failover)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#adding-custom-cache-drivers\",\"children\":\"新增自訂快取驅動程式 (Adding Custom Cache Drivers)\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#writing-the-driver\",\"children\":\"編寫驅動程式 (Writing the Driver)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#registering-the-driver\",\"children\":\"註冊驅動程式 (Registering the Driver)\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#events\",\"children\":\"事件 (Events)\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"introduction\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"簡介\",\"children\":[\"$\",\"a\",null,{\"href\":\"#簡介\",\"children\":\"簡介\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"你的應用程式執行的某些資料檢索或處理任務可能會耗費大量 CPU 資源或需要數秒才能完成。在這種情況下,通常會將檢索到的資料快取一段時間,以便在後續對相同資料的請求中快速檢索。快取的資料通常儲存在非常快速的資料儲存中,例如 \",[\"$\",\"a\",null,{\"href\":\"https://memcached.org\",\"children\":\"Memcached\"}],\" 或 \",[\"$\",\"a\",null,{\"href\":\"https://redis.io\",\"children\":\"Redis\"}],\"。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"幸運的是,Laravel 為各種快取後端提供了富有表現力的統一 API,讓你可以利用它們極快的資料檢索速度來加速你的 Web 應用程式。\"}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"configuration\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"設定\",\"children\":[\"$\",\"a\",null,{\"href\":\"#設定\",\"children\":\"設定\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"你的應用程式的快取設定檔位於 \",[\"$\",\"code\",null,{\"children\":\"config/cache.php\"}],\"。在此檔案中,你可以指定預設要在整個應用程式中使用的快取儲存。Laravel 開箱即支援流行的快取後端,如 \",[\"$\",\"a\",null,{\"href\":\"https://memcached.org\",\"children\":\"Memcached\"}],\"、\",[\"$\",\"a\",null,{\"href\":\"https://redis.io\",\"children\":\"Redis\"}],\"、\",[\"$\",\"a\",null,{\"href\":\"https://aws.amazon.com/dynamodb\",\"children\":\"DynamoDB\"}],\" 和關聯式資料庫。此外,還提供基於檔案的快取驅動程式,而 \",[\"$\",\"code\",null,{\"children\":\"array\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"null\"}],\" 快取驅動程式則為你的自動化測試提供方便的快取後端。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"快取設定檔還包含你可以查看的各種其他選項。預設情況下,Laravel 設定為使用 \",[\"$\",\"code\",null,{\"children\":\"database\"}],\" 快取驅動程式,它將序列化的快取物件儲存在應用程式的資料庫中。\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"driver-prerequisites\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"驅動程式先決條件\",\"children\":[\"$\",\"a\",null,{\"href\":\"#驅動程式先決條件\",\"children\":\"驅動程式先決條件\"}]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"prerequisites-database\"}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"database\",\"children\":[\"$\",\"a\",null,{\"href\":\"#database\",\"children\":\"Database\"}]}],\"\\n\",\"$Le\",\"\\n\",\"$Lf\",\"\\n\",\"$L10\",\"\\n\",\"$L11\",\"\\n\",\"$L12\",\"\\n\",\"$L13\",\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\",\"\\n\",\"$L55\",\"\\n\",\"$L56\",\"\\n\",\"$L57\",\"\\n\",\"$L58\",\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\",\"\\n\",\"$L5c\",\"\\n\",\"$L5d\",\"\\n\",\"$L5e\",\"\\n\",\"$L5f\",\"\\n\",\"$L60\",\"\\n\",\"$L61\",\"\\n\",\"$L62\",\"\\n\",\"$L63\",\"\\n\",\"$L64\",\"\\n\",\"$L65\",\"\\n\",\"$L66\",\"\\n\",\"$L67\",\"\\n\",\"$L68\",\"\\n\",\"$L69\",\"\\n\",\"$L6a\",\"\\n\",\"$L6b\",\"\\n\",\"$L6c\",\"\\n\",\"$L6d\",\"\\n\",\"$L6e\",\"\\n\",\"$L6f\",\"\\n\",\"$L70\",\"\\n\",\"$L71\",\"\\n\",\"$L72\",\"\\n\",\"$L73\",\"\\n\",\"$L74\",\"\\n\",\"$L75\",\"\\n\",\"$L76\",\"\\n\",\"$L77\",\"\\n\",\"$L78\",\"\\n\",\"$L79\",\"\\n\",\"$L7a\",\"\\n\",\"$L7b\",\"\\n\",\"$L7c\",\"\\n\",\"$L7d\",\"\\n\",\"$L7e\",\"\\n\",\"$L7f\",\"\\n\",\"$L80\",\"\\n\",\"$L81\",\"\\n\",\"$L82\",\"\\n\",\"$L83\",\"\\n\",\"$L84\",\"\\n\",\"$L85\",\"\\n\",\"$L86\",\"\\n\",\"$L87\",\"\\n\",\"$L88\",\"\\n\",\"$L89\",\"\\n\",\"$L8a\",\"\\n\",\"$L8b\",\"\\n\",\"$L8c\",\"\\n\",\"$L8d\",\"\\n\",\"$L8e\",\"\\n\",\"$L8f\",\"\\n\",\"$L90\",\"\\n\",\"$L91\",\"\\n\",\"$L92\",\"\\n\",\"$L93\",\"\\n\",\"$L94\",\"\\n\",\"$L95\",\"\\n\",\"$L96\",\"\\n\",\"$L97\",\"\\n\",\"$L98\",\"\\n\",\"$L99\",\"\\n\",\"$L9a\",\"\\n\",\"$L9b\",\"\\n\",\"$L9c\",\"\\n\",\"$L9d\",\"\\n\",\"$L9e\",\"\\n\",\"$L9f\",\"\\n\",\"$La0\",\"\\n\",\"$La1\",\"\\n\",\"$La2\",\"\\n\",\"$La3\",\"\\n\",\"$La4\",\"\\n\",\"$La5\",\"\\n\",\"$La6\",\"\\n\",\"$La7\",\"\\n\",\"$La8\",\"\\n\",\"$La9\",\"\\n\",\"$Laa\",\"\\n\",\"$Lab\",\"\\n\",\"$Lac\",\"\\n\",\"$Lad\",\"\\n\",\"$Lae\",\"\\n\",\"$Laf\",\"\\n\",\"$Lb0\",\"\\n\",\"$Lb1\",\"\\n\",\"$Lb2\",\"\\n\",\"$Lb3\",\"\\n\",\"$Lb4\",\"\\n\",\"$Lb5\",\"\\n\",\"$Lb6\",\"\\n\",\"$Lb7\",\"\\n\",\"$Lb8\",\"\\n\",\"$Lb9\",\"\\n\",\"$Lba\",\"\\n\",\"$Lbb\",\"\\n\",\"$Lbc\",\"\\n\",\"$Lbd\",\"\\n\",\"$Lbe\",\"\\n\",\"$Lbf\",\"\\n\",\"$Lc0\",\"\\n\",\"$Lc1\"]}]]}]}]\n"])</script><script>self.__next_f.push([1,"e:[\"$\",\"p\",null,{\"children\":[\"使用 \",[\"$\",\"code\",null,{\"children\":\"database\"}],\" 快取驅動程式時,你需要一個資料庫表來包含快取資料。通常,這包含在 Laravel 的預設 \",[\"$\",\"code\",null,{\"children\":\"0001_01_01_000001_create_cache_table.php\"}],\" \",[\"$\",\"a\",null,{\"href\":\"/docs/migrations\",\"children\":\"資料庫遷移\"}],\" 中;但是,如果你的應用程式不包含此遷移,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"make:cache-table\"}],\" Artisan 指令來建立它:\"]}]\nf:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan make:cache-table\\n\\nphp artisan migrate\\n\"}]}]\n10:[\"$\",\"a\",null,{\"name\":\"memcached\"}]\n11:[\"$\",\"h4\",null,{\"id\":\"memcached\",\"children\":[\"$\",\"a\",null,{\"href\":\"#memcached\",\"children\":\"Memcached\"}]}]\n12:[\"$\",\"p\",null,{\"children\":[\"使用 Memcached 驅動程式需要安裝 \",[\"$\",\"a\",null,{\"href\":\"https://pecl.php.net/package/memcached\",\"children\":\"Memcached PECL 套件\"}],\"。你可以在 \",[\"$\",\"code\",null,{\"children\":\"config/cache.php\"}],\" 設定檔中列出所有 Memcached 伺服器。此檔案已包含 \",[\"$\",\"code\",null,{\"children\":\"memcached.servers\"}],\" 項目以幫助你入門:\"]}]\n13:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'memcached' =\u003e [\\n    // ...\\n\\n    'servers' =\u003e [\\n        [\\n            'host' =\u003e env('MEMCACHED_HOST', '127.0.0.1'),\\n            'port' =\u003e env('MEMCACHED_PORT', 11211),\\n            'weight' =\u003e 100,\\n        ],\\n    ],\\n],\\n\"}]}]\n14:[\"$\",\"p\",null,{\"children\":[\"如果需要,你可以將 \",[\"$\",\"code\",null,{\"children\":\"host\"}],\" 選項設定為 UNIX socket 路徑。如果這樣做,\",[\"$\",\"code\",null,{\"children\":\"port\"}],\" 選項應設定為 \",[\"$\",\"code\",null,{\"children\":\"0\"}],\":\"]}]\n15:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'memcached' =\u003e [\\n    // ...\\n\\n    'servers' =\u003e [\\n        [\\n            'host' =\u003e '/var/run/memcached/memcached.sock',\\n            'port' =\u003e 0,\\n            'weight' =\u003e 100\\n        ],\\n    ],\\n],\\n\"}]}]\n16:[\"$\",\"a\",null,{\"name\":\"redis\"}]\n17:[\"$\",\"h4\",null,{\"id\":\"redis\",\"children\":[\"$\",\"a\",null,{\"href\":\"#redis\",\"children\":\"Redis\"}]}]\n18:[\"$\",\"p\",null,{\"children\":[\"在 Laravel 中使用 Redis 快取之前,你需要透過 PECL 安裝 PhpRedis PHP 擴充套件,或透過 Composer 安裝 \",[\"$\",\"code\",null,{\"children\":\"predis/predis\"}],\" 套件 (~2.0)。\",[\"$\",\"a\",null,{\"href\":\"/docs/sail\",\"children\":\"Laravel Sail\"}],\" 已包含此擴充套件。此外,官方 Laravel 應用程式平台(如 \",[\"$\",\"a\",null,{\"href\":\"https://cloud.laravel.com\",\"children\":\"Laravel Cloud\"}],\" 和 \",[\"$\",\"a\",null,{\"href\":\"https://forge.laravel.com\",\"children\":\"Laravel Forge\"}],\")預設已安裝 PhpRedis 擴充套件。\"]}]\n19:[\"$\",\"p\",null,{\"children\":[\"有關設定 Redis 的更多資訊,請查閱其 \",[\"$\",\"a\",null,{\"href\":\"/docs/redis#configuration\",\"children\":\"Laravel 文件頁面\"}],\"。\"]}]\n1a:[\"$\",\"a\",null,{\"name\":\"dynamodb\"}]\n1b:[\"$\",\"h4\",null,{\"id\":\"dynamodb\",\"children\":[\"$\",\"a\",null,{\"href\":\"#dynamodb\",\"children\":\"DynamoDB\"}]}]\n1c:[\"$\",\"p\",null,{\"children\":[\"在使用 \",[\"$\",\"a\",null,{\"href\":\"https://aws.amazon.com/dynamodb\",\"children\":\"DynamoDB\"}],\" 快取驅動程式之前,你必須建立一個 DynamoDB 表來儲存所有快取資料。通常,此表應命名為 \",[\"$\",\"code\",null,{\"children\":\"cache\"}],\"。但是,你應該根據 \",[\"$\",\"code\",null,{\"children\":\"cache\"}],\" 設定檔中 \",[\"$\",\"code\",null,{\"children\":\"stores.dynamodb.table\"}],\" 設定值的值來命名表。表名稱也可以透過 \",[\"$\",\"code\",null,{\"children\":\"DYNAMODB_CACHE_TABLE\"}],\" 環境變數設定。\"]}]\n1d:[\"$\",\"p\",null,{\"children\":[\"此表還應該有一個字串分區鍵,其名稱對應於應用程式的 \",[\"$\",\"code\",null,{\"children\":\"cache\"}],\" 設定檔中 \",[\"$\",\"code\",null,{\"children\":\"stores.dynamodb.attributes.key\"}],\" 設定項目的值。預設情況下,分區鍵應命名為 \",[\"$\",\"code\",null,{\"children\":\"key\"}],\"。\"]}]\n1e:[\"$\",\"p\",null,{\"children\":[\"通常,DynamoDB 不會主動從表中刪除過期項目。因此,你"])</script><script>self.__next_f.push([1,"應該在表上\",[\"$\",\"a\",null,{\"href\":\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/TTL.html\",\"children\":\"啟用 Time to Live (TTL)\"}],\"。設定表的 TTL 設定時,你應該將 TTL 屬性名稱設定為 \",[\"$\",\"code\",null,{\"children\":\"expires_at\"}],\"。\"]}]\n1f:[\"$\",\"p\",null,{\"children\":\"接下來,安裝 AWS SDK,以便你的 Laravel 應用程式可以與 DynamoDB 通訊:\"}]\n20:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"composer require aws/aws-sdk-php\\n\"}]}]\n21:[\"$\",\"p\",null,{\"children\":[\"此外,你應該確保為 DynamoDB 快取儲存設定選項提供值。通常,這些選項(如 \",[\"$\",\"code\",null,{\"children\":\"AWS_ACCESS_KEY_ID\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"AWS_SECRET_ACCESS_KEY\"}],\")應在應用程式的 \",[\"$\",\"code\",null,{\"children\":\".env\"}],\" 設定檔中定義:\"]}]\n22:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'dynamodb' =\u003e [\\n    'driver' =\u003e 'dynamodb',\\n    'key' =\u003e env('AWS_ACCESS_KEY_ID'),\\n    'secret' =\u003e env('AWS_SECRET_ACCESS_KEY'),\\n    'region' =\u003e env('AWS_DEFAULT_REGION', 'us-east-1'),\\n    'table' =\u003e env('DYNAMODB_CACHE_TABLE', 'cache'),\\n    'endpoint' =\u003e env('DYNAMODB_ENDPOINT'),\\n],\\n\"}]}]\n23:[\"$\",\"a\",null,{\"name\":\"mongodb\"}]\n24:[\"$\",\"h4\",null,{\"id\":\"mongodb\",\"children\":[\"$\",\"a\",null,{\"href\":\"#mongodb\",\"children\":\"MongoDB\"}]}]\n25:[\"$\",\"p\",null,{\"children\":[\"如果你使用 MongoDB,官方 \",[\"$\",\"code\",null,{\"children\":\"mongodb/laravel-mongodb\"}],\" 套件提供了 \",[\"$\",\"code\",null,{\"children\":\"mongodb\"}],\" 快取驅動程式,可以使用 \",[\"$\",\"code\",null,{\"children\":\"mongodb\"}],\" 資料庫連線進行設定。MongoDB 支援 TTL 索引,可用於自動清除過期的快取項目。\"]}]\n26:[\"$\",\"p\",null,{\"children\":[\"有關設定 MongoDB 的更多資訊,請參閱 MongoDB \",[\"$\",\"a\",null,{\"href\":\"https://www.mongodb.com/docs/drivers/php/laravel-mongodb/current/cache/\",\"children\":\"快取和鎖定文件\"}],\"。\"]}]\n27:[\"$\",\"a\",null,{\"name\":\"cache-usage\"}]\n28:[\"$\",\"h2\",null,{\"id\":\"快取使用\",\"children\":[\"$\",\"a\",null,{\"href\":\"#快取使用\",\"children\":\"快取使用\"}]}]\n29:[\"$\",\"a\",null,{\"name\":\"obtaining-a-cache-instance\"}]\n2a:[\"$\",\"h3\",null,{\"id\":\"取得快取實例\",\"children\":[\"$\",\"a\",null,{\"href\":\"#取得快取實例\",\"children\":\"取得快取實例\"}]}]\n2b:[\"$\",\"p\",null,{\"children\":[\"要取得快取儲存實例,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"Cache\"}],\" facade,這是我們在整個文件中將使用的。\",[\"$\",\"code\",null,{\"children\":\"Cache\"}],\" facade 提供了方便、簡潔的方式來存取 Laravel 快取契約的底層實現:\"]}]\n2c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Http\\\\Controllers;\\n\\nuse Illuminate\\\\Support\\\\Facades\\\\Cache;\\n\\nclass UserController extends Controller\\n{\\n    /**\\n     * Show a list of all users of the application.\\n     */\\n    public function index(): array\\n    {\\n        $value = Cache::get('key');\\n\\n        return [\\n            // ...\\n        ];\\n    }\\n}\\n\"}]}]\n2d:[\"$\",\"a\",null,{\"name\":\"accessing-multiple-cache-stores\"}]\n2e:[\"$\",\"h4\",null,{\"id\":\"存取多個快取儲存\",\"children\":[\"$\",\"a\",null,{\"href\":\"#存取多個快取儲存\",\"children\":\"存取多個快取儲存\"}]}]\n2f:[\"$\",\"p\",null,{\"children\":[\"使用 \",[\"$\",\"code\",null,{\"children\":\"Cache\"}],\" facade,你可以透過 \",[\"$\",\"code\",null,{\"children\":\"store\"}],\" 方法存取各種快取儲存。傳遞給 \",[\"$\",\"code\",null,{\"children\":\"store\"}],\" 方法的鍵應該對應於 \",[\"$\",\"code\",null,{\"children\":\"cache\"}],\" 設定檔中 \",[\"$\",\"code\",null,{\"children\":\"stores\"}],\" 設定陣列中列出的其中一個儲存:\"]}]\n30:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$value = Cache::store('file')-\u003eget('foo');\\n\\nCache::store('redis')-\u003eput('bar', 'baz', 600); // 10 Minutes\\n\"}]}]\n31:[\"$\",\"a\",null,{\"name\":\"retrieving-items-from-the-cache\"}]\n32:[\"$\",\"h3\",null,{\"id\":\"從快取中檢索項目\",\"children\":[\"$\",\"a\",null,{\"href\":\"#從快取中檢索項目\",\"children\":\"從"])</script><script>self.__next_f.push([1,"快取中檢索項目\"}]}]\n33:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Cache\"}],\" facade 的 \",[\"$\",\"code\",null,{\"children\":\"get\"}],\" 方法用於從快取中檢索項目。如果項目不存在於快取中,將返回 \",[\"$\",\"code\",null,{\"children\":\"null\"}],\"。如果你願意,可以將第二個參數傳遞給 \",[\"$\",\"code\",null,{\"children\":\"get\"}],\" 方法,指定如果項目不存在時你希望返回的預設值:\"]}]\n34:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$value = Cache::get('key');\\n\\n$value = Cache::get('key', 'default');\\n\"}]}]\n35:[\"$\",\"p\",null,{\"children\":\"你甚至可以傳遞一個閉包作為預設值。如果指定的項目不存在於快取中,將返回閉包的結果。傳遞閉包允許你延遲從資料庫或其他外部服務檢索預設值:\"}]\n36:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$value = Cache::get('key', function () {\\n    return DB::table(/* ... */)-\u003eget();\\n});\\n\"}]}]\n37:[\"$\",\"a\",null,{\"name\":\"determining-item-existence\"}]\n38:[\"$\",\"h4\",null,{\"id\":\"確定項目是否存在\",\"children\":[\"$\",\"a\",null,{\"href\":\"#確定項目是否存在\",\"children\":\"確定項目是否存在\"}]}]\n39:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"has\"}],\" 方法可用於確定項目是否存在於快取中。如果項目存在但其值為 \",[\"$\",\"code\",null,{\"children\":\"null\"}],\",此方法也將返回 \",[\"$\",\"code\",null,{\"children\":\"false\"}],\":\"]}]\n3a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"if (Cache::has('key')) {\\n    // ...\\n}\\n\"}]}]\n3b:[\"$\",\"a\",null,{\"name\":\"incrementing-decrementing-values\"}]\n3c:[\"$\",\"h4\",null,{\"id\":\"遞增--遞減值\",\"children\":[\"$\",\"a\",null,{\"href\":\"#遞增--遞減值\",\"children\":\"遞增 / 遞減值\"}]}]\n3d:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"increment\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"decrement\"}],\" 方法可用於調整快取中整數項目的值。這兩個方法都接受一個可選的第二個參數,指示遞增或遞減項目值的量:\"]}]\n3e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"// Initialize the value if it does not exist...\\nCache::add('key', 0, now()-\u003eaddHours(4));\\n\\n// Increment or decrement the value...\\nCache::increment('key');\\nCache::increment('key', $amount);\\nCache::decrement('key');\\nCache::decrement('key', $amount);\\n\"}]}]\n3f:[\"$\",\"a\",null,{\"name\":\"retrieve-store\"}]\n40:[\"$\",\"h4\",null,{\"id\":\"檢索和儲存\",\"children\":[\"$\",\"a\",null,{\"href\":\"#檢索和儲存\",\"children\":\"檢索和儲存\"}]}]\n41:[\"$\",\"p\",null,{\"children\":[\"有時你可能希望從快取中檢索一個項目,但如果請求的項目不存在,也要儲存一個預設值。例如,你可能希望從快取中檢索所有使用者,或者如果他們不存在,從資料庫中檢索他們並將他們新增到快取中。你可以使用 \",[\"$\",\"code\",null,{\"children\":\"Cache::remember\"}],\" 方法來完成此操作:\"]}]\n42:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$value = Cache::remember('users', $seconds, function () {\\n    return DB::table('users')-\u003eget();\\n});\\n\"}]}]\n43:[\"$\",\"p\",null,{\"children\":[\"如果項目不存在於快取中,傳遞給 \",[\"$\",\"code\",null,{\"children\":\"remember\"}],\" 方法的閉包將被執行,並且其結果將被放置在快取中。\"]}]\n44:[\"$\",\"p\",null,{\"children\":[\"你可以使用 \",[\"$\",\"code\",null,{\"children\":\"rememberForever\"}],\" 方法從快取中檢索項目,或者如果它不存在則永久儲存它:\"]}]\n45:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$value = Cache::rememberForever('users', function () {\\n    return DB::table('users')-\u003eget();\\n});\\n\"}]}]\n46:[\"$\",\"a\",null,{\"name\":\"swr\"}]\n47:[\"$\",\"h4\",null,{\"id\":\"在重新驗證時使用過期資料\",\"children\":[\"$\",\"a\",null,{\"href\":\"#在重新驗證時使用過期資料\",\"children\":\"在重新驗證時使用過期資料\"}]}]\n48:[\"$\",\"p\",null,{\"children\":[\"使用 \",[\"$\",\"code\",null,{\"children\":\"Cache::remember\"}],\" 方"])</script><script>self.__next_f.push([1,"法時,如果快取值已過期,某些使用者可能會遇到緩慢的回應時間。對於某些類型的資料,允許在背景中重新計算快取值的同時提供部分過期的資料可能是有用的,這可以防止某些使用者在計算快取值時遇到緩慢的回應時間。這通常稱為「在重新驗證時使用過期資料」模式,\",[\"$\",\"code\",null,{\"children\":\"Cache::flexible\"}],\" 方法提供了此模式的實現。\"]}]\n49:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"flexible\"}],\" 方法接受一個陣列,指定快取值被視為「新鮮」的時間以及何時變為「過期」。陣列中的第一個值表示快取被視為新鮮的秒數,而第二個值定義了在需要重新計算之前可以作為過期資料提供的時間。\"]}]\n4a:[\"$\",\"p\",null,{\"children\":[\"如果在新鮮期間（第一個值之前）發出請求,快取會立即返回而不重新計算。如果在過期期間（兩個值之間）發出請求,過期值會提供給使用者,並且會註冊一個\",[\"$\",\"a\",null,{\"href\":\"/docs/helpers#deferred-functions\",\"children\":\"延遲函式\"}],\"來在回應發送給使用者後重新整理快取值。如果在第二個值之後發出請求,快取被視為已過期,並且值會立即重新計算,這可能會導致使用者的回應較慢:\"]}]\n4b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$value = Cache::flexible('users', [5, 10], function () {\\n    return DB::table('users')-\u003eget();\\n});\\n\"}]}]\n4c:[\"$\",\"a\",null,{\"name\":\"retrieve-delete\"}]\n4d:[\"$\",\"h4\",null,{\"id\":\"檢索和刪除\",\"children\":[\"$\",\"a\",null,{\"href\":\"#檢索和刪除\",\"children\":\"檢索和刪除\"}]}]\n4e:[\"$\",\"p\",null,{\"children\":[\"如果你需要從快取中檢索一個項目然後刪除該項目,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"pull\"}],\" 方法。與 \",[\"$\",\"code\",null,{\"children\":\"get\"}],\" 方法一樣,如果項目不存在於快取中,將返回 \",[\"$\",\"code\",null,{\"children\":\"null\"}],\":\"]}]\n4f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$value = Cache::pull('key');\\n\\n$value = Cache::pull('key', 'default');\\n\"}]}]\n50:[\"$\",\"a\",null,{\"name\":\"storing-items-in-the-cache\"}]\n51:[\"$\",\"h3\",null,{\"id\":\"在快取中儲存項目\",\"children\":[\"$\",\"a\",null,{\"href\":\"#在快取中儲存項目\",\"children\":\"在快取中儲存項目\"}]}]\n52:[\"$\",\"p\",null,{\"children\":[\"你可以使用 \",[\"$\",\"code\",null,{\"children\":\"Cache\"}],\" facade 上的 \",[\"$\",\"code\",null,{\"children\":\"put\"}],\" 方法將項目儲存在快取中:\"]}]\n53:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Cache::put('key', 'value', $seconds = 10);\\n\"}]}]\n54:[\"$\",\"p\",null,{\"children\":[\"如果沒有將儲存時間傳遞給 \",[\"$\",\"code\",null,{\"children\":\"put\"}],\" 方法,項目將被無限期儲存:\"]}]\n55:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Cache::put('key', 'value');\\n\"}]}]\n56:[\"$\",\"p\",null,{\"children\":[\"除了傳遞秒數作為整數之外,你還可以傳遞一個 \",[\"$\",\"code\",null,{\"children\":\"DateTime\"}],\" 實例,表示快取項目的所需過期時間:\"]}]\n57:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Cache::put('key', 'value', now()-\u003eaddMinutes(10));\\n\"}]}]\n58:[\"$\",\"a\",null,{\"name\":\"store-if-not-present\"}]\n59:[\"$\",\"h4\",null,{\"id\":\"如果不存在則儲存\",\"children\":[\"$\",\"a\",null,{\"href\":\"#如果不存在則儲存\",\"children\":\"如果不存在則儲存\"}]}]\n5a:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"add\"}],\" 方法只會在項目不存在於快取儲存中時將其新增到快取中。如果項目實際上被新增到快取中,該方法將返回 \",[\"$\",\"code\",null,{\"children\":\"true\"}],\"。否則,該方法將返回 \",[\"$\",\"code\",null,{\"children\":\"false\"}],\"。\",[\"$\",\"code\",null,{\"children\":\"add\"}],\" 方法是一個原子操作:\"]}]\n5b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Cache::add('key', 'value', $seconds);\\n\"}]}]\n5c:[\"$\",\"a\",null,{\"name\":\"storing-items-forever\"}]\n5d:[\"$\","])</script><script>self.__next_f.push([1,"\"h4\",null,{\"id\":\"永久儲存項目\",\"children\":[\"$\",\"a\",null,{\"href\":\"#永久儲存項目\",\"children\":\"永久儲存項目\"}]}]\n5e:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"forever\"}],\" 方法可用於將項目永久儲存在快取中。由於這些項目不會過期,必須使用 \",[\"$\",\"code\",null,{\"children\":\"forget\"}],\" 方法手動從快取中刪除它們:\"]}]\n5f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Cache::forever('key', 'value');\\n\"}]}]\n60:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"[!NOTE]\\n如果你使用 Memcached 驅動程式,當快取達到其大小限制時,「永久」儲存的項目可能會被刪除。\"}],\"\\n\"]}]\n61:[\"$\",\"a\",null,{\"name\":\"removing-items-from-the-cache\"}]\n62:[\"$\",\"h3\",null,{\"id\":\"從快取中刪除項目\",\"children\":[\"$\",\"a\",null,{\"href\":\"#從快取中刪除項目\",\"children\":\"從快取中刪除項目\"}]}]\n63:[\"$\",\"p\",null,{\"children\":[\"你可以使用 \",[\"$\",\"code\",null,{\"children\":\"forget\"}],\" 方法從快取中刪除項目:\"]}]\n64:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Cache::forget('key');\\n\"}]}]\n65:[\"$\",\"p\",null,{\"children\":\"你也可以透過提供零或負數的過期秒數來刪除項目:\"}]\n66:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Cache::put('key', 'value', 0);\\n\\nCache::put('key', 'value', -5);\\n\"}]}]\n67:[\"$\",\"p\",null,{\"children\":[\"你可以使用 \",[\"$\",\"code\",null,{\"children\":\"flush\"}],\" 方法清除整個快取:\"]}]\n68:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Cache::flush();\\n\"}]}]\n69:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"[!WARNING]\\n清除快取不會尊重你設定的快取「前綴」,並且將從快取中刪除所有項目。當清除由其他應用程式共享的快取時,請仔細考慮這一點。\"}],\"\\n\"]}]\n6a:[\"$\",\"a\",null,{\"name\":\"cache-memoization\"}]\n6b:[\"$\",\"h3\",null,{\"id\":\"快取記憶化\",\"children\":[\"$\",\"a\",null,{\"href\":\"#快取記憶化\",\"children\":\"快取記憶化\"}]}]\n6c:[\"$\",\"p\",null,{\"children\":[\"Laravel 的 \",[\"$\",\"code\",null,{\"children\":\"memo\"}],\" 快取驅動程式允許你在單個請求或任務執行期間將解析的快取值暫時儲存在記憶體中。這可以防止在同一執行中重複快取命中,顯著提高效能。\"]}]\n6d:[\"$\",\"p\",null,{\"children\":[\"To use the memoized cache, invoke the \",[\"$\",\"code\",null,{\"children\":\"memo\"}],\" method:\"]}]\n6e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Cache;\\n\\n$value = Cache::memo()-\u003eget('key');\\n\"}]}]\n6f:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"memo\"}],\" method optionally accepts the name of a cache store, which specifies the underlying cache store the memoized driver will decorate:\"]}]\n70:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"// Using the default cache store...\\n$value = Cache::memo()-\u003eget('key');\\n\\n// Using the Redis cache store...\\n$value = Cache::memo('redis')-\u003eget('key');\\n\"}]}]\n71:[\"$\",\"p\",null,{\"children\":[\"The first \",[\"$\",\"code\",null,{\"children\":\"get\"}],\" call for a given key retrieves the value from your cache store, but subsequent calls within the same request or job will retrieve the value from memory:\"]}]\n72:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"// Hits the cache...\\n$value = Cache::memo()-\u003eget('key');\\n\\n// Does not hit the cache, returns memoized value...\\n$value = Cache::memo()-\u003eget('key');\\n\"}]}]\n73:[\"$\",\"p\",null,{\"children\":[\"When calling methods that modify cache values (such as \",[\"$\",\"code\",null,{\"children\":\"put\"}],\", \",[\"$\",\"code\",null,{\"children\":\"increment\"}],\", \",[\"$\",\"code\",null,{\"children\":\"remember\"}],\", etc.), the memoized cache automatically forgets the memoized value and delegates the mutating method call to the underlying cache store:\"]}]\n74:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Cache::me"])</script><script>self.__next_f.push([1,"mo()-\u003eput('name', 'Taylor'); // Writes to underlying cache...\\nCache::memo()-\u003eget('name');           // Hits underlying cache...\\nCache::memo()-\u003eget('name');           // Memoized, does not hit cache...\\n\\nCache::memo()-\u003eput('name', 'Tim');    // Forgets memoized value, writes new value...\\nCache::memo()-\u003eget('name');           // Hits underlying cache again...\\n\"}]}]\n75:[\"$\",\"a\",null,{\"name\":\"the-cache-helper\"}]\n76:[\"$\",\"h3\",null,{\"id\":\"快取輔助函式\",\"children\":[\"$\",\"a\",null,{\"href\":\"#快取輔助函式\",\"children\":\"快取輔助函式\"}]}]\n77:[\"$\",\"p\",null,{\"children\":[\"除了使用 \",[\"$\",\"code\",null,{\"children\":\"Cache\"}],\" facade 之外,你還可以使用全域 \",[\"$\",\"code\",null,{\"children\":\"cache\"}],\" 函式透過快取檢索和儲存資料。當使用單個字串參數呼叫 \",[\"$\",\"code\",null,{\"children\":\"cache\"}],\" 函式時,它將返回給定鍵的值:\"]}]\n78:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$value = cache('key');\\n\"}]}]\n79:[\"$\",\"p\",null,{\"children\":\"如果你向函式提供一個鍵 / 值對陣列和過期時間,它將在指定的持續時間內將值儲存在快取中:\"}]\n7a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"cache(['key' =\u003e 'value'], $seconds);\\n\\ncache(['key' =\u003e 'value'], now()-\u003eaddMinutes(10));\\n\"}]}]\n7b:[\"$\",\"p\",null,{\"children\":[\"當不帶任何參數呼叫 \",[\"$\",\"code\",null,{\"children\":\"cache\"}],\" 函式時,它會返回 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Contracts\\\\Cache\\\\Factory\"}],\" 實現的一個實例,允許你呼叫其他快取方法:\"]}]\n7c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"cache()-\u003eremember('users', $seconds, function () {\\n    return DB::table('users')-\u003eget();\\n});\\n\"}]}]\n7d:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\n當測試對全域 \",[\"$\",\"code\",null,{\"children\":\"cache\"}],\" 函式的呼叫時,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"Cache::shouldReceive\"}],\" 方法,就像你在\",[\"$\",\"a\",null,{\"href\":\"/docs/mocking#mocking-facades\",\"children\":\"測試 facade\"}],\" 一樣。\"]}],\"\\n\"]}]\n7e:[\"$\",\"a\",null,{\"name\":\"cache-tags\"}]\n7f:[\"$\",\"h2\",null,{\"id\":\"快取標籤\",\"children\":[\"$\",\"a\",null,{\"href\":\"#快取標籤\",\"children\":\"快取標籤\"}]}]\n80:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\n使用 \",[\"$\",\"code\",null,{\"children\":\"file\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"dynamodb\"}],\" 或 \",[\"$\",\"code\",null,{\"children\":\"database\"}],\" 快取驅動程式時不支援快取標籤。\"]}],\"\\n\"]}]\n81:[\"$\",\"a\",null,{\"name\":\"storing-tagged-cache-items\"}]\n82:[\"$\",\"h3\",null,{\"id\":\"儲存帶標籤的快取項目\",\"children\":[\"$\",\"a\",null,{\"href\":\"#儲存帶標籤的快取項目\",\"children\":\"儲存帶標籤的快取項目\"}]}]\n83:[\"$\",\"p\",null,{\"children\":[\"快取標籤允許你在快取中標記相關項目,然後清除所有已分配給定標籤的快取值。你可以透過傳遞有序的標籤名稱陣列來存取帶標籤的快取。例如,讓我們存取一個帶標籤的快取並將一個值 \",[\"$\",\"code\",null,{\"children\":\"put\"}],\" 到快取中:\"]}]\n84:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Cache;\\n\\nCache::tags(['people', 'artists'])-\u003eput('John', $john, $seconds);\\nCache::tags(['people', 'authors'])-\u003eput('Anne', $anne, $seconds);\\n\"}]}]\n85:[\"$\",\"a\",null,{\"name\":\"accessing-tagged-cache-items\"}]\n86:[\"$\",\"h3\",null,{\"id\":\"存取帶標籤的快取項目\",\"children\":[\"$\",\"a\",null,{\"href\":\"#存取帶標籤的快取項目\",\"children\":\"存取帶標籤的快取項目\"}]}]\n87:[\"$\",\"p\",null,{\"children\":[\"透過標籤儲存的項目只有在也提供用於儲存值的標籤時才能存取。要檢索帶標籤的快取項目,請將相同的有序標籤列表傳遞給 \",[\"$\",\"code\",null,{\"children\":\"tags\"}],\" 方法,然後使用你希望檢索的鍵呼叫 \",[\"$\",\"code\",null,{\"children\":\"get\"}],\" 方法:\"]}]\n88:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":"])</script><script>self.__next_f.push([1,"\"$$john = Cache::tags(['people', 'artists'])-\u003eget('John');\\n\\n$anne = Cache::tags(['people', 'authors'])-\u003eget('Anne');\\n\"}]}]\n89:[\"$\",\"a\",null,{\"name\":\"removing-tagged-cache-items\"}]\n8a:[\"$\",\"h3\",null,{\"id\":\"刪除帶標籤的快取項目\",\"children\":[\"$\",\"a\",null,{\"href\":\"#刪除帶標籤的快取項目\",\"children\":\"刪除帶標籤的快取項目\"}]}]\n8b:[\"$\",\"p\",null,{\"children\":[\"你可以清除分配給一個標籤或標籤列表的所有項目。例如,以下程式碼將刪除所有帶有 \",[\"$\",\"code\",null,{\"children\":\"people\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"authors\"}],\" 或兩者標籤的快取。因此,\",[\"$\",\"code\",null,{\"children\":\"Anne\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"John\"}],\" 都將從快取中刪除:\"]}]\n8c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Cache::tags(['people', 'authors'])-\u003eflush();\\n\"}]}]\n8d:[\"$\",\"p\",null,{\"children\":[\"相反,下面的程式碼只會刪除帶有 \",[\"$\",\"code\",null,{\"children\":\"authors\"}],\" 標籤的快取值,因此 \",[\"$\",\"code\",null,{\"children\":\"Anne\"}],\" 會被刪除,但 \",[\"$\",\"code\",null,{\"children\":\"John\"}],\" 不會:\"]}]\n8e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Cache::tags('authors')-\u003eflush();\\n\"}]}]\n8f:[\"$\",\"a\",null,{\"name\":\"atomic-locks\"}]\n90:[\"$\",\"h2\",null,{\"id\":\"原子鎖定\",\"children\":[\"$\",\"a\",null,{\"href\":\"#原子鎖定\",\"children\":\"原子鎖定\"}]}]\n91:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\n要使用此功能,你的應用程式必須使用 \",[\"$\",\"code\",null,{\"children\":\"memcached\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"redis\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"dynamodb\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"database\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"file\"}],\" 或 \",[\"$\",\"code\",null,{\"children\":\"array\"}],\" 快取驅動程式作為應用程式的預設快取驅動程式。此外,所有伺服器必須與同一個中央快取伺服器通訊。\"]}],\"\\n\"]}]\n92:[\"$\",\"a\",null,{\"name\":\"managing-locks\"}]\n93:[\"$\",\"h3\",null,{\"id\":\"管理鎖定\",\"children\":[\"$\",\"a\",null,{\"href\":\"#管理鎖定\",\"children\":\"管理鎖定\"}]}]\n94:[\"$\",\"p\",null,{\"children\":[\"原子鎖定允許操作分散鎖定而無需擔心競爭條件。例如,\",[\"$\",\"a\",null,{\"href\":\"https://cloud.laravel.com\",\"children\":\"Laravel Cloud\"}],\" 使用原子鎖定來確保一次只有一個遠端任務在伺服器上執行。你可以使用 \",[\"$\",\"code\",null,{\"children\":\"Cache::lock\"}],\" 方法建立和管理鎖定:\"]}]\n95:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Cache;\\n\\n$lock = Cache::lock('foo', 10);\\n\\nif ($lock-\u003eget()) {\\n    // Lock acquired for 10 seconds...\\n\\n    $lock-\u003erelease();\\n}\\n\"}]}]\n96:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"get\"}],\" 方法也接受一個閉包。在閉包執行後,Laravel 將自動釋放鎖定:\"]}]\n97:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Cache::lock('foo', 10)-\u003eget(function () {\\n    // Lock acquired for 10 seconds and automatically released...\\n});\\n\"}]}]\n98:[\"$\",\"p\",null,{\"children\":[\"如果鎖定在你請求時不可用,你可以指示 Laravel 等待指定的秒數。如果在指定的時間限制內無法獲取鎖定,將拋出 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Contracts\\\\Cache\\\\LockTimeoutException\"}],\":\"]}]\n99:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Contracts\\\\Cache\\\\LockTimeoutException;\\n\\n$lock = Cache::lock('foo', 10);\\n\\ntry {\\n    $lock-\u003eblock(5);\\n\\n    // Lock acquired after waiting a maximum of 5 seconds...\\n} catch (LockTimeoutException $e) {\\n    // Unable to acquire lock...\\n} finally {\\n    $lock-\u003erelease();\\n}\\n\"}]}]\n9a:[\"$\",\"p\",null,{\"children\":[\"上面的範例可以透過將閉包傳遞給 \",[\"$\",\"code\",null,{\"children\":\"block\"}],\" 方法來簡化。當將閉包傳遞給此方法時,Laravel 將嘗試在指定的秒數內獲取鎖定,並在閉包執行後自動釋放鎖定:\"]}]\n9b:[\"$\",\"pre\",null,{\"ch"])</script><script>self.__next_f.push([1,"ildren\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Cache::lock('foo', 10)-\u003eblock(5, function () {\\n    // Lock acquired for 10 seconds after waiting a maximum of 5 seconds...\\n});\\n\"}]}]\n9c:[\"$\",\"a\",null,{\"name\":\"managing-locks-across-processes\"}]\n9d:[\"$\",\"h3\",null,{\"id\":\"跨程序管理鎖定\",\"children\":[\"$\",\"a\",null,{\"href\":\"#跨程序管理鎖定\",\"children\":\"跨程序管理鎖定\"}]}]\n9e:[\"$\",\"p\",null,{\"children\":\"有時,你可能希望在一個程序中獲取鎖定並在另一個程序中釋放它。例如,你可能在 Web 請求期間獲取鎖定,並希望在由該請求觸發的佇列任務結束時釋放鎖定。在這種情況下,你應該將鎖定的作用域「擁有者標記」傳遞給佇列任務,以便任務可以使用給定的標記重新實例化鎖定。\"}]\n9f:[\"$\",\"p\",null,{\"children\":[\"在下面的範例中,如果成功獲取鎖定,我們將分派一個佇列任務。此外,我們將透過鎖定的 \",[\"$\",\"code\",null,{\"children\":\"owner\"}],\" 方法將鎖定的擁有者標記傳遞給佇列任務:\"]}]\na0:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$podcast = Podcast::find($id);\\n\\n$lock = Cache::lock('processing', 120);\\n\\nif ($lock-\u003eget()) {\\n    ProcessPodcast::dispatch($podcast, $lock-\u003eowner());\\n}\\n\"}]}]\na1:[\"$\",\"p\",null,{\"children\":[\"在我們應用程式的 \",[\"$\",\"code\",null,{\"children\":\"ProcessPodcast\"}],\" 任務中,我們可以使用擁有者標記還原和釋放鎖定:\"]}]\na2:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Cache::restoreLock('processing', $this-\u003eowner)-\u003erelease();\\n\"}]}]\na3:[\"$\",\"p\",null,{\"children\":[\"如果你想在不尊重其當前擁有者的情況下釋放鎖定,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"forceRelease\"}],\" 方法:\"]}]\na4:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Cache::lock('processing')-\u003eforceRelease();\\n\"}]}]\na5:[\"$\",\"a\",null,{\"name\":\"cache-failover\"}]\na6:[\"$\",\"h2\",null,{\"id\":\"快取故障轉移\",\"children\":[\"$\",\"a\",null,{\"href\":\"#快取故障轉移\",\"children\":\"快取故障轉移\"}]}]\na7:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"failover\"}],\" 快取驅動程式在與快取互動時提供自動故障轉移功能。如果主要快取儲存因任何原因失敗,Laravel 將自動嘗試使用列表中下一個設定的儲存。這對於確保生產環境中的高可用性特別有用,其中快取可靠性至關重要。\"]}]\na8:[\"$\",\"p\",null,{\"children\":[\"要設定故障轉移快取儲存,請指定 \",[\"$\",\"code\",null,{\"children\":\"failover\"}],\" 驅動程式並提供一個按順序嘗試的儲存名稱陣列。預設情況下,Laravel 在你的應用程式的 \",[\"$\",\"code\",null,{\"children\":\"config/cache.php\"}],\" 設定檔中包含一個故障轉移設定範例:\"]}]\na9:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'failover' =\u003e [\\n    'driver' =\u003e 'failover',\\n    'stores' =\u003e [\\n        'database',\\n        'array',\\n    ],\\n],\\n\"}]}]\naa:[\"$\",\"p\",null,{\"children\":[\"一旦你設定了使用 \",[\"$\",\"code\",null,{\"children\":\"failover\"}],\" 驅動程式的儲存,你可能會希望在應用程式的 \",[\"$\",\"code\",null,{\"children\":\".env\"}],\" 檔案中將故障轉移儲存設定為預設快取儲存:\"]}]\nab:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-ini\",\"children\":\"CACHE_STORE=failover\\n\"}]}]\nac:[\"$\",\"p\",null,{\"children\":[\"當快取儲存操作失敗並啟動故障轉移時,Laravel 將分派 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Cache\\\\Events\\\\CacheFailedOver\"}],\" 事件,允許你報告或記錄快取儲存已失敗。\"]}]\nad:[\"$\",\"a\",null,{\"name\":\"adding-custom-cache-drivers\"}]\nae:[\"$\",\"h2\",null,{\"id\":\"新增自訂快取驅動程式\",\"children\":[\"$\",\"a\",null,{\"href\":\"#新增自訂快取驅動程式\",\"children\":\"新增自訂快取驅動程式\"}]}]\naf:[\"$\",\"a\",null,{\"name\":\"writing-the-driver\"}]\nb0:[\"$\",\"h3\",null,{\"id\":\"編寫驅動程式\",\"children\":[\"$\",\"a\",null,{\"href\":\"#編寫驅動程式\",\"children\":\"編寫驅動程式\"}]}]\nb1:[\"$\",\"p\",null,{\"c"])</script><script>self.__next_f.push([1,"hildren\":[\"要建立我們的自訂快取驅動程式,我們首先需要實現 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Contracts\\\\Cache\\\\Store\"}],\" \",[\"$\",\"a\",null,{\"href\":\"/docs/contracts\",\"children\":\"契約\"}],\"。因此,MongoDB 快取實現可能看起來像這樣:\"]}]\nb2:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Extensions;\\n\\nuse Illuminate\\\\Contracts\\\\Cache\\\\Store;\\n\\nclass MongoStore implements Store\\n{\\n    public function get($key) {}\\n    public function many(array $keys) {}\\n    public function put($key, $value, $seconds) {}\\n    public function putMany(array $values, $seconds) {}\\n    public function increment($key, $value = 1) {}\\n    public function decrement($key, $value = 1) {}\\n    public function forever($key, $value) {}\\n    public function forget($key) {}\\n    public function flush() {}\\n    public function getPrefix() {}\\n}\\n\"}]}]\nb3:[\"$\",\"p\",null,{\"children\":[\"我們只需要使用 MongoDB 連線實現每個這些方法。有關如何實現每個這些方法的範例,請查看 \",[\"$\",\"a\",null,{\"href\":\"https://github.com/laravel/framework\",\"children\":\"Laravel 框架原始碼\"}],\" 中的 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Cache\\\\MemcachedStore\"}],\"。一旦我們的實現完成,我們可以透過呼叫 \",[\"$\",\"code\",null,{\"children\":\"Cache\"}],\" facade 的 \",[\"$\",\"code\",null,{\"children\":\"extend\"}],\" 方法來完成我們的自訂驅動程式註冊:\"]}]\nb4:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Cache::extend('mongo', function (Application $app) {\\n    return Cache::repository(new MongoStore);\\n});\\n\"}]}]\nb5:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\n如果你想知道在哪裡放置你的自訂快取驅動程式程式碼,你可以在 \",[\"$\",\"code\",null,{\"children\":\"app\"}],\" 目錄中建立一個 \",[\"$\",\"code\",null,{\"children\":\"Extensions\"}],\" 命名空間。但是,請記住,Laravel 沒有固定的應用程式結構,你可以根據你的喜好自由組織你的應用程式。\"]}],\"\\n\"]}]\nb6:[\"$\",\"a\",null,{\"name\":\"registering-the-driver\"}]\nb7:[\"$\",\"h3\",null,{\"id\":\"註冊驅動程式\",\"children\":[\"$\",\"a\",null,{\"href\":\"#註冊驅動程式\",\"children\":\"註冊驅動程式\"}]}]\nb8:[\"$\",\"p\",null,{\"children\":[\"要向 Laravel 註冊自訂快取驅動程式,我們將在 \",[\"$\",\"code\",null,{\"children\":\"Cache\"}],\" facade 上使用 \",[\"$\",\"code\",null,{\"children\":\"extend\"}],\" 方法。由於其他服務提供者可能會嘗試在其 \",[\"$\",\"code\",null,{\"children\":\"boot\"}],\" 方法中讀取快取值,我們將在 \",[\"$\",\"code\",null,{\"children\":\"booting\"}],\" 回呼中註冊我們的自訂驅動程式。透過使用 \",[\"$\",\"code\",null,{\"children\":\"booting\"}],\" 回呼,我們可以確保在應用程式的服務提供者上呼叫 \",[\"$\",\"code\",null,{\"children\":\"boot\"}],\" 方法之前,但在所有服務提供者上呼叫 \",[\"$\",\"code\",null,{\"children\":\"register\"}],\" 方法之後,註冊自訂驅動程式。我們將在應用程式的 \",[\"$\",\"code\",null,{\"children\":\"App\\\\Providers\\\\AppServiceProvider\"}],\" 類別的 \",[\"$\",\"code\",null,{\"children\":\"register\"}],\" 方法中註冊我們的 \",[\"$\",\"code\",null,{\"children\":\"booting\"}],\" 回呼:\"]}]\nb9:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Providers;\\n\\nuse App\\\\Extensions\\\\MongoStore;\\nuse Illuminate\\\\Contracts\\\\Foundation\\\\Application;\\nuse Illuminate\\\\Support\\\\Facades\\\\Cache;\\nuse Illuminate\\\\Support\\\\ServiceProvider;\\n\\nclass AppServiceProvider extends ServiceProvider\\n{\\n    /**\\n     * Register any application services.\\n     */\\n    public function register(): void\\n    {\\n        $this-\u003eapp-\u003ebooting(function () {\\n             Cache::extend('mongo', function (Application $app) {\\n                 return Cache::repository(new MongoStore);\\n             });\\n         });\\n    }\\n\\n    /**\\n     * Bootstrap any application services.\\n     */\\n    public function boot(): void\\n    {\\n        // ...\\n    }\\n}\\n\"}]}]\nba:[\"$\",\"p\",null,{\"children\":[\"傳遞給"])</script><script>self.__next_f.push([1," \",[\"$\",\"code\",null,{\"children\":\"extend\"}],\" 方法的第一個參數是驅動程式的名稱。這將對應於 \",[\"$\",\"code\",null,{\"children\":\"config/cache.php\"}],\" 設定檔中的 \",[\"$\",\"code\",null,{\"children\":\"driver\"}],\" 選項。第二個參數是一個閉包,應該返回 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Cache\\\\Repository\"}],\" 實例。閉包將被傳遞一個 \",[\"$\",\"code\",null,{\"children\":\"$$app\"}],\" 實例,它是\",[\"$\",\"a\",null,{\"href\":\"/docs/container\",\"children\":\"服務容器\"}],\"的一個實例。\"]}]\nbb:[\"$\",\"p\",null,{\"children\":[\"一旦你的擴充註冊完成,請將應用程式的 \",[\"$\",\"code\",null,{\"children\":\"config/cache.php\"}],\" 設定檔中的 \",[\"$\",\"code\",null,{\"children\":\"CACHE_STORE\"}],\" 環境變數或 \",[\"$\",\"code\",null,{\"children\":\"default\"}],\" 選項更新為你的擴充名稱。\"]}]\nbc:[\"$\",\"a\",null,{\"name\":\"events\"}]\nbd:[\"$\",\"h2\",null,{\"id\":\"事件\",\"children\":[\"$\",\"a\",null,{\"href\":\"#事件\",\"children\":\"事件\"}]}]\nbe:[\"$\",\"p\",null,{\"children\":[\"要在每個快取操作上執行程式碼,你可以監聽快取分派的各種\",[\"$\",\"a\",null,{\"href\":\"/docs/events\",\"children\":\"事件\"}],\":\"]}]\n"])</script><script>self.__next_f.push([1,"bf:[\"$\",\"div\",null,{\"className\":\"overflow-auto\",\"children\":[\"$\",\"table\",null,{\"className\":\"min-w-full text-left border-collapse\",\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[\"$\",\"th\",null,{\"className\":\"px-3 py-2\",\"children\":\"事件名稱\"}]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"className\":\"px-3 py-2\",\"children\":[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Cache\\\\Events\\\\CacheFlushed\"}]}]}],[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"className\":\"px-3 py-2\",\"children\":[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Cache\\\\Events\\\\CacheFlushing\"}]}]}],[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"className\":\"px-3 py-2\",\"children\":[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Cache\\\\Events\\\\CacheHit\"}]}]}],[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"className\":\"px-3 py-2\",\"children\":[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Cache\\\\Events\\\\CacheMissed\"}]}]}],[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"className\":\"px-3 py-2\",\"children\":[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Cache\\\\Events\\\\ForgettingKey\"}]}]}],[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"className\":\"px-3 py-2\",\"children\":[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Cache\\\\Events\\\\KeyForgetFailed\"}]}]}],[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"className\":\"px-3 py-2\",\"children\":[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Cache\\\\Events\\\\KeyForgotten\"}]}]}],[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"className\":\"px-3 py-2\",\"children\":[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Cache\\\\Events\\\\KeyWriteFailed\"}]}]}],[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"className\":\"px-3 py-2\",\"children\":[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Cache\\\\Events\\\\KeyWritten\"}]}]}],[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"className\":\"px-3 py-2\",\"children\":[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Cache\\\\Events\\\\RetrievingKey\"}]}]}],[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"className\":\"px-3 py-2\",\"children\":[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Cache\\\\Events\\\\RetrievingManyKeys\"}]}]}],[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"className\":\"px-3 py-2\",\"children\":[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Cache\\\\Events\\\\WritingKey\"}]}]}],[\"$\",\"tr\",null,{\"children\":[\"$\",\"td\",null,{\"className\":\"px-3 py-2\",\"children\":[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Cache\\\\Events\\\\WritingManyKeys\"}]}]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"c0:[\"$\",\"p\",null,{\"children\":[\"要提高效能,你可以透過在應用程式的 \",[\"$\",\"code\",null,{\"children\":\"config/cache.php\"}],\" 設定檔中將給定快取儲存的 \",[\"$\",\"code\",null,{\"children\":\"events\"}],\" 設定選項設定為 \",[\"$\",\"code\",null,{\"children\":\"false\"}],\" 來停用快取事件:\"]}]\nc1:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'database' =\u003e [\\n    'driver' =\u003e 'database',\\n    // ...\\n    'events' =\u003e false,\\n],\\n\"}]}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"c2:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$Lc2\",\"3\",{}]]\n8:null\n"])</script></body></html>