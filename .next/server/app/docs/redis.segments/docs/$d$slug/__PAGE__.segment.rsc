1:"$Sreact.fragment"
53:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/247eb132b7f7b574.js"],"OutletBoundary"]
54:"$Sreact.suspense"
0:{"buildId":"kE5s4wNidqhVn8fA906WC","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"container mx-auto py-10","children":["$","div",null,{"className":"mx-auto max-w-3xl","children":[["$","div",null,{"className":"mb-8","children":[["$","h1",null,{"className":"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl","children":"Redis"}],["$","p",null,{"className":"text-xl text-muted-foreground mt-2","children":"Redis 是一個開源的進階鍵值儲存系統"}]]}],["$","article",null,{"className":"prose prose-slate dark:prose-invert max-w-none","children":[["$","h1",null,{"id":"redis","children":["$","a",null,{"href":"#redis","children":"Redis"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#introduction","children":"簡介 (Introduction)"}]}],"\n",["$","li",null,{"children":[["$","a",null,{"href":"#configuration","children":"設定 (Configuration)"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#clusters","children":"叢集 (Clusters)"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#predis","children":"Predis"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#phpredis","children":"PhpRedis"}]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":[["$","a",null,{"href":"#interacting-with-redis","children":"與 Redis 互動 (Interacting With Redis)"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#transactions","children":"事務 (Transactions)"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#pipelining-commands","children":"管線指令 (Pipelining Commands)"}]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#pubsub","children":"發布 / 訂閱 (Pub / Sub)"}]}],"\n"]}],"\n",["$","a",null,{"name":"introduction"}],"\n",["$","h2",null,{"id":"簡介-introduction","children":["$","a",null,{"href":"#簡介-introduction","children":"簡介 (Introduction)"}]}],"\n",["$","p",null,{"children":[["$","a",null,{"href":"https://redis.io","children":"Redis"}]," 是一個開源的進階鍵值儲存系統。它通常被稱為資料結構伺服器，因為鍵可以包含",["$","a",null,{"href":"https://redis.io/docs/latest/develop/data-types/strings/","children":"字串"}],"、",["$","a",null,{"href":"https://redis.io/docs/latest/develop/data-types/hashes/","children":"雜湊"}],"、",["$","a",null,{"href":"https://redis.io/docs/latest/develop/data-types/lists/","children":"列表"}],"、",["$","a",null,{"href":"https://redis.io/docs/latest/develop/data-types/sets/","children":"集合"}],"和",["$","a",null,{"href":"https://redis.io/docs/latest/develop/data-types/sorted-sets/","children":"有序集合"}],"。"]}],"\n",["$","p",null,{"children":["在 Laravel 中使用 Redis 之前，我們建議你透過 PECL 安裝並使用 ",["$","a",null,{"href":"https://github.com/phpredis/phpredis","children":"PhpRedis"}]," PHP 擴充套件。與「使用者空間」PHP 套件相比，此擴充套件的安裝更加複雜，但對於大量使用 Redis 的應用程式可能會帶來更好的效能。如果你使用 ",["$","a",null,{"href":"/docs/sail","children":"Laravel Sail"}],"，這個擴充套件已經安裝在你的應用程式 Docker 容器中。"]}],"\n",["$","p",null,{"children":["如果你無法安裝 PhpRedis 擴充套件，可以透過 Composer 安裝 ",["$","code",null,{"children":"predis/predis"}]," 套件。Predis 是一個完全用 PHP 編寫的 Redis 客戶端，不需要任何額外的擴充套件："]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-shell","children":"composer require predis/predis\n"}]}],"\n",["$","a",null,{"name":"configuration"}],"\n",["$","h2",null,{"id":"設定-configuration","children":["$","a",null,{"href":"#設定-configuration","children":"設定 (Configuration)"}]}],"\n",["$","p",null,{"children":["你可以透過 ",["$","code",null,{"children":"config/database.php"}]," 設定檔來設定應用程式的 Redis 設定。在此檔案中，你會看到一個 ",["$","code",null,{"children":"redis"}]," 陣列，其中包含應用程式使用的 Redis 伺服器："]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"'redis' => [\n\n    'client' => env('REDIS_CLIENT', 'phpredis'),\n\n    'options' => [\n        'cluster' => env('REDIS_CLUSTER', 'redis'),\n        'prefix' => env('REDIS_PREFIX', Str::slug(env('APP_NAME', 'laravel'), '_').'_database_'),\n    ],\n\n    'default' => [\n        'url' => env('REDIS_URL'),\n        'host' => env('REDIS_HOST', '127.0.0.1'),\n        'username' => env('REDIS_USERNAME'),\n        'password' => env('REDIS_PASSWORD'),\n        'port' => env('REDIS_PORT', '6379'),\n        'database' => env('REDIS_DB', '0'),\n    ],\n\n    'cache' => [\n        'url' => env('REDIS_URL'),\n        'host' => env('REDIS_HOST', '127.0.0.1'),\n        'username' => env('REDIS_USERNAME'),\n        'password' => env('REDIS_PASSWORD'),\n        'port' => env('REDIS_PORT', '6379'),\n        'database' => env('REDIS_CACHE_DB', '1'),\n    ],\n\n],\n"}]}],"\n","$L2","\n","$L3","\n","$L4","\n","$L5","\n","$L6","\n","$L7","\n","$L8","\n","$L9","\n","$La","\n","$Lb","\n","$Lc","\n","$Ld","\n","$Le","\n","$Lf","\n","$L10","\n","$L11","\n","$L12","\n","$L13","\n","$L14","\n","$L15","\n","$L16","\n","$L17","\n","$L18","\n","$L19","\n","$L1a","\n","$L1b","\n","$L1c","\n","$L1d","\n","$L1e","\n","$L1f","\n","$L20","\n","$L21","\n","$L22","\n","$L23","\n","$L24","\n","$L25","\n","$L26","\n","$L27","\n","$L28","\n","$L29","\n","$L2a","\n","$L2b","\n","$L2c","\n","$L2d","\n","$L2e","\n","$L2f","\n","$L30","\n","$L31","\n","$L32","\n","$L33","\n","$L34","\n","$L35","\n","$L36","\n","$L37","\n","$L38","\n","$L39","\n","$L3a","\n","$L3b","\n","$L3c","\n","$L3d","\n","$L3e","\n","$L3f","\n","$L40","\n","$L41","\n","$L42","\n","$L43","\n","$L44","\n","$L45","\n","$L46","\n","$L47","\n","$L48","\n","$L49","\n","$L4a","\n","$L4b","\n","$L4c","\n","$L4d","\n","$L4e","\n","$L4f","\n","$L50","\n","$L51"]}]]}]}],null,"$L52"]}],"loading":null,"isPartial":false}
2:["$","p",null,{"children":"設定檔中定義的每個 Redis 伺服器都必須有名稱、主機和連接埠，除非你定義了單一 URL 來代表 Redis 連線："}]
3:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"'redis' => [\n\n    'client' => env('REDIS_CLIENT', 'phpredis'),\n\n    'options' => [\n        'cluster' => env('REDIS_CLUSTER', 'redis'),\n        'prefix' => env('REDIS_PREFIX', Str::slug(env('APP_NAME', 'laravel'), '_').'_database_'),\n    ],\n\n    'default' => [\n        'url' => 'tcp://127.0.0.1:6379?database=0',\n    ],\n\n    'cache' => [\n        'url' => 'tls://user:password@127.0.0.1:6380?database=1',\n    ],\n\n],\n"}]}]
4:["$","a",null,{"name":"configuring-the-connection-scheme"}]
5:["$","h4",null,{"id":"設定連線協定-configuring-the-connection-scheme","children":["$","a",null,{"href":"#設定連線協定-configuring-the-connection-scheme","children":"設定連線協定 (Configuring the Connection Scheme)"}]}]
6:["$","p",null,{"children":["預設情況下，Redis 客戶端在連接到 Redis 伺服器時將使用 ",["$","code",null,{"children":"tcp"}]," 協定；但是，你可以透過在 Redis 伺服器的設定陣列中指定 ",["$","code",null,{"children":"scheme"}]," 設定選項來使用 TLS / SSL 加密："]}]
7:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"'default' => [\n    'scheme' => 'tls',\n    'url' => env('REDIS_URL'),\n    'host' => env('REDIS_HOST', '127.0.0.1'),\n    'username' => env('REDIS_USERNAME'),\n    'password' => env('REDIS_PASSWORD'),\n    'port' => env('REDIS_PORT', '6379'),\n    'database' => env('REDIS_DB', '0'),\n],\n"}]}]
8:["$","a",null,{"name":"clusters"}]
9:["$","h3",null,{"id":"叢集-clusters","children":["$","a",null,{"href":"#叢集-clusters","children":"叢集 (Clusters)"}]}]
a:["$","p",null,{"children":["如果你的應用程式使用 Redis 伺服器叢集，你應該在 Redis 設定的 ",["$","code",null,{"children":"clusters"}]," 鍵中定義這些叢集。此設定鍵預設不存在，因此你需要在應用程式的 ",["$","code",null,{"children":"config/database.php"}]," 設定檔中建立它："]}]
b:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"'redis' => [\n\n    'client' => env('REDIS_CLIENT', 'phpredis'),\n\n    'options' => [\n        'cluster' => env('REDIS_CLUSTER', 'redis'),\n        'prefix' => env('REDIS_PREFIX', Str::slug(env('APP_NAME', 'laravel'), '_').'_database_'),\n    ],\n\n    'clusters' => [\n        'default' => [\n            [\n                'url' => env('REDIS_URL'),\n                'host' => env('REDIS_HOST', '127.0.0.1'),\n                'username' => env('REDIS_USERNAME'),\n                'password' => env('REDIS_PASSWORD'),\n                'port' => env('REDIS_PORT', '6379'),\n                'database' => env('REDIS_DB', '0'),\n            ],\n        ],\n    ],\n\n    // ...\n],\n"}]}]
c:["$","p",null,{"children":["預設情況下，Laravel 將使用原生 Redis 叢集，因為 ",["$","code",null,{"children":"options.cluster"}]," 設定值設為 ",["$","code",null,{"children":"redis"}],"。Redis 叢集是一個很好的預設選項，因為它可以優雅地處理故障轉移。"]}]
d:["$","p",null,{"children":"Laravel 在使用 Predis 時也支援客戶端分片。然而，客戶端分片不處理故障轉移；因此，它主要適用於從另一個主要資料儲存區可用的暫時快取資料。"}]
e:["$","p",null,{"children":["如果你想使用客戶端分片而不是原生 Redis 叢集，可以在應用程式的 ",["$","code",null,{"children":"config/database.php"}]," 設定檔中移除 ",["$","code",null,{"children":"options.cluster"}]," 設定值："]}]
f:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"'redis' => [\n\n    'client' => env('REDIS_CLIENT', 'phpredis'),\n\n    'clusters' => [\n        // ...\n    ],\n\n    // ...\n],\n"}]}]
10:["$","a",null,{"name":"predis"}]
11:["$","h3",null,{"id":"predis","children":["$","a",null,{"href":"#predis","children":"Predis"}]}]
12:["$","p",null,{"children":["如果你想讓應用程式透過 Predis 套件與 Redis 互動，應該確保 ",["$","code",null,{"children":"REDIS_CLIENT"}]," 環境變數的值是 ",["$","code",null,{"children":"predis"}],"："]}]
13:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"'redis' => [\n\n    'client' => env('REDIS_CLIENT', 'predis'),\n\n    // ...\n],\n"}]}]
14:["$","p",null,{"children":["除了預設的設定選項外，Predis 還支援可為每個 Redis 伺服器定義的額外",["$","a",null,{"href":"https://github.com/nrk/predis/wiki/Connection-Parameters","children":"連線參數"}],"。若要使用這些額外的設定選項，請將它們新增到應用程式 ",["$","code",null,{"children":"config/database.php"}]," 設定檔中的 Redis 伺服器設定中："]}]
15:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"'default' => [\n    'url' => env('REDIS_URL'),\n    'host' => env('REDIS_HOST', '127.0.0.1'),\n    'username' => env('REDIS_USERNAME'),\n    'password' => env('REDIS_PASSWORD'),\n    'port' => env('REDIS_PORT', '6379'),\n    'database' => env('REDIS_DB', '0'),\n    'read_write_timeout' => 60,\n],\n"}]}]
16:["$","a",null,{"name":"phpredis"}]
17:["$","h3",null,{"id":"phpredis","children":["$","a",null,{"href":"#phpredis","children":"PhpRedis"}]}]
18:["$","p",null,{"children":["預設情況下，Laravel 將使用 PhpRedis 擴充套件與 Redis 通訊。Laravel 用於與 Redis 通訊的客戶端由 ",["$","code",null,{"children":"redis.client"}]," 設定選項的值決定，該值通常反映 ",["$","code",null,{"children":"REDIS_CLIENT"}]," 環境變數的值："]}]
19:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"'redis' => [\n\n    'client' => env('REDIS_CLIENT', 'phpredis'),\n\n    // ...\n],\n"}]}]
1a:["$","p",null,{"children":["除了預設的設定選項外，PhpRedis 還支援以下額外的連線參數：",["$","code",null,{"children":"name"}],"、",["$","code",null,{"children":"persistent"}],"、",["$","code",null,{"children":"persistent_id"}],"、",["$","code",null,{"children":"prefix"}],"、",["$","code",null,{"children":"read_timeout"}],"、",["$","code",null,{"children":"retry_interval"}],"、",["$","code",null,{"children":"max_retries"}],"、",["$","code",null,{"children":"backoff_algorithm"}],"、",["$","code",null,{"children":"backoff_base"}],"、",["$","code",null,{"children":"backoff_cap"}],"、",["$","code",null,{"children":"timeout"}]," 和 ",["$","code",null,{"children":"context"}],"。你可以將這些選項中的任何一個新增到 ",["$","code",null,{"children":"config/database.php"}]," 設定檔中的 Redis 伺服器設定中："]}]
1b:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"'default' => [\n    'url' => env('REDIS_URL'),\n    'host' => env('REDIS_HOST', '127.0.0.1'),\n    'username' => env('REDIS_USERNAME'),\n    'password' => env('REDIS_PASSWORD'),\n    'port' => env('REDIS_PORT', '6379'),\n    'database' => env('REDIS_DB', '0'),\n    'read_timeout' => 60,\n    'context' => [\n        // 'auth' => ['username', 'secret'],\n        // 'stream' => ['verify_peer' => false],\n    ],\n],\n"}]}]
1c:["$","a",null,{"name":"retry-and-backoff-configuration"}]
1d:["$","h4",null,{"id":"重試與退避設定-retry-and-backoff-configuration","children":["$","a",null,{"href":"#重試與退避設定-retry-and-backoff-configuration","children":"重試與退避設定 (Retry and Backoff Configuration)"}]}]
1e:["$","p",null,{"children":[["$","code",null,{"children":"retry_interval"}],"、",["$","code",null,{"children":"max_retries"}],"、",["$","code",null,{"children":"backoff_algorithm"}],"、",["$","code",null,{"children":"backoff_base"}]," 和 ",["$","code",null,{"children":"backoff_cap"}]," 選項可用於設定 PhpRedis 客戶端應如何嘗試重新連接到 Redis 伺服器。支援以下退避演算法：",["$","code",null,{"children":"default"}],"、",["$","code",null,{"children":"decorrelated_jitter"}],"、",["$","code",null,{"children":"equal_jitter"}],"、",["$","code",null,{"children":"exponential"}],"、",["$","code",null,{"children":"uniform"}]," 和 ",["$","code",null,{"children":"constant"}],"："]}]
1f:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"'default' => [\n    'url' => env('REDIS_URL'),\n    'host' => env('REDIS_HOST', '127.0.0.1'),\n    'username' => env('REDIS_USERNAME'),\n    'password' => env('REDIS_PASSWORD'),\n    'port' => env('REDIS_PORT', '6379'),\n    'database' => env('REDIS_DB', '0'),\n    'max_retries' => env('REDIS_MAX_RETRIES', 3),\n    'backoff_algorithm' => env('REDIS_BACKOFF_ALGORITHM', 'decorrelated_jitter'),\n    'backoff_base' => env('REDIS_BACKOFF_BASE', 100),\n    'backoff_cap' => env('REDIS_BACKOFF_CAP', 1000),\n],\n"}]}]
20:["$","a",null,{"name":"unix-socket-connections"}]
21:["$","h4",null,{"id":"unix-socket-連線-unix-socket-connections","children":["$","a",null,{"href":"#unix-socket-連線-unix-socket-connections","children":"Unix Socket 連線 (Unix Socket Connections)"}]}]
22:["$","p",null,{"children":["Redis 連線也可以設定為使用 Unix Socket 而不是 TCP。這可以透過消除 TCP 開銷來提高連接到與應用程式位於同一伺服器上的 Redis 實例的效能。若要設定 Redis 使用 Unix Socket，請將 ",["$","code",null,{"children":"REDIS_HOST"}]," 環境變數設為 Redis Socket 的路徑，並將 ",["$","code",null,{"children":"REDIS_PORT"}]," 環境變數設為 ",["$","code",null,{"children":"0"}],"："]}]
23:["$","pre",null,{"children":["$","code",null,{"className":"language-env","children":"REDIS_HOST=/run/redis/redis.sock\nREDIS_PORT=0\n"}]}]
24:["$","a",null,{"name":"phpredis-serialization"}]
25:["$","h4",null,{"id":"phpredis-序列化與壓縮-phpredis-serialization-and-compression","children":["$","a",null,{"href":"#phpredis-序列化與壓縮-phpredis-serialization-and-compression","children":"PhpRedis 序列化與壓縮 (PhpRedis Serialization and Compression)"}]}]
26:["$","p",null,{"children":["PhpRedis 擴充套件也可以設定為使用各種序列化器和壓縮演算法。這些演算法可以透過 Redis 設定的 ",["$","code",null,{"children":"options"}]," 陣列進行設定："]}]
27:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"'redis' => [\n\n    'client' => env('REDIS_CLIENT', 'phpredis'),\n\n    'options' => [\n        'cluster' => env('REDIS_CLUSTER', 'redis'),\n        'prefix' => env('REDIS_PREFIX', Str::slug(env('APP_NAME', 'laravel'), '_').'_database_'),\n        'serializer' => Redis::SERIALIZER_MSGPACK,\n        'compression' => Redis::COMPRESSION_LZ4,\n    ],\n\n    // ...\n],\n"}]}]
28:["$","p",null,{"children":["目前支援的序列化器包括：",["$","code",null,{"children":"Redis::SERIALIZER_NONE"}],"（預設）、",["$","code",null,{"children":"Redis::SERIALIZER_PHP"}],"、",["$","code",null,{"children":"Redis::SERIALIZER_JSON"}],"、",["$","code",null,{"children":"Redis::SERIALIZER_IGBINARY"}]," 和 ",["$","code",null,{"children":"Redis::SERIALIZER_MSGPACK"}],"。"]}]
29:["$","p",null,{"children":["支援的壓縮演算法包括：",["$","code",null,{"children":"Redis::COMPRESSION_NONE"}],"（預設）、",["$","code",null,{"children":"Redis::COMPRESSION_LZF"}],"、",["$","code",null,{"children":"Redis::COMPRESSION_ZSTD"}]," 和 ",["$","code",null,{"children":"Redis::COMPRESSION_LZ4"}],"。"]}]
2a:["$","a",null,{"name":"interacting-with-redis"}]
2b:["$","h2",null,{"id":"與-redis-互動-interacting-with-redis","children":["$","a",null,{"href":"#與-redis-互動-interacting-with-redis","children":"與 Redis 互動 (Interacting With Redis)"}]}]
2c:["$","p",null,{"children":["你可以透過呼叫 ",["$","code",null,{"children":"Redis"}]," ",["$","a",null,{"href":"/docs/facades","children":"Facade"}]," 上的各種方法來與 Redis 互動。",["$","code",null,{"children":"Redis"}]," Facade 支援動態方法，這意味著你可以在 Facade 上呼叫任何 ",["$","a",null,{"href":"https://redis.io/commands","children":"Redis 指令"}],"，該指令將直接傳遞給 Redis。在此範例中，我們將透過在 ",["$","code",null,{"children":"Redis"}]," Facade 上呼叫 ",["$","code",null,{"children":"get"}]," 方法來呼叫 Redis ",["$","code",null,{"children":"GET"}]," 指令："]}]
2d:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Support\\Facades\\Redis;\nuse Illuminate\\View\\View;\n\nclass UserController extends Controller\n{\n    /**\n     * 顯示給定使用者的個人檔案。\n     */\n    public function show(string $id): View\n    {\n        return view('user.profile', [\n            'user' => Redis::get('user:profile:'.$id)\n        ]);\n    }\n}\n"}]}]
2e:["$","p",null,{"children":["如上所述，你可以在 ",["$","code",null,{"children":"Redis"}]," Facade 上呼叫任何 Redis 指令。Laravel 使用魔術方法將指令傳遞給 Redis 伺服器。如果 Redis 指令需要引數，你應該將這些引數傳遞給 Facade 的對應方法："]}]
2f:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Support\\Facades\\Redis;\n\nRedis::set('name', 'Taylor');\n\n$values = Redis::lrange('names', 5, 10);\n"}]}]
30:["$","p",null,{"children":["或者，你可以使用 ",["$","code",null,{"children":"Redis"}]," Facade 的 ",["$","code",null,{"children":"command"}]," 方法將指令傳遞給伺服器，該方法接受指令名稱作為第一個引數，並接受一個值陣列作為第二個引數："]}]
31:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$values = Redis::command('lrange', ['name', 5, 10]);\n"}]}]
32:["$","a",null,{"name":"using-multiple-redis-connections"}]
33:["$","h4",null,{"id":"使用多個-redis-連線-using-multiple-redis-connections","children":["$","a",null,{"href":"#使用多個-redis-連線-using-multiple-redis-connections","children":"使用多個 Redis 連線 (Using Multiple Redis Connections)"}]}]
34:["$","p",null,{"children":["你的應用程式的 ",["$","code",null,{"children":"config/database.php"}]," 設定檔允許你定義多個 Redis 連線/伺服器。你可以使用 ",["$","code",null,{"children":"Redis"}]," Facade 的 ",["$","code",null,{"children":"connection"}]," 方法取得特定 Redis 連線的連線："]}]
35:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$redis = Redis::connection('connection-name');\n"}]}]
36:["$","p",null,{"children":["若要取得預設 Redis 連線的實例，你可以不帶任何額外引數呼叫 ",["$","code",null,{"children":"connection"}]," 方法："]}]
37:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$redis = Redis::connection();\n"}]}]
38:["$","a",null,{"name":"transactions"}]
39:["$","h3",null,{"id":"事務-transactions","children":["$","a",null,{"href":"#事務-transactions","children":"事務 (Transactions)"}]}]
3a:["$","p",null,{"children":[["$","code",null,{"children":"Redis"}]," Facade 的 ",["$","code",null,{"children":"transaction"}]," 方法為 Redis 的原生 ",["$","code",null,{"children":"MULTI"}]," 和 ",["$","code",null,{"children":"EXEC"}]," 指令提供了一個方便的包裝。",["$","code",null,{"children":"transaction"}]," 方法接受一個閉包作為其唯一引數。此閉包將接收一個 Redis 連線實例，並可以向此實例發送任何它想要的指令。閉包內發送的所有 Redis 指令將在單一原子事務中執行："]}]
3b:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Redis;\nuse Illuminate\\Support\\Facades;\n\nFacades\\Redis::transaction(function (Redis $redis) {\n    $redis->incr('user_visits', 1);\n    $redis->incr('total_visits', 1);\n});\n"}]}]
3c:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"[!WARNING]\n在定義 Redis 事務時，你可能無法從 Redis 連線中取得任何值。請記住，你的事務是作為單一原子操作執行的，並且該操作直到整個閉包完成執行其指令後才會執行。"}],"\n"]}]
3d:["$","h4",null,{"id":"lua-腳本-lua-scripts","children":["$","a",null,{"href":"#lua-腳本-lua-scripts","children":"Lua 腳本 (Lua Scripts)"}]}]
3e:["$","p",null,{"children":[["$","code",null,{"children":"eval"}]," 方法提供了另一種在單一原子操作中執行多個 Redis 指令的方法。然而，",["$","code",null,{"children":"eval"}]," 方法的好處是能夠在該操作期間與 Redis 鍵值互動並檢查它們。Redis 腳本是用 ",["$","a",null,{"href":"https://www.lua.org","children":"Lua 程式語言"}]," 編寫的。"]}]
3f:["$","p",null,{"children":[["$","code",null,{"children":"eval"}]," 方法一開始可能看起來有點可怕，但我們將透過一個基本範例來打破僵局。",["$","code",null,{"children":"eval"}]," 方法需要幾個引數。首先，你應該將 Lua 腳本（作為字串）傳遞給方法。其次，你應該傳遞腳本互動的鍵數量（作為整數）。第三，你應該傳遞這些鍵的名稱。最後，你可以傳遞你需要在腳本中存取的任何其他額外引數。"]}]
40:["$","p",null,{"children":"在此範例中，我們將遞增一個計數器，檢查其新值，如果第一個計數器的值大於五，則遞增第二個計數器。最後，我們將傳回第一個計數器的值："}]
41:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$value = Redis::eval(<<<'LUA'\n    local counter = redis.call(\"incr\", KEYS[1])\n\n    if counter > 5 then\n        redis.call(\"incr\", KEYS[2])\n    end\n\n    return counter\nLUA, 2, 'first-counter', 'second-counter');\n"}]}]
42:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!WARNING]\n請參閱 ",["$","a",null,{"href":"https://redis.io/commands/eval","children":"Redis 文件"}]," 以取得有關 Redis 腳本的更多資訊。"]}],"\n"]}]
43:["$","a",null,{"name":"pipelining-commands"}]
44:["$","h3",null,{"id":"管線指令-pipelining-commands","children":["$","a",null,{"href":"#管線指令-pipelining-commands","children":"管線指令 (Pipelining Commands)"}]}]
45:["$","p",null,{"children":["有時你可能需要執行數十個 Redis 指令。與其為每個指令對 Redis 伺服器進行網路傳輸，你可以使用 ",["$","code",null,{"children":"pipeline"}]," 方法。",["$","code",null,{"children":"pipeline"}]," 方法接受一個引數：一個接收 Redis 實例的閉包。你可以向此 Redis 實例發送所有指令，它們將同時發送到 Redis 伺服器以減少對伺服器的網路傳輸。指令仍將按照發送的順序執行："]}]
46:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Redis;\nuse Illuminate\\Support\\Facades;\n\nFacades\\Redis::pipeline(function (Redis $pipe) {\n    for ($i = 0; $i < 1000; $i++) {\n        $pipe->set(\"key:$i\", $i);\n    }\n});\n"}]}]
47:["$","a",null,{"name":"pubsub"}]
48:["$","h2",null,{"id":"發布--訂閱-pub--sub","children":["$","a",null,{"href":"#發布--訂閱-pub--sub","children":"發布 / 訂閱 (Pub / Sub)"}]}]
49:["$","p",null,{"children":["Laravel 為 Redis 的 ",["$","code",null,{"children":"publish"}]," 和 ",["$","code",null,{"children":"subscribe"}]," 指令提供了一個方便的介面。這些 Redis 指令允許你在給定的「頻道」上監聽訊息。你可以從另一個應用程式發布訊息到頻道，甚至使用另一種程式語言，從而實現應用程式和程序之間的輕鬆通訊。"]}]
4a:["$","p",null,{"children":["首先，讓我們使用 ",["$","code",null,{"children":"subscribe"}]," 方法設定一個頻道監聽器。由於呼叫 ",["$","code",null,{"children":"subscribe"}]," 方法會開始一個長時間執行的程序，我們將此方法呼叫放在一個 ",["$","a",null,{"href":"/docs/artisan","children":"Artisan 指令"}]," 中："]}]
4b:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Console\\Commands;\n\nuse Illuminate\\Console\\Command;\nuse Illuminate\\Support\\Facades\\Redis;\n\nclass RedisSubscribe extends Command\n{\n    /**\n     * 控制台指令的名稱和簽章。\n     *\n     * @var string\n     */\n    protected $signature = 'redis:subscribe';\n\n    /**\n     * 控制台指令的描述。\n     *\n     * @var string\n     */\n    protected $description = '訂閱 Redis 頻道';\n\n    /**\n     * 執行控制台指令。\n     */\n    public function handle(): void\n    {\n        Redis::subscribe(['test-channel'], function (string $message) {\n            echo $message;\n        });\n    }\n}\n"}]}]
4c:["$","p",null,{"children":["現在我們可以使用 ",["$","code",null,{"children":"publish"}]," 方法向頻道發布訊息："]}]
4d:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Support\\Facades\\Redis;\n\nRoute::get('/publish', function () {\n    // ...\n\n    Redis::publish('test-channel', json_encode([\n        'name' => 'Adam Wathan'\n    ]));\n});\n"}]}]
4e:["$","a",null,{"name":"wildcard-subscriptions"}]
4f:["$","h4",null,{"id":"萬用字元訂閱-wildcard-subscriptions","children":["$","a",null,{"href":"#萬用字元訂閱-wildcard-subscriptions","children":"萬用字元訂閱 (Wildcard Subscriptions)"}]}]
50:["$","p",null,{"children":["使用 ",["$","code",null,{"children":"psubscribe"}]," 方法，你可以訂閱萬用字元頻道，這對於捕獲所有頻道上的所有訊息可能很有用。頻道名稱將作為第二個引數傳遞給提供的閉包："]}]
51:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Redis::psubscribe(['*'], function (string $message, string $channel) {\n    echo $message;\n});\n\nRedis::psubscribe(['users.*'], function (string $message, string $channel) {\n    echo $message;\n});\n"}]}]
52:["$","$L53",null,{"children":["$","$54",null,{"name":"Next.MetadataOutlet","children":"$@55"}]}]
55:null
