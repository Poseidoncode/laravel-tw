1:"$Sreact.fragment"
1d:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/247eb132b7f7b574.js"],"OutletBoundary"]
1e:"$Sreact.suspense"
0:{"buildId":"kE5s4wNidqhVn8fA906WC","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"container mx-auto py-10","children":["$","div",null,{"className":"mx-auto max-w-3xl","children":[["$","div",null,{"className":"mb-8","children":[["$","h1",null,{"className":"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl","children":"Eloquent：序列化"}],"$undefined"]}],["$","article",null,{"className":"prose prose-slate dark:prose-invert max-w-none","children":[["$","h1",null,{"id":"eloquent序列化","children":["$","a",null,{"href":"#eloquent序列化","children":"Eloquent：序列化"}]}],"\n",["$","h2",null,{"id":"簡介","children":["$","a",null,{"href":"#簡介","children":"簡介"}]}],"\n",["$","p",null,{"children":"使用 Laravel 建構 API 時，你經常需要將 Model 和關聯轉換為陣列或 JSON。Eloquent 包含了便利的方法來進行這些轉換，以及控制哪些屬性會包含在 Model 的序列化表示中。"}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!NOTE]\n若要獲得更強大的 Eloquent Model 和 Collection JSON 序列化處理方式，請查看 ",["$","a",null,{"href":"/docs/%7B%7Bversion%7D%7D/eloquent-resources","children":"Eloquent API Resources"}]," 的文件。"]}],"\n"]}],"\n",["$","h2",null,{"id":"序列化-model-與-collection","children":["$","a",null,{"href":"#序列化-model-與-collection","children":"序列化 Model 與 Collection"}]}],"\n",["$","h3",null,{"id":"序列化為陣列","children":["$","a",null,{"href":"#序列化為陣列","children":"序列化為陣列"}]}],"\n",["$","p",null,{"children":["要將 Model 及其已載入的",["$","a",null,{"href":"/docs/%7B%7Bversion%7D%7D/eloquent-relationships","children":"關聯"}],"轉換為陣列，你應該使用 ",["$","code",null,{"children":"toArray"}]," 方法。此方法是遞迴的，因此所有屬性和所有關聯（包括關聯的關聯）都會被轉換為陣列："]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use App\\Models\\User;\n\n$user = User::with('roles')->first();\n\nreturn $user->toArray();\n"}]}],"\n",["$","p",null,{"children":[["$","code",null,{"children":"attributesToArray"}]," 方法可用於將 Model 的屬性轉換為陣列，但不包含其關聯："]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$user = User::first();\n\nreturn $user->attributesToArray();\n"}]}],"\n",["$","p",null,{"children":["你也可以透過在 Collection 實例上呼叫 ",["$","code",null,{"children":"toArray"}]," 方法，將整個 Model ",["$","a",null,{"href":"/docs/%7B%7Bversion%7D%7D/eloquent-collections","children":"Collection"}]," 轉換為陣列："]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$users = User::all();\n\nreturn $users->toArray();\n"}]}],"\n",["$","h3",null,{"id":"序列化為-json","children":["$","a",null,{"href":"#序列化為-json","children":"序列化為 JSON"}]}],"\n",["$","p",null,{"children":["要將 Model 轉換為 JSON，你應該使用 ",["$","code",null,{"children":"toJson"}]," 方法。與 ",["$","code",null,{"children":"toArray"}]," 一樣，",["$","code",null,{"children":"toJson"}]," 方法是遞迴的，因此所有屬性和關聯都會被轉換為 JSON。你也可以指定任何 ",["$","a",null,{"href":"https://secure.php.net/manual/en/function.json-encode.php","children":"PHP 支援的"}]," JSON 編碼選項："]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use App\\Models\\User;\n\n$user = User::find(1);\n\nreturn $user->toJson();\n\nreturn $user->toJson(JSON_PRETTY_PRINT);\n"}]}],"\n",["$","p",null,{"children":["或者，你可以將 Model 或 Collection 轉型為字串，這會自動呼叫 Model 或 Collection 上的 ",["$","code",null,{"children":"toJson"}]," 方法："]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"return (string) User::find(1);\n"}]}],"\n",["$","p",null,{"children":"由於 Model 和 Collection 在轉型為字串時會被轉換為 JSON，你可以直接從應用程式的路由或控制器回傳 Eloquent 物件。Laravel 會在它們從路由或控制器回傳時自動將 Eloquent Model 和 Collection 序列化為 JSON："}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Route::get('/users', function () {\n    return User::all();\n});\n"}]}],"\n",["$","h4",null,{"id":"關聯","children":["$","a",null,{"href":"#關聯","children":"關聯"}]}],"\n",["$","p",null,{"children":"當 Eloquent Model 被轉換為 JSON 時，其已載入的關聯會自動作為屬性包含在 JSON 物件中。另外，雖然 Eloquent 關聯方法是使用「駝峰式大小寫」方法名稱定義的，但關聯的 JSON 屬性會是「蛇底式」。"}],"\n",["$","h2",null,{"id":"從-json-隱藏屬性","children":["$","a",null,{"href":"#從-json-隱藏屬性","children":"從 JSON 隱藏屬性"}]}],"\n",["$","p",null,{"children":["有時你可能希望限制包含在 Model 陣列或 JSON 表示中的屬性，例如密碼。為此，請在 Model 中新增一個 ",["$","code",null,{"children":"$$hidden"}]," 屬性。列在 ",["$","code",null,{"children":"$$hidden"}]," 屬性陣列中的屬性不會包含在 Model 的序列化表示中："]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass User extends Model\n{\n    /**\n     * 應該為序列化隱藏的屬性。\n     *\n     * @var array<string>\n     */\n    protected $hidden = ['password'];\n}\n"}]}],"\n","$L2","\n","$L3","\n","$L4","\n","$L5","\n","$L6","\n","$L7","\n","$L8","\n","$L9","\n","$La","\n","$Lb","\n","$Lc","\n","$Ld","\n","$Le","\n","$Lf","\n","$L10","\n","$L11","\n","$L12","\n","$L13","\n","$L14","\n","$L15","\n","$L16","\n","$L17","\n","$L18","\n","$L19","\n","$L1a","\n","$L1b"]}]]}]}],null,"$L1c"]}],"loading":null,"isPartial":false}
2:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!NOTE]\n要隱藏關聯，請將關聯的方法名稱加入到 Eloquent Model 的 ",["$","code",null,{"children":"$$hidden"}]," 屬性。"]}],"\n"]}]
3:["$","p",null,{"children":["或者，你可以使用 ",["$","code",null,{"children":"visible"}]," 屬性來定義一個「允許清單」，指定應該包含在 Model 陣列和 JSON 表示中的屬性。當 Model 被轉換為陣列或 JSON 時，所有不在 ",["$","code",null,{"children":"$$visible"}]," 陣列中的屬性都會被隱藏："]}]
4:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass User extends Model\n{\n    /**\n     * 應該在陣列中可見的屬性。\n     *\n     * @var array\n     */\n    protected $visible = ['first_name', 'last_name'];\n}\n"}]}]
5:["$","h4",null,{"id":"臨時修改屬性可見性","children":["$","a",null,{"href":"#臨時修改屬性可見性","children":"臨時修改屬性可見性"}]}]
6:["$","p",null,{"children":["如果你想讓某些通常隱藏的屬性在給定的 Model 實例上可見，你可以使用 ",["$","code",null,{"children":"makeVisible"}]," 或 ",["$","code",null,{"children":"mergeVisible"}]," 方法。",["$","code",null,{"children":"makeVisible"}]," 方法會回傳 Model 實例："]}]
7:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"return $user->makeVisible('attribute')->toArray();\n\nreturn $user->mergeVisible(['name', 'email'])->toArray();\n"}]}]
8:["$","p",null,{"children":["同樣地，如果你想隱藏某些通常可見的屬性，你可以使用 ",["$","code",null,{"children":"makeHidden"}]," 或 ",["$","code",null,{"children":"mergeHidden"}]," 方法："]}]
9:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"return $user->makeHidden('attribute')->toArray();\n\nreturn $user->mergeHidden(['name', 'email'])->toArray();\n"}]}]
a:["$","p",null,{"children":["如果你希望臨時覆寫所有可見或隱藏的屬性，你可以分別使用 ",["$","code",null,{"children":"setVisible"}]," 和 ",["$","code",null,{"children":"setHidden"}]," 方法："]}]
b:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"return $user->setVisible(['id', 'name'])->toArray();\n\nreturn $user->setHidden(['email', 'password', 'remember_token'])->toArray();\n"}]}]
c:["$","h2",null,{"id":"附加值到-json","children":["$","a",null,{"href":"#附加值到-json","children":"附加值到 JSON"}]}]
d:["$","p",null,{"children":["有時，在將 Model 轉換為陣列或 JSON 時，你可能希望新增在資料庫中沒有對應欄位的屬性。為此，首先為該值定義一個",["$","a",null,{"href":"/docs/%7B%7Bversion%7D%7D/eloquent-mutators","children":"存取器"}],"："]}]
e:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Casts\\Attribute;\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass User extends Model\n{\n    /**\n     * 判斷使用者是否為管理員。\n     */\n    protected function isAdmin(): Attribute\n    {\n        return new Attribute(\n            get: fn () => 'yes',\n        );\n    }\n}\n"}]}]
f:["$","p",null,{"children":["如果你希望存取器始終附加到 Model 的陣列和 JSON 表示中，你可以將屬性名稱加入到 Model 的 ",["$","code",null,{"children":"appends"}]," 屬性中。請注意，屬性名稱通常使用其「蛇底式」序列化表示來參照，即使存取器的 PHP 方法是使用「駝峰式」定義的："]}]
10:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass User extends Model\n{\n    /**\n     * 要附加到 Model 陣列形式的存取器。\n     *\n     * @var array\n     */\n    protected $appends = ['is_admin'];\n}\n"}]}]
11:["$","p",null,{"children":["一旦屬性被加入到 ",["$","code",null,{"children":"appends"}]," 清單，它就會包含在 Model 的陣列和 JSON 表示中。",["$","code",null,{"children":"appends"}]," 陣列中的屬性也會遵循在 Model 上設定的 ",["$","code",null,{"children":"visible"}]," 和 ",["$","code",null,{"children":"hidden"}]," 設定。"]}]
12:["$","h4",null,{"id":"在執行時期附加","children":["$","a",null,{"href":"#在執行時期附加","children":"在執行時期附加"}]}]
13:["$","p",null,{"children":["在執行時期，你可以使用 ",["$","code",null,{"children":"append"}]," 或 ",["$","code",null,{"children":"mergeAppends"}]," 方法指示 Model 實例附加額外的屬性。或者，你可以使用 ",["$","code",null,{"children":"setAppends"}]," 方法來覆寫給定 Model 實例的整個附加屬性陣列："]}]
14:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"return $user->append('is_admin')->toArray();\n\nreturn $user->mergeAppends(['is_admin', 'status'])->toArray();\n\nreturn $user->setAppends(['is_admin'])->toArray();\n"}]}]
15:["$","h2",null,{"id":"日期序列化","children":["$","a",null,{"href":"#日期序列化","children":"日期序列化"}]}]
16:["$","h4",null,{"id":"自訂預設日期格式","children":["$","a",null,{"href":"#自訂預設日期格式","children":"自訂預設日期格式"}]}]
17:["$","p",null,{"children":["你可以透過覆寫 ",["$","code",null,{"children":"serializeDate"}]," 方法來自訂預設的序列化格式。此方法不會影響日期在資料庫中儲存的格式："]}]
18:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"/**\n * 為陣列 / JSON 序列化準備日期。\n */\nprotected function serializeDate(DateTimeInterface $date): string\n{\n    return $date->format('Y-m-d');\n}\n"}]}]
19:["$","h4",null,{"id":"為每個屬性自訂日期格式","children":["$","a",null,{"href":"#為每個屬性自訂日期格式","children":"為每個屬性自訂日期格式"}]}]
1a:["$","p",null,{"children":["你可以透過在 Model 的",["$","a",null,{"href":"/docs/%7B%7Bversion%7D%7D/eloquent-mutators#attribute-casting","children":"轉換宣告"}],"中指定日期格式，來自訂個別 Eloquent 日期屬性的序列化格式："]}]
1b:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"protected function casts(): array\n{\n    return [\n        'birthday' => 'date:Y-m-d',\n        'joined_at' => 'datetime:Y-m-d H:00',\n    ];\n}\n"}]}]
1c:["$","$L1d",null,{"children":["$","$1e",null,{"name":"Next.MetadataOutlet","children":"$@1f"}]}]
1f:null
