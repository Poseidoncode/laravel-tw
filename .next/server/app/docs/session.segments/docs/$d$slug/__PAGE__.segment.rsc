1:"$Sreact.fragment"
68:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/247eb132b7f7b574.js"],"OutletBoundary"]
69:"$Sreact.suspense"
0:{"buildId":"DBhogvPSakldbZwCRUzLf","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"container mx-auto py-10","children":["$","div",null,{"className":"mx-auto max-w-3xl","children":[["$","div",null,{"className":"mb-8","children":[["$","h1",null,{"className":"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl","children":"Session"}],["$","p",null,{"className":"text-xl text-muted-foreground mt-2","children":"Laravel 透過統一的 API 支援多種 Session 後端"}]]}],["$","article",null,{"className":"prose prose-slate dark:prose-invert max-w-none","children":[["$","h1",null,{"id":"http-session","children":["$","a",null,{"href":"#http-session","children":"HTTP Session"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","a",null,{"href":"#introduction","children":"簡介"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#configuration","children":"設定"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#driver-prerequisites","children":"驅動程式先決條件"}]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":[["$","a",null,{"href":"#interacting-with-the-session","children":"與 Session 互動"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#retrieving-data","children":"取得資料"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#storing-data","children":"儲存資料"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#flash-data","children":"快閃資料"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#deleting-data","children":"刪除資料"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#regenerating-the-session-id","children":"重新產生 Session ID"}]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#session-cache","children":"Session 快取"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#session-blocking","children":"Session 阻塞"}]}],"\n",["$","li",null,{"children":[["$","a",null,{"href":"#adding-custom-session-drivers","children":"新增自訂 Session 驅動程式"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#implementing-the-driver","children":"實作驅動程式"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#registering-the-driver","children":"註冊驅動程式"}]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","a",null,{"name":"introduction"}],"\n",["$","h2",null,{"id":"簡介","children":["$","a",null,{"href":"#簡介","children":"簡介"}]}],"\n",["$","p",null,{"children":"由於 HTTP 驅動的應用程式是無狀態的，Session 提供了一種在多個請求之間儲存使用者資訊的方式。該使用者資訊通常會放置在可從後續請求存取的持久性儲存 / 後端中。"}],"\n",["$","p",null,{"children":["Laravel 內建了多種 Session 後端，可透過富有表現力的統一 API 進行存取。支援流行的後端，如 ",["$","a",null,{"href":"https://memcached.org","children":"Memcached"}],"、",["$","a",null,{"href":"https://redis.io","children":"Redis"}]," 和資料庫。"]}],"\n",["$","a",null,{"name":"configuration"}],"\n",["$","h3",null,{"id":"設定","children":["$","a",null,{"href":"#設定","children":"設定"}]}],"\n",["$","p",null,{"children":["您的應用程式的 Session 設定檔儲存在 ",["$","code",null,{"children":"config/session.php"}],"。請務必查看此檔案中可用的選項。預設情況下，Laravel 設定為使用 ",["$","code",null,{"children":"database"}]," Session 驅動程式。"]}],"\n",["$","p",null,{"children":["Session ",["$","code",null,{"children":"driver"}]," 設定選項定義了每個請求的 Session 資料將儲存在何處。Laravel 包含多種驅動程式："]}],"\n",["$","div",null,{"className":"content-list","markdown":"1","children":["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","code",null,{"children":"file"}]," - Session 儲存在 ",["$","code",null,{"children":"storage/framework/sessions"}],"。"]}],"\n",["$","li",null,{"children":[["$","code",null,{"children":"cookie"}]," - Session 儲存在安全、加密的 Cookie 中。"]}],"\n",["$","li",null,{"children":[["$","code",null,{"children":"database"}]," - Session 儲存在關聯式資料庫中。"]}],"\n",["$","li",null,{"children":[["$","code",null,{"children":"memcached"}]," / ",["$","code",null,{"children":"redis"}]," - Session 儲存在這些快速、基於快取的儲存中。"]}],"\n",["$","li",null,{"children":[["$","code",null,{"children":"dynamodb"}]," - Session 儲存在 AWS DynamoDB 中。"]}],"\n",["$","li",null,{"children":[["$","code",null,{"children":"array"}]," - Session 儲存在 PHP 陣列中，不會被持久化。"]}],"\n"]}]}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!NOTE]\narray 驅動程式主要在 ",["$","a",null,{"href":"/docs/testing","children":"測試"}]," 期間使用，可防止儲存在 Session 中的資料被持久化。"]}],"\n"]}],"\n",["$","a",null,{"name":"driver-prerequisites"}],"\n",["$","h3",null,{"id":"驅動程式先決條件","children":["$","a",null,{"href":"#驅動程式先決條件","children":"驅動程式先決條件"}]}],"\n",["$","a",null,{"name":"database"}],"\n",["$","h4",null,{"id":"資料庫","children":["$","a",null,{"href":"#資料庫","children":"資料庫"}]}],"\n",["$","p",null,{"children":["使用 ",["$","code",null,{"children":"database"}]," Session 驅動程式時，您需要確保有一個資料庫資料表來包含 Session 資料。通常，這包含在 Laravel 的預設 ",["$","code",null,{"children":"0001_01_01_000000_create_users_table.php"}]," ",["$","a",null,{"href":"/docs/migrations","children":"資料庫 Migration"}]," 中；但是，如果您因為任何原因沒有 ",["$","code",null,{"children":"sessions"}]," 資料表，您可以使用 ","$L2"," Artisan 指令來產生此 Migration："]}],"\n","$L3","\n","$L4","\n","$L5","\n","$L6","\n","$L7","\n","$L8","\n","$L9","\n","$La","\n","$Lb","\n","$Lc","\n","$Ld","\n","$Le","\n","$Lf","\n","$L10","\n","$L11","\n","$L12","\n","$L13","\n","$L14","\n","$L15","\n","$L16","\n","$L17","\n","$L18","\n","$L19","\n","$L1a","\n","$L1b","\n","$L1c","\n","$L1d","\n","$L1e","\n","$L1f","\n","$L20","\n","$L21","\n","$L22","\n","$L23","\n","$L24","\n","$L25","\n","$L26","\n","$L27","\n","$L28","\n","$L29","\n","$L2a","\n","$L2b","\n","$L2c","\n","$L2d","\n","$L2e","\n","$L2f","\n","$L30","\n","$L31","\n","$L32","\n","$L33","\n","$L34","\n","$L35","\n","$L36","\n","$L37","\n","$L38","\n","$L39","\n","$L3a","\n","$L3b","\n","$L3c","\n","$L3d","\n","$L3e","\n","$L3f","\n","$L40","\n","$L41","\n","$L42","\n","$L43","\n","$L44","\n","$L45","\n","$L46","\n","$L47","\n","$L48","\n","$L49","\n","$L4a","\n","$L4b","\n","$L4c","\n","$L4d","\n","$L4e","\n","$L4f","\n","$L50","\n","$L51","\n","$L52","\n","$L53","\n","$L54","\n","$L55","\n","$L56","\n","$L57","\n","$L58","\n","$L59","\n","$L5a","\n","$L5b","\n","$L5c","\n","$L5d","\n","$L5e","\n","$L5f","\n","$L60","\n","$L61","\n","$L62","\n","$L63","\n","$L64","\n","$L65","\n","$L66"]}]]}]}],null,"$L67"]}],"loading":null,"isPartial":false}
2:["$","code",null,{"children":"make:session-table"}]
3:["$","pre",null,{"children":["$","code",null,{"className":"language-shell","children":"php artisan make:session-table\n\nphp artisan migrate\n"}]}]
4:["$","a",null,{"name":"redis"}]
5:["$","h4",null,{"id":"redis","children":["$","a",null,{"href":"#redis","children":"Redis"}]}]
6:["$","p",null,{"children":["在 Laravel 中使用 Redis Session 之前，您需要透過 PECL 安裝 PhpRedis PHP 擴充功能，或透過 Composer 安裝 ",["$","code",null,{"children":"predis/predis"}]," 套件 (~1.0)。有關設定 Redis 的更多資訊，請參閱 Laravel 的 ",["$","a",null,{"href":"/docs/redis#configuration","children":"Redis 文件"}],"。"]}]
7:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!NOTE]\n",["$","code",null,{"children":"SESSION_CONNECTION"}]," 環境變數或 ",["$","code",null,{"children":"session.php"}]," 設定檔中的 ",["$","code",null,{"children":"connection"}]," 選項可用於指定哪個 Redis 連線用於 Session 儲存。"]}],"\n"]}]
8:["$","a",null,{"name":"interacting-with-the-session"}]
9:["$","h2",null,{"id":"與-session-互動","children":["$","a",null,{"href":"#與-session-互動","children":"與 Session 互動"}]}]
a:["$","a",null,{"name":"retrieving-data"}]
b:["$","h3",null,{"id":"取得資料","children":["$","a",null,{"href":"#取得資料","children":"取得資料"}]}]
c:["$","p",null,{"children":["在 Laravel 中有兩種主要的方式來處理 Session 資料：全域 ",["$","code",null,{"children":"session"}]," 輔助函式和透過 ",["$","code",null,{"children":"Request"}]," 實例。首先，讓我們看看透過 ",["$","code",null,{"children":"Request"}]," 實例存取 Session，它可以在路由 Closure 或 Controller 方法上進行型別提示。請記住，Controller 方法的依賴項會透過 Laravel ",["$","a",null,{"href":"/docs/container","children":"Service Container"}]," 自動注入："]}]
d:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Http\\Request;\nuse Illuminate\\View\\View;\n\nclass UserController extends Controller\n{\n    /**\n     * Show the profile for the given user.\n     */\n    public function show(Request $request, string $id): View\n    {\n        $value = $request->session()->get('key');\n\n        // ...\n\n        $user = $this->users->find($id);\n\n        return view('user.profile', ['user' => $user]);\n    }\n}\n"}]}]
e:["$","p",null,{"children":["當您從 Session 取得項目時，您也可以將預設值作為第二個參數傳遞給 ",["$","code",null,{"children":"get"}]," 方法。如果指定的鍵在 Session 中不存在，將返回此預設值。如果您將 Closure 作為預設值傳遞給 ",["$","code",null,{"children":"get"}]," 方法，且請求的鍵不存在，則會執行該 Closure 並返回其結果："]}]
f:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$value = $request->session()->get('key', 'default');\n\n$value = $request->session()->get('key', function () {\n    return 'default';\n});\n"}]}]
10:["$","a",null,{"name":"the-global-session-helper"}]
11:["$","h4",null,{"id":"全域-session-輔助函式","children":["$","a",null,{"href":"#全域-session-輔助函式","children":"全域 Session 輔助函式"}]}]
12:["$","p",null,{"children":["您也可以使用全域 ",["$","code",null,{"children":"session"}]," PHP 函式來取得和儲存 Session 中的資料。當使用單一字串參數呼叫 ",["$","code",null,{"children":"session"}]," 輔助函式時，它將返回該 Session 鍵的值。當使用鍵 / 值對陣列呼叫輔助函式時，這些值將儲存在 Session 中："]}]
13:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Route::get('/home', function () {\n    // Retrieve a piece of data from the session...\n    $value = session('key');\n\n    // Specifying a default value...\n    $value = session('key', 'default');\n\n    // Store a piece of data in the session...\n    session(['key' => 'value']);\n});\n"}]}]
14:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!NOTE]\n透過 HTTP 請求實例使用 Session 與使用全域 ",["$","code",null,{"children":"session"}]," 輔助函式之間幾乎沒有實際差異。這兩種方法都可以透過所有測試案例中都可用的 ",["$","code",null,{"children":"assertSessionHas"}]," 方法進行 ",["$","a",null,{"href":"/docs/testing","children":"測試"}],"。"]}],"\n"]}]
15:["$","a",null,{"name":"retrieving-all-session-data"}]
16:["$","h4",null,{"id":"取得所有-session-資料","children":["$","a",null,{"href":"#取得所有-session-資料","children":"取得所有 Session 資料"}]}]
17:["$","p",null,{"children":["如果您想取得 Session 中的所有資料，您可以使用 ",["$","code",null,{"children":"all"}]," 方法："]}]
18:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$data = $request->session()->all();\n"}]}]
19:["$","a",null,{"name":"retrieving-a-portion-of-the-session-data"}]
1a:["$","h4",null,{"id":"取得部分-session-資料","children":["$","a",null,{"href":"#取得部分-session-資料","children":"取得部分 Session 資料"}]}]
1b:["$","p",null,{"children":[["$","code",null,{"children":"only"}]," 和 ",["$","code",null,{"children":"except"}]," 方法可用於取得 Session 資料的子集："]}]
1c:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$data = $request->session()->only(['username', 'email']);\n\n$data = $request->session()->except(['username', 'email']);\n"}]}]
1d:["$","a",null,{"name":"determining-if-an-item-exists-in-the-session"}]
1e:["$","h4",null,{"id":"判斷項目是否存在於-session-中","children":["$","a",null,{"href":"#判斷項目是否存在於-session-中","children":"判斷項目是否存在於 Session 中"}]}]
1f:["$","p",null,{"children":["要判斷項目是否存在於 Session 中，您可以使用 ",["$","code",null,{"children":"has"}]," 方法。如果項目存在且不為 ",["$","code",null,{"children":"null"}],"，",["$","code",null,{"children":"has"}]," 方法返回 ",["$","code",null,{"children":"true"}],"："]}]
20:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"if ($request->session()->has('users')) {\n    // ...\n}\n"}]}]
21:["$","p",null,{"children":["要判斷項目是否存在於 Session 中，即使其值為 ",["$","code",null,{"children":"null"}],"，您可以使用 ",["$","code",null,{"children":"exists"}]," 方法："]}]
22:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"if ($request->session()->exists('users')) {\n    // ...\n}\n"}]}]
23:["$","p",null,{"children":["要判斷項目是否不存在於 Session 中，您可以使用 ",["$","code",null,{"children":"missing"}]," 方法。如果項目不存在，",["$","code",null,{"children":"missing"}]," 方法返回 ",["$","code",null,{"children":"true"}],"："]}]
24:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"if ($request->session()->missing('users')) {\n    // ...\n}\n"}]}]
25:["$","a",null,{"name":"storing-data"}]
26:["$","h3",null,{"id":"儲存資料","children":["$","a",null,{"href":"#儲存資料","children":"儲存資料"}]}]
27:["$","p",null,{"children":["要在 Session 中儲存資料，您通常會使用請求實例的 ",["$","code",null,{"children":"put"}]," 方法或全域 ",["$","code",null,{"children":"session"}]," 輔助函式："]}]
28:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"// Via a request instance...\n$request->session()->put('key', 'value');\n\n// Via the global \"session\" helper...\nsession(['key' => 'value']);\n"}]}]
29:["$","a",null,{"name":"pushing-to-array-session-values"}]
2a:["$","h4",null,{"id":"推送到陣列-session-值","children":["$","a",null,{"href":"#推送到陣列-session-值","children":"推送到陣列 Session 值"}]}]
2b:["$","p",null,{"children":[["$","code",null,{"children":"push"}]," 方法可用於將新值推送到作為陣列的 Session 值。例如，如果 ",["$","code",null,{"children":"user.teams"}]," 鍵包含團隊名稱的陣列，您可以像這樣將新值推送到陣列中："]}]
2c:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$request->session()->push('user.teams', 'developers');\n"}]}]
2d:["$","a",null,{"name":"retrieving-deleting-an-item"}]
2e:["$","h4",null,{"id":"取得並刪除項目","children":["$","a",null,{"href":"#取得並刪除項目","children":"取得並刪除項目"}]}]
2f:["$","p",null,{"children":[["$","code",null,{"children":"pull"}]," 方法將在單一語句中從 Session 取得並刪除項目："]}]
30:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$value = $request->session()->pull('key', 'default');\n"}]}]
31:["$","a",null,{"name":"incrementing-and-decrementing-session-values"}]
32:["$","h4",null,{"id":"遞增和遞減-session-值","children":["$","a",null,{"href":"#遞增和遞減-session-值","children":"遞增和遞減 Session 值"}]}]
33:["$","p",null,{"children":["如果您的 Session 資料包含您希望遞增或遞減的整數，您可以使用 ",["$","code",null,{"children":"increment"}]," 和 ",["$","code",null,{"children":"decrement"}]," 方法："]}]
34:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$request->session()->increment('count');\n\n$request->session()->increment('count', $incrementBy = 2);\n\n$request->session()->decrement('count');\n\n$request->session()->decrement('count', $decrementBy = 2);\n"}]}]
35:["$","a",null,{"name":"flash-data"}]
36:["$","h3",null,{"id":"快閃資料","children":["$","a",null,{"href":"#快閃資料","children":"快閃資料"}]}]
37:["$","p",null,{"children":["有時您可能希望在 Session 中為下一個請求儲存項目。您可以使用 ",["$","code",null,{"children":"flash"}]," 方法來實現。使用此方法儲存在 Session 中的資料將立即可用，並在後續的 HTTP 請求期間可用。在後續的 HTTP 請求之後，快閃資料將被刪除。快閃資料主要用於短期的狀態訊息："]}]
38:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$request->session()->flash('status', 'Task was successful!');\n"}]}]
39:["$","p",null,{"children":["如果您需要為多個請求保留快閃資料，您可以使用 ",["$","code",null,{"children":"reflash"}]," 方法，這將為額外的請求保留所有快閃資料。如果您只需要保留特定的快閃資料，您可以使用 ",["$","code",null,{"children":"keep"}]," 方法："]}]
3a:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$request->session()->reflash();\n\n$request->session()->keep(['username', 'email']);\n"}]}]
3b:["$","p",null,{"children":["要僅為當前請求保留您的快閃資料，您可以使用 ",["$","code",null,{"children":"now"}]," 方法："]}]
3c:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$request->session()->now('status', 'Task was successful!');\n"}]}]
3d:["$","a",null,{"name":"deleting-data"}]
3e:["$","h3",null,{"id":"刪除資料","children":["$","a",null,{"href":"#刪除資料","children":"刪除資料"}]}]
3f:["$","p",null,{"children":[["$","code",null,{"children":"forget"}]," 方法將從 Session 中移除一段資料。如果您想從 Session 中移除所有資料，您可以使用 ",["$","code",null,{"children":"flush"}]," 方法："]}]
40:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"// Forget a single key...\n$request->session()->forget('name');\n\n// Forget multiple keys...\n$request->session()->forget(['name', 'status']);\n\n$request->session()->flush();\n"}]}]
41:["$","a",null,{"name":"regenerating-the-session-id"}]
42:["$","h3",null,{"id":"重新產生-session-id","children":["$","a",null,{"href":"#重新產生-session-id","children":"重新產生 Session ID"}]}]
43:["$","p",null,{"children":["重新產生 Session ID 通常是為了防止惡意使用者利用 ",["$","a",null,{"href":"https://owasp.org/www-community/attacks/Session_fixation","children":"Session 固定"}]," 攻擊您的應用程式。"]}]
44:["$","p",null,{"children":["如果您使用 Laravel ",["$","a",null,{"href":"/docs/starter-kits","children":"應用程式 Starter Kits"}]," 或 ",["$","a",null,{"href":"/docs/fortify","children":"Laravel Fortify"}],"，Laravel 會在驗證期間自動重新產生 Session ID；但是，如果您需要手動重新產生 Session ID，您可以使用 ",["$","code",null,{"children":"regenerate"}]," 方法："]}]
45:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$request->session()->regenerate();\n"}]}]
46:["$","p",null,{"children":["如果您需要在單一語句中重新產生 Session ID 並從 Session 中移除所有資料，您可以使用 ",["$","code",null,{"children":"invalidate"}]," 方法："]}]
47:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$request->session()->invalidate();\n"}]}]
48:["$","a",null,{"name":"session-cache"}]
49:["$","h2",null,{"id":"session-快取","children":["$","a",null,{"href":"#session-快取","children":"Session 快取"}]}]
4a:["$","p",null,{"children":["Laravel 的 Session 快取提供了一種方便的方式來快取限定於個別使用者 Session 的資料。與全域應用程式快取不同，Session 快取資料會自動按 Session 隔離，並在 Session 過期或銷毀時清理。Session 快取支援所有熟悉的 ",["$","a",null,{"href":"/docs/cache","children":"Laravel 快取方法"}],"，如 ",["$","code",null,{"children":"get"}],"、",["$","code",null,{"children":"put"}],"、",["$","code",null,{"children":"remember"}],"、",["$","code",null,{"children":"forget"}]," 等，但範圍限定於當前 Session。"]}]
4b:["$","p",null,{"children":"Session 快取非常適合儲存您希望在同一 Session 內的多個請求之間持久保存，但不需要永久儲存的臨時、使用者特定資料。這包括表單資料、臨時計算、API 回應或任何其他應該與特定使用者 Session 綁定的短暫資料。"}]
4c:["$","p",null,{"children":["您可以透過 Session 上的 ",["$","code",null,{"children":"cache"}]," 方法存取 Session 快取："]}]
4d:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$discount = $request->session()->cache()->get('discount');\n\n$request->session()->cache()->put(\n    'discount', 10, now()->addMinutes(5)\n);\n"}]}]
4e:["$","p",null,{"children":["有關 Laravel 快取方法的更多資訊，請參閱 ",["$","a",null,{"href":"/docs/cache","children":"快取文件"}],"。"]}]
4f:["$","a",null,{"name":"session-blocking"}]
50:["$","h2",null,{"id":"session-阻塞","children":["$","a",null,{"href":"#session-阻塞","children":"Session 阻塞"}]}]
51:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!WARNING]\n要使用 Session 阻塞，您的應用程式必須使用支援 ",["$","a",null,{"href":"/docs/cache#atomic-locks","children":"原子鎖"}]," 的快取驅動程式。目前，這些快取驅動程式包括 ",["$","code",null,{"children":"memcached"}],"、",["$","code",null,{"children":"dynamodb"}],"、",["$","code",null,{"children":"redis"}],"、",["$","code",null,{"children":"mongodb"}],"（包含在官方 ",["$","code",null,{"children":"mongodb/laravel-mongodb"}]," 套件中）、",["$","code",null,{"children":"database"}],"、",["$","code",null,{"children":"file"}]," 和 ",["$","code",null,{"children":"array"}]," 驅動程式。此外，您不能使用 ",["$","code",null,{"children":"cookie"}]," Session 驅動程式。"]}],"\n"]}]
52:["$","p",null,{"children":"預設情況下，Laravel 允許使用相同 Session 的請求同時執行。因此，例如，如果您使用 JavaScript HTTP 函式庫向應用程式發出兩個 HTTP 請求，它們將同時執行。對於許多應用程式來說，這不是問題；但是，在少數向兩個不同的應用程式端點發出並發請求且都寫入 Session 資料的應用程式中，可能會發生 Session 資料遺失。"}]
53:["$","p",null,{"children":["為了緩解這種情況，Laravel 提供了允許您限制給定 Session 的並發請求的功能。首先，您只需將 ",["$","code",null,{"children":"block"}]," 方法鏈接到路由定義上。在此範例中，對 ",["$","code",null,{"children":"/profile"}]," 端點的傳入請求將獲取 Session 鎖。當此鎖被持有時，任何對共用相同 Session ID 的 ",["$","code",null,{"children":"/profile"}]," 或 ",["$","code",null,{"children":"/order"}]," 端點的傳入請求將等待第一個請求完成執行後再繼續執行："]}]
54:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Route::post('/profile', function () {\n    // ...\n})->block($lockSeconds = 10, $waitSeconds = 10);\n\nRoute::post('/order', function () {\n    // ...\n})->block($lockSeconds = 10, $waitSeconds = 10);\n"}]}]
55:["$","p",null,{"children":[["$","code",null,{"children":"block"}]," 方法接受兩個可選參數。",["$","code",null,{"children":"block"}]," 方法接受的第一個參數是 Session 鎖應該持有的最大秒數，然後才會被釋放。當然，如果請求在此時間之前完成執行，鎖將會更早釋放。"]}]
56:["$","p",null,{"children":[["$","code",null,{"children":"block"}]," 方法接受的第二個參數是請求在嘗試獲取 Session 鎖時應該等待的秒數。如果請求無法在給定的秒數內獲取 Session 鎖，將拋出 ",["$","code",null,{"children":"Illuminate\\Contracts\\Cache\\LockTimeoutException"}],"。"]}]
57:["$","p",null,{"children":"如果這兩個參數都沒有傳遞，鎖將被獲取最多 10 秒，請求將在嘗試獲取鎖時最多等待 10 秒："}]
58:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Route::post('/profile', function () {\n    // ...\n})->block();\n"}]}]
59:["$","a",null,{"name":"adding-custom-session-drivers"}]
5a:["$","h2",null,{"id":"新增自訂-session-驅動程式","children":["$","a",null,{"href":"#新增自訂-session-驅動程式","children":"新增自訂 Session 驅動程式"}]}]
5b:["$","a",null,{"name":"implementing-the-driver"}]
5c:["$","h3",null,{"id":"實作驅動程式","children":["$","a",null,{"href":"#實作驅動程式","children":"實作驅動程式"}]}]
5d:["$","p",null,{"children":["如果現有的 Session 驅動程式都不符合您的應用程式需求，Laravel 使您可以編寫自己的 Session 處理程式。您的自訂 Session 驅動程式應實作 PHP 內建的 ",["$","code",null,{"children":"SessionHandlerInterface"}],"。此介面僅包含幾個簡單的方法。一個存根的 MongoDB 實作看起來像這樣："]}]
5e:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Extensions;\n\nclass MongoSessionHandler implements \\SessionHandlerInterface\n{\n    public function open($savePath, $sessionName) {}\n    public function close() {}\n    public function read($sessionId) {}\n    public function write($sessionId, $data) {}\n    public function destroy($sessionId) {}\n    public function gc($lifetime) {}\n}\n"}]}]
5f:["$","p",null,{"children":["由於 Laravel 不包含用於容納擴充功能的預設目錄，您可以自由地將它們放置在任何您喜歡的地方。在此範例中，我們建立了一個 ",["$","code",null,{"children":"Extensions"}]," 目錄來容納 ",["$","code",null,{"children":"MongoSessionHandler"}],"。"]}]
60:["$","p",null,{"children":"由於這些方法的目的不容易理解，以下是每個方法目的的概述："}]
61:["$","div",null,{"className":"content-list","markdown":"1","children":["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","code",null,{"children":"open"}]," 方法通常用於基於檔案的 Session 儲存系統。由於 Laravel 附帶了 ",["$","code",null,{"children":"file"}]," Session 驅動程式，您很少需要在此方法中放置任何內容。您可以簡單地將此方法留空。"]}],"\n",["$","li",null,{"children":[["$","code",null,{"children":"close"}]," 方法，與 ",["$","code",null,{"children":"open"}]," 方法一樣，通常也可以忽略。對於大多數驅動程式，它不是必需的。"]}],"\n",["$","li",null,{"children":[["$","code",null,{"children":"read"}]," 方法應返回與給定 ",["$","code",null,{"children":"$$sessionId"}]," 關聯的 Session 資料的字串版本。在驅動程式中取得或儲存 Session 資料時，無需進行任何序列化或其他編碼，因為 Laravel 將為您執行序列化。"]}],"\n",["$","li",null,{"children":[["$","code",null,{"children":"write"}]," 方法應將與 ",["$","code",null,{"children":"$$sessionId"}]," 關聯的給定 ",["$","code",null,{"children":"$$data"}]," 字串寫入某些持久性儲存系統，例如 MongoDB 或您選擇的其他儲存系統。同樣，您不應執行任何序列化 - Laravel 將已經為您處理了。"]}],"\n",["$","li",null,{"children":[["$","code",null,{"children":"destroy"}]," 方法應從持久性儲存中移除與 ",["$","code",null,{"children":"$$sessionId"}]," 關聯的資料。"]}],"\n",["$","li",null,{"children":[["$","code",null,{"children":"gc"}]," 方法應銷毀所有比給定 ",["$","code",null,{"children":"$$lifetime"}],"（這是一個 UNIX 時間戳記）舊的 Session 資料。對於像 Memcached 和 Redis 這樣的自行過期系統，此方法可以留空。"]}],"\n"]}]}]
62:["$","a",null,{"name":"registering-the-driver"}]
63:["$","h3",null,{"id":"註冊驅動程式","children":["$","a",null,{"href":"#註冊驅動程式","children":"註冊驅動程式"}]}]
64:["$","p",null,{"children":["一旦您的驅動程式實作完成，您就可以將其註冊到 Laravel。要向 Laravel 的 Session 後端新增額外的驅動程式，您可以使用 ",["$","code",null,{"children":"Session"}]," ",["$","a",null,{"href":"/docs/facades","children":"Facade"}]," 提供的 ",["$","code",null,{"children":"extend"}]," 方法。您應該從 ",["$","a",null,{"href":"/docs/providers","children":"Service Provider"}]," 的 ",["$","code",null,{"children":"boot"}]," 方法呼叫 ",["$","code",null,{"children":"extend"}]," 方法。您可以從現有的 ",["$","code",null,{"children":"App\\Providers\\AppServiceProvider"}]," 執行此操作，或建立一個全新的 Provider："]}]
65:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Providers;\n\nuse App\\Extensions\\MongoSessionHandler;\nuse Illuminate\\Contracts\\Foundation\\Application;\nuse Illuminate\\Support\\Facades\\Session;\nuse Illuminate\\Support\\ServiceProvider;\n\nclass SessionServiceProvider extends ServiceProvider\n{\n    /**\n     * Register any application services.\n     */\n    public function register(): void\n    {\n        // ...\n    }\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Session::extend('mongo', function (Application $app) {\n            // Return an implementation of SessionHandlerInterface...\n            return new MongoSessionHandler;\n        });\n    }\n}\n"}]}]
66:["$","p",null,{"children":["一旦 Session 驅動程式註冊完成，您可以使用 ",["$","code",null,{"children":"SESSION_DRIVER"}]," 環境變數或在應用程式的 ",["$","code",null,{"children":"config/session.php"}]," 設定檔中將 ",["$","code",null,{"children":"mongo"}]," 驅動程式指定為應用程式的 Session 驅動程式。"]}]
67:["$","$L68",null,{"children":["$","$69",null,{"name":"Next.MetadataOutlet","children":"$@6a"}]}]
6a:null
