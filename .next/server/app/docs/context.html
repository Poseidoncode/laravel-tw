<!DOCTYPE html><!--2DrqUONp3UGGEsii_P_1z--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/f56971fdd088d69d.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/cbd55ab9639e1e66.js"/><script src="/_next/static/chunks/87a939617be2fa8c.js" async=""></script><script src="/_next/static/chunks/8368f298651cbd89.js" async=""></script><script src="/_next/static/chunks/6740f161f60c6ab5.js" async=""></script><script src="/_next/static/chunks/turbopack-929fc2ce3ca903db.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/247eb132b7f7b574.js" async=""></script><script src="/_next/static/chunks/796e69ae18b2784c.js" async=""></script><script src="/_next/static/chunks/5f549f56d9b805d8.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased"><div hidden=""><!--$--><!--/$--></div><div class="flex min-h-screen bg-background"><div class="w-64 border-r bg-background h-screen sticky top-0 hidden md:block"><div class="p-6 font-bold text-xl border-b flex items-center gap-2"><span class="text-red-600">Laravel</span> Docs CN</div><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-65px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="p-4 space-y-6"><div><h4 class="mb-2 px-4 text-sm font-semibold text-muted-foreground">前言</h4><div class="space-y-1"><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap text-sm transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal">發行說明</button></a></div></div><div><h4 class="mb-2 px-4 text-sm font-semibold text-muted-foreground">入門</h4><div class="space-y-1"><a class="block" href="/docs/installation"><button data-slot="button" class="inline-flex items-center whitespace-nowrap text-sm transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal">安裝</button></a><a class="block" href="/docs/configuration"><button data-slot="button" class="inline-flex items-center whitespace-nowrap text-sm transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal">配置</button></a></div></div></div></div></div></div></div><main class="flex-1 relative"><div class="container mx-auto py-10"><div class="mx-auto max-w-3xl"><div class="mb-8"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Context</h1><p class="text-xl text-muted-foreground mt-2">Laravel Context 提供了在請求生命週期中儲存和存取資料的方式</p></div><article class="prose prose-slate dark:prose-invert max-w-none"><h1 id="context"><a href="#context">Context</a></h1>
<ul>
<li><a href="#introduction">Introduction</a>
<ul>
<li><a href="#how-it-works">How it Works</a></li>
</ul>
</li>
<li><a href="#capturing-context">Capturing Context</a>
<ul>
<li><a href="#stacks">Stacks</a></li>
</ul>
</li>
<li><a href="#retrieving-context">Retrieving Context</a>
<ul>
<li><a href="#determining-item-existence">Determining Item Existence</a></li>
</ul>
</li>
<li><a href="#removing-context">Removing Context</a></li>
<li><a href="#hidden-context">Hidden Context</a></li>
<li><a href="#events">Events</a>
<ul>
<li><a href="#dehydrating">Dehydrating</a></li>
<li><a href="#hydrated">Hydrated</a></li>
</ul>
</li>
</ul>
<a name="introduction"></a>
<h2 id="簡介"><a href="#簡介">簡介</a></h2>
<p>Laravel&#x27;s &quot;context&quot; capabilities enable you to capture, retrieve, and share information throughout requests, jobs, and commands executing within your application. This captured information is also included in logs written by your application, giving you deeper insight into the surrounding code execution history that occurred before a log entry was written and allowing you to trace execution flows throughout a distributed system.</p>
<a name="how-it-works"></a>
<h3 id="how-it-works"><a href="#how-it-works">How it Works</a></h3>
<p>The best way to understand Laravel&#x27;s context capabilities is to see it in action using  the built-in logging features. To get started, you may <a href="#capturing-context">add information to the context</a> using the <code>Context</code> facade. In this example, we will use a <a href="/docs/12.x/middleware">middleware</a> to add the request URL and a unique trace ID to the context on every incoming request:</p>
<pre><code class="language-php">&lt;?php

namespace App\Http\Middleware;

use Closure;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Context;
use Illuminate\Support\Str;
use Symfony\Component\HttpFoundation\Response;

class AddContext
{
    /**
     * Handle an incoming request.
     */
    public function handle(Request $request, Closure $next): Response
    {
        Context::add(&#x27;url&#x27;, $request-&gt;url());
        Context::add(&#x27;trace_id&#x27;, Str::uuid()-&gt;toString());

        return $next($request);
    }
}
</code></pre>
<p>Information added to the context is automatically appended as metadata to any <a href="/docs/12.x/logging">log entries</a> that are written throughout the request. Appending context as metadata allows information passed to individual log entries to be differentiated from the information shared via <code>Context</code>. For example, imagine we write the following log entry:</p>
<pre><code class="language-php">Log::info(&#x27;User authenticated.&#x27;, [&#x27;auth_id&#x27; =&gt; Auth::id()]);
</code></pre>
<p>The written log will contain the <code>auth_id</code> passed to the log entry, but it will also contain the context&#x27;s <code>url</code> and <code>trace_id</code> as metadata:</p>
<pre><code class="language-text">User authenticated. {&quot;auth_id&quot;:27} {&quot;url&quot;:&quot;https://example.com/login&quot;,&quot;trace_id&quot;:&quot;e04e1a11-e75c-4db3-b5b5-cfef4ef56697&quot;}
</code></pre>
<p>Information added to the context is also made available to jobs dispatched to the queue. For example, imagine we dispatch a <code>ProcessPodcast</code> job to the queue after adding some information to the context:</p>
<pre><code class="language-php">// In our middleware...
Context::add(&#x27;url&#x27;, $request-&gt;url());
Context::add(&#x27;trace_id&#x27;, Str::uuid()-&gt;toString());

// In our controller...
ProcessPodcast::dispatch($podcast);
</code></pre>
<p>When the job is dispatched, any information currently stored in the context is captured and shared with the job. The captured information is then hydrated back into the current context while the job is executing. So, if our job&#x27;s handle method was to write to the log:</p>
<pre><code class="language-php">class ProcessPodcast implements ShouldQueue
{
    use Queueable;

    // ...

    /**
     * Execute the job.
     */
    public function handle(): void
    {
        Log::info(&#x27;Processing podcast.&#x27;, [
            &#x27;podcast_id&#x27; =&gt; $this-&gt;podcast-&gt;id,
        ]);

        // ...
    }
}
</code></pre>
<p>The resulting log entry would contain the information that was added to the context during the request that originally dispatched the job:</p>
<pre><code class="language-text">Processing podcast. {&quot;podcast_id&quot;:95} {&quot;url&quot;:&quot;https://example.com/login&quot;,&quot;trace_id&quot;:&quot;e04e1a11-e75c-4db3-b5b5-cfef4ef56697&quot;}
</code></pre>
<p>Although we have focused on the built-in logging related features of Laravel&#x27;s context, the following documentation will illustrate how context allows you to share information across the HTTP request / queued job boundary and even how to add <a href="#hidden-context">hidden context data</a> that is not written with log entries.</p>
<a name="capturing-context"></a>
<h2 id="capturing-context"><a href="#capturing-context">Capturing Context</a></h2>
<p>You may store information in the current context using the <code>Context</code> facade&#x27;s <code>add</code> method:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Context;

Context::add(&#x27;key&#x27;, &#x27;value&#x27;);
</code></pre>
<p>To add multiple items at once, you may pass an associative array to the <code>add</code> method:</p>
<pre><code class="language-php">Context::add([
    &#x27;first_key&#x27; =&gt; &#x27;value&#x27;,
    &#x27;second_key&#x27; =&gt; &#x27;value&#x27;,
]);
</code></pre>
<p>The <code>add</code> method will override any existing value that shares the same key. If you only wish to add information to the context if the key does not already exist, you may use the <code>addIf</code> method:</p>
<pre><code class="language-php">Context::add(&#x27;key&#x27;, &#x27;first&#x27;);

Context::get(&#x27;key&#x27;);
// &quot;first&quot;

Context::addIf(&#x27;key&#x27;, &#x27;second&#x27;);

Context::get(&#x27;key&#x27;);
// &quot;first&quot;
</code></pre>
<p>Context also provides convenient methods for incrementing or decrementing a given key. Both of these methods accept at least one argument: the key to track. A second argument may be provided to specify the amount by which the key should be incremented or decremented:</p>
<pre><code class="language-php">Context::increment(&#x27;records_added&#x27;);
Context::increment(&#x27;records_added&#x27;, 5);

Context::decrement(&#x27;records_added&#x27;);
Context::decrement(&#x27;records_added&#x27;, 5);
</code></pre>
<a name="conditional-context"></a>
<h4 id="conditional-context"><a href="#conditional-context">Conditional Context</a></h4>
<p>The <code>when</code> method may be used to add data to the context based on a given condition. The first closure provided to the <code>when</code> method will be invoked if the given condition evaluates to <code>true</code>, while the second closure will be invoked if the condition evaluates to <code>false</code>:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Context;

Context::when(
    Auth::user()-&gt;isAdmin(),
    fn ($context) =&gt; $context-&gt;add(&#x27;permissions&#x27;, Auth::user()-&gt;permissions),
    fn ($context) =&gt; $context-&gt;add(&#x27;permissions&#x27;, []),
);
</code></pre>
<a name="scoped-context"></a>
<h4 id="scoped-context"><a href="#scoped-context">Scoped Context</a></h4>
<p>The <code>scope</code> method provides a way to temporarily modify the context during the execution of a given callback and restore the context to its original state when the callback finishes executing. Additionally, you can pass extra data that should be merged into the context (as the second and third arguments) while the closure executes.</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Context;
use Illuminate\Support\Facades\Log;

Context::add(&#x27;trace_id&#x27;, &#x27;abc-999&#x27;);
Context::addHidden(&#x27;user_id&#x27;, 123);

Context::scope(
    function () {
        Context::add(&#x27;action&#x27;, &#x27;adding_friend&#x27;);

        $userId = Context::getHidden(&#x27;user_id&#x27;);

        Log::debug(&quot;Adding user [{$userId}] to friends list.&quot;);
        // Adding user [987] to friends list.  {&quot;trace_id&quot;:&quot;abc-999&quot;,&quot;user_name&quot;:&quot;taylor_otwell&quot;,&quot;action&quot;:&quot;adding_friend&quot;}
    },
    data: [&#x27;user_name&#x27; =&gt; &#x27;taylor_otwell&#x27;],
    hidden: [&#x27;user_id&#x27; =&gt; 987],
);

Context::all();
// [
//     &#x27;trace_id&#x27; =&gt; &#x27;abc-999&#x27;,
// ]

Context::allHidden();
// [
//     &#x27;user_id&#x27; =&gt; 123,
// ]
</code></pre>
<blockquote>
<p>[!WARNING]
If an object within the context is modified inside the scoped closure, that mutation will be reflected outside of the scope.</p>
</blockquote>
<a name="stacks"></a>
<h3 id="stacks"><a href="#stacks">Stacks</a></h3>
<p>Context offers the ability to create &quot;stacks&quot;, which are lists of data stored in the order that they were added. You can add information to a stack by invoking the <code>push</code> method:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Context;

Context::push(&#x27;breadcrumbs&#x27;, &#x27;first_value&#x27;);

Context::push(&#x27;breadcrumbs&#x27;, &#x27;second_value&#x27;, &#x27;third_value&#x27;);

Context::get(&#x27;breadcrumbs&#x27;);
// [
//     &#x27;first_value&#x27;,
//     &#x27;second_value&#x27;,
//     &#x27;third_value&#x27;,
// ]
</code></pre>
<p>Stacks can be useful to capture historical information about a request, such as events that are happening throughout your application. For example, you could create an event listener to push to a stack every time a query is executed, capturing the query SQL and duration as a tuple:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Context;
use Illuminate\Support\Facades\DB;

// In AppServiceProvider.php...
DB::listen(function ($event) {
    Context::push(&#x27;queries&#x27;, [$event-&gt;time, $event-&gt;sql]);
});
</code></pre>
<p>You may determine if a value is in a stack using the <code>stackContains</code> and <code>hiddenStackContains</code> methods:</p>
<pre><code class="language-php">if (Context::stackContains(&#x27;breadcrumbs&#x27;, &#x27;first_value&#x27;)) {
    //
}

if (Context::hiddenStackContains(&#x27;secrets&#x27;, &#x27;first_value&#x27;)) {
    //
}
</code></pre>
<p>The <code>stackContains</code> and <code>hiddenStackContains</code> methods also accept a closure as their second argument, allowing more control over the value comparison operation:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Context;
use Illuminate\Support\Str;

return Context::stackContains(&#x27;breadcrumbs&#x27;, function ($value) {
    return Str::startsWith($value, &#x27;query_&#x27;);
});
</code></pre>
<a name="retrieving-context"></a>
<h2 id="retrieving-context"><a href="#retrieving-context">Retrieving Context</a></h2>
<p>You may retrieve information from the context using the <code>Context</code> facade&#x27;s <code>get</code> method:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Context;

$value = Context::get(&#x27;key&#x27;);
</code></pre>
<p>The <code>only</code> and <code>except</code> methods may be used to retrieve a subset of the information in the context:</p>
<pre><code class="language-php">$data = Context::only([&#x27;first_key&#x27;, &#x27;second_key&#x27;]);

$data = Context::except([&#x27;first_key&#x27;]);
</code></pre>
<p>The <code>pull</code> method may be used to retrieve information from the context and immediately remove it from the context:</p>
<pre><code class="language-php">$value = Context::pull(&#x27;key&#x27;);
</code></pre>
<p>If context data is stored in a <a href="#stacks">stack</a>, you may pop items from the stack using the <code>pop</code> method:</p>
<pre><code class="language-php">Context::push(&#x27;breadcrumbs&#x27;, &#x27;first_value&#x27;, &#x27;second_value&#x27;);

Context::pop(&#x27;breadcrumbs&#x27;);
// second_value

Context::get(&#x27;breadcrumbs&#x27;);
// [&#x27;first_value&#x27;]
</code></pre>
<p>The <code>remember</code> and <code>rememberHidden</code> methods may be used to retrieve information from the context, while setting the context value to the value returned by the given closure if the requested information doesn&#x27;t exist:</p>
<pre><code class="language-php">$permissions = Context::remember(
    &#x27;user-permissions&#x27;,
    fn () =&gt; $user-&gt;permissions,
);
</code></pre>
<p>If you would like to retrieve all of the information stored in the context, you may invoke the <code>all</code> method:</p>
<pre><code class="language-php">$data = Context::all();
</code></pre>
<a name="determining-item-existence"></a>
<h3 id="determining-item-existence"><a href="#determining-item-existence">Determining Item Existence</a></h3>
<p>You may use the <code>has</code> and <code>missing</code> methods to determine if the context has any value stored for the given key:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Context;

if (Context::has(&#x27;key&#x27;)) {
    // ...
}

if (Context::missing(&#x27;key&#x27;)) {
    // ...
}
</code></pre>
<p>The <code>has</code> method will return <code>true</code> regardless of the value stored. So, for example, a key with a <code>null</code> value will be considered present:</p>
<pre><code class="language-php">Context::add(&#x27;key&#x27;, null);

Context::has(&#x27;key&#x27;);
// true
</code></pre>
<a name="removing-context"></a>
<h2 id="removing-context"><a href="#removing-context">Removing Context</a></h2>
<p>The <code>forget</code> method may be used to remove a key and its value from the current context:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Context;

Context::add([&#x27;first_key&#x27; =&gt; 1, &#x27;second_key&#x27; =&gt; 2]);

Context::forget(&#x27;first_key&#x27;);

Context::all();

// [&#x27;second_key&#x27; =&gt; 2]
</code></pre>
<p>You may forget several keys at once by providing an array to the <code>forget</code> method:</p>
<pre><code class="language-php">Context::forget([&#x27;first_key&#x27;, &#x27;second_key&#x27;]);
</code></pre>
<a name="hidden-context"></a>
<h2 id="hidden-context"><a href="#hidden-context">Hidden Context</a></h2>
<p>Context offers the ability to store &quot;hidden&quot; data. This hidden information is not appended to logs, and is not accessible via the data retrieval methods documented above. Context provides a different set of methods to interact with hidden context information:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Context;

Context::addHidden(&#x27;key&#x27;, &#x27;value&#x27;);

Context::getHidden(&#x27;key&#x27;);
// &#x27;value&#x27;

Context::get(&#x27;key&#x27;);
// null
</code></pre>
<p>The &quot;hidden&quot; methods mirror the functionality of the non-hidden methods documented above:</p>
<pre><code class="language-php">Context::addHidden(/* ... */);
Context::addHiddenIf(/* ... */);
Context::pushHidden(/* ... */);
Context::getHidden(/* ... */);
Context::pullHidden(/* ... */);
Context::popHidden(/* ... */);
Context::onlyHidden(/* ... */);
Context::exceptHidden(/* ... */);
Context::allHidden(/* ... */);
Context::hasHidden(/* ... */);
Context::missingHidden(/* ... */);
Context::forgetHidden(/* ... */);
</code></pre>
<a name="events"></a>
<h2 id="events"><a href="#events">Events</a></h2>
<p>Context dispatches two events that allow you to hook into the hydration and dehydration process of the context.</p>
<p>To illustrate how these events may be used, imagine that in a middleware of your application you set the <code>app.locale</code> configuration value based on the incoming HTTP request&#x27;s <code>Accept-Language</code> header. Context&#x27;s events allow you to capture this value during the request and restore it on the queue, ensuring notifications sent on the queue have the correct <code>app.locale</code> value. We can use context&#x27;s events and <a href="#hidden-context">hidden</a> data to achieve this, which the following documentation will illustrate.</p>
<a name="dehydrating"></a>
<h3 id="dehydrating"><a href="#dehydrating">Dehydrating</a></h3>
<p>Whenever a job is dispatched to the queue the data in the context is &quot;dehydrated&quot; and captured alongside the job&#x27;s payload. The <code>Context::dehydrating</code> method allows you to register a closure that will be invoked during the dehydration process. Within this closure, you may make changes to the data that will be shared with the queued job.</p>
<p>Typically, you should register <code>dehydrating</code> callbacks within the <code>boot</code> method of your application&#x27;s <code>AppServiceProvider</code> class:</p>
<pre><code class="language-php">use Illuminate\Log\Context\Repository;
use Illuminate\Support\Facades\Config;
use Illuminate\Support\Facades\Context;

/**
 * Bootstrap any application services.
 */
public function boot(): void
{
    Context::dehydrating(function (Repository $context) {
        $context-&gt;addHidden(&#x27;locale&#x27;, Config::get(&#x27;app.locale&#x27;));
    });
}
</code></pre>
<blockquote>
<p>[!NOTE]
You should not use the <code>Context</code> facade within the <code>dehydrating</code> callback, as that will change the context of the current process. Ensure you only make changes to the repository passed to the callback.</p>
</blockquote>
<a name="hydrated"></a>
<h3 id="hydrated"><a href="#hydrated">Hydrated</a></h3>
<p>Whenever a queued job begins executing on the queue, any context that was shared with the job will be &quot;hydrated&quot; back into the current context. The <code>Context::hydrated</code> method allows you to register a closure that will be invoked during the hydration process.</p>
<p>Typically, you should register <code>hydrated</code> callbacks within the <code>boot</code> method of your application&#x27;s <code>AppServiceProvider</code> class:</p>
<pre><code class="language-php">use Illuminate\Log\Context\Repository;
use Illuminate\Support\Facades\Config;
use Illuminate\Support\Facades\Context;

/**
 * Bootstrap any application services.
 */
public function boot(): void
{
    Context::hydrated(function (Repository $context) {
        if ($context-&gt;hasHidden(&#x27;locale&#x27;)) {
            Config::set(&#x27;app.locale&#x27;, $context-&gt;getHidden(&#x27;locale&#x27;));
        }
    });
}
</code></pre>
<blockquote>
<p>[!NOTE]
You should not use the <code>Context</code> facade within the <code>hydrated</code> callback and instead ensure you only make changes to the repository passed to the callback.</p>
</blockquote></article></div></div><!--$--><!--/$--></main></div><script src="/_next/static/chunks/cbd55ab9639e1e66.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n4:I[71435,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/5f549f56d9b805d8.js\"],\"ScrollArea\"]\n5:I[22016,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/5f549f56d9b805d8.js\"],\"\"]\nb:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/f56971fdd088d69d.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"2DrqUONp3UGGEsii_P-1z\",\"c\":[\"\",\"docs\",\"context\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"context\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/f56971fdd088d69d.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/796e69ae18b2784c.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/5f549f56d9b805d8.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"div\",null,{\"className\":\"flex min-h-screen bg-background\",\"children\":[[\"$\",\"div\",null,{\"className\":\"w-64 border-r bg-background h-screen sticky top-0 hidden md:block\",\"children\":[[\"$\",\"div\",null,{\"className\":\"p-6 font-bold text-xl border-b flex items-center gap-2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"text-red-600\",\"children\":\"Laravel\"}],\" Docs CN\"]}],[\"$\",\"$L4\",null,{\"className\":\"h-[calc(100vh-65px)]\",\"children\":[\"$\",\"div\",null,{\"className\":\"p-4 space-y-6\",\"children\":[[\"$\",\"div\",\"前言\",{\"children\":[[\"$\",\"h4\",null,{\"className\":\"mb-2 px-4 text-sm font-semibold text-muted-foreground\",\"children\":\"前言\"}],[\"$\",\"div\",null,{\"className\":\"space-y-1\",\"children\":[[\"$\",\"$L5\",\"/docs/releases\",{\"href\":\"/docs/releases\",\"className\":\"block\",\"children\":[\"$\",\"button\",null,{\"data-slot\":\"button\",\"className\":\"inline-flex items-center whitespace-nowrap text-sm transition-all disabled:pointer-events-none disabled:opacity-50 [\u0026_svg]:pointer-events-none [\u0026_svg:not([class*='size-'])]:size-4 shrink-0 [\u0026_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[\u003esvg]:px-2.5 w-full justify-start font-normal\",\"children\":\"發行說明\"}]}]]}]]}],[\"$\",\"div\",\"入門\",{\"children\":[[\"$\",\"h4\",null,{\"className\":\"mb-2 px-4 text-sm font-semibold text-muted-foreground\",\"children\":\"入門\"}],[\"$\",\"div\",null,{\"className\":\"space-y-1\",\"children\":[[\"$\",\"$L5\",\"/docs/installation\",{\"href\":\"/docs/installation\",\"className\":\"block\",\"children\":[\"$\",\"button\",null,{\"data-slot\":\"button\",\"className\":\"inline-flex items-center whitespace-nowrap text-sm transition-all disabled:pointer-events-none disabled:opacity-50 [\u0026_svg]:pointer-events-none [\u0026_svg:not([class*='size-'])]:size-4 shrink-0 [\u0026_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[\u003esvg]:px-2.5 w-full justify-start font-normal\",\"children\":\"安裝\"}]}],\"$L6\"]}]]}]]}]}]]}],\"$L7\"]}]]}],{\"children\":[\"$L8\",{\"children\":[\"$L9\",{},null,false,false]},null,false,false]},null,false,false]},null,false,false],\"$La\",false]],\"m\":\"$undefined\",\"G\":[\"$b\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"d:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"OutletBoundary\"]\ne:\"$Sreact.suspense\"\n10:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"ViewportBoundary\"]\n12:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"MetadataBoundary\"]\n6:[\"$\",\"$L5\",\"/docs/configuration\",{\"href\":\"/docs/configuration\",\"className\":\"block\",\"children\":[\"$\",\"button\",null,{\"data-slot\":\"button\",\"className\":\"inline-flex items-center whitespace-nowrap text-sm transition-all disabled:pointer-events-none disabled:opacity-50 [\u0026_svg]:pointer-events-none [\u0026_svg:not([class*='size-'])]:size-4 shrink-0 [\u0026_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[\u003esvg]:px-2.5 w-full justify-start font-normal\",\"children\":\"配置\"}]}]\n7:[\"$\",\"main\",null,{\"className\":\"flex-1 relative\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]\n8:[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]\n9:[\"$\",\"$1\",\"c\",{\"children\":[\"$Lc\",null,[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"$e\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@f\"}]}]]}]\na:[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L10\",null,{\"children\":\"$@11\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$L12\",null,{\"children\":[\"$\",\"$e\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@13\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}]\n"])</script><script>self.__next_f.push([1,"c:[\"$\",\"div\",null,{\"className\":\"container mx-auto py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-3xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl\",\"children\":\"Context\"}],[\"$\",\"p\",null,{\"className\":\"text-xl text-muted-foreground mt-2\",\"children\":\"Laravel Context 提供了在請求生命週期中儲存和存取資料的方式\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"context\",\"children\":[\"$\",\"a\",null,{\"href\":\"#context\",\"children\":\"Context\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#introduction\",\"children\":\"Introduction\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#how-it-works\",\"children\":\"How it Works\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#capturing-context\",\"children\":\"Capturing Context\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#stacks\",\"children\":\"Stacks\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#retrieving-context\",\"children\":\"Retrieving Context\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#determining-item-existence\",\"children\":\"Determining Item Existence\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#removing-context\",\"children\":\"Removing Context\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#hidden-context\",\"children\":\"Hidden Context\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#events\",\"children\":\"Events\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#dehydrating\",\"children\":\"Dehydrating\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#hydrated\",\"children\":\"Hydrated\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"introduction\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"簡介\",\"children\":[\"$\",\"a\",null,{\"href\":\"#簡介\",\"children\":\"簡介\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Laravel's \\\"context\\\" capabilities enable you to capture, retrieve, and share information throughout requests, jobs, and commands executing within your application. This captured information is also included in logs written by your application, giving you deeper insight into the surrounding code execution history that occurred before a log entry was written and allowing you to trace execution flows throughout a distributed system.\"}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"how-it-works\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"how-it-works\",\"children\":[\"$\",\"a\",null,{\"href\":\"#how-it-works\",\"children\":\"How it Works\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"The best way to understand Laravel's context capabilities is to see it in action using  the built-in logging features. To get started, you may \",[\"$\",\"a\",null,{\"href\":\"#capturing-context\",\"children\":\"add information to the context\"}],\" using the \",[\"$\",\"code\",null,{\"children\":\"Context\"}],\" facade. In this example, we will use a \",[\"$\",\"a\",null,{\"href\":\"/docs/12.x/middleware\",\"children\":\"middleware\"}],\" to add the request URL and a unique trace ID to the context on every incoming request:\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Http\\\\Middleware;\\n\\nuse Closure;\\nuse Illuminate\\\\Http\\\\Request;\\nuse Illuminate\\\\Support\\\\Facades\\\\Context;\\nuse Illuminate\\\\Support\\\\Str;\\nuse Symfony\\\\Component\\\\HttpFoundation\\\\Response;\\n\\nclass AddContext\\n{\\n    /**\\n     * Handle an incoming request.\\n     */\\n    public function handle(Request $request, Closure $next): Response\\n    {\\n        Context::add('url', $request-\u003eurl());\\n        Context::add('trace_id', Str::uuid()-\u003etoString());\\n\\n        return $next($request);\\n    }\\n}\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Information added to the context is automatically appended as metadata to any \",[\"$\",\"a\",null,{\"href\":\"/docs/12.x/logging\",\"children\":\"log entries\"}],\" that are written throughout the request. Appending context as metadata allows information passed to individual log entries to be differentiated from the information shared via \",[\"$\",\"code\",null,{\"children\":\"Context\"}],\". For example, imagine we write the following log entry:\"]}],\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\",\"\\n\",\"$L55\",\"\\n\",\"$L56\",\"\\n\",\"$L57\",\"\\n\",\"$L58\",\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\",\"\\n\",\"$L5c\",\"\\n\",\"$L5d\",\"\\n\",\"$L5e\",\"\\n\",\"$L5f\",\"\\n\",\"$L60\",\"\\n\",\"$L61\",\"\\n\",\"$L62\",\"\\n\",\"$L63\",\"\\n\",\"$L64\",\"\\n\",\"$L65\",\"\\n\",\"$L66\",\"\\n\",\"$L67\",\"\\n\",\"$L68\",\"\\n\",\"$L69\",\"\\n\",\"$L6a\"]}]]}]}]\n"])</script><script>self.__next_f.push([1,"14:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Log::info('User authenticated.', ['auth_id' =\u003e Auth::id()]);\\n\"}]}]\n15:[\"$\",\"p\",null,{\"children\":[\"The written log will contain the \",[\"$\",\"code\",null,{\"children\":\"auth_id\"}],\" passed to the log entry, but it will also contain the context's \",[\"$\",\"code\",null,{\"children\":\"url\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"trace_id\"}],\" as metadata:\"]}]\n16:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-text\",\"children\":\"User authenticated. {\\\"auth_id\\\":27} {\\\"url\\\":\\\"https://example.com/login\\\",\\\"trace_id\\\":\\\"e04e1a11-e75c-4db3-b5b5-cfef4ef56697\\\"}\\n\"}]}]\n17:[\"$\",\"p\",null,{\"children\":[\"Information added to the context is also made available to jobs dispatched to the queue. For example, imagine we dispatch a \",[\"$\",\"code\",null,{\"children\":\"ProcessPodcast\"}],\" job to the queue after adding some information to the context:\"]}]\n18:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"// In our middleware...\\nContext::add('url', $request-\u003eurl());\\nContext::add('trace_id', Str::uuid()-\u003etoString());\\n\\n// In our controller...\\nProcessPodcast::dispatch($podcast);\\n\"}]}]\n19:[\"$\",\"p\",null,{\"children\":\"When the job is dispatched, any information currently stored in the context is captured and shared with the job. The captured information is then hydrated back into the current context while the job is executing. So, if our job's handle method was to write to the log:\"}]\n1a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"class ProcessPodcast implements ShouldQueue\\n{\\n    use Queueable;\\n\\n    // ...\\n\\n    /**\\n     * Execute the job.\\n     */\\n    public function handle(): void\\n    {\\n        Log::info('Processing podcast.', [\\n            'podcast_id' =\u003e $this-\u003epodcast-\u003eid,\\n        ]);\\n\\n        // ...\\n    }\\n}\\n\"}]}]\n1b:[\"$\",\"p\",null,{\"children\":\"The resulting log entry would contain the information that was added to the context during the request that originally dispatched the job:\"}]\n1c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-text\",\"children\":\"Processing podcast. {\\\"podcast_id\\\":95} {\\\"url\\\":\\\"https://example.com/login\\\",\\\"trace_id\\\":\\\"e04e1a11-e75c-4db3-b5b5-cfef4ef56697\\\"}\\n\"}]}]\n1d:[\"$\",\"p\",null,{\"children\":[\"Although we have focused on the built-in logging related features of Laravel's context, the following documentation will illustrate how context allows you to share information across the HTTP request / queued job boundary and even how to add \",[\"$\",\"a\",null,{\"href\":\"#hidden-context\",\"children\":\"hidden context data\"}],\" that is not written with log entries.\"]}]\n1e:[\"$\",\"a\",null,{\"name\":\"capturing-context\"}]\n1f:[\"$\",\"h2\",null,{\"id\":\"capturing-context\",\"children\":[\"$\",\"a\",null,{\"href\":\"#capturing-context\",\"children\":\"Capturing Context\"}]}]\n20:[\"$\",\"p\",null,{\"children\":[\"You may store information in the current context using the \",[\"$\",\"code\",null,{\"children\":\"Context\"}],\" facade's \",[\"$\",\"code\",null,{\"children\":\"add\"}],\" method:\"]}]\n21:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Context;\\n\\nContext::add('key', 'value');\\n\"}]}]\n22:[\"$\",\"p\",null,{\"children\":[\"To add multiple items at once, you may pass an associative array to the \",[\"$\",\"code\",null,{\"children\":\"add\"}],\" method:\"]}]\n23:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Context::add([\\n    'first_key' =\u003e 'value',\\n    'second_key' =\u003e 'value',\\n]);\\n\"}]}]\n24:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"add\"}],\" method will override any existing value that shares the same key. If you only wish to add information to the context if the key does not already exist, you may use the \",[\"$\",\"code\",null,{\"children\":\"addIf\"}],\" method:\"]}]\n25:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Context::add('key', 'first');\\n\\nContext::get('key');\\n// \\\"first\\\"\\n\\nContext::addIf('key', 'second');\\n\\nContext::get('ke"])</script><script>self.__next_f.push([1,"y');\\n// \\\"first\\\"\\n\"}]}]\n26:[\"$\",\"p\",null,{\"children\":\"Context also provides convenient methods for incrementing or decrementing a given key. Both of these methods accept at least one argument: the key to track. A second argument may be provided to specify the amount by which the key should be incremented or decremented:\"}]\n27:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Context::increment('records_added');\\nContext::increment('records_added', 5);\\n\\nContext::decrement('records_added');\\nContext::decrement('records_added', 5);\\n\"}]}]\n28:[\"$\",\"a\",null,{\"name\":\"conditional-context\"}]\n29:[\"$\",\"h4\",null,{\"id\":\"conditional-context\",\"children\":[\"$\",\"a\",null,{\"href\":\"#conditional-context\",\"children\":\"Conditional Context\"}]}]\n2a:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"when\"}],\" method may be used to add data to the context based on a given condition. The first closure provided to the \",[\"$\",\"code\",null,{\"children\":\"when\"}],\" method will be invoked if the given condition evaluates to \",[\"$\",\"code\",null,{\"children\":\"true\"}],\", while the second closure will be invoked if the condition evaluates to \",[\"$\",\"code\",null,{\"children\":\"false\"}],\":\"]}]\n2b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Auth;\\nuse Illuminate\\\\Support\\\\Facades\\\\Context;\\n\\nContext::when(\\n    Auth::user()-\u003eisAdmin(),\\n    fn ($context) =\u003e $context-\u003eadd('permissions', Auth::user()-\u003epermissions),\\n    fn ($context) =\u003e $context-\u003eadd('permissions', []),\\n);\\n\"}]}]\n2c:[\"$\",\"a\",null,{\"name\":\"scoped-context\"}]\n2d:[\"$\",\"h4\",null,{\"id\":\"scoped-context\",\"children\":[\"$\",\"a\",null,{\"href\":\"#scoped-context\",\"children\":\"Scoped Context\"}]}]\n2e:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"scope\"}],\" method provides a way to temporarily modify the context during the execution of a given callback and restore the context to its original state when the callback finishes executing. Additionally, you can pass extra data that should be merged into the context (as the second and third arguments) while the closure executes.\"]}]\n2f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Context;\\nuse Illuminate\\\\Support\\\\Facades\\\\Log;\\n\\nContext::add('trace_id', 'abc-999');\\nContext::addHidden('user_id', 123);\\n\\nContext::scope(\\n    function () {\\n        Context::add('action', 'adding_friend');\\n\\n        $userId = Context::getHidden('user_id');\\n\\n        Log::debug(\\\"Adding user [{$userId}] to friends list.\\\");\\n        // Adding user [987] to friends list.  {\\\"trace_id\\\":\\\"abc-999\\\",\\\"user_name\\\":\\\"taylor_otwell\\\",\\\"action\\\":\\\"adding_friend\\\"}\\n    },\\n    data: ['user_name' =\u003e 'taylor_otwell'],\\n    hidden: ['user_id' =\u003e 987],\\n);\\n\\nContext::all();\\n// [\\n//     'trace_id' =\u003e 'abc-999',\\n// ]\\n\\nContext::allHidden();\\n// [\\n//     'user_id' =\u003e 123,\\n// ]\\n\"}]}]\n30:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"[!WARNING]\\nIf an object within the context is modified inside the scoped closure, that mutation will be reflected outside of the scope.\"}],\"\\n\"]}]\n31:[\"$\",\"a\",null,{\"name\":\"stacks\"}]\n32:[\"$\",\"h3\",null,{\"id\":\"stacks\",\"children\":[\"$\",\"a\",null,{\"href\":\"#stacks\",\"children\":\"Stacks\"}]}]\n33:[\"$\",\"p\",null,{\"children\":[\"Context offers the ability to create \\\"stacks\\\", which are lists of data stored in the order that they were added. You can add information to a stack by invoking the \",[\"$\",\"code\",null,{\"children\":\"push\"}],\" method:\"]}]\n34:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Context;\\n\\nContext::push('breadcrumbs', 'first_value');\\n\\nContext::push('breadcrumbs', 'second_value', 'third_value');\\n\\nContext::get('breadcrumbs');\\n// [\\n//     'first_value',\\n//     'second_value',\\n//     'third_value',\\n// ]\\n\"}]}]\n35:[\"$\",\"p\",null,{\"children\":\"Stacks can be useful to capture historical information about a request, such as events that are happening throughout your ap"])</script><script>self.__next_f.push([1,"plication. For example, you could create an event listener to push to a stack every time a query is executed, capturing the query SQL and duration as a tuple:\"}]\n36:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Context;\\nuse Illuminate\\\\Support\\\\Facades\\\\DB;\\n\\n// In AppServiceProvider.php...\\nDB::listen(function ($event) {\\n    Context::push('queries', [$event-\u003etime, $event-\u003esql]);\\n});\\n\"}]}]\n37:[\"$\",\"p\",null,{\"children\":[\"You may determine if a value is in a stack using the \",[\"$\",\"code\",null,{\"children\":\"stackContains\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"hiddenStackContains\"}],\" methods:\"]}]\n38:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"if (Context::stackContains('breadcrumbs', 'first_value')) {\\n    //\\n}\\n\\nif (Context::hiddenStackContains('secrets', 'first_value')) {\\n    //\\n}\\n\"}]}]\n39:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"stackContains\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"hiddenStackContains\"}],\" methods also accept a closure as their second argument, allowing more control over the value comparison operation:\"]}]\n3a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Context;\\nuse Illuminate\\\\Support\\\\Str;\\n\\nreturn Context::stackContains('breadcrumbs', function ($value) {\\n    return Str::startsWith($value, 'query_');\\n});\\n\"}]}]\n3b:[\"$\",\"a\",null,{\"name\":\"retrieving-context\"}]\n3c:[\"$\",\"h2\",null,{\"id\":\"retrieving-context\",\"children\":[\"$\",\"a\",null,{\"href\":\"#retrieving-context\",\"children\":\"Retrieving Context\"}]}]\n3d:[\"$\",\"p\",null,{\"children\":[\"You may retrieve information from the context using the \",[\"$\",\"code\",null,{\"children\":\"Context\"}],\" facade's \",[\"$\",\"code\",null,{\"children\":\"get\"}],\" method:\"]}]\n3e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Context;\\n\\n$value = Context::get('key');\\n\"}]}]\n3f:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"only\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"except\"}],\" methods may be used to retrieve a subset of the information in the context:\"]}]\n40:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$data = Context::only(['first_key', 'second_key']);\\n\\n$data = Context::except(['first_key']);\\n\"}]}]\n41:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"pull\"}],\" method may be used to retrieve information from the context and immediately remove it from the context:\"]}]\n42:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$value = Context::pull('key');\\n\"}]}]\n43:[\"$\",\"p\",null,{\"children\":[\"If context data is stored in a \",[\"$\",\"a\",null,{\"href\":\"#stacks\",\"children\":\"stack\"}],\", you may pop items from the stack using the \",[\"$\",\"code\",null,{\"children\":\"pop\"}],\" method:\"]}]\n44:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Context::push('breadcrumbs', 'first_value', 'second_value');\\n\\nContext::pop('breadcrumbs');\\n// second_value\\n\\nContext::get('breadcrumbs');\\n// ['first_value']\\n\"}]}]\n45:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"remember\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"rememberHidden\"}],\" methods may be used to retrieve information from the context, while setting the context value to the value returned by the given closure if the requested information doesn't exist:\"]}]\n46:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$permissions = Context::remember(\\n    'user-permissions',\\n    fn () =\u003e $user-\u003epermissions,\\n);\\n\"}]}]\n47:[\"$\",\"p\",null,{\"children\":[\"If you would like to retrieve all of the information stored in the context, you may invoke the \",[\"$\",\"code\",null,{\"children\":\"all\"}],\" method:\"]}]\n48:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$data = Context::all();\\n\"}]}]\n49:[\"$\",\"a\",null,{\"name\":\"determining-item-existence\"}]\n4a:[\"$\",\"h3\",null,{"])</script><script>self.__next_f.push([1,"\"id\":\"determining-item-existence\",\"children\":[\"$\",\"a\",null,{\"href\":\"#determining-item-existence\",\"children\":\"Determining Item Existence\"}]}]\n4b:[\"$\",\"p\",null,{\"children\":[\"You may use the \",[\"$\",\"code\",null,{\"children\":\"has\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"missing\"}],\" methods to determine if the context has any value stored for the given key:\"]}]\n4c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Context;\\n\\nif (Context::has('key')) {\\n    // ...\\n}\\n\\nif (Context::missing('key')) {\\n    // ...\\n}\\n\"}]}]\n4d:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"has\"}],\" method will return \",[\"$\",\"code\",null,{\"children\":\"true\"}],\" regardless of the value stored. So, for example, a key with a \",[\"$\",\"code\",null,{\"children\":\"null\"}],\" value will be considered present:\"]}]\n4e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Context::add('key', null);\\n\\nContext::has('key');\\n// true\\n\"}]}]\n4f:[\"$\",\"a\",null,{\"name\":\"removing-context\"}]\n50:[\"$\",\"h2\",null,{\"id\":\"removing-context\",\"children\":[\"$\",\"a\",null,{\"href\":\"#removing-context\",\"children\":\"Removing Context\"}]}]\n51:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"forget\"}],\" method may be used to remove a key and its value from the current context:\"]}]\n52:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Context;\\n\\nContext::add(['first_key' =\u003e 1, 'second_key' =\u003e 2]);\\n\\nContext::forget('first_key');\\n\\nContext::all();\\n\\n// ['second_key' =\u003e 2]\\n\"}]}]\n53:[\"$\",\"p\",null,{\"children\":[\"You may forget several keys at once by providing an array to the \",[\"$\",\"code\",null,{\"children\":\"forget\"}],\" method:\"]}]\n54:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Context::forget(['first_key', 'second_key']);\\n\"}]}]\n55:[\"$\",\"a\",null,{\"name\":\"hidden-context\"}]\n56:[\"$\",\"h2\",null,{\"id\":\"hidden-context\",\"children\":[\"$\",\"a\",null,{\"href\":\"#hidden-context\",\"children\":\"Hidden Context\"}]}]\n57:[\"$\",\"p\",null,{\"children\":\"Context offers the ability to store \\\"hidden\\\" data. This hidden information is not appended to logs, and is not accessible via the data retrieval methods documented above. Context provides a different set of methods to interact with hidden context information:\"}]\n58:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Context;\\n\\nContext::addHidden('key', 'value');\\n\\nContext::getHidden('key');\\n// 'value'\\n\\nContext::get('key');\\n// null\\n\"}]}]\n59:[\"$\",\"p\",null,{\"children\":\"The \\\"hidden\\\" methods mirror the functionality of the non-hidden methods documented above:\"}]\n5a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Context::addHidden(/* ... */);\\nContext::addHiddenIf(/* ... */);\\nContext::pushHidden(/* ... */);\\nContext::getHidden(/* ... */);\\nContext::pullHidden(/* ... */);\\nContext::popHidden(/* ... */);\\nContext::onlyHidden(/* ... */);\\nContext::exceptHidden(/* ... */);\\nContext::allHidden(/* ... */);\\nContext::hasHidden(/* ... */);\\nContext::missingHidden(/* ... */);\\nContext::forgetHidden(/* ... */);\\n\"}]}]\n5b:[\"$\",\"a\",null,{\"name\":\"events\"}]\n5c:[\"$\",\"h2\",null,{\"id\":\"events\",\"children\":[\"$\",\"a\",null,{\"href\":\"#events\",\"children\":\"Events\"}]}]\n5d:[\"$\",\"p\",null,{\"children\":\"Context dispatches two events that allow you to hook into the hydration and dehydration process of the context.\"}]\n5e:[\"$\",\"p\",null,{\"children\":[\"To illustrate how these events may be used, imagine that in a middleware of your application you set the \",[\"$\",\"code\",null,{\"children\":\"app.locale\"}],\" configuration value based on the incoming HTTP request's \",[\"$\",\"code\",null,{\"children\":\"Accept-Language\"}],\" header. Context's events allow you to capture this value during the request and restore it on the queue, ensuring notifications sent on the queue have the correct \",[\"$\",\"code\",null,{\"children\":\"app.locale\"}],\" value. We can use context's events and \",[\"$\",\"a\",null"])</script><script>self.__next_f.push([1,",{\"href\":\"#hidden-context\",\"children\":\"hidden\"}],\" data to achieve this, which the following documentation will illustrate.\"]}]\n5f:[\"$\",\"a\",null,{\"name\":\"dehydrating\"}]\n60:[\"$\",\"h3\",null,{\"id\":\"dehydrating\",\"children\":[\"$\",\"a\",null,{\"href\":\"#dehydrating\",\"children\":\"Dehydrating\"}]}]\n61:[\"$\",\"p\",null,{\"children\":[\"Whenever a job is dispatched to the queue the data in the context is \\\"dehydrated\\\" and captured alongside the job's payload. The \",[\"$\",\"code\",null,{\"children\":\"Context::dehydrating\"}],\" method allows you to register a closure that will be invoked during the dehydration process. Within this closure, you may make changes to the data that will be shared with the queued job.\"]}]\n62:[\"$\",\"p\",null,{\"children\":[\"Typically, you should register \",[\"$\",\"code\",null,{\"children\":\"dehydrating\"}],\" callbacks within the \",[\"$\",\"code\",null,{\"children\":\"boot\"}],\" method of your application's \",[\"$\",\"code\",null,{\"children\":\"AppServiceProvider\"}],\" class:\"]}]\n63:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Log\\\\Context\\\\Repository;\\nuse Illuminate\\\\Support\\\\Facades\\\\Config;\\nuse Illuminate\\\\Support\\\\Facades\\\\Context;\\n\\n/**\\n * Bootstrap any application services.\\n */\\npublic function boot(): void\\n{\\n    Context::dehydrating(function (Repository $context) {\\n        $context-\u003eaddHidden('locale', Config::get('app.locale'));\\n    });\\n}\\n\"}]}]\n64:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\nYou should not use the \",[\"$\",\"code\",null,{\"children\":\"Context\"}],\" facade within the \",[\"$\",\"code\",null,{\"children\":\"dehydrating\"}],\" callback, as that will change the context of the current process. Ensure you only make changes to the repository passed to the callback.\"]}],\"\\n\"]}]\n65:[\"$\",\"a\",null,{\"name\":\"hydrated\"}]\n66:[\"$\",\"h3\",null,{\"id\":\"hydrated\",\"children\":[\"$\",\"a\",null,{\"href\":\"#hydrated\",\"children\":\"Hydrated\"}]}]\n67:[\"$\",\"p\",null,{\"children\":[\"Whenever a queued job begins executing on the queue, any context that was shared with the job will be \\\"hydrated\\\" back into the current context. The \",[\"$\",\"code\",null,{\"children\":\"Context::hydrated\"}],\" method allows you to register a closure that will be invoked during the hydration process.\"]}]\n68:[\"$\",\"p\",null,{\"children\":[\"Typically, you should register \",[\"$\",\"code\",null,{\"children\":\"hydrated\"}],\" callbacks within the \",[\"$\",\"code\",null,{\"children\":\"boot\"}],\" method of your application's \",[\"$\",\"code\",null,{\"children\":\"AppServiceProvider\"}],\" class:\"]}]\n69:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Log\\\\Context\\\\Repository;\\nuse Illuminate\\\\Support\\\\Facades\\\\Config;\\nuse Illuminate\\\\Support\\\\Facades\\\\Context;\\n\\n/**\\n * Bootstrap any application services.\\n */\\npublic function boot(): void\\n{\\n    Context::hydrated(function (Repository $context) {\\n        if ($context-\u003ehasHidden('locale')) {\\n            Config::set('app.locale', $context-\u003egetHidden('locale'));\\n        }\\n    });\\n}\\n\"}]}]\n6a:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\nYou should not use the \",[\"$\",\"code\",null,{\"children\":\"Context\"}],\" facade within the \",[\"$\",\"code\",null,{\"children\":\"hydrated\"}],\" callback and instead ensure you only make changes to the repository passed to the callback.\"]}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"11:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"6b:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"IconMark\"]\n13:[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$L6b\",\"3\",{}]]\nf:null\n"])</script></body></html>