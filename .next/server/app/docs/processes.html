<!DOCTYPE html><!--064VbOcPM65IQylKQ_S9h--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/8d8bfdb8c7183f74.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/cbd55ab9639e1e66.js"/><script src="/_next/static/chunks/87a939617be2fa8c.js" async=""></script><script src="/_next/static/chunks/8368f298651cbd89.js" async=""></script><script src="/_next/static/chunks/6740f161f60c6ab5.js" async=""></script><script src="/_next/static/chunks/turbopack-929fc2ce3ca903db.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/247eb132b7f7b574.js" async=""></script><script src="/_next/static/chunks/796e69ae18b2784c.js" async=""></script><script src="/_next/static/chunks/16ad486f9df855f5.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased"><div hidden=""><!--$--><!--/$--></div><div class="flex min-h-screen bg-background"><div class="w-64 border-r bg-background h-screen sticky top-0 hidden md:block"><div class="p-6 font-bold text-xl border-b flex items-center gap-2"><span class="text-red-600">Laravel</span> Docs（中文）</div><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-65px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="p-4 space-y-2"><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>前言</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">發行說明</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>入門</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/installation"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">安裝</button></a><a class="block" href="/docs/configuration"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">配置</button></a><a class="block" href="/docs/structure"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">目錄結構</button></a><a class="block" href="/docs/lifecycle"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">生命週期</button></a><a class="block" href="/docs/frontend"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">前端</button></a><a class="block" href="/docs/starter-kits"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">啟動套件</button></a><a class="block" href="/docs/deployment"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">部署</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>架構</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>基礎功能</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>深入探討</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>安全性</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>資料庫</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>Eloquent ORM</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>測試</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>其他</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>官方套件</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div class="border-t pt-4 space-y-2"><a class="block" href="/docs/api"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">API 文件</button></a><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">更新日誌</button></a></div></div></div></div></div></div><main class="flex-1 relative"><div class="container mx-auto py-10"><div class="mx-auto max-w-3xl"><div class="mb-8"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Processes</h1><p class="text-xl text-muted-foreground mt-2">Laravel 提供了流暢的 API 來執行外部程序</p></div><article class="prose prose-slate dark:prose-invert max-w-none"><h1 id="processes"><a href="#processes">Processes</a></h1>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#invoking-processes">Invoking Processes</a>
<ul>
<li><a href="#process-options">Process Options</a></li>
<li><a href="#process-output">Process Output</a></li>
<li><a href="#process-pipelines">Pipelines</a></li>
</ul>
</li>
<li><a href="#asynchronous-processes">Asynchronous Processes</a>
<ul>
<li><a href="#process-ids-and-signals">Process IDs and Signals</a></li>
<li><a href="#asynchronous-process-output">Asynchronous Process Output</a></li>
<li><a href="#asynchronous-process-timeouts">Asynchronous Process Timeouts</a></li>
</ul>
</li>
<li><a href="#concurrent-processes">Concurrent Processes</a>
<ul>
<li><a href="#naming-pool-processes">Naming Pool Processes</a></li>
<li><a href="#pool-process-ids-and-signals">Pool Process IDs and Signals</a></li>
</ul>
</li>
<li><a href="#testing">Testing</a>
<ul>
<li><a href="#faking-processes">Faking Processes</a></li>
<li><a href="#faking-specific-processes">Faking Specific Processes</a></li>
<li><a href="#faking-process-sequences">Faking Process Sequences</a></li>
<li><a href="#faking-asynchronous-process-lifecycles">Faking Asynchronous Process Lifecycles</a></li>
<li><a href="#available-assertions">Available Assertions</a></li>
<li><a href="#preventing-stray-processes">Preventing Stray Processes</a></li>
</ul>
</li>
</ul>
<a name="introduction"></a>
<h2 id="簡介"><a href="#簡介">簡介</a></h2>
<p>Laravel provides an expressive, minimal API around the <a href="https://symfony.com/doc/current/components/process.html">Symfony Process component</a>, allowing you to conveniently invoke external processes from your Laravel application. Laravel&#x27;s process features are focused on the most common use cases and a wonderful developer experience.</p>
<a name="invoking-processes"></a>
<h2 id="invoking-processes"><a href="#invoking-processes">Invoking Processes</a></h2>
<p>To invoke a process, you may use the <code>run</code> and <code>start</code> methods offered by the <code>Process</code> facade. The <code>run</code> method will invoke a process and wait for the process to finish executing, while the <code>start</code> method is used for asynchronous process execution. We&#x27;ll examine both approaches within this documentation. First, let&#x27;s examine how to invoke a basic, synchronous process and inspect its result:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Process;

$result = Process::run(&#x27;ls -la&#x27;);

return $result-&gt;output();
</code></pre>
<p>Of course, the <code>Illuminate\Contracts\Process\ProcessResult</code> instance returned by the <code>run</code> method offers a variety of helpful methods that may be used to inspect the process result:</p>
<pre><code class="language-php">$result = Process::run(&#x27;ls -la&#x27;);

$result-&gt;command();
$result-&gt;successful();
$result-&gt;failed();
$result-&gt;output();
$result-&gt;errorOutput();
$result-&gt;exitCode();
</code></pre>
<a name="throwing-exceptions"></a>
<h4 id="throwing-exceptions"><a href="#throwing-exceptions">Throwing Exceptions</a></h4>
<p>If you have a process result and would like to throw an instance of <code>Illuminate\Process\Exceptions\ProcessFailedException</code> if the exit code is greater than zero (thus indicating failure), you may use the <code>throw</code> and <code>throwIf</code> methods. If the process did not fail, the <code>ProcessResult</code> instance will be returned:</p>
<pre><code class="language-php">$result = Process::run(&#x27;ls -la&#x27;)-&gt;throw();

$result = Process::run(&#x27;ls -la&#x27;)-&gt;throwIf($condition);
</code></pre>
<a name="process-options"></a>
<h3 id="process-options"><a href="#process-options">Process Options</a></h3>
<p>Of course, you may need to customize the behavior of a process before invoking it. Thankfully, Laravel allows you to tweak a variety of process features, such as the working directory, timeout, and environment variables.</p>
<a name="working-directory-path"></a>
<h4 id="working-directory-path"><a href="#working-directory-path">Working Directory Path</a></h4>
<p>You may use the <code>path</code> method to specify the working directory of the process. If this method is not invoked, the process will inherit the working directory of the currently executing PHP script:</p>
<pre><code class="language-php">$result = Process::path(__DIR__)-&gt;run(&#x27;ls -la&#x27;);
</code></pre>
<a name="input"></a>
<h4 id="input"><a href="#input">Input</a></h4>
<p>You may provide input via the &quot;standard input&quot; of the process using the <code>input</code> method:</p>
<pre><code class="language-php">$result = Process::input(&#x27;Hello World&#x27;)-&gt;run(&#x27;cat&#x27;);
</code></pre>
<a name="timeouts"></a>
<h4 id="timeouts"><a href="#timeouts">Timeouts</a></h4>
<p>By default, processes will throw an instance of <code>Illuminate\Process\Exceptions\ProcessTimedOutException</code> after executing for more than 60 seconds. However, you can customize this behavior via the <code>timeout</code> method:</p>
<pre><code class="language-php">$result = Process::timeout(120)-&gt;run(&#x27;bash import.sh&#x27;);
</code></pre>
<p>Or, if you would like to disable the process timeout entirely, you may invoke the <code>forever</code> method:</p>
<pre><code class="language-php">$result = Process::forever()-&gt;run(&#x27;bash import.sh&#x27;);
</code></pre>
<p>The <code>idleTimeout</code> method may be used to specify the maximum number of seconds the process may run without returning any output:</p>
<pre><code class="language-php">$result = Process::timeout(60)-&gt;idleTimeout(30)-&gt;run(&#x27;bash import.sh&#x27;);
</code></pre>
<a name="environment-variables"></a>
<h4 id="environment-variables"><a href="#environment-variables">Environment Variables</a></h4>
<p>Environment variables may be provided to the process via the <code>env</code> method. The invoked process will also inherit all of the environment variables defined by your system:</p>
<pre><code class="language-php">$result = Process::forever()
    -&gt;env([&#x27;IMPORT_PATH&#x27; =&gt; __DIR__])
    -&gt;run(&#x27;bash import.sh&#x27;);
</code></pre>
<p>If you wish to remove an inherited environment variable from the invoked process, you may provide that environment variable with a value of <code>false</code>:</p>
<pre><code class="language-php">$result = Process::forever()
    -&gt;env([&#x27;LOAD_PATH&#x27; =&gt; false])
    -&gt;run(&#x27;bash import.sh&#x27;);
</code></pre>
<a name="tty-mode"></a>
<h4 id="tty-mode"><a href="#tty-mode">TTY Mode</a></h4>
<p>The <code>tty</code> method may be used to enable TTY mode for your process. TTY mode connects the input and output of the process to the input and output of your program, allowing your process to open an editor like Vim or Nano as a process:</p>
<pre><code class="language-php">Process::forever()-&gt;tty()-&gt;run(&#x27;vim&#x27;);
</code></pre>
<blockquote>
<p>[!WARNING]
TTY mode is not supported on Windows.</p>
</blockquote>
<a name="process-output"></a>
<h3 id="process-output"><a href="#process-output">Process Output</a></h3>
<p>As previously discussed, process output may be accessed using the <code>output</code> (stdout) and <code>errorOutput</code> (stderr) methods on a process result:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Process;

$result = Process::run(&#x27;ls -la&#x27;);

echo $result-&gt;output();
echo $result-&gt;errorOutput();
</code></pre>
<p>However, output may also be gathered in real-time by passing a closure as the second argument to the <code>run</code> method. The closure will receive two arguments: the &quot;type&quot; of output (<code>stdout</code> or <code>stderr</code>) and the output string itself:</p>
<pre><code class="language-php">$result = Process::run(&#x27;ls -la&#x27;, function (string $type, string $output) {
    echo $output;
});
</code></pre>
<p>Laravel also offers the <code>seeInOutput</code> and <code>seeInErrorOutput</code> methods, which provide a convenient way to determine if a given string was contained in the process&#x27; output:</p>
<pre><code class="language-php">if (Process::run(&#x27;ls -la&#x27;)-&gt;seeInOutput(&#x27;laravel&#x27;)) {
    // ...
}
</code></pre>
<a name="disabling-process-output"></a>
<h4 id="disabling-process-output"><a href="#disabling-process-output">Disabling Process Output</a></h4>
<p>If your process is writing a significant amount of output that you are not interested in, you can conserve memory by disabling output retrieval entirely. To accomplish this, invoke the <code>quietly</code> method while building the process:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Process;

$result = Process::quietly()-&gt;run(&#x27;bash import.sh&#x27;);
</code></pre>
<a name="process-pipelines"></a>
<h3 id="pipelines"><a href="#pipelines">Pipelines</a></h3>
<p>Sometimes you may want to make the output of one process the input of another process. This is often referred to as &quot;piping&quot; the output of a process into another. The <code>pipe</code> method provided by the <code>Process</code> facades makes this easy to accomplish. The <code>pipe</code> method will execute the piped processes synchronously and return the process result for the last process in the pipeline:</p>
<pre><code class="language-php">use Illuminate\Process\Pipe;
use Illuminate\Support\Facades\Process;

$result = Process::pipe(function (Pipe $pipe) {
    $pipe-&gt;command(&#x27;cat example.txt&#x27;);
    $pipe-&gt;command(&#x27;grep -i &quot;laravel&quot;&#x27;);
});

if ($result-&gt;successful()) {
    // ...
}
</code></pre>
<p>If you do not need to customize the individual processes that make up the pipeline, you may simply pass an array of command strings to the <code>pipe</code> method:</p>
<pre><code class="language-php">$result = Process::pipe([
    &#x27;cat example.txt&#x27;,
    &#x27;grep -i &quot;laravel&quot;&#x27;,
]);
</code></pre>
<p>The process output may be gathered in real-time by passing a closure as the second argument to the <code>pipe</code> method. The closure will receive two arguments: the &quot;type&quot; of output (<code>stdout</code> or <code>stderr</code>) and the output string itself:</p>
<pre><code class="language-php">$result = Process::pipe(function (Pipe $pipe) {
    $pipe-&gt;command(&#x27;cat example.txt&#x27;);
    $pipe-&gt;command(&#x27;grep -i &quot;laravel&quot;&#x27;);
}, function (string $type, string $output) {
    echo $output;
});
</code></pre>
<p>Laravel also allows you to assign string keys to each process within a pipeline via the <code>as</code> method. This key will also be passed to the output closure provided to the <code>pipe</code> method, allowing you to determine which process the output belongs to:</p>
<pre><code class="language-php">$result = Process::pipe(function (Pipe $pipe) {
    $pipe-&gt;as(&#x27;first&#x27;)-&gt;command(&#x27;cat example.txt&#x27;);
    $pipe-&gt;as(&#x27;second&#x27;)-&gt;command(&#x27;grep -i &quot;laravel&quot;&#x27;);
}, function (string $type, string $output, string $key) {
    // ...
});
</code></pre>
<a name="asynchronous-processes"></a>
<h2 id="asynchronous-processes"><a href="#asynchronous-processes">Asynchronous Processes</a></h2>
<p>While the <code>run</code> method invokes processes synchronously, the <code>start</code> method may be used to invoke a process asynchronously. This allows your application to continue performing other tasks while the process runs in the background. Once the process has been invoked, you may utilize the <code>running</code> method to determine if the process is still running:</p>
<pre><code class="language-php">$process = Process::timeout(120)-&gt;start(&#x27;bash import.sh&#x27;);

while ($process-&gt;running()) {
    // ...
}

$result = $process-&gt;wait();
</code></pre>
<p>As you may have noticed, you may invoke the <code>wait</code> method to wait until the process is finished executing and retrieve the <code>ProcessResult</code> instance:</p>
<pre><code class="language-php">$process = Process::timeout(120)-&gt;start(&#x27;bash import.sh&#x27;);

// ...

$result = $process-&gt;wait();
</code></pre>
<a name="process-ids-and-signals"></a>
<h3 id="process-ids-and-signals"><a href="#process-ids-and-signals">Process IDs and Signals</a></h3>
<p>The <code>id</code> method may be used to retrieve the operating system assigned process ID of the running process:</p>
<pre><code class="language-php">$process = Process::start(&#x27;bash import.sh&#x27;);

return $process-&gt;id();
</code></pre>
<p>You may use the <code>signal</code> method to send a &quot;signal&quot; to the running process. A list of predefined signal constants can be found within the <a href="https://www.php.net/manual/en/pcntl.constants.php">PHP documentation</a>:</p>
<pre><code class="language-php">$process-&gt;signal(SIGUSR2);
</code></pre>
<a name="asynchronous-process-output"></a>
<h3 id="asynchronous-process-output"><a href="#asynchronous-process-output">Asynchronous Process Output</a></h3>
<p>While an asynchronous process is running, you may access its entire current output using the <code>output</code> and <code>errorOutput</code> methods; however, you may utilize the <code>latestOutput</code> and <code>latestErrorOutput</code> to access the output from the process that has occurred since the output was last retrieved:</p>
<pre><code class="language-php">$process = Process::timeout(120)-&gt;start(&#x27;bash import.sh&#x27;);

while ($process-&gt;running()) {
    echo $process-&gt;latestOutput();
    echo $process-&gt;latestErrorOutput();

    sleep(1);
}
</code></pre>
<p>Like the <code>run</code> method, output may also be gathered in real-time from asynchronous processes by passing a closure as the second argument to the <code>start</code> method. The closure will receive two arguments: the &quot;type&quot; of output (<code>stdout</code> or <code>stderr</code>) and the output string itself:</p>
<pre><code class="language-php">$process = Process::start(&#x27;bash import.sh&#x27;, function (string $type, string $output) {
    echo $output;
});

$result = $process-&gt;wait();
</code></pre>
<p>Instead of waiting until the process has finished, you may use the <code>waitUntil</code> method to stop waiting based on the output of the process. Laravel will stop waiting for the process to finish when the closure given to the <code>waitUntil</code> method returns <code>true</code>:</p>
<pre><code class="language-php">$process = Process::start(&#x27;bash import.sh&#x27;);

$process-&gt;waitUntil(function (string $type, string $output) {
    return $output === &#x27;Ready...&#x27;;
});
</code></pre>
<a name="asynchronous-process-timeouts"></a>
<h3 id="asynchronous-process-timeouts"><a href="#asynchronous-process-timeouts">Asynchronous Process Timeouts</a></h3>
<p>While an asynchronous process is running, you may verify that the process has not timed out using the <code>ensureNotTimedOut</code> method. This method will throw a <a href="#timeouts">timeout exception</a> if the process has timed out:</p>
<pre><code class="language-php">$process = Process::timeout(120)-&gt;start(&#x27;bash import.sh&#x27;);

while ($process-&gt;running()) {
    $process-&gt;ensureNotTimedOut();

    // ...

    sleep(1);
}
</code></pre>
<a name="concurrent-processes"></a>
<h2 id="concurrent-processes"><a href="#concurrent-processes">Concurrent Processes</a></h2>
<p>Laravel also makes it a breeze to manage a pool of concurrent, asynchronous processes, allowing you to easily execute many tasks simultaneously. To get started, invoke the <code>pool</code> method, which accepts a closure that receives an instance of <code>Illuminate\Process\Pool</code>.</p>
<p>Within this closure, you may define the processes that belong to the pool. Once a process pool is started via the <code>start</code> method, you may access the <a href="/docs/12.x/collections">collection</a> of running processes via the <code>running</code> method:</p>
<pre><code class="language-php">use Illuminate\Process\Pool;
use Illuminate\Support\Facades\Process;

$pool = Process::pool(function (Pool $pool) {
    $pool-&gt;path(__DIR__)-&gt;command(&#x27;bash import-1.sh&#x27;);
    $pool-&gt;path(__DIR__)-&gt;command(&#x27;bash import-2.sh&#x27;);
    $pool-&gt;path(__DIR__)-&gt;command(&#x27;bash import-3.sh&#x27;);
})-&gt;start(function (string $type, string $output, int $key) {
    // ...
});

while ($pool-&gt;running()-&gt;isNotEmpty()) {
    // ...
}

$results = $pool-&gt;wait();
</code></pre>
<p>As you can see, you may wait for all of the pool processes to finish executing and resolve their results via the <code>wait</code> method. The <code>wait</code> method returns an array accessible object that allows you to access the <code>ProcessResult</code> instance of each process in the pool by its key:</p>
<pre><code class="language-php">$results = $pool-&gt;wait();

echo $results[0]-&gt;output();
</code></pre>
<p>Or, for convenience, the <code>concurrently</code> method may be used to start an asynchronous process pool and immediately wait on its results. This can provide particularly expressive syntax when combined with PHP&#x27;s array destructuring capabilities:</p>
<pre><code class="language-php">[$first, $second, $third] = Process::concurrently(function (Pool $pool) {
    $pool-&gt;path(__DIR__)-&gt;command(&#x27;ls -la&#x27;);
    $pool-&gt;path(app_path())-&gt;command(&#x27;ls -la&#x27;);
    $pool-&gt;path(storage_path())-&gt;command(&#x27;ls -la&#x27;);
});

echo $first-&gt;output();
</code></pre>
<a name="naming-pool-processes"></a>
<h3 id="naming-pool-processes"><a href="#naming-pool-processes">Naming Pool Processes</a></h3>
<p>Accessing process pool results via a numeric key is not very expressive; therefore, Laravel allows you to assign string keys to each process within a pool via the <code>as</code> method. This key will also be passed to the closure provided to the <code>start</code> method, allowing you to determine which process the output belongs to:</p>
<pre><code class="language-php">$pool = Process::pool(function (Pool $pool) {
    $pool-&gt;as(&#x27;first&#x27;)-&gt;command(&#x27;bash import-1.sh&#x27;);
    $pool-&gt;as(&#x27;second&#x27;)-&gt;command(&#x27;bash import-2.sh&#x27;);
    $pool-&gt;as(&#x27;third&#x27;)-&gt;command(&#x27;bash import-3.sh&#x27;);
})-&gt;start(function (string $type, string $output, string $key) {
    // ...
});

$results = $pool-&gt;wait();

return $results[&#x27;first&#x27;]-&gt;output();
</code></pre>
<a name="pool-process-ids-and-signals"></a>
<h3 id="pool-process-ids-and-signals"><a href="#pool-process-ids-and-signals">Pool Process IDs and Signals</a></h3>
<p>Since the process pool&#x27;s <code>running</code> method provides a collection of all invoked processes within the pool, you may easily access the underlying pool process IDs:</p>
<pre><code class="language-php">$processIds = $pool-&gt;running()-&gt;each-&gt;id();
</code></pre>
<p>And, for convenience, you may invoke the <code>signal</code> method on a process pool to send a signal to every process within the pool:</p>
<pre><code class="language-php">$pool-&gt;signal(SIGUSR2);
</code></pre>
<a name="testing"></a>
<h2 id="testing"><a href="#testing">Testing</a></h2>
<p>Many Laravel services provide functionality to help you easily and expressively write tests, and Laravel&#x27;s process service is no exception. The <code>Process</code> facade&#x27;s <code>fake</code> method allows you to instruct Laravel to return stubbed / dummy results when processes are invoked.</p>
<a name="faking-processes"></a>
<h3 id="faking-processes"><a href="#faking-processes">Faking Processes</a></h3>
<p>To explore Laravel&#x27;s ability to fake processes, let&#x27;s imagine a route that invokes a process:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Process;
use Illuminate\Support\Facades\Route;

Route::get(&#x27;/import&#x27;, function () {
    Process::run(&#x27;bash import.sh&#x27;);

    return &#x27;Import complete!&#x27;;
});
</code></pre>
<p>When testing this route, we can instruct Laravel to return a fake, successful process result for every invoked process by calling the <code>fake</code> method on the <code>Process</code> facade with no arguments. In addition, we can even <a href="#available-assertions">assert</a> that a given process was &quot;run&quot;:</p>
<pre><code class="language-php">&lt;?php

use Illuminate\Contracts\Process\ProcessResult;
use Illuminate\Process\PendingProcess;
use Illuminate\Support\Facades\Process;

test(&#x27;process is invoked&#x27;, function () {
    Process::fake();

    $response = $this-&gt;get(&#x27;/import&#x27;);

    // Simple process assertion...
    Process::assertRan(&#x27;bash import.sh&#x27;);

    // Or, inspecting the process configuration...
    Process::assertRan(function (PendingProcess $process, ProcessResult $result) {
        return $process-&gt;command === &#x27;bash import.sh&#x27; &amp;&amp;
               $process-&gt;timeout === 60;
    });
});
</code></pre>
<pre><code class="language-php">&lt;?php

namespace Tests\Feature;

use Illuminate\Contracts\Process\ProcessResult;
use Illuminate\Process\PendingProcess;
use Illuminate\Support\Facades\Process;
use Tests\TestCase;

class ExampleTest extends TestCase
{
    public function test_process_is_invoked(): void
    {
        Process::fake();

        $response = $this-&gt;get(&#x27;/import&#x27;);

        // Simple process assertion...
        Process::assertRan(&#x27;bash import.sh&#x27;);

        // Or, inspecting the process configuration...
        Process::assertRan(function (PendingProcess $process, ProcessResult $result) {
            return $process-&gt;command === &#x27;bash import.sh&#x27; &amp;&amp;
                   $process-&gt;timeout === 60;
        });
    }
}
</code></pre>
<p>As discussed, invoking the <code>fake</code> method on the <code>Process</code> facade will instruct Laravel to always return a successful process result with no output. However, you may easily specify the output and exit code for faked processes using the <code>Process</code> facade&#x27;s <code>result</code> method:</p>
<pre><code class="language-php">Process::fake([
    &#x27;*&#x27; =&gt; Process::result(
        output: &#x27;Test output&#x27;,
        errorOutput: &#x27;Test error output&#x27;,
        exitCode: 1,
    ),
]);
</code></pre>
<a name="faking-specific-processes"></a>
<h3 id="faking-specific-processes"><a href="#faking-specific-processes">Faking Specific Processes</a></h3>
<p>As you may have noticed in a previous example, the <code>Process</code> facade allows you to specify different fake results per process by passing an array to the <code>fake</code> method.</p>
<p>The array&#x27;s keys should represent command patterns that you wish to fake and their associated results. The <code>*</code> character may be used as a wildcard character. Any process commands that have not been faked will actually be invoked. You may use the <code>Process</code> facade&#x27;s <code>result</code> method to construct stub / fake results for these commands:</p>
<pre><code class="language-php">Process::fake([
    &#x27;cat *&#x27; =&gt; Process::result(
        output: &#x27;Test &quot;cat&quot; output&#x27;,
    ),
    &#x27;ls *&#x27; =&gt; Process::result(
        output: &#x27;Test &quot;ls&quot; output&#x27;,
    ),
]);
</code></pre>
<p>If you do not need to customize the exit code or error output of a faked process, you may find it more convenient to specify the fake process results as simple strings:</p>
<pre><code class="language-php">Process::fake([
    &#x27;cat *&#x27; =&gt; &#x27;Test &quot;cat&quot; output&#x27;,
    &#x27;ls *&#x27; =&gt; &#x27;Test &quot;ls&quot; output&#x27;,
]);
</code></pre>
<a name="faking-process-sequences"></a>
<h3 id="faking-process-sequences"><a href="#faking-process-sequences">Faking Process Sequences</a></h3>
<p>If the code you are testing invokes multiple processes with the same command, you may wish to assign a different fake process result to each process invocation. You may accomplish this via the <code>Process</code> facade&#x27;s <code>sequence</code> method:</p>
<pre><code class="language-php">Process::fake([
    &#x27;ls *&#x27; =&gt; Process::sequence()
        -&gt;push(Process::result(&#x27;First invocation&#x27;))
        -&gt;push(Process::result(&#x27;Second invocation&#x27;)),
]);
</code></pre>
<a name="faking-asynchronous-process-lifecycles"></a>
<h3 id="faking-asynchronous-process-lifecycles"><a href="#faking-asynchronous-process-lifecycles">Faking Asynchronous Process Lifecycles</a></h3>
<p>Thus far, we have primarily discussed faking processes which are invoked synchronously using the <code>run</code> method. However, if you are attempting to test code that interacts with asynchronous processes invoked via <code>start</code>, you may need a more sophisticated approach to describing your fake processes.</p>
<p>For example, let&#x27;s imagine the following route which interacts with an asynchronous process:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Log;
use Illuminate\Support\Facades\Route;

Route::get(&#x27;/import&#x27;, function () {
    $process = Process::start(&#x27;bash import.sh&#x27;);

    while ($process-&gt;running()) {
        Log::info($process-&gt;latestOutput());
        Log::info($process-&gt;latestErrorOutput());
    }

    return &#x27;Done&#x27;;
});
</code></pre>
<p>To properly fake this process, we need to be able to describe how many times the <code>running</code> method should return <code>true</code>. In addition, we may want to specify multiple lines of output that should be returned in sequence. To accomplish this, we can use the <code>Process</code> facade&#x27;s <code>describe</code> method:</p>
<pre><code class="language-php">Process::fake([
    &#x27;bash import.sh&#x27; =&gt; Process::describe()
        -&gt;output(&#x27;First line of standard output&#x27;)
        -&gt;errorOutput(&#x27;First line of error output&#x27;)
        -&gt;output(&#x27;Second line of standard output&#x27;)
        -&gt;exitCode(0)
        -&gt;iterations(3),
]);
</code></pre>
<p>Let&#x27;s dig into the example above. Using the <code>output</code> and <code>errorOutput</code> methods, we may specify multiple lines of output that will be returned in sequence. The <code>exitCode</code> method may be used to specify the final exit code of the fake process. Finally, the <code>iterations</code> method may be used to specify how many times the <code>running</code> method should return <code>true</code>.</p>
<a name="available-assertions"></a>
<h3 id="available-assertions"><a href="#available-assertions">Available Assertions</a></h3>
<p>As <a href="#faking-processes">previously discussed</a>, Laravel provides several process assertions for your feature tests. We&#x27;ll discuss each of these assertions below.</p>
<a name="assert-process-ran"></a>
<h4 id="assertran"><a href="#assertran">assertRan</a></h4>
<p>Assert that a given process was invoked:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Process;

Process::assertRan(&#x27;ls -la&#x27;);
</code></pre>
<p>The <code>assertRan</code> method also accepts a closure, which will receive an instance of a process and a process result, allowing you to inspect the process&#x27; configured options. If this closure returns <code>true</code>, the assertion will &quot;pass&quot;:</p>
<pre><code class="language-php">Process::assertRan(fn ($process, $result) =&gt;
    $process-&gt;command === &#x27;ls -la&#x27; &amp;&amp;
    $process-&gt;path === __DIR__ &amp;&amp;
    $process-&gt;timeout === 60
);
</code></pre>
<p>The <code>$process</code> passed to the <code>assertRan</code> closure is an instance of <code>Illuminate\Process\PendingProcess</code>, while the <code>$result</code> is an instance of <code>Illuminate\Contracts\Process\ProcessResult</code>.</p>
<a name="assert-process-didnt-run"></a>
<h4 id="assertdidntrun"><a href="#assertdidntrun">assertDidntRun</a></h4>
<p>Assert that a given process was not invoked:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Process;

Process::assertDidntRun(&#x27;ls -la&#x27;);
</code></pre>
<p>Like the <code>assertRan</code> method, the <code>assertDidntRun</code> method also accepts a closure, which will receive an instance of a process and a process result, allowing you to inspect the process&#x27; configured options. If this closure returns <code>true</code>, the assertion will &quot;fail&quot;:</p>
<pre><code class="language-php">Process::assertDidntRun(fn (PendingProcess $process, ProcessResult $result) =&gt;
    $process-&gt;command === &#x27;ls -la&#x27;
);
</code></pre>
<a name="assert-process-ran-times"></a>
<h4 id="assertrantimes"><a href="#assertrantimes">assertRanTimes</a></h4>
<p>Assert that a given process was invoked a given number of times:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Process;

Process::assertRanTimes(&#x27;ls -la&#x27;, times: 3);
</code></pre>
<p>The <code>assertRanTimes</code> method also accepts a closure, which will receive an instance of <code>PendingProcess</code> and <code>ProcessResult</code>, allowing you to inspect the process&#x27; configured options. If this closure returns <code>true</code> and the process was invoked the specified number of times, the assertion will &quot;pass&quot;:</p>
<pre><code class="language-php">Process::assertRanTimes(function (PendingProcess $process, ProcessResult $result) {
    return $process-&gt;command === &#x27;ls -la&#x27;;
}, times: 3);
</code></pre>
<a name="preventing-stray-processes"></a>
<h3 id="preventing-stray-processes"><a href="#preventing-stray-processes">Preventing Stray Processes</a></h3>
<p>If you would like to ensure that all invoked processes have been faked throughout your individual test or complete test suite, you can call the <code>preventStrayProcesses</code> method. After calling this method, any processes that do not have a corresponding fake result will throw an exception rather than starting an actual process:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Process;

Process::preventStrayProcesses();

Process::fake([
    &#x27;ls *&#x27; =&gt; &#x27;Test output...&#x27;,
]);

// Fake response is returned...
Process::run(&#x27;ls -la&#x27;);

// An exception is thrown...
Process::run(&#x27;bash import.sh&#x27;);
</code></pre></article></div></div><!--$--><!--/$--></main></div><script src="/_next/static/chunks/cbd55ab9639e1e66.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n4:I[93649,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/16ad486f9df855f5.js\"],\"DocsSidebar\"]\n6:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"ViewportBoundary\"]\nb:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"MetadataBoundary\"]\nd:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/8d8bfdb8c7183f74.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"064VbOcPM65IQylKQ-S9h\",\"c\":[\"\",\"docs\",\"processes\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"processes\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/8d8bfdb8c7183f74.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/796e69ae18b2784c.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/16ad486f9df855f5.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"div\",null,{\"className\":\"flex min-h-screen bg-background\",\"children\":[[\"$\",\"$L4\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 relative\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"className\":\"container mx-auto py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-3xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl\",\"children\":\"Processes\"}],[\"$\",\"p\",null,{\"className\":\"text-xl text-muted-foreground mt-2\",\"children\":\"Laravel 提供了流暢的 API 來執行外部程序\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"processes\",\"children\":[\"$\",\"a\",null,{\"href\":\"#processes\",\"children\":\"Processes\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#introduction\",\"children\":\"Introduction\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#invoking-processes\",\"children\":\"Invoking Processes\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#process-options\",\"children\":\"Process Options\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#process-output\",\"children\":\"Process Output\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#process-pipelines\",\"children\":\"Pipelines\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#asynchronous-processes\",\"children\":\"Asynchronous Processes\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#process-ids-and-signals\",\"children\":\"Process IDs and Signals\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#asynchronous-process-output\",\"children\":\"Asynchronous Process Output\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#asynchronous-process-timeouts\",\"children\":\"Asynchronous Process Timeouts\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#concurrent-processes\",\"children\":\"Concurrent Processes\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#naming-pool-processes\",\"children\":\"Naming Pool Processes\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#pool-process-ids-and-signals\",\"children\":\"Pool Process IDs and Signals\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#testing\",\"children\":\"Testing\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#faking-processes\",\"children\":\"Faking Processes\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#faking-specific-processes\",\"children\":\"Faking Specific Processes\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#faking-process-sequences\",\"children\":\"Faking Process Sequences\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#faking-asynchronous-process-lifecycles\",\"children\":\"Faking Asynchronous Process Lifecycles\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#available-assertions\",\"children\":\"Available Assertions\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#preventing-stray-processes\",\"children\":\"Preventing Stray Processes\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"introduction\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"簡介\",\"children\":[\"$\",\"a\",null,{\"href\":\"#簡介\",\"children\":\"簡介\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Laravel provides an expressive, minimal API around the \",[\"$\",\"a\",null,{\"href\":\"https://symfony.com/doc/current/components/process.html\",\"children\":\"Symfony Process component\"}],\", allowing you to conveniently invoke external processes from your Laravel application. Laravel's process features are focused on the most common use cases and a wonderful developer experience.\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"invoking-processes\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"invoking-processes\",\"children\":[\"$\",\"a\",null,{\"href\":\"#invoking-processes\",\"children\":\"Invoking Processes\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"To invoke a process, you may use the \",[\"$\",\"code\",null,{\"children\":\"run\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"start\"}],\" methods offered by the \",[\"$\",\"code\",null,{\"children\":\"Process\"}],\" facade. The \",[\"$\",\"code\",null,{\"children\":\"run\"}],\" method will invoke a process and wait for the process to finish executing, while the \",[\"$\",\"code\",null,{\"children\":\"start\"}],\" method is used for asynchronous process execution. We'll examine both approaches within this documentation. First, let's examine how to invoke a basic, synchronous process and inspect its result:\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Process;\\n\\n$result = Process::run('ls -la');\\n\\nreturn $result-\u003eoutput();\\n\"}]}],\"\\n\",\"$Le\",\"\\n\",\"$Lf\",\"\\n\",\"$L10\",\"\\n\",\"$L11\",\"\\n\",\"$L12\",\"\\n\",\"$L13\",\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\",\"\\n\",\"$L55\",\"\\n\",\"$L56\",\"\\n\",\"$L57\",\"\\n\",\"$L58\",\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\",\"\\n\",\"$L5c\",\"\\n\",\"$L5d\",\"\\n\",\"$L5e\",\"\\n\",\"$L5f\",\"\\n\",\"$L60\",\"\\n\",\"$L61\",\"\\n\",\"$L62\",\"\\n\",\"$L63\",\"\\n\",\"$L64\",\"\\n\",\"$L65\",\"\\n\",\"$L66\",\"\\n\",\"$L67\",\"\\n\",\"$L68\",\"\\n\",\"$L69\",\"\\n\",\"$L6a\",\"\\n\",\"$L6b\",\"\\n\",\"$L6c\",\"\\n\",\"$L6d\",\"\\n\",\"$L6e\",\"\\n\",\"$L6f\",\"\\n\",\"$L70\",\"\\n\",\"$L71\",\"\\n\",\"$L72\",\"\\n\",\"$L73\",\"\\n\",\"$L74\",\"\\n\",\"$L75\",\"\\n\",\"$L76\",\"\\n\",\"$L77\",\"\\n\",\"$L78\",\"\\n\",\"$L79\",\"\\n\",\"$L7a\",\"\\n\",\"$L7b\",\"\\n\",\"$L7c\",\"\\n\",\"$L7d\",\"\\n\",\"$L7e\",\"\\n\",\"$L7f\",\"\\n\",\"$L80\",\"\\n\",\"$L81\",\"\\n\",\"$L82\",\"\\n\",\"$L83\",\"\\n\",\"$L84\",\"\\n\",\"$L85\",\"\\n\",\"$L86\",\"\\n\",\"$L87\",\"\\n\",\"$L88\",\"\\n\",\"$L89\",\"\\n\",\"$L8a\",\"\\n\",\"$L8b\",\"\\n\",\"$L8c\",\"\\n\",\"$L8d\",\"\\n\",\"$L8e\",\"\\n\",\"$L8f\",\"\\n\",\"$L90\",\"\\n\",\"$L91\",\"\\n\",\"$L92\",\"\\n\",\"$L93\",\"\\n\",\"$L94\",\"\\n\",\"$L95\",\"\\n\",\"$L96\",\"\\n\",\"$L97\",\"\\n\",\"$L98\",\"\\n\",\"$L99\",\"\\n\",\"$L9a\",\"\\n\",\"$L9b\",\"\\n\",\"$L9c\",\"\\n\",\"$L9d\",\"\\n\",\"$L9e\",\"\\n\",\"$L9f\",\"\\n\",\"$La0\",\"\\n\",\"$La1\",\"\\n\",\"$La2\",\"\\n\",\"$La3\",\"\\n\",\"$La4\",\"\\n\",\"$La5\",\"\\n\",\"$La6\",\"\\n\",\"$La7\",\"\\n\",\"$La8\",\"\\n\",\"$La9\",\"\\n\",\"$Laa\",\"\\n\",\"$Lab\"]}]]}]}]\n"])</script><script>self.__next_f.push([1,"e:[\"$\",\"p\",null,{\"children\":[\"Of course, the \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Contracts\\\\Process\\\\ProcessResult\"}],\" instance returned by the \",[\"$\",\"code\",null,{\"children\":\"run\"}],\" method offers a variety of helpful methods that may be used to inspect the process result:\"]}]\nf:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$result = Process::run('ls -la');\\n\\n$result-\u003ecommand();\\n$result-\u003esuccessful();\\n$result-\u003efailed();\\n$result-\u003eoutput();\\n$result-\u003eerrorOutput();\\n$result-\u003eexitCode();\\n\"}]}]\n10:[\"$\",\"a\",null,{\"name\":\"throwing-exceptions\"}]\n11:[\"$\",\"h4\",null,{\"id\":\"throwing-exceptions\",\"children\":[\"$\",\"a\",null,{\"href\":\"#throwing-exceptions\",\"children\":\"Throwing Exceptions\"}]}]\n12:[\"$\",\"p\",null,{\"children\":[\"If you have a process result and would like to throw an instance of \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Process\\\\Exceptions\\\\ProcessFailedException\"}],\" if the exit code is greater than zero (thus indicating failure), you may use the \",[\"$\",\"code\",null,{\"children\":\"throw\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"throwIf\"}],\" methods. If the process did not fail, the \",[\"$\",\"code\",null,{\"children\":\"ProcessResult\"}],\" instance will be returned:\"]}]\n13:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$result = Process::run('ls -la')-\u003ethrow();\\n\\n$result = Process::run('ls -la')-\u003ethrowIf($condition);\\n\"}]}]\n14:[\"$\",\"a\",null,{\"name\":\"process-options\"}]\n15:[\"$\",\"h3\",null,{\"id\":\"process-options\",\"children\":[\"$\",\"a\",null,{\"href\":\"#process-options\",\"children\":\"Process Options\"}]}]\n16:[\"$\",\"p\",null,{\"children\":\"Of course, you may need to customize the behavior of a process before invoking it. Thankfully, Laravel allows you to tweak a variety of process features, such as the working directory, timeout, and environment variables.\"}]\n17:[\"$\",\"a\",null,{\"name\":\"working-directory-path\"}]\n18:[\"$\",\"h4\",null,{\"id\":\"working-directory-path\",\"children\":[\"$\",\"a\",null,{\"href\":\"#working-directory-path\",\"children\":\"Working Directory Path\"}]}]\n19:[\"$\",\"p\",null,{\"children\":[\"You may use the \",[\"$\",\"code\",null,{\"children\":\"path\"}],\" method to specify the working directory of the process. If this method is not invoked, the process will inherit the working directory of the currently executing PHP script:\"]}]\n1a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$result = Process::path(__DIR__)-\u003erun('ls -la');\\n\"}]}]\n1b:[\"$\",\"a\",null,{\"name\":\"input\"}]\n1c:[\"$\",\"h4\",null,{\"id\":\"input\",\"children\":[\"$\",\"a\",null,{\"href\":\"#input\",\"children\":\"Input\"}]}]\n1d:[\"$\",\"p\",null,{\"children\":[\"You may provide input via the \\\"standard input\\\" of the process using the \",[\"$\",\"code\",null,{\"children\":\"input\"}],\" method:\"]}]\n1e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$result = Process::input('Hello World')-\u003erun('cat');\\n\"}]}]\n1f:[\"$\",\"a\",null,{\"name\":\"timeouts\"}]\n20:[\"$\",\"h4\",null,{\"id\":\"timeouts\",\"children\":[\"$\",\"a\",null,{\"href\":\"#timeouts\",\"children\":\"Timeouts\"}]}]\n21:[\"$\",\"p\",null,{\"children\":[\"By default, processes will throw an instance of \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Process\\\\Exceptions\\\\ProcessTimedOutException\"}],\" after executing for more than 60 seconds. However, you can customize this behavior via the \",[\"$\",\"code\",null,{\"children\":\"timeout\"}],\" method:\"]}]\n22:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$result = Process::timeout(120)-\u003erun('bash import.sh');\\n\"}]}]\n23:[\"$\",\"p\",null,{\"children\":[\"Or, if you would like to disable the process timeout entirely, you may invoke the \",[\"$\",\"code\",null,{\"children\":\"forever\"}],\" method:\"]}]\n24:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$result = Process::forever()-\u003erun('bash import.sh');\\n\"}]}]\n25:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"idleTimeout\"}],\" method may be used to specify the maximum number of seconds the process may run without returning any output:\"]}]\n26:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"classNa"])</script><script>self.__next_f.push([1,"me\":\"language-php\",\"children\":\"$$result = Process::timeout(60)-\u003eidleTimeout(30)-\u003erun('bash import.sh');\\n\"}]}]\n27:[\"$\",\"a\",null,{\"name\":\"environment-variables\"}]\n28:[\"$\",\"h4\",null,{\"id\":\"environment-variables\",\"children\":[\"$\",\"a\",null,{\"href\":\"#environment-variables\",\"children\":\"Environment Variables\"}]}]\n29:[\"$\",\"p\",null,{\"children\":[\"Environment variables may be provided to the process via the \",[\"$\",\"code\",null,{\"children\":\"env\"}],\" method. The invoked process will also inherit all of the environment variables defined by your system:\"]}]\n2a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$result = Process::forever()\\n    -\u003eenv(['IMPORT_PATH' =\u003e __DIR__])\\n    -\u003erun('bash import.sh');\\n\"}]}]\n2b:[\"$\",\"p\",null,{\"children\":[\"If you wish to remove an inherited environment variable from the invoked process, you may provide that environment variable with a value of \",[\"$\",\"code\",null,{\"children\":\"false\"}],\":\"]}]\n2c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$result = Process::forever()\\n    -\u003eenv(['LOAD_PATH' =\u003e false])\\n    -\u003erun('bash import.sh');\\n\"}]}]\n2d:[\"$\",\"a\",null,{\"name\":\"tty-mode\"}]\n2e:[\"$\",\"h4\",null,{\"id\":\"tty-mode\",\"children\":[\"$\",\"a\",null,{\"href\":\"#tty-mode\",\"children\":\"TTY Mode\"}]}]\n2f:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"tty\"}],\" method may be used to enable TTY mode for your process. TTY mode connects the input and output of the process to the input and output of your program, allowing your process to open an editor like Vim or Nano as a process:\"]}]\n30:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Process::forever()-\u003etty()-\u003erun('vim');\\n\"}]}]\n31:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"[!WARNING]\\nTTY mode is not supported on Windows.\"}],\"\\n\"]}]\n32:[\"$\",\"a\",null,{\"name\":\"process-output\"}]\n33:[\"$\",\"h3\",null,{\"id\":\"process-output\",\"children\":[\"$\",\"a\",null,{\"href\":\"#process-output\",\"children\":\"Process Output\"}]}]\n34:[\"$\",\"p\",null,{\"children\":[\"As previously discussed, process output may be accessed using the \",[\"$\",\"code\",null,{\"children\":\"output\"}],\" (stdout) and \",[\"$\",\"code\",null,{\"children\":\"errorOutput\"}],\" (stderr) methods on a process result:\"]}]\n35:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Process;\\n\\n$result = Process::run('ls -la');\\n\\necho $result-\u003eoutput();\\necho $result-\u003eerrorOutput();\\n\"}]}]\n36:[\"$\",\"p\",null,{\"children\":[\"However, output may also be gathered in real-time by passing a closure as the second argument to the \",[\"$\",\"code\",null,{\"children\":\"run\"}],\" method. The closure will receive two arguments: the \\\"type\\\" of output (\",[\"$\",\"code\",null,{\"children\":\"stdout\"}],\" or \",[\"$\",\"code\",null,{\"children\":\"stderr\"}],\") and the output string itself:\"]}]\n37:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$result = Process::run('ls -la', function (string $type, string $output) {\\n    echo $output;\\n});\\n\"}]}]\n38:[\"$\",\"p\",null,{\"children\":[\"Laravel also offers the \",[\"$\",\"code\",null,{\"children\":\"seeInOutput\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"seeInErrorOutput\"}],\" methods, which provide a convenient way to determine if a given string was contained in the process' output:\"]}]\n39:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"if (Process::run('ls -la')-\u003eseeInOutput('laravel')) {\\n    // ...\\n}\\n\"}]}]\n3a:[\"$\",\"a\",null,{\"name\":\"disabling-process-output\"}]\n3b:[\"$\",\"h4\",null,{\"id\":\"disabling-process-output\",\"children\":[\"$\",\"a\",null,{\"href\":\"#disabling-process-output\",\"children\":\"Disabling Process Output\"}]}]\n3c:[\"$\",\"p\",null,{\"children\":[\"If your process is writing a significant amount of output that you are not interested in, you can conserve memory by disabling output retrieval entirely. To accomplish this, invoke the \",[\"$\",\"code\",null,{\"children\":\"quietly\"}],\" method while building the process:\"]}]\n3d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\","])</script><script>self.__next_f.push([1,"\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Process;\\n\\n$result = Process::quietly()-\u003erun('bash import.sh');\\n\"}]}]\n3e:[\"$\",\"a\",null,{\"name\":\"process-pipelines\"}]\n3f:[\"$\",\"h3\",null,{\"id\":\"pipelines\",\"children\":[\"$\",\"a\",null,{\"href\":\"#pipelines\",\"children\":\"Pipelines\"}]}]\n40:[\"$\",\"p\",null,{\"children\":[\"Sometimes you may want to make the output of one process the input of another process. This is often referred to as \\\"piping\\\" the output of a process into another. The \",[\"$\",\"code\",null,{\"children\":\"pipe\"}],\" method provided by the \",[\"$\",\"code\",null,{\"children\":\"Process\"}],\" facades makes this easy to accomplish. The \",[\"$\",\"code\",null,{\"children\":\"pipe\"}],\" method will execute the piped processes synchronously and return the process result for the last process in the pipeline:\"]}]\n41:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Process\\\\Pipe;\\nuse Illuminate\\\\Support\\\\Facades\\\\Process;\\n\\n$result = Process::pipe(function (Pipe $pipe) {\\n    $pipe-\u003ecommand('cat example.txt');\\n    $pipe-\u003ecommand('grep -i \\\"laravel\\\"');\\n});\\n\\nif ($result-\u003esuccessful()) {\\n    // ...\\n}\\n\"}]}]\n42:[\"$\",\"p\",null,{\"children\":[\"If you do not need to customize the individual processes that make up the pipeline, you may simply pass an array of command strings to the \",[\"$\",\"code\",null,{\"children\":\"pipe\"}],\" method:\"]}]\n43:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$result = Process::pipe([\\n    'cat example.txt',\\n    'grep -i \\\"laravel\\\"',\\n]);\\n\"}]}]\n44:[\"$\",\"p\",null,{\"children\":[\"The process output may be gathered in real-time by passing a closure as the second argument to the \",[\"$\",\"code\",null,{\"children\":\"pipe\"}],\" method. The closure will receive two arguments: the \\\"type\\\" of output (\",[\"$\",\"code\",null,{\"children\":\"stdout\"}],\" or \",[\"$\",\"code\",null,{\"children\":\"stderr\"}],\") and the output string itself:\"]}]\n45:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$result = Process::pipe(function (Pipe $pipe) {\\n    $pipe-\u003ecommand('cat example.txt');\\n    $pipe-\u003ecommand('grep -i \\\"laravel\\\"');\\n}, function (string $type, string $output) {\\n    echo $output;\\n});\\n\"}]}]\n46:[\"$\",\"p\",null,{\"children\":[\"Laravel also allows you to assign string keys to each process within a pipeline via the \",[\"$\",\"code\",null,{\"children\":\"as\"}],\" method. This key will also be passed to the output closure provided to the \",[\"$\",\"code\",null,{\"children\":\"pipe\"}],\" method, allowing you to determine which process the output belongs to:\"]}]\n47:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$result = Process::pipe(function (Pipe $pipe) {\\n    $pipe-\u003eas('first')-\u003ecommand('cat example.txt');\\n    $pipe-\u003eas('second')-\u003ecommand('grep -i \\\"laravel\\\"');\\n}, function (string $type, string $output, string $key) {\\n    // ...\\n});\\n\"}]}]\n48:[\"$\",\"a\",null,{\"name\":\"asynchronous-processes\"}]\n49:[\"$\",\"h2\",null,{\"id\":\"asynchronous-processes\",\"children\":[\"$\",\"a\",null,{\"href\":\"#asynchronous-processes\",\"children\":\"Asynchronous Processes\"}]}]\n4a:[\"$\",\"p\",null,{\"children\":[\"While the \",[\"$\",\"code\",null,{\"children\":\"run\"}],\" method invokes processes synchronously, the \",[\"$\",\"code\",null,{\"children\":\"start\"}],\" method may be used to invoke a process asynchronously. This allows your application to continue performing other tasks while the process runs in the background. Once the process has been invoked, you may utilize the \",[\"$\",\"code\",null,{\"children\":\"running\"}],\" method to determine if the process is still running:\"]}]\n4b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$process = Process::timeout(120)-\u003estart('bash import.sh');\\n\\nwhile ($process-\u003erunning()) {\\n    // ...\\n}\\n\\n$result = $process-\u003ewait();\\n\"}]}]\n4c:[\"$\",\"p\",null,{\"children\":[\"As you may have noticed, you may invoke the \",[\"$\",\"code\",null,{\"children\":\"wait\"}],\" method to wait until the process is finished executing and retrieve the \",[\"$\",\"code\",null,{\"children\":\"ProcessResult\"}],\" instance:\"]}]\n4d:[\"$\",\"pre\",nu"])</script><script>self.__next_f.push([1,"ll,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$process = Process::timeout(120)-\u003estart('bash import.sh');\\n\\n// ...\\n\\n$result = $process-\u003ewait();\\n\"}]}]\n4e:[\"$\",\"a\",null,{\"name\":\"process-ids-and-signals\"}]\n4f:[\"$\",\"h3\",null,{\"id\":\"process-ids-and-signals\",\"children\":[\"$\",\"a\",null,{\"href\":\"#process-ids-and-signals\",\"children\":\"Process IDs and Signals\"}]}]\n50:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"id\"}],\" method may be used to retrieve the operating system assigned process ID of the running process:\"]}]\n51:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$process = Process::start('bash import.sh');\\n\\nreturn $process-\u003eid();\\n\"}]}]\n52:[\"$\",\"p\",null,{\"children\":[\"You may use the \",[\"$\",\"code\",null,{\"children\":\"signal\"}],\" method to send a \\\"signal\\\" to the running process. A list of predefined signal constants can be found within the \",[\"$\",\"a\",null,{\"href\":\"https://www.php.net/manual/en/pcntl.constants.php\",\"children\":\"PHP documentation\"}],\":\"]}]\n53:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$process-\u003esignal(SIGUSR2);\\n\"}]}]\n54:[\"$\",\"a\",null,{\"name\":\"asynchronous-process-output\"}]\n55:[\"$\",\"h3\",null,{\"id\":\"asynchronous-process-output\",\"children\":[\"$\",\"a\",null,{\"href\":\"#asynchronous-process-output\",\"children\":\"Asynchronous Process Output\"}]}]\n56:[\"$\",\"p\",null,{\"children\":[\"While an asynchronous process is running, you may access its entire current output using the \",[\"$\",\"code\",null,{\"children\":\"output\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"errorOutput\"}],\" methods; however, you may utilize the \",[\"$\",\"code\",null,{\"children\":\"latestOutput\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"latestErrorOutput\"}],\" to access the output from the process that has occurred since the output was last retrieved:\"]}]\n57:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$process = Process::timeout(120)-\u003estart('bash import.sh');\\n\\nwhile ($process-\u003erunning()) {\\n    echo $process-\u003elatestOutput();\\n    echo $process-\u003elatestErrorOutput();\\n\\n    sleep(1);\\n}\\n\"}]}]\n58:[\"$\",\"p\",null,{\"children\":[\"Like the \",[\"$\",\"code\",null,{\"children\":\"run\"}],\" method, output may also be gathered in real-time from asynchronous processes by passing a closure as the second argument to the \",[\"$\",\"code\",null,{\"children\":\"start\"}],\" method. The closure will receive two arguments: the \\\"type\\\" of output (\",[\"$\",\"code\",null,{\"children\":\"stdout\"}],\" or \",[\"$\",\"code\",null,{\"children\":\"stderr\"}],\") and the output string itself:\"]}]\n59:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$process = Process::start('bash import.sh', function (string $type, string $output) {\\n    echo $output;\\n});\\n\\n$result = $process-\u003ewait();\\n\"}]}]\n5a:[\"$\",\"p\",null,{\"children\":[\"Instead of waiting until the process has finished, you may use the \",[\"$\",\"code\",null,{\"children\":\"waitUntil\"}],\" method to stop waiting based on the output of the process. Laravel will stop waiting for the process to finish when the closure given to the \",[\"$\",\"code\",null,{\"children\":\"waitUntil\"}],\" method returns \",[\"$\",\"code\",null,{\"children\":\"true\"}],\":\"]}]\n5b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$process = Process::start('bash import.sh');\\n\\n$process-\u003ewaitUntil(function (string $type, string $output) {\\n    return $output === 'Ready...';\\n});\\n\"}]}]\n5c:[\"$\",\"a\",null,{\"name\":\"asynchronous-process-timeouts\"}]\n5d:[\"$\",\"h3\",null,{\"id\":\"asynchronous-process-timeouts\",\"children\":[\"$\",\"a\",null,{\"href\":\"#asynchronous-process-timeouts\",\"children\":\"Asynchronous Process Timeouts\"}]}]\n5e:[\"$\",\"p\",null,{\"children\":[\"While an asynchronous process is running, you may verify that the process has not timed out using the \",[\"$\",\"code\",null,{\"children\":\"ensureNotTimedOut\"}],\" method. This method will throw a \",[\"$\",\"a\",null,{\"href\":\"#timeouts\",\"children\":\"timeout exception\"}],\" if the process has timed out:\"]}]\n5f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-ph"])</script><script>self.__next_f.push([1,"p\",\"children\":\"$$process = Process::timeout(120)-\u003estart('bash import.sh');\\n\\nwhile ($process-\u003erunning()) {\\n    $process-\u003eensureNotTimedOut();\\n\\n    // ...\\n\\n    sleep(1);\\n}\\n\"}]}]\n60:[\"$\",\"a\",null,{\"name\":\"concurrent-processes\"}]\n61:[\"$\",\"h2\",null,{\"id\":\"concurrent-processes\",\"children\":[\"$\",\"a\",null,{\"href\":\"#concurrent-processes\",\"children\":\"Concurrent Processes\"}]}]\n62:[\"$\",\"p\",null,{\"children\":[\"Laravel also makes it a breeze to manage a pool of concurrent, asynchronous processes, allowing you to easily execute many tasks simultaneously. To get started, invoke the \",[\"$\",\"code\",null,{\"children\":\"pool\"}],\" method, which accepts a closure that receives an instance of \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Process\\\\Pool\"}],\".\"]}]\n63:[\"$\",\"p\",null,{\"children\":[\"Within this closure, you may define the processes that belong to the pool. Once a process pool is started via the \",[\"$\",\"code\",null,{\"children\":\"start\"}],\" method, you may access the \",[\"$\",\"a\",null,{\"href\":\"/docs/12.x/collections\",\"children\":\"collection\"}],\" of running processes via the \",[\"$\",\"code\",null,{\"children\":\"running\"}],\" method:\"]}]\n64:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Process\\\\Pool;\\nuse Illuminate\\\\Support\\\\Facades\\\\Process;\\n\\n$pool = Process::pool(function (Pool $pool) {\\n    $pool-\u003epath(__DIR__)-\u003ecommand('bash import-1.sh');\\n    $pool-\u003epath(__DIR__)-\u003ecommand('bash import-2.sh');\\n    $pool-\u003epath(__DIR__)-\u003ecommand('bash import-3.sh');\\n})-\u003estart(function (string $type, string $output, int $key) {\\n    // ...\\n});\\n\\nwhile ($pool-\u003erunning()-\u003eisNotEmpty()) {\\n    // ...\\n}\\n\\n$results = $pool-\u003ewait();\\n\"}]}]\n65:[\"$\",\"p\",null,{\"children\":[\"As you can see, you may wait for all of the pool processes to finish executing and resolve their results via the \",[\"$\",\"code\",null,{\"children\":\"wait\"}],\" method. The \",[\"$\",\"code\",null,{\"children\":\"wait\"}],\" method returns an array accessible object that allows you to access the \",[\"$\",\"code\",null,{\"children\":\"ProcessResult\"}],\" instance of each process in the pool by its key:\"]}]\n66:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$results = $pool-\u003ewait();\\n\\necho $results[0]-\u003eoutput();\\n\"}]}]\n67:[\"$\",\"p\",null,{\"children\":[\"Or, for convenience, the \",[\"$\",\"code\",null,{\"children\":\"concurrently\"}],\" method may be used to start an asynchronous process pool and immediately wait on its results. This can provide particularly expressive syntax when combined with PHP's array destructuring capabilities:\"]}]\n68:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"[$first, $second, $third] = Process::concurrently(function (Pool $pool) {\\n    $pool-\u003epath(__DIR__)-\u003ecommand('ls -la');\\n    $pool-\u003epath(app_path())-\u003ecommand('ls -la');\\n    $pool-\u003epath(storage_path())-\u003ecommand('ls -la');\\n});\\n\\necho $first-\u003eoutput();\\n\"}]}]\n69:[\"$\",\"a\",null,{\"name\":\"naming-pool-processes\"}]\n6a:[\"$\",\"h3\",null,{\"id\":\"naming-pool-processes\",\"children\":[\"$\",\"a\",null,{\"href\":\"#naming-pool-processes\",\"children\":\"Naming Pool Processes\"}]}]\n6b:[\"$\",\"p\",null,{\"children\":[\"Accessing process pool results via a numeric key is not very expressive; therefore, Laravel allows you to assign string keys to each process within a pool via the \",[\"$\",\"code\",null,{\"children\":\"as\"}],\" method. This key will also be passed to the closure provided to the \",[\"$\",\"code\",null,{\"children\":\"start\"}],\" method, allowing you to determine which process the output belongs to:\"]}]\n6c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$pool = Process::pool(function (Pool $pool) {\\n    $pool-\u003eas('first')-\u003ecommand('bash import-1.sh');\\n    $pool-\u003eas('second')-\u003ecommand('bash import-2.sh');\\n    $pool-\u003eas('third')-\u003ecommand('bash import-3.sh');\\n})-\u003estart(function (string $type, string $output, string $key) {\\n    // ...\\n});\\n\\n$results = $pool-\u003ewait();\\n\\nreturn $results['first']-\u003eoutput();\\n\"}]}]\n6d:[\"$\",\"a\",null,{\"name\":\"pool-process-ids-and-signals\"}]\n6e:[\"$\",\"h3\",null,{\"id\":\"pool-process-ids-and-signals\""])</script><script>self.__next_f.push([1,",\"children\":[\"$\",\"a\",null,{\"href\":\"#pool-process-ids-and-signals\",\"children\":\"Pool Process IDs and Signals\"}]}]\n6f:[\"$\",\"p\",null,{\"children\":[\"Since the process pool's \",[\"$\",\"code\",null,{\"children\":\"running\"}],\" method provides a collection of all invoked processes within the pool, you may easily access the underlying pool process IDs:\"]}]\n70:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$processIds = $pool-\u003erunning()-\u003eeach-\u003eid();\\n\"}]}]\n71:[\"$\",\"p\",null,{\"children\":[\"And, for convenience, you may invoke the \",[\"$\",\"code\",null,{\"children\":\"signal\"}],\" method on a process pool to send a signal to every process within the pool:\"]}]\n72:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$pool-\u003esignal(SIGUSR2);\\n\"}]}]\n73:[\"$\",\"a\",null,{\"name\":\"testing\"}]\n74:[\"$\",\"h2\",null,{\"id\":\"testing\",\"children\":[\"$\",\"a\",null,{\"href\":\"#testing\",\"children\":\"Testing\"}]}]\n75:[\"$\",\"p\",null,{\"children\":[\"Many Laravel services provide functionality to help you easily and expressively write tests, and Laravel's process service is no exception. The \",[\"$\",\"code\",null,{\"children\":\"Process\"}],\" facade's \",[\"$\",\"code\",null,{\"children\":\"fake\"}],\" method allows you to instruct Laravel to return stubbed / dummy results when processes are invoked.\"]}]\n76:[\"$\",\"a\",null,{\"name\":\"faking-processes\"}]\n77:[\"$\",\"h3\",null,{\"id\":\"faking-processes\",\"children\":[\"$\",\"a\",null,{\"href\":\"#faking-processes\",\"children\":\"Faking Processes\"}]}]\n78:[\"$\",\"p\",null,{\"children\":\"To explore Laravel's ability to fake processes, let's imagine a route that invokes a process:\"}]\n79:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Process;\\nuse Illuminate\\\\Support\\\\Facades\\\\Route;\\n\\nRoute::get('/import', function () {\\n    Process::run('bash import.sh');\\n\\n    return 'Import complete!';\\n});\\n\"}]}]\n7a:[\"$\",\"p\",null,{\"children\":[\"When testing this route, we can instruct Laravel to return a fake, successful process result for every invoked process by calling the \",[\"$\",\"code\",null,{\"children\":\"fake\"}],\" method on the \",[\"$\",\"code\",null,{\"children\":\"Process\"}],\" facade with no arguments. In addition, we can even \",[\"$\",\"a\",null,{\"href\":\"#available-assertions\",\"children\":\"assert\"}],\" that a given process was \\\"run\\\":\"]}]\n7b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nuse Illuminate\\\\Contracts\\\\Process\\\\ProcessResult;\\nuse Illuminate\\\\Process\\\\PendingProcess;\\nuse Illuminate\\\\Support\\\\Facades\\\\Process;\\n\\ntest('process is invoked', function () {\\n    Process::fake();\\n\\n    $response = $this-\u003eget('/import');\\n\\n    // Simple process assertion...\\n    Process::assertRan('bash import.sh');\\n\\n    // Or, inspecting the process configuration...\\n    Process::assertRan(function (PendingProcess $process, ProcessResult $result) {\\n        return $process-\u003ecommand === 'bash import.sh' \u0026\u0026\\n               $process-\u003etimeout === 60;\\n    });\\n});\\n\"}]}]\n7c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace Tests\\\\Feature;\\n\\nuse Illuminate\\\\Contracts\\\\Process\\\\ProcessResult;\\nuse Illuminate\\\\Process\\\\PendingProcess;\\nuse Illuminate\\\\Support\\\\Facades\\\\Process;\\nuse Tests\\\\TestCase;\\n\\nclass ExampleTest extends TestCase\\n{\\n    public function test_process_is_invoked(): void\\n    {\\n        Process::fake();\\n\\n        $response = $this-\u003eget('/import');\\n\\n        // Simple process assertion...\\n        Process::assertRan('bash import.sh');\\n\\n        // Or, inspecting the process configuration...\\n        Process::assertRan(function (PendingProcess $process, ProcessResult $result) {\\n            return $process-\u003ecommand === 'bash import.sh' \u0026\u0026\\n                   $process-\u003etimeout === 60;\\n        });\\n    }\\n}\\n\"}]}]\n7d:[\"$\",\"p\",null,{\"children\":[\"As discussed, invoking the \",[\"$\",\"code\",null,{\"children\":\"fake\"}],\" method on the \",[\"$\",\"code\",null,{\"children\":\"Process\"}],\" facade will instruct Laravel to always return a successful process result with no out"])</script><script>self.__next_f.push([1,"put. However, you may easily specify the output and exit code for faked processes using the \",[\"$\",\"code\",null,{\"children\":\"Process\"}],\" facade's \",[\"$\",\"code\",null,{\"children\":\"result\"}],\" method:\"]}]\n7e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Process::fake([\\n    '*' =\u003e Process::result(\\n        output: 'Test output',\\n        errorOutput: 'Test error output',\\n        exitCode: 1,\\n    ),\\n]);\\n\"}]}]\n7f:[\"$\",\"a\",null,{\"name\":\"faking-specific-processes\"}]\n80:[\"$\",\"h3\",null,{\"id\":\"faking-specific-processes\",\"children\":[\"$\",\"a\",null,{\"href\":\"#faking-specific-processes\",\"children\":\"Faking Specific Processes\"}]}]\n81:[\"$\",\"p\",null,{\"children\":[\"As you may have noticed in a previous example, the \",[\"$\",\"code\",null,{\"children\":\"Process\"}],\" facade allows you to specify different fake results per process by passing an array to the \",[\"$\",\"code\",null,{\"children\":\"fake\"}],\" method.\"]}]\n82:[\"$\",\"p\",null,{\"children\":[\"The array's keys should represent command patterns that you wish to fake and their associated results. The \",[\"$\",\"code\",null,{\"children\":\"*\"}],\" character may be used as a wildcard character. Any process commands that have not been faked will actually be invoked. You may use the \",[\"$\",\"code\",null,{\"children\":\"Process\"}],\" facade's \",[\"$\",\"code\",null,{\"children\":\"result\"}],\" method to construct stub / fake results for these commands:\"]}]\n83:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Process::fake([\\n    'cat *' =\u003e Process::result(\\n        output: 'Test \\\"cat\\\" output',\\n    ),\\n    'ls *' =\u003e Process::result(\\n        output: 'Test \\\"ls\\\" output',\\n    ),\\n]);\\n\"}]}]\n84:[\"$\",\"p\",null,{\"children\":\"If you do not need to customize the exit code or error output of a faked process, you may find it more convenient to specify the fake process results as simple strings:\"}]\n85:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Process::fake([\\n    'cat *' =\u003e 'Test \\\"cat\\\" output',\\n    'ls *' =\u003e 'Test \\\"ls\\\" output',\\n]);\\n\"}]}]\n86:[\"$\",\"a\",null,{\"name\":\"faking-process-sequences\"}]\n87:[\"$\",\"h3\",null,{\"id\":\"faking-process-sequences\",\"children\":[\"$\",\"a\",null,{\"href\":\"#faking-process-sequences\",\"children\":\"Faking Process Sequences\"}]}]\n88:[\"$\",\"p\",null,{\"children\":[\"If the code you are testing invokes multiple processes with the same command, you may wish to assign a different fake process result to each process invocation. You may accomplish this via the \",[\"$\",\"code\",null,{\"children\":\"Process\"}],\" facade's \",[\"$\",\"code\",null,{\"children\":\"sequence\"}],\" method:\"]}]\n89:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Process::fake([\\n    'ls *' =\u003e Process::sequence()\\n        -\u003epush(Process::result('First invocation'))\\n        -\u003epush(Process::result('Second invocation')),\\n]);\\n\"}]}]\n8a:[\"$\",\"a\",null,{\"name\":\"faking-asynchronous-process-lifecycles\"}]\n8b:[\"$\",\"h3\",null,{\"id\":\"faking-asynchronous-process-lifecycles\",\"children\":[\"$\",\"a\",null,{\"href\":\"#faking-asynchronous-process-lifecycles\",\"children\":\"Faking Asynchronous Process Lifecycles\"}]}]\n8c:[\"$\",\"p\",null,{\"children\":[\"Thus far, we have primarily discussed faking processes which are invoked synchronously using the \",[\"$\",\"code\",null,{\"children\":\"run\"}],\" method. However, if you are attempting to test code that interacts with asynchronous processes invoked via \",[\"$\",\"code\",null,{\"children\":\"start\"}],\", you may need a more sophisticated approach to describing your fake processes.\"]}]\n8d:[\"$\",\"p\",null,{\"children\":\"For example, let's imagine the following route which interacts with an asynchronous process:\"}]\n8e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Log;\\nuse Illuminate\\\\Support\\\\Facades\\\\Route;\\n\\nRoute::get('/import', function () {\\n    $process = Process::start('bash import.sh');\\n\\n    while ($process-\u003erunning()) {\\n        Log::info($process-\u003elatestOutput());\\n        Log::info($process-\u003elatestErrorOutput());\\n    }\\n\\n    return 'Done';\\"])</script><script>self.__next_f.push([1,"n});\\n\"}]}]\n8f:[\"$\",\"p\",null,{\"children\":[\"To properly fake this process, we need to be able to describe how many times the \",[\"$\",\"code\",null,{\"children\":\"running\"}],\" method should return \",[\"$\",\"code\",null,{\"children\":\"true\"}],\". In addition, we may want to specify multiple lines of output that should be returned in sequence. To accomplish this, we can use the \",[\"$\",\"code\",null,{\"children\":\"Process\"}],\" facade's \",[\"$\",\"code\",null,{\"children\":\"describe\"}],\" method:\"]}]\n90:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Process::fake([\\n    'bash import.sh' =\u003e Process::describe()\\n        -\u003eoutput('First line of standard output')\\n        -\u003eerrorOutput('First line of error output')\\n        -\u003eoutput('Second line of standard output')\\n        -\u003eexitCode(0)\\n        -\u003eiterations(3),\\n]);\\n\"}]}]\n91:[\"$\",\"p\",null,{\"children\":[\"Let's dig into the example above. Using the \",[\"$\",\"code\",null,{\"children\":\"output\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"errorOutput\"}],\" methods, we may specify multiple lines of output that will be returned in sequence. The \",[\"$\",\"code\",null,{\"children\":\"exitCode\"}],\" method may be used to specify the final exit code of the fake process. Finally, the \",[\"$\",\"code\",null,{\"children\":\"iterations\"}],\" method may be used to specify how many times the \",[\"$\",\"code\",null,{\"children\":\"running\"}],\" method should return \",[\"$\",\"code\",null,{\"children\":\"true\"}],\".\"]}]\n92:[\"$\",\"a\",null,{\"name\":\"available-assertions\"}]\n93:[\"$\",\"h3\",null,{\"id\":\"available-assertions\",\"children\":[\"$\",\"a\",null,{\"href\":\"#available-assertions\",\"children\":\"Available Assertions\"}]}]\n94:[\"$\",\"p\",null,{\"children\":[\"As \",[\"$\",\"a\",null,{\"href\":\"#faking-processes\",\"children\":\"previously discussed\"}],\", Laravel provides several process assertions for your feature tests. We'll discuss each of these assertions below.\"]}]\n95:[\"$\",\"a\",null,{\"name\":\"assert-process-ran\"}]\n96:[\"$\",\"h4\",null,{\"id\":\"assertran\",\"children\":[\"$\",\"a\",null,{\"href\":\"#assertran\",\"children\":\"assertRan\"}]}]\n97:[\"$\",\"p\",null,{\"children\":\"Assert that a given process was invoked:\"}]\n98:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Process;\\n\\nProcess::assertRan('ls -la');\\n\"}]}]\n99:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"assertRan\"}],\" method also accepts a closure, which will receive an instance of a process and a process result, allowing you to inspect the process' configured options. If this closure returns \",[\"$\",\"code\",null,{\"children\":\"true\"}],\", the assertion will \\\"pass\\\":\"]}]\n9a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Process::assertRan(fn ($process, $result) =\u003e\\n    $process-\u003ecommand === 'ls -la' \u0026\u0026\\n    $process-\u003epath === __DIR__ \u0026\u0026\\n    $process-\u003etimeout === 60\\n);\\n\"}]}]\n9b:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"$$process\"}],\" passed to the \",[\"$\",\"code\",null,{\"children\":\"assertRan\"}],\" closure is an instance of \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Process\\\\PendingProcess\"}],\", while the \",[\"$\",\"code\",null,{\"children\":\"$$result\"}],\" is an instance of \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Contracts\\\\Process\\\\ProcessResult\"}],\".\"]}]\n9c:[\"$\",\"a\",null,{\"name\":\"assert-process-didnt-run\"}]\n9d:[\"$\",\"h4\",null,{\"id\":\"assertdidntrun\",\"children\":[\"$\",\"a\",null,{\"href\":\"#assertdidntrun\",\"children\":\"assertDidntRun\"}]}]\n9e:[\"$\",\"p\",null,{\"children\":\"Assert that a given process was not invoked:\"}]\n9f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Process;\\n\\nProcess::assertDidntRun('ls -la');\\n\"}]}]\na0:[\"$\",\"p\",null,{\"children\":[\"Like the \",[\"$\",\"code\",null,{\"children\":\"assertRan\"}],\" method, the \",[\"$\",\"code\",null,{\"children\":\"assertDidntRun\"}],\" method also accepts a closure, which will receive an instance of a process and a process result, allowing you to inspect the process' configured options. If this closure returns \",[\"$\",\"code\",null,{\"children\":\"true\"}],\", the assertion will \\\"fail\\\":\"]"])</script><script>self.__next_f.push([1,"}]\na1:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Process::assertDidntRun(fn (PendingProcess $process, ProcessResult $result) =\u003e\\n    $process-\u003ecommand === 'ls -la'\\n);\\n\"}]}]\na2:[\"$\",\"a\",null,{\"name\":\"assert-process-ran-times\"}]\na3:[\"$\",\"h4\",null,{\"id\":\"assertrantimes\",\"children\":[\"$\",\"a\",null,{\"href\":\"#assertrantimes\",\"children\":\"assertRanTimes\"}]}]\na4:[\"$\",\"p\",null,{\"children\":\"Assert that a given process was invoked a given number of times:\"}]\na5:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Process;\\n\\nProcess::assertRanTimes('ls -la', times: 3);\\n\"}]}]\na6:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"assertRanTimes\"}],\" method also accepts a closure, which will receive an instance of \",[\"$\",\"code\",null,{\"children\":\"PendingProcess\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"ProcessResult\"}],\", allowing you to inspect the process' configured options. If this closure returns \",[\"$\",\"code\",null,{\"children\":\"true\"}],\" and the process was invoked the specified number of times, the assertion will \\\"pass\\\":\"]}]\na7:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Process::assertRanTimes(function (PendingProcess $process, ProcessResult $result) {\\n    return $process-\u003ecommand === 'ls -la';\\n}, times: 3);\\n\"}]}]\na8:[\"$\",\"a\",null,{\"name\":\"preventing-stray-processes\"}]\na9:[\"$\",\"h3\",null,{\"id\":\"preventing-stray-processes\",\"children\":[\"$\",\"a\",null,{\"href\":\"#preventing-stray-processes\",\"children\":\"Preventing Stray Processes\"}]}]\naa:[\"$\",\"p\",null,{\"children\":[\"If you would like to ensure that all invoked processes have been faked throughout your individual test or complete test suite, you can call the \",[\"$\",\"code\",null,{\"children\":\"preventStrayProcesses\"}],\" method. After calling this method, any processes that do not have a corresponding fake result will throw an exception rather than starting an actual process:\"]}]\nab:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Process;\\n\\nProcess::preventStrayProcesses();\\n\\nProcess::fake([\\n    'ls *' =\u003e 'Test output...',\\n]);\\n\\n// Fake response is returned...\\nProcess::run('ls -la');\\n\\n// An exception is thrown...\\nProcess::run('bash import.sh');\\n\"}]}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"ac:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$Lac\",\"3\",{}]]\n8:null\n"])</script></body></html>