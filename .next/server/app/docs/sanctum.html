<!DOCTYPE html><!--gbL4GoSDzWGRgd1sk9dHs--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/c5ae50772a9dac16.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/a63c9e88afa04ceb.js"/><script src="/_next/static/chunks/256659360a5e7c6b.js" async=""></script><script src="/_next/static/chunks/8368f298651cbd89.js" async=""></script><script src="/_next/static/chunks/6740f161f60c6ab5.js" async=""></script><script src="/_next/static/chunks/turbopack-0d70034ddb9a55f9.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/247eb132b7f7b574.js" async=""></script><script src="/_next/static/chunks/796e69ae18b2784c.js" async=""></script><script src="/_next/static/chunks/0a3d48cc7de64d8a.js" async=""></script><script src="/_next/static/chunks/b9cc757437f01a9b.js" async=""></script><script src="/_next/static/chunks/88f06ded2e8cebb1.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased"><div hidden=""><!--$--><!--/$--></div><div class="flex min-h-screen bg-background flex-col md:flex-row"><div class="md:hidden p-4 border-b flex items-center sticky top-0 bg-background z-10"><button data-slot="sheet-trigger" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-9 md:hidden" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-_R_5ivb_" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-6 w-6" aria-hidden="true"><path d="M4 5h16"></path><path d="M4 12h16"></path><path d="M4 19h16"></path></svg><span class="sr-only">Toggle menu</span></button><span class="ml-2 font-bold text-lg"><span class="text-red-600">Laravel</span> Docs</span></div><div class="w-64 border-r bg-background h-screen sticky top-0 hidden md:block"><div class="p-6 font-bold text-xl border-b flex items-center gap-2"><span class="text-red-600">Laravel</span> Docs（中文）</div><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-65px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="p-4 space-y-2"><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>前言</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">發行說明</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>入門</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/installation"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">安裝</button></a><a class="block" href="/docs/configuration"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">配置</button></a><a class="block" href="/docs/structure"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">目錄結構</button></a><a class="block" href="/docs/lifecycle"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">生命週期</button></a><a class="block" href="/docs/frontend"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">前端</button></a><a class="block" href="/docs/starter-kits"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">啟動套件</button></a><a class="block" href="/docs/deployment"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">部署</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>架構</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>基礎功能</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>深入探討</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>安全性</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>資料庫</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>Eloquent ORM</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>測試</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>其他</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>官方套件</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div class="border-t pt-4 space-y-2"><a class="block" href="/docs/api"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">API 文件</button></a><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">更新日誌</button></a></div></div></div></div></div></div><main class="flex-1 relative"><div class="container mx-auto py-10"><div class="flex gap-8 justify-center"><div class="flex-1 max-w-3xl"><div class="mb-8"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Sanctum (Laravel Sanctum)</h1><p class="text-xl text-muted-foreground mt-2">Sanctum 為 SPAs 和行動應用程式提供簡單的驗證系統</p></div><article class="prose prose-slate dark:prose-invert max-w-none"><ul>
<li><a href="#introduction">簡介</a>
<ul>
<li><a href="#how-it-works">運作原理</a></li>
</ul>
</li>
<li><a href="#installation">安裝</a></li>
<li><a href="#configuration">設定</a>
<ul>
<li><a href="#overriding-default-models">覆寫預設 Model</a></li>
</ul>
</li>
<li><a href="#api-token-authentication">API Token 驗證</a>
<ul>
<li><a href="#issuing-api-tokens">發行 API Token</a></li>
<li><a href="#token-abilities">Token 能力</a></li>
<li><a href="#protecting-routes">保護路由</a></li>
<li><a href="#revoking-tokens">撤銷 Token</a></li>
<li><a href="#token-expiration">Token 過期</a></li>
</ul>
</li>
<li><a href="#spa-authentication">SPA 驗證</a>
<ul>
<li><a href="#spa-configuration">設定</a></li>
<li><a href="#spa-authenticating">驗證</a></li>
<li><a href="#protecting-spa-routes">保護路由</a></li>
<li><a href="#authorizing-private-broadcast-channels">授權私有廣播頻道</a></li>
</ul>
</li>
<li><a href="#mobile-application-authentication">行動應用程式驗證</a>
<ul>
<li><a href="#issuing-mobile-api-tokens">發行 API Token</a></li>
<li><a href="#protecting-mobile-api-routes">保護路由</a></li>
<li><a href="#revoking-mobile-api-tokens">撤銷 Token</a></li>
</ul>
</li>
<li><a href="#testing">測試</a></li>
</ul>
<a name="introduction"></a>
<h2 id="簡介-introduction"><a href="#簡介-introduction">簡介 (Introduction)</a></h2>
<p><a href="https://github.com/laravel/sanctum">Laravel Sanctum</a> 為 SPA (單頁應用程式)、行動應用程式和簡單的 Token 基礎 API 提供了一個輕量級的驗證系統。Sanctum 允許應用程式的每個使用者為其帳戶產生多個 API Token。這些 Token 可以被授予能力 / 範圍 (abilities / scopes)，以指定 Token 被允許執行的動作。</p>
<a name="how-it-works"></a>
<h3 id="運作原理-how-it-works"><a href="#運作原理-how-it-works">運作原理 (How it Works)</a></h3>
<p>Laravel Sanctum 的存在是為了解決兩個分開的問題。在深入探討這個函式庫之前，讓我們先討論每一個問題。</p>
<a name="how-it-works-api-tokens"></a>
<h4 id="api-tokens"><a href="#api-tokens">API Tokens</a></h4>
<p>首先，Sanctum 是一個簡單的套件，你可以用它來發行 API Token 給你的使用者，而不需要 OAuth 的複雜性。這個功能的靈感來自 GitHub 和其他發行「個人存取 Token (Personal Access Tokens)」的應用程式。例如，想像你的應用程式的「帳戶設定」有一個畫面，使用者可以在那裡為他們的帳戶產生一個 API Token。你可以使用 Sanctum 來產生和管理這些 Token。這些 Token 通常有很長的過期時間 (數年)，但使用者可以隨時手動撤銷。</p>
<p>Laravel Sanctum 透過將使用者 API Token 儲存在單一資料庫資料表中，並透過應包含有效 API Token 的 <code>Authorization</code> 標頭來驗證傳入的 HTTP 請求，從而提供此功能。</p>
<a name="how-it-works-spa-authentication"></a>
<h4 id="spa-驗證-spa-authentication"><a href="#spa-驗證-spa-authentication">SPA 驗證 (SPA Authentication)</a></h4>
<p>其次，Sanctum 的存在是為了提供一種簡單的方法來驗證需要與 Laravel 驅動的 API 進行通訊的單頁應用程式 (SPA)。這些 SPA 可能存在於與你的 Laravel 應用程式相同的儲存庫中，或者可能是一個完全獨立的儲存庫，例如使用 Next.js 或 Nuxt 建立的 SPA。</p>
<p>對於此功能，Sanctum 不使用任何種類的 Token。相反地，Sanctum 使用 Laravel 內建的 Cookie 基礎 Session 驗證服務。通常，Sanctum 利用 Laravel 的 <code>web</code> 驗證 Guard 來完成此任務。這提供了 CSRF 保護、Session 驗證的好處，並防止驗證憑證透過 XSS 洩漏。</p>
<p>當傳入的請求源自你自己的 SPA 前端時，Sanctum 只會嘗試使用 Cookie 進行驗證。當 Sanctum 檢查傳入的 HTTP 請求時，它會先檢查是否有驗證 Cookie，如果沒有，Sanctum 接著會檢查 <code>Authorization</code> 標頭是否有有效的 API Token。</p>
<blockquote>
<p>[!NOTE]
僅將 Sanctum 用於 API Token 驗證或僅用於 SPA 驗證是完全沒問題的。僅僅因為你使用了 Sanctum，並不意味著你必須使用它提供的這兩個功能。</p>
</blockquote>
<a name="installation"></a>
<h2 id="安裝-installation"><a href="#安裝-installation">安裝 (Installation)</a></h2>
<p>你可以透過 <code>install:api</code> Artisan 指令安裝 Laravel Sanctum：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#B392F0;--shiki-light:#6F42C1">php</span><span style="color:#9ECBFF;--shiki-light:#032F62"> artisan</span><span style="color:#9ECBFF;--shiki-light:#032F62"> install:api</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>接下來，如果你打算利用 Sanctum 來驗證 SPA，請參考本文件的 <a href="#spa-authentication">SPA 驗證</a> 章節。</p>
<a name="configuration"></a>
<h2 id="設定-configuration"><a href="#設定-configuration">設定 (Configuration)</a></h2>
<a name="overriding-default-models"></a>
<h3 id="覆寫預設-model-overriding-default-models"><a href="#覆寫預設-model-overriding-default-models">覆寫預設 Model (Overriding Default Models)</a></h3>
<p>雖然通常不需要，但你可以自由擴充 Sanctum 內部使用的 <code>PersonalAccessToken</code> Model：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> Laravel\Sanctum\PersonalAccessToken</span><span style="color:#F97583;--shiki-light:#D73A49"> as</span><span style="color:#B392F0;--shiki-light:#6F42C1"> SanctumPersonalAccessToken</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">class</span><span style="color:#B392F0;--shiki-light:#6F42C1"> PersonalAccessToken</span><span style="color:#F97583;--shiki-light:#D73A49"> extends</span><span style="color:#B392F0;--shiki-light:#6F42C1"> SanctumPersonalAccessToken</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">{</span></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D">    // ...</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">}</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>然後，你可以透過 Sanctum 提供的 <code>usePersonalAccessTokenModel</code> 方法指示 Sanctum 使用你的自訂 Model。通常，你應該在應用程式的 <code>AppServiceProvider</code> 檔案的 <code>boot</code> 方法中呼叫此方法：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> App\Models\Sanctum\PersonalAccessToken</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> Laravel\Sanctum\Sanctum</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D">/**</span></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D"> * Bootstrap any application services.</span></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D"> */</span></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">public</span><span style="color:#F97583;--shiki-light:#D73A49"> function</span><span style="color:#B392F0;--shiki-light:#6F42C1"> boot</span><span style="color:#E1E4E8;--shiki-light:#24292E">()</span><span style="color:#F97583;--shiki-light:#D73A49">:</span><span style="color:#F97583;--shiki-light:#D73A49"> void</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">{</span></span>
<span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">    Sanctum</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">usePersonalAccessTokenModel</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#79B8FF;--shiki-light:#005CC5">PersonalAccessToken</span><span style="color:#F97583;--shiki-light:#D73A49">::class</span><span style="color:#E1E4E8;--shiki-light:#24292E">);</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">}</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="api-token-authentication"></a>
<h2 id="api-token-驗證-api-token-authentication"><a href="#api-token-驗證-api-token-authentication">API Token 驗證 (API Token Authentication)</a></h2>
<blockquote>
<p>[!NOTE]
你不應該使用 API Token 來驗證你自己的第一方 SPA。相反地，請使用 Sanctum 內建的 <a href="#spa-authentication">SPA 驗證功能</a>。</p>
</blockquote>
<a name="issuing-api-tokens"></a>
<h3 id="發行-api-token-issuing-api-tokens"><a href="#發行-api-token-issuing-api-tokens">發行 API Token (Issuing API Tokens)</a></h3>
<p>Sanctum 允許你發行 API Token / 個人存取 Token，這些 Token 可用於驗證對你應用程式的 API 請求。使用 API Token 發出請求時，應將 Token 包含在 <code>Authorization</code> 標頭中作為 <code>Bearer</code> Token。</p>
<p>要開始為使用者發行 Token，你的 User Model 應該使用 <code>Laravel\Sanctum\HasApiTokens</code> Trait：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> Laravel\Sanctum\HasApiTokens</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">class</span><span style="color:#B392F0;--shiki-light:#6F42C1"> User</span><span style="color:#F97583;--shiki-light:#D73A49"> extends</span><span style="color:#B392F0;--shiki-light:#6F42C1"> Authenticatable</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">{</span></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">    use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> HasApiTokens</span><span style="color:#E1E4E8;--shiki-light:#24292E">, </span><span style="color:#79B8FF;--shiki-light:#005CC5">HasFactory</span><span style="color:#E1E4E8;--shiki-light:#24292E">, </span><span style="color:#79B8FF;--shiki-light:#005CC5">Notifiable</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">}</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>要發行 Token，你可以使用 <code>createToken</code> 方法。<code>createToken</code> 方法回傳一個 <code>Laravel\Sanctum\NewAccessToken</code> 實例。API Token 在儲存到資料庫之前會使用 SHA-256 雜湊進行雜湊處理，但你可以使用 <code>NewAccessToken</code> 實例的 <code>plainTextToken</code> 屬性存取 Token 的純文字值。你應該在 Token 建立後立即向使用者顯示此值：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> Illuminate\Http\Request</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">Route</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">post</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;/tokens/create&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">, </span><span style="color:#F97583;--shiki-light:#D73A49">function</span><span style="color:#E1E4E8;--shiki-light:#24292E"> (</span><span style="color:#79B8FF;--shiki-light:#005CC5">Request</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $request) {</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    $token </span><span style="color:#F97583;--shiki-light:#D73A49">=</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $request</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">user</span><span style="color:#E1E4E8;--shiki-light:#24292E">()</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">createToken</span><span style="color:#E1E4E8;--shiki-light:#24292E">($request</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E">token_name);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">    return</span><span style="color:#E1E4E8;--shiki-light:#24292E"> [</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;token&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $token</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E">plainTextToken];</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">});</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>你可以使用 <code>HasApiTokens</code> Trait 提供的 <code>tokens</code> Eloquent 關聯存取使用者的所有 Token：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">foreach</span><span style="color:#E1E4E8;--shiki-light:#24292E"> ($user</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E">tokens </span><span style="color:#F97583;--shiki-light:#D73A49">as</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $token) {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D">    // ...</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">}</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="token-abilities"></a>
<h3 id="token-能力-token-abilities"><a href="#token-能力-token-abilities">Token 能力 (Token Abilities)</a></h3>
<p>Sanctum 允許你指派「能力 (abilities)」給 Token。能力的作用類似於 OAuth 的「範圍 (scopes)」。你可以將字串能力陣列作為第二個參數傳遞給 <code>createToken</code> 方法：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">return</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $user</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">createToken</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;token-name&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">, [</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;server:update&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">])</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E">plainTextToken;</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>當處理經由 Sanctum 驗證的傳入請求時，你可以使用 <code>tokenCan</code> 或 <code>tokenCant</code> 方法判斷 Token 是否具有給定的能力：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">if</span><span style="color:#E1E4E8;--shiki-light:#24292E"> ($user</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">tokenCan</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;server:update&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">)) {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D">    // ...</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">if</span><span style="color:#E1E4E8;--shiki-light:#24292E"> ($user</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">tokenCant</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;server:update&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">)) {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D">    // ...</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">}</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="token-ability-middleware"></a>
<h4 id="token-能力-middleware-token-ability-middleware"><a href="#token-能力-middleware-token-ability-middleware">Token 能力 Middleware (Token Ability Middleware)</a></h4>
<p>Sanctum 還包含兩個 Middleware，可用於驗證傳入的請求是否使用已授予給定能力的 Token 進行驗證。首先，在應用程式的 <code>bootstrap/app.php</code> 檔案中定義以下 Middleware 別名：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> Laravel\Sanctum\Http\Middleware\CheckAbilities</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> Laravel\Sanctum\Http\Middleware\CheckForAnyAbility</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">withMiddleware</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#F97583;--shiki-light:#D73A49">function</span><span style="color:#E1E4E8;--shiki-light:#24292E"> (</span><span style="color:#79B8FF;--shiki-light:#005CC5">Middleware</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $middleware)</span><span style="color:#F97583;--shiki-light:#D73A49">:</span><span style="color:#F97583;--shiki-light:#D73A49"> void</span><span style="color:#E1E4E8;--shiki-light:#24292E"> {</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    $middleware</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">alias</span><span style="color:#E1E4E8;--shiki-light:#24292E">([</span></span>
<span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">        &#x27;abilities&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#79B8FF;--shiki-light:#005CC5"> CheckAbilities</span><span style="color:#F97583;--shiki-light:#D73A49">::class</span><span style="color:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">        &#x27;ability&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#79B8FF;--shiki-light:#005CC5"> CheckForAnyAbility</span><span style="color:#F97583;--shiki-light:#D73A49">::class</span><span style="color:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    ]);</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">})</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p><code>abilities</code> Middleware 可以指派給路由，以驗證傳入請求的 Token 是否具有所有列出的能力：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">Route</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">get</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;/orders&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">, </span><span style="color:#F97583;--shiki-light:#D73A49">function</span><span style="color:#E1E4E8;--shiki-light:#24292E"> () {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D">    // Token has both &quot;check-status&quot; and &quot;place-orders&quot; abilities...</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">})</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">middleware</span><span style="color:#E1E4E8;--shiki-light:#24292E">([</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;auth:sanctum&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">, </span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;abilities:check-status,place-orders&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">]);</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p><code>ability</code> Middleware 可以指派給路由，以驗證傳入請求的 Token 是否具有列出的能力中的 <em>至少一個</em>：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">Route</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">get</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;/orders&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">, </span><span style="color:#F97583;--shiki-light:#D73A49">function</span><span style="color:#E1E4E8;--shiki-light:#24292E"> () {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D">    // Token has the &quot;check-status&quot; or &quot;place-orders&quot; ability...</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">})</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">middleware</span><span style="color:#E1E4E8;--shiki-light:#24292E">([</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;auth:sanctum&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">, </span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;ability:check-status,place-orders&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">]);</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="first-party-ui-initiated-requests"></a>
<h4 id="第一方-ui-發起的請求-first-party-ui-initiated-requests"><a href="#第一方-ui-發起的請求-first-party-ui-initiated-requests">第一方 UI 發起的請求 (First-Party UI Initiated Requests)</a></h4>
<p>為了方便起見，如果傳入的驗證請求來自你的第一方 SPA，並且你正在使用 Sanctum 內建的 <a href="#spa-authentication">SPA 驗證</a>，<code>tokenCan</code> 方法將始終回傳 <code>true</code>。</p>
<p>然而，這並不一定意味著你的應用程式必須允許使用者執行該動作。通常，你的應用程式的 <a href="/docs/authorization#creating-policies">Authorization Policies</a> 將決定 Token 是否已被授予執行能力的權限，並檢查使用者實例本身是否應被允許執行該動作。</p>
<p>例如，如果我們想像一個管理伺服器的應用程式，這可能意味著檢查 Token 是否被授權更新伺服器 <strong>並且</strong> 伺服器屬於該使用者：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">return</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $request</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">user</span><span style="color:#E1E4E8;--shiki-light:#24292E">()</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E">id </span><span style="color:#F97583;--shiki-light:#D73A49">===</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $server</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E">user_id </span><span style="color:#F97583;--shiki-light:#D73A49">&amp;&amp;</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">       $request</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">user</span><span style="color:#E1E4E8;--shiki-light:#24292E">()</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">tokenCan</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;server:update&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">)</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>起初，允許呼叫 <code>tokenCan</code> 方法並對第一方 UI 發起的請求始終回傳 <code>true</code> 似乎很奇怪；然而，能夠始終假設 API Token 可用並可透過 <code>tokenCan</code> 方法進行檢查是很方便的。透過採取這種方法，你可以在應用程式的 Authorization Policies 中始終呼叫 <code>tokenCan</code> 方法，而不必擔心請求是從應用程式的 UI 觸發的，還是由你的 API 的第三方消費者發起的。</p>
<a name="protecting-routes"></a>
<h3 id="保護路由-protecting-routes"><a href="#保護路由-protecting-routes">保護路由 (Protecting Routes)</a></h3>
<p>為了保護路由，使所有傳入的請求都必須經過驗證，你應該將 <code>sanctum</code> 驗證 Guard 附加到 <code>routes/web.php</code> 和 <code>routes/api.php</code> 路由檔案中的受保護路由。此 Guard 將確保傳入的請求被驗證為有狀態的、Cookie 驗證的請求，或者如果請求來自第三方，則包含有效的 API Token 標頭。</p>
<p>你可能想知道為什麼我們建議你使用 <code>sanctum</code> Guard 來驗證應用程式 <code>routes/web.php</code> 檔案中的路由。請記住，Sanctum 會先嘗試使用 Laravel 典型的 Session 驗證 Cookie 來驗證傳入的請求。如果該 Cookie 不存在，Sanctum 將嘗試使用請求的 <code>Authorization</code> 標頭中的 Token 來驗證請求。此外，使用 Sanctum 驗證所有請求可確保我們始終可以在當前驗證的使用者實例上呼叫 <code>tokenCan</code> 方法：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> Illuminate\Http\Request</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">Route</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">get</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;/user&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">, </span><span style="color:#F97583;--shiki-light:#D73A49">function</span><span style="color:#E1E4E8;--shiki-light:#24292E"> (</span><span style="color:#79B8FF;--shiki-light:#005CC5">Request</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $request) {</span></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">    return</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $request</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">user</span><span style="color:#E1E4E8;--shiki-light:#24292E">();</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">})</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">middleware</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;auth:sanctum&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">);</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="revoking-tokens"></a>
<h3 id="撤銷-token-revoking-tokens"><a href="#撤銷-token-revoking-tokens">撤銷 Token (Revoking Tokens)</a></h3>
<p>你可以透過使用 <code>Laravel\Sanctum\HasApiTokens</code> Trait 提供的 <code>tokens</code> 關聯從資料庫中刪除 Token 來「撤銷」它們：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#6A737D;--shiki-light:#6A737D">// Revoke all tokens...</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">$user</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">tokens</span><span style="color:#E1E4E8;--shiki-light:#24292E">()</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">delete</span><span style="color:#E1E4E8;--shiki-light:#24292E">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D">// Revoke the token that was used to authenticate the current request...</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">$request</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">user</span><span style="color:#E1E4E8;--shiki-light:#24292E">()</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">currentAccessToken</span><span style="color:#E1E4E8;--shiki-light:#24292E">()</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">delete</span><span style="color:#E1E4E8;--shiki-light:#24292E">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D">// Revoke a specific token...</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">$user</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">tokens</span><span style="color:#E1E4E8;--shiki-light:#24292E">()</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">where</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;id&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">, $tokenId)</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">delete</span><span style="color:#E1E4E8;--shiki-light:#24292E">();</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="token-expiration"></a>
<h3 id="token-過期-token-expiration"><a href="#token-過期-token-expiration">Token 過期 (Token Expiration)</a></h3>
<p>預設情況下，Sanctum Token 永不過期，只能透過 <a href="#revoking-tokens">撤銷 Token</a> 來使其無效。然而，如果你想為應用程式的 API Token 設定過期時間，你可以透過應用程式 <code>sanctum</code> 設定檔中定義的 <code>expiration</code> 設定選項來實現。此設定選項定義了發行的 Token 被視為過期之前的分鐘數：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;expiration&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#79B8FF;--shiki-light:#005CC5"> 525600</span><span style="color:#E1E4E8;--shiki-light:#24292E">,</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>如果你想獨立指定每個 Token 的過期時間，你可以透過將過期時間作為第三個參數提供給 <code>createToken</code> 方法來實現：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">return</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $user</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">createToken</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span></span>
<span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">    &#x27;token-name&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">, [</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;*&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">], </span><span style="color:#B392F0;--shiki-light:#6F42C1">now</span><span style="color:#E1E4E8;--shiki-light:#24292E">()</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">addWeek</span><span style="color:#E1E4E8;--shiki-light:#24292E">()</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">)</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E">plainTextToken;</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>如果你為應用程式設定了 Token 過期時間，你可能還希望 <a href="/docs/scheduling">排程任務</a> 來修剪應用程式的過期 Token。幸運的是，Sanctum 包含一個 <code>sanctum:prune-expired</code> Artisan 指令，你可以用它來完成此任務。例如，你可以設定一個排程任務來刪除所有已過期至少 24 小時的過期 Token 資料庫記錄：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> Illuminate\Support\Facades\Schedule</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">Schedule</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">command</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;sanctum:prune-expired --hours=24&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">)</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">daily</span><span style="color:#E1E4E8;--shiki-light:#24292E">();</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="spa-authentication"></a>
<h2 id="spa-驗證-spa-authentication-1"><a href="#spa-驗證-spa-authentication-1">SPA 驗證 (SPA Authentication)</a></h2>
<p>Sanctum 的存在也是為了提供一種簡單的方法來驗證需要與 Laravel 驅動的 API 進行通訊的單頁應用程式 (SPA)。這些 SPA 可能存在於與你的 Laravel 應用程式相同的儲存庫中，或者可能是一個完全獨立的儲存庫。</p>
<p>對於此功能，Sanctum 不使用任何種類的 Token。相反地，Sanctum 使用 Laravel 內建的 Cookie 基礎 Session 驗證服務。這種驗證方法提供了 CSRF 保護、Session 驗證的好處，並防止驗證憑證透過 XSS 洩漏。</p>
<blockquote>
<p>[!WARNING]
為了進行驗證，你的 SPA 和 API 必須共享相同的頂級網域。但是，它們可以位於不同的子網域上。此外，你應該確保在請求中發送 <code>Accept: application/json</code> 標頭以及 <code>Referer</code> 或 <code>Origin</code> 標頭。</p>
</blockquote>
<a name="spa-configuration"></a>
<h3 id="設定-configuration-1"><a href="#設定-configuration-1">設定 (Configuration)</a></h3>
<a name="configuring-your-first-party-domains"></a>
<h4 id="設定你的第一方網域-configuring-your-first-party-domains"><a href="#設定你的第一方網域-configuring-your-first-party-domains">設定你的第一方網域 (Configuring Your First-Party Domains)</a></h4>
<p>首先，你應該設定你的 SPA 將從哪些網域發出請求。你可以在 <code>sanctum</code> 設定檔中使用 <code>stateful</code> 設定選項來設定這些網域。此設定決定了哪些網域在向你的 API 發出請求時，將使用 Laravel Session Cookie 維持「有狀態 (stateful)」驗證。</p>
<p>為了協助你設定第一方有狀態網域，Sanctum 提供了兩個輔助函式，你可以將其包含在設定中。首先，<code>Sanctum::currentApplicationUrlWithPort()</code> 將回傳 <code>APP_URL</code> 環境變數中的當前應用程式 URL，而 <code>Sanctum::currentRequestHost()</code> 將在有狀態網域列表中注入一個佔位符，該佔位符在執行時將被當前請求的主機替換，以便所有具有相同網域的請求都被視為有狀態。</p>
<blockquote>
<p>[!WARNING]
如果你是透過包含連接埠的 URL (<code>127.0.0.1:8000</code>) 存取你的應用程式，你應該確保將連接埠號包含在網域中。</p>
</blockquote>
<a name="sanctum-middleware"></a>
<h4 id="sanctum-middleware"><a href="#sanctum-middleware">Sanctum Middleware</a></h4>
<p>接下來，你應該指示 Laravel，來自 SPA 的傳入請求可以使用 Laravel 的 Session Cookie 進行驗證，同時仍允許來自第三方或行動應用程式的請求使用 API Token 進行驗證。這可以透過在應用程式的 <code>bootstrap/app.php</code> 檔案中呼叫 <code>statefulApi</code> Middleware 方法輕鬆完成：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">withMiddleware</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#F97583;--shiki-light:#D73A49">function</span><span style="color:#E1E4E8;--shiki-light:#24292E"> (</span><span style="color:#79B8FF;--shiki-light:#005CC5">Middleware</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $middleware)</span><span style="color:#F97583;--shiki-light:#D73A49">:</span><span style="color:#F97583;--shiki-light:#D73A49"> void</span><span style="color:#E1E4E8;--shiki-light:#24292E"> {</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    $middleware</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">statefulApi</span><span style="color:#E1E4E8;--shiki-light:#24292E">();</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">})</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="cors-and-cookies"></a>
<h4 id="cors-和-cookies-cors-and-cookies"><a href="#cors-和-cookies-cors-and-cookies">CORS 和 Cookies (CORS and Cookies)</a></h4>
<p>如果你在從執行於單獨子網域的 SPA 驗證應用程式時遇到問題，你可能錯誤設定了 CORS (跨來源資源共用) 或 Session Cookie 設定。</p>
<p><code>config/cors.php</code> 設定檔預設未發佈。如果你需要自訂 Laravel 的 CORS 選項，你應該使用 <code>config:publish</code> Artisan 指令發佈完整的 <code>cors</code> 設定檔：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#B392F0;--shiki-light:#6F42C1">php</span><span style="color:#9ECBFF;--shiki-light:#032F62"> artisan</span><span style="color:#9ECBFF;--shiki-light:#032F62"> config:publish</span><span style="color:#9ECBFF;--shiki-light:#032F62"> cors</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>接下來，你應該確保應用程式的 CORS 設定回傳值為 <code>True</code> 的 <code>Access-Control-Allow-Credentials</code> 標頭。這可以透過將應用程式 <code>config/cors.php</code> 設定檔中的 <code>supports_credentials</code> 選項設定為 <code>true</code> 來完成。</p>
<p>此外，你應該在應用程式的全域 <code>axios</code> 實例上啟用 <code>withCredentials</code> 和 <code>withXSRFToken</code> 選項。通常，這應該在你的 <code>resources/js/bootstrap.js</code> 檔案中執行。如果你不使用 Axios 從前端發出 HTTP 請求，你應該在自己的 HTTP 用戶端上執行等效的設定：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">axios.defaults.withCredentials </span><span style="color:#F97583;--shiki-light:#D73A49">=</span><span style="color:#79B8FF;--shiki-light:#005CC5"> true</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">axios.defaults.withXSRFToken </span><span style="color:#F97583;--shiki-light:#D73A49">=</span><span style="color:#79B8FF;--shiki-light:#005CC5"> true</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>最後，你應該確保應用程式的 Session Cookie 網域設定支援你的根網域的任何子網域。你可以透過在應用程式的 <code>config/session.php</code> 設定檔中為網域加上前導 <code>.</code> 來完成此操作：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;domain&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#9ECBFF;--shiki-light:#032F62"> &#x27;.domain.com&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">,</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="spa-authenticating"></a>
<h3 id="驗證-authenticating"><a href="#驗證-authenticating">驗證 (Authenticating)</a></h3>
<a name="csrf-protection"></a>
<h4 id="csrf-保護-csrf-protection"><a href="#csrf-保護-csrf-protection">CSRF 保護 (CSRF Protection)</a></h4>
<p>要驗證你的 SPA，你的 SPA 的「登入」頁面應首先向 <code>/sanctum/csrf-cookie</code> 端點發出請求，以初始化應用程式的 CSRF 保護：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">axios.</span><span style="color:#B392F0;--shiki-light:#6F42C1">get</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&quot;/sanctum/csrf-cookie&quot;</span><span style="color:#E1E4E8;--shiki-light:#24292E">).</span><span style="color:#B392F0;--shiki-light:#6F42C1">then</span><span style="color:#E1E4E8;--shiki-light:#24292E">((</span><span style="color:#FFAB70;--shiki-light:#E36209">response</span><span style="color:#E1E4E8;--shiki-light:#24292E">) </span><span style="color:#F97583;--shiki-light:#D73A49">=&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E"> {</span></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D">  // Login...</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">});</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>在此請求期間，Laravel 將設定一個包含當前 CSRF Token 的 <code>XSRF-TOKEN</code> Cookie。然後，此 Token 應進行 URL 解碼並在後續請求的 <code>X-XSRF-TOKEN</code> 標頭中傳遞，某些 HTTP 用戶端函式庫 (如 Axios 和 Angular HttpClient) 會自動為你執行此操作。如果你的 JavaScript HTTP 函式庫沒有為你設定該值，你需要手動設定 <code>X-XSRF-TOKEN</code> 標頭以符合此路由設定的 <code>XSRF-TOKEN</code> Cookie 的 URL 解碼值。</p>
<a name="logging-in"></a>
<h4 id="登入-logging-in"><a href="#登入-logging-in">登入 (Logging In)</a></h4>
<p>一旦 CSRF 保護初始化完成，你應該向 Laravel 應用程式的 <code>/login</code> 路由發出 <code>POST</code> 請求。此 <code>/login</code> 路由可以 <a href="/docs/authentication#authenticating-users">手動實作</a> 或使用像 <a href="/docs/fortify">Laravel Fortify</a> 這樣的無頭驗證套件。</p>
<p>如果登入請求成功，你將被驗證，並且對應用程式路由的後續請求將透過 Laravel 應用程式發給用戶端的 Session Cookie 自動進行驗證。此外，由於你的應用程式已經向 <code>/sanctum/csrf-cookie</code> 路由發出請求，只要你的 JavaScript HTTP 用戶端在 <code>X-XSRF-TOKEN</code> 標頭中發送 <code>XSRF-TOKEN</code> Cookie 的值，後續請求應自動獲得 CSRF 保護。</p>
<p>當然，如果使用者的 Session 由於缺乏活動而過期，對 Laravel 應用程式的後續請求可能會收到 401 或 419 HTTP 錯誤回應。在這種情況下，你應該將使用者重新導向到 SPA 的登入頁面。</p>
<blockquote>
<p>[!WARNING]
你可以自由編寫自己的 <code>/login</code> 端點；但是，你應該確保它使用標準的、<a href="/docs/authentication#authenticating-users">Laravel 提供的 Session 基礎驗證服務</a> 來驗證使用者。通常，這意味著使用 <code>web</code> 驗證 Guard。</p>
</blockquote>
<a name="protecting-spa-routes"></a>
<h3 id="保護路由-protecting-routes-1"><a href="#保護路由-protecting-routes-1">保護路由 (Protecting Routes)</a></h3>
<p>為了保護路由，使所有傳入的請求都必須經過驗證，你應該將 <code>sanctum</code> 驗證 Guard 附加到 <code>routes/api.php</code> 檔案中的 API 路由。此 Guard 將確保傳入的請求被驗證為來自 SPA 的有狀態驗證請求，或者如果請求來自第三方，則包含有效的 API Token 標頭：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> Illuminate\Http\Request</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">Route</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">get</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;/user&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">, </span><span style="color:#F97583;--shiki-light:#D73A49">function</span><span style="color:#E1E4E8;--shiki-light:#24292E"> (</span><span style="color:#79B8FF;--shiki-light:#005CC5">Request</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $request) {</span></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">    return</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $request</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">user</span><span style="color:#E1E4E8;--shiki-light:#24292E">();</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">})</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">middleware</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;auth:sanctum&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">);</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="authorizing-private-broadcast-channels"></a>
<h3 id="授權私有廣播頻道-authorizing-private-broadcast-channels"><a href="#授權私有廣播頻道-authorizing-private-broadcast-channels">授權私有廣播頻道 (Authorizing Private Broadcast Channels)</a></h3>
<p>如果你的 SPA 需要驗證 <a href="/docs/broadcasting#authorizing-channels">私有 / 存在廣播頻道</a>，你應該從應用程式的 <code>bootstrap/app.php</code> 檔案中包含的 <code>withRouting</code> 方法中移除 <code>channels</code> 項目。相反地，你應該呼叫 <code>withBroadcasting</code> 方法，以便你可以為應用程式的廣播路由指定正確的 Middleware：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">return</span><span style="color:#79B8FF;--shiki-light:#005CC5"> Application</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">configure</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#B392F0;--shiki-light:#6F42C1">basePath</span><span style="color:#E1E4E8;--shiki-light:#24292E">: </span><span style="color:#79B8FF;--shiki-light:#005CC5">dirname</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#79B8FF;--shiki-light:#005CC5">__DIR__</span><span style="color:#E1E4E8;--shiki-light:#24292E">))</span></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">    -&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">withRouting</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span></span>
<span class="line"><span style="color:#B392F0;--shiki-light:#6F42C1">        web</span><span style="color:#E1E4E8;--shiki-light:#24292E">: </span><span style="color:#79B8FF;--shiki-light:#005CC5">__DIR__</span><span style="color:#F97583;--shiki-light:#D73A49">.</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;/../routes/web.php&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D">        // ...</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    )</span></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">    -&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">withBroadcasting</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span></span>
<span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">        __DIR__</span><span style="color:#F97583;--shiki-light:#D73A49">.</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;/../routes/channels.php&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">        [</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;prefix&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#9ECBFF;--shiki-light:#032F62"> &#x27;api&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">, </span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;middleware&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E"> [</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;api&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">, </span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;auth:sanctum&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">]],</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    )</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>接下來，為了使 Pusher 的授權請求成功，你在初始化 <a href="/docs/broadcasting#client-side-installation">Laravel Echo</a> 時需要提供一個自訂的 Pusher <code>authorizer</code>。這允許你的應用程式設定 Pusher 使用 <a href="#cors-and-cookies">已正確設定跨網域請求</a> 的 <code>axios</code> 實例：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">window.Echo </span><span style="color:#F97583;--shiki-light:#D73A49">=</span><span style="color:#F97583;--shiki-light:#D73A49"> new</span><span style="color:#B392F0;--shiki-light:#6F42C1"> Echo</span><span style="color:#E1E4E8;--shiki-light:#24292E">({</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">  broadcaster: </span><span style="color:#9ECBFF;--shiki-light:#032F62">&quot;pusher&quot;</span><span style="color:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">  cluster: </span><span style="color:#F97583;--shiki-light:#D73A49">import</span><span style="color:#E1E4E8;--shiki-light:#24292E">.</span><span style="color:#79B8FF;--shiki-light:#005CC5">meta</span><span style="color:#E1E4E8;--shiki-light:#24292E">.env.</span><span style="color:#79B8FF;--shiki-light:#005CC5">VITE_PUSHER_APP_CLUSTER</span><span style="color:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">  encrypted: </span><span style="color:#79B8FF;--shiki-light:#005CC5">true</span><span style="color:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">  key: </span><span style="color:#F97583;--shiki-light:#D73A49">import</span><span style="color:#E1E4E8;--shiki-light:#24292E">.</span><span style="color:#79B8FF;--shiki-light:#005CC5">meta</span><span style="color:#E1E4E8;--shiki-light:#24292E">.env.</span><span style="color:#79B8FF;--shiki-light:#005CC5">VITE_PUSHER_APP_KEY</span><span style="color:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span class="line"><span style="color:#B392F0;--shiki-light:#6F42C1">  authorizer</span><span style="color:#E1E4E8;--shiki-light:#24292E">: (</span><span style="color:#FFAB70;--shiki-light:#E36209">channel</span><span style="color:#E1E4E8;--shiki-light:#24292E">, </span><span style="color:#FFAB70;--shiki-light:#E36209">options</span><span style="color:#E1E4E8;--shiki-light:#24292E">) </span><span style="color:#F97583;--shiki-light:#D73A49">=&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E"> {</span></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">    return</span><span style="color:#E1E4E8;--shiki-light:#24292E"> {</span></span>
<span class="line"><span style="color:#B392F0;--shiki-light:#6F42C1">      authorize</span><span style="color:#E1E4E8;--shiki-light:#24292E">: (</span><span style="color:#FFAB70;--shiki-light:#E36209">socketId</span><span style="color:#E1E4E8;--shiki-light:#24292E">, </span><span style="color:#FFAB70;--shiki-light:#E36209">callback</span><span style="color:#E1E4E8;--shiki-light:#24292E">) </span><span style="color:#F97583;--shiki-light:#D73A49">=&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E"> {</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">        axios</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">          .</span><span style="color:#B392F0;--shiki-light:#6F42C1">post</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&quot;/api/broadcasting/auth&quot;</span><span style="color:#E1E4E8;--shiki-light:#24292E">, {</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">            socket_id: socketId,</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">            channel_name: channel.name,</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">          })</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">          .</span><span style="color:#B392F0;--shiki-light:#6F42C1">then</span><span style="color:#E1E4E8;--shiki-light:#24292E">((</span><span style="color:#FFAB70;--shiki-light:#E36209">response</span><span style="color:#E1E4E8;--shiki-light:#24292E">) </span><span style="color:#F97583;--shiki-light:#D73A49">=&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E"> {</span></span>
<span class="line"><span style="color:#B392F0;--shiki-light:#6F42C1">            callback</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#79B8FF;--shiki-light:#005CC5">false</span><span style="color:#E1E4E8;--shiki-light:#24292E">, response.data);</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">          })</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">          .</span><span style="color:#B392F0;--shiki-light:#6F42C1">catch</span><span style="color:#E1E4E8;--shiki-light:#24292E">((</span><span style="color:#FFAB70;--shiki-light:#E36209">error</span><span style="color:#E1E4E8;--shiki-light:#24292E">) </span><span style="color:#F97583;--shiki-light:#D73A49">=&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E"> {</span></span>
<span class="line"><span style="color:#B392F0;--shiki-light:#6F42C1">            callback</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#79B8FF;--shiki-light:#005CC5">true</span><span style="color:#E1E4E8;--shiki-light:#24292E">, error);</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">          });</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">      },</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    };</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">  },</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">});</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="mobile-application-authentication"></a>
<h2 id="行動應用程式驗證-mobile-application-authentication"><a href="#行動應用程式驗證-mobile-application-authentication">行動應用程式驗證 (Mobile Application Authentication)</a></h2>
<p>你也可以使用 Sanctum Token 來驗證你的行動應用程式對 API 的請求。驗證行動應用程式請求的過程類似於驗證第三方 API 請求；但是，發行 API Token 的方式略有不同。</p>
<a name="issuing-mobile-api-tokens"></a>
<h3 id="發行-api-token-issuing-api-tokens-1"><a href="#發行-api-token-issuing-api-tokens-1">發行 API Token (Issuing API Tokens)</a></h3>
<p>首先，建立一個路由，該路由接受使用者的電子郵件 / 使用者名稱、密碼和裝置名稱，然後交換這些憑證以獲取新的 Sanctum Token。提供給此端點的「裝置名稱」僅供參考，可以是任何你想要的值。通常，裝置名稱值應該是使用者可以識別的名稱，例如「Nuno&#x27;s iPhone 12」。</p>
<p>通常，你會從行動應用程式的「登入」畫面請求 Token 端點。端點將回傳純文字 API Token，然後可以將其儲存在行動裝置上並用於發出其他 API 請求：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> App\Models\User</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> Illuminate\Http\Request</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> Illuminate\Support\Facades\Hash</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> Illuminate\Validation\ValidationException</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">Route</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">post</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;/sanctum/token&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">, </span><span style="color:#F97583;--shiki-light:#D73A49">function</span><span style="color:#E1E4E8;--shiki-light:#24292E"> (</span><span style="color:#79B8FF;--shiki-light:#005CC5">Request</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $request) {</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    $request</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">validate</span><span style="color:#E1E4E8;--shiki-light:#24292E">([</span></span>
<span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">        &#x27;email&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#9ECBFF;--shiki-light:#032F62"> &#x27;required|email&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">        &#x27;password&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#9ECBFF;--shiki-light:#032F62"> &#x27;required&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">        &#x27;device_name&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#9ECBFF;--shiki-light:#032F62"> &#x27;required&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    ]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    $user </span><span style="color:#F97583;--shiki-light:#D73A49">=</span><span style="color:#79B8FF;--shiki-light:#005CC5"> User</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">where</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;email&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">, $request</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E">email)</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">first</span><span style="color:#E1E4E8;--shiki-light:#24292E">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">    if</span><span style="color:#E1E4E8;--shiki-light:#24292E"> (</span><span style="color:#F97583;--shiki-light:#D73A49">!</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $user </span><span style="color:#F97583;--shiki-light:#D73A49">||</span><span style="color:#F97583;--shiki-light:#D73A49"> !</span><span style="color:#79B8FF;--shiki-light:#005CC5"> Hash</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">check</span><span style="color:#E1E4E8;--shiki-light:#24292E">($request</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E">password, $user</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E">password)) {</span></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">        throw</span><span style="color:#79B8FF;--shiki-light:#005CC5"> ValidationException</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">withMessages</span><span style="color:#E1E4E8;--shiki-light:#24292E">([</span></span>
<span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">            &#x27;email&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E"> [</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;The provided credentials are incorrect.&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">],</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">        ]);</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">    return</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $user</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">createToken</span><span style="color:#E1E4E8;--shiki-light:#24292E">($request</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E">device_name)</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E">plainTextToken;</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">});</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>當行動應用程式使用 Token 向你的應用程式發出 API 請求時，應將 Token 包含在 <code>Authorization</code> 標頭中作為 <code>Bearer</code> Token。</p>
<blockquote>
<p>[!NOTE]
為行動應用程式發行 Token 時，你也可以自由指定 <a href="#token-abilities">Token 能力</a>。</p>
</blockquote>
<a name="protecting-mobile-api-routes"></a>
<h3 id="保護路由-protecting-routes-2"><a href="#保護路由-protecting-routes-2">保護路由 (Protecting Routes)</a></h3>
<p>如前所述，你可以透過將 <code>sanctum</code> 驗證 Guard 附加到路由來保護路由，使所有傳入的請求都必須經過驗證：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">Route</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">get</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;/user&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">, </span><span style="color:#F97583;--shiki-light:#D73A49">function</span><span style="color:#E1E4E8;--shiki-light:#24292E"> (</span><span style="color:#79B8FF;--shiki-light:#005CC5">Request</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $request) {</span></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">    return</span><span style="color:#E1E4E8;--shiki-light:#24292E"> $request</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">user</span><span style="color:#E1E4E8;--shiki-light:#24292E">();</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">})</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">middleware</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;auth:sanctum&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">);</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="revoking-mobile-api-tokens"></a>
<h3 id="撤銷-token-revoking-tokens-1"><a href="#撤銷-token-revoking-tokens-1">撤銷 Token (Revoking Tokens)</a></h3>
<p>為了允許使用者撤銷發行給行動裝置的 API Token，你可以在 Web 應用程式 UI 的「帳戶設定」部分按名稱列出它們，並附上「撤銷」按鈕。當使用者點擊「撤銷」按鈕時，你可以從資料庫中刪除該 Token。請記住，你可以透過 <code>Laravel\Sanctum\HasApiTokens</code> Trait 提供的 <code>tokens</code> 關聯存取使用者的 API Token：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#6A737D;--shiki-light:#6A737D">// Revoke all tokens...</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">$user</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">tokens</span><span style="color:#E1E4E8;--shiki-light:#24292E">()</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">delete</span><span style="color:#E1E4E8;--shiki-light:#24292E">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D">// Revoke a specific token...</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">$user</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">tokens</span><span style="color:#E1E4E8;--shiki-light:#24292E">()</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">where</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;id&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">, $tokenId)</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">delete</span><span style="color:#E1E4E8;--shiki-light:#24292E">();</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="testing"></a>
<h2 id="測試-testing"><a href="#測試-testing">測試 (Testing)</a></h2>
<p>在測試時，可以使用 <code>Sanctum::actingAs</code> 方法來驗證使用者並指定應授予其 Token 的能力：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> App\Models\User</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> Laravel\Sanctum\Sanctum</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;--shiki-light:#6F42C1">test</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;task list can be retrieved&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">, </span><span style="color:#F97583;--shiki-light:#D73A49">function</span><span style="color:#E1E4E8;--shiki-light:#24292E"> () {</span></span>
<span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">    Sanctum</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">actingAs</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span></span>
<span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">        User</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">factory</span><span style="color:#E1E4E8;--shiki-light:#24292E">()</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">create</span><span style="color:#E1E4E8;--shiki-light:#24292E">(),</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">        [</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;view-tasks&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">]</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    $response </span><span style="color:#F97583;--shiki-light:#D73A49">=</span><span style="color:#79B8FF;--shiki-light:#005CC5"> $this</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">get</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;/api/task&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    $response</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">assertOk</span><span style="color:#E1E4E8;--shiki-light:#24292E">();</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">});</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> App\Models\User</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> Laravel\Sanctum\Sanctum</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">public</span><span style="color:#F97583;--shiki-light:#D73A49"> function</span><span style="color:#B392F0;--shiki-light:#6F42C1"> test_task_list_can_be_retrieved</span><span style="color:#E1E4E8;--shiki-light:#24292E">()</span><span style="color:#F97583;--shiki-light:#D73A49">:</span><span style="color:#F97583;--shiki-light:#D73A49"> void</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">{</span></span>
<span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">    Sanctum</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">actingAs</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span></span>
<span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">        User</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">factory</span><span style="color:#E1E4E8;--shiki-light:#24292E">()</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">create</span><span style="color:#E1E4E8;--shiki-light:#24292E">(),</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">        [</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;view-tasks&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">]</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    $response </span><span style="color:#F97583;--shiki-light:#D73A49">=</span><span style="color:#79B8FF;--shiki-light:#005CC5"> $this</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">get</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;/api/task&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    $response</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">assertOk</span><span style="color:#E1E4E8;--shiki-light:#24292E">();</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">}</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>如果你想授予 Token 所有能力，你應該在提供給 <code>actingAs</code> 方法的能力列表中包含 <code>*</code>：</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">Sanctum</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">actingAs</span><span style="color:#E1E4E8;--shiki-light:#24292E">(</span></span>
<span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">    User</span><span style="color:#F97583;--shiki-light:#D73A49">::</span><span style="color:#B392F0;--shiki-light:#6F42C1">factory</span><span style="color:#E1E4E8;--shiki-light:#24292E">()</span><span style="color:#F97583;--shiki-light:#D73A49">-&gt;</span><span style="color:#B392F0;--shiki-light:#6F42C1">create</span><span style="color:#E1E4E8;--shiki-light:#24292E">(),</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    [</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;*&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">]</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">);</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div></article></div><div class="hidden xl:block w-64 sticky top-0 h-screen"><div class="p-6"><h4 class="text-sm font-semibold mb-4 text-foreground">On this page</h4><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-120px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><nav class="space-y-1"><a href="#簡介-introduction" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:12px">簡介</a><a href="#運作原理-how-it-works" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">運作原理</a><a href="#api-tokens" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:36px">API Tokens</a><a href="#spa-驗證-spa-authentication" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:36px">SPA 驗證</a><a href="#安裝-installation" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:12px">安裝</a><a href="#設定-configuration" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:12px">設定</a><a href="#覆寫預設-model-overriding-default-models" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">覆寫預設 Model</a><a href="#api-token-驗證-api-token-authentication" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:12px">API Token 驗證</a><a href="#發行-api-token-issuing-api-tokens" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">發行 API Token</a><a href="#token-能力-token-abilities" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">Token 能力</a><a href="#token-能力-middleware-token-ability-middleware" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:36px">Token 能力 Middleware</a><a href="#第一方-ui-發起的請求-first-party-ui-initiated-requests" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:36px">第一方 UI 發起的請求</a><a href="#保護路由-protecting-routes" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">保護路由</a><a href="#撤銷-token-revoking-tokens" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">撤銷 Token</a><a href="#token-過期-token-expiration" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">Token 過期</a><a href="#spa-驗證-spa-authentication" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:12px">SPA 驗證</a><a href="#設定-configuration" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">設定</a><a href="#設定你的第一方網域-configuring-your-first-party-domains" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:36px">設定你的第一方網域</a><a href="#sanctum-middleware" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:36px">Sanctum Middleware</a><a href="#cors-和-cookies-cors-and-cookies" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:36px">CORS 和 Cookies</a><a href="#驗證-authenticating" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">驗證</a><a href="#csrf-保護-csrf-protection" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:36px">CSRF 保護</a><a href="#登入-logging-in" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:36px">登入</a><a href="#保護路由-protecting-routes" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">保護路由</a><a href="#授權私有廣播頻道-authorizing-private-broadcast-channels" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">授權私有廣播頻道</a><a href="#行動應用程式驗證-mobile-application-authentication" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:12px">行動應用程式驗證</a><a href="#發行-api-token-issuing-api-tokens" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">發行 API Token</a><a href="#保護路由-protecting-routes" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">保護路由</a><a href="#撤銷-token-revoking-tokens" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">撤銷 Token</a><a href="#測試-testing" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:12px">測試</a></nav></div></div></div></div></div></div></div><!--$--><!--/$--></main></div><script src="/_next/static/chunks/a63c9e88afa04ceb.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n4:I[95549,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/0a3d48cc7de64d8a.js\",\"/_next/static/chunks/b9cc757437f01a9b.js\"],\"MobileNav\"]\n5:I[93649,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/0a3d48cc7de64d8a.js\",\"/_next/static/chunks/b9cc757437f01a9b.js\"],\"DocsSidebar\"]\n7:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"OutletBoundary\"]\n8:\"$Sreact.suspense\"\na:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"ViewportBoundary\"]\nc:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"MetadataBoundary\"]\ne:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/c5ae50772a9dac16.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"gbL4GoSDzWGRgd1sk9dHs\",\"c\":[\"\",\"docs\",\"sanctum\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"sanctum\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/c5ae50772a9dac16.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/796e69ae18b2784c.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/0a3d48cc7de64d8a.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-2\",{\"src\":\"/_next/static/chunks/b9cc757437f01a9b.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"div\",null,{\"className\":\"flex min-h-screen bg-background flex-col md:flex-row\",\"children\":[[\"$\",\"div\",null,{\"className\":\"md:hidden p-4 border-b flex items-center sticky top-0 bg-background z-10\",\"children\":[[\"$\",\"$L4\",null,{}],[\"$\",\"span\",null,{\"className\":\"ml-2 font-bold text-lg\",\"children\":[[\"$\",\"span\",null,{\"className\":\"text-red-600\",\"children\":\"Laravel\"}],\" Docs\"]}]]}],[\"$\",\"$L5\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 relative\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/88f06ded2e8cebb1.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$L7\",null,{\"children\":[\"$\",\"$8\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@9\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$La\",null,{\"children\":\"$@b\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lc\",null,{\"children\":[\"$\",\"$8\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@d\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$e\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"f:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"IconMark\"]\nd:[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$Lf\",\"3\",{}]]\n9:null\n"])</script><script>self.__next_f.push([1,"6:[\"$\",\"div\",null,{\"className\":\"container mx-auto py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex gap-8 justify-center\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex-1 max-w-3xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl\",\"children\":\"Sanctum (Laravel Sanctum)\"}],[\"$\",\"p\",null,{\"className\":\"text-xl text-muted-foreground mt-2\",\"children\":\"Sanctum 為 SPAs 和行動應用程式提供簡單的驗證系統\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#introduction\",\"children\":\"簡介\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#how-it-works\",\"children\":\"運作原理\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#installation\",\"children\":\"安裝\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#configuration\",\"children\":\"設定\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#overriding-default-models\",\"children\":\"覆寫預設 Model\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#api-token-authentication\",\"children\":\"API Token 驗證\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#issuing-api-tokens\",\"children\":\"發行 API Token\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#token-abilities\",\"children\":\"Token 能力\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#protecting-routes\",\"children\":\"保護路由\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#revoking-tokens\",\"children\":\"撤銷 Token\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#token-expiration\",\"children\":\"Token 過期\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#spa-authentication\",\"children\":\"SPA 驗證\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#spa-configuration\",\"children\":\"設定\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#spa-authenticating\",\"children\":\"驗證\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#protecting-spa-routes\",\"children\":\"保護路由\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#authorizing-private-broadcast-channels\",\"children\":\"授權私有廣播頻道\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#mobile-application-authentication\",\"children\":\"行動應用程式驗證\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#issuing-mobile-api-tokens\",\"children\":\"發行 API Token\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#protecting-mobile-api-routes\",\"children\":\"保護路由\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#revoking-mobile-api-tokens\",\"children\":\"撤銷 Token\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#testing\",\"children\":\"測試\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"introduction\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"簡介-introduction\",\"children\":[\"$\",\"a\",null,{\"href\":\"#簡介-introduction\",\"children\":\"簡介 (Introduction)\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"https://github.com/laravel/sanctum\",\"children\":\"Laravel Sanctum\"}],\" 為 SPA (單頁應用程式)、行動應用程式和簡單的 Token 基礎 API 提供了一個輕量級的驗證系統。Sanctum 允許應用程式的每個使用者為其帳戶產生多個 API Token。這些 Token 可以被授予能力 / 範圍 (abilities / scopes)，以指定 Token 被允許執行的動作。\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"how-it-works\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"運作原理-how-it-works\",\"children\":[\"$\",\"a\",null,{\"href\":\"#運作原理-how-it-works\",\"children\":\"運作原理 (How it Works)\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Laravel Sanctum 的存在是為了解決兩個分開的問題。在深入探討這個函式庫之前，讓我們先討論每一個問題。\"}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"how-it-works-api-tokens\"}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"api-tokens\",\"children\":[\"$\",\"a\",null,{\"href\":\"#api-tokens\",\"children\":\"API Tokens\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"首先，Sanctum 是一個簡單的套件，你可以用它來發行 API Token 給你的使用者，而不需要 OAuth 的複雜性。這個功能的靈感來自 GitHub 和其他發行「個人存取 Token (Personal Access Tokens)」的應用程式。例如，想像你的應用程式的「帳戶設定」有一個畫面，使用者可以在那裡為他們的帳戶產生一個 API Token。你可以使用 Sanctum 來產生和管理這些 Token。這些 Token 通常有很長的過期時間 (數年)，但使用者可以隨時手動撤銷。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Laravel Sanctum 透過將使用者 API Token 儲存在單一資料庫資料表中，並透過應包含有效 API Token 的 \",[\"$\",\"code\",null,{\"children\":\"Authorization\"}],\" 標頭來驗證傳入的 HTTP 請求，從而提供此功能。\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"how-it-works-spa-authentication\"}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"spa-驗證-spa-authentication\",\"children\":[\"$\",\"a\",null,{\"href\":\"#spa-驗證-spa-authentication\",\"children\":\"SPA 驗證 (SPA Authentication)\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"其次，Sanctum 的存在是為了提供一種簡單的方法來驗證需要與 Laravel 驅動的 API 進行通訊的單頁應用程式 (SPA)。這些 SPA 可能存在於與你的 Laravel 應用程式相同的儲存庫中，或者可能是一個完全獨立的儲存庫，例如使用 Next.js 或 Nuxt 建立的 SPA。\"}],\"\\n\",\"$L10\",\"\\n\",\"$L11\",\"\\n\",\"$L12\",\"\\n\",\"$L13\",\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\",\"\\n\",\"$L55\",\"\\n\",\"$L56\",\"\\n\",\"$L57\",\"\\n\",\"$L58\",\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\",\"\\n\",\"$L5c\",\"\\n\",\"$L5d\",\"\\n\",\"$L5e\",\"\\n\",\"$L5f\",\"\\n\",\"$L60\",\"\\n\",\"$L61\",\"\\n\",\"$L62\",\"\\n\",\"$L63\",\"\\n\",\"$L64\",\"\\n\",\"$L65\",\"\\n\",\"$L66\",\"\\n\",\"$L67\",\"\\n\",\"$L68\",\"\\n\",\"$L69\",\"\\n\",\"$L6a\",\"\\n\",\"$L6b\",\"\\n\",\"$L6c\",\"\\n\",\"$L6d\",\"\\n\",\"$L6e\",\"\\n\",\"$L6f\",\"\\n\",\"$L70\",\"\\n\",\"$L71\",\"\\n\",\"$L72\",\"\\n\",\"$L73\",\"\\n\",\"$L74\",\"\\n\",\"$L75\",\"\\n\",\"$L76\",\"\\n\",\"$L77\",\"\\n\",\"$L78\",\"\\n\",\"$L79\",\"\\n\",\"$L7a\",\"\\n\",\"$L7b\",\"\\n\",\"$L7c\",\"\\n\",\"$L7d\",\"\\n\",\"$L7e\",\"\\n\",\"$L7f\",\"\\n\",\"$L80\",\"\\n\",\"$L81\",\"\\n\",\"$L82\",\"\\n\",\"$L83\",\"\\n\",\"$L84\",\"\\n\",\"$L85\",\"\\n\",\"$L86\",\"\\n\",\"$L87\",\"\\n\",\"$L88\",\"\\n\",\"$L89\",\"\\n\",\"$L8a\",\"\\n\",\"$L8b\",\"\\n\",\"$L8c\",\"\\n\",\"$L8d\",\"\\n\",\"$L8e\",\"\\n\",\"$L8f\",\"\\n\",\"$L90\",\"\\n\",\"$L91\",\"\\n\",\"$L92\",\"\\n\",\"$L93\",\"\\n\",\"$L94\",\"\\n\",\"$L95\",\"\\n\",\"$L96\",\"\\n\",\"$L97\",\"\\n\",\"$L98\",\"\\n\",\"$L99\",\"\\n\",\"$L9a\",\"\\n\",\"$L9b\"]}]]}],\"$L9c\"]}]}]\n"])</script><script>self.__next_f.push([1,"9d:I[74715,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/0a3d48cc7de64d8a.js\",\"/_next/static/chunks/b9cc757437f01a9b.js\",\"/_next/static/chunks/88f06ded2e8cebb1.js\"],\"CodeBlock\"]\nbc:I[48399,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/0a3d48cc7de64d8a.js\",\"/_next/static/chunks/b9cc757437f01a9b.js\",\"/_next/static/chunks/88f06ded2e8cebb1.js\"],\"TableOfContents\"]\n10:[\"$\",\"p\",null,{\"children\":[\"對於此功能，Sanctum 不使用任何種類的 Token。相反地，Sanctum 使用 Laravel 內建的 Cookie 基礎 Session 驗證服務。通常，Sanctum 利用 Laravel 的 \",[\"$\",\"code\",null,{\"children\":\"web\"}],\" 驗證 Guard 來完成此任務。這提供了 CSRF 保護、Session 驗證的好處，並防止驗證憑證透過 XSS 洩漏。\"]}]\n11:[\"$\",\"p\",null,{\"children\":[\"當傳入的請求源自你自己的 SPA 前端時，Sanctum 只會嘗試使用 Cookie 進行驗證。當 Sanctum 檢查傳入的 HTTP 請求時，它會先檢查是否有驗證 Cookie，如果沒有，Sanctum 接著會檢查 \",[\"$\",\"code\",null,{\"children\":\"Authorization\"}],\" 標頭是否有有效的 API Token。\"]}]\n12:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"[!NOTE]\\n僅將 Sanctum 用於 API Token 驗證或僅用於 SPA 驗證是完全沒問題的。僅僅因為你使用了 Sanctum，並不意味著你必須使用它提供的這兩個功能。\"}],\"\\n\"]}]\n13:[\"$\",\"a\",null,{\"name\":\"installation\"}]\n14:[\"$\",\"h2\",null,{\"id\":\"安裝-installation\",\"children\":[\"$\",\"a\",null,{\"href\":\"#安裝-installation\",\"children\":\"安裝 (Installation)\"}]}]\n15:[\"$\",\"p\",null,{\"children\":[\"你可以透過 \",[\"$\",\"code\",null,{\"children\":\"install:api\"}],\" Artisan 指令安裝 Laravel Sanctum：\"]}]\n16:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"php\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" artisan\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" install:api\"}]]}]}]}]\n17:[\"$\",\"p\",null,{\"children\":[\"接下來，如果你打算利用 Sanctum 來驗證 SPA，請參考本文件的 \",[\"$\",\"a\",null,{\"href\":\"#spa-authentication\",\"children\":\"SPA 驗證\"}],\" 章節。\"]}]\n18:[\"$\",\"a\",null,{\"name\":\"configuration\"}]\n19:[\"$\",\"h2\",null,{\"id\":\"設定-configuration\",\"children\":[\"$\",\"a\",null,{\"href\":\"#設定-configuration\",\"children\":\"設定 (Configuration)\"}]}]\n1a:[\"$\",\"a\",null,{\"name\":\"overriding-default-models\"}]\n1b:[\"$\",\"h3\",null,{\"id\":\"覆寫預設-model-overriding-default-models\",\"children\":[\"$\",\"a\",null,{\"href\":\"#覆寫預設-model-overriding-default-models\",\"children\":\"覆寫預設 Model (Overriding Default Models)\"}]}]\n1c:[\"$\",\"p\",null,{\"children\":[\"雖然通常不需要，但你可以自由擴充 Sanctum 內部使用的 \",[\"$\",\"code\",null,{\"children\":\"PersonalAccessToken\"}],\" Model：\"]}]\n"])</script><script>self.__next_f.push([1,"1d:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" Laravel\\\\Sanctum\\\\PersonalAccessToken\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" as\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" SanctumPersonalAccessToken\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"class\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" PersonalAccessToken\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" extends\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" SanctumPersonalAccessToken\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"{\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"    // ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"}\"}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"1e:[\"$\",\"p\",null,{\"children\":[\"然後，你可以透過 Sanctum 提供的 \",[\"$\",\"code\",null,{\"children\":\"usePersonalAccessTokenModel\"}],\" 方法指示 Sanctum 使用你的自訂 Model。通常，你應該在應用程式的 \",[\"$\",\"code\",null,{\"children\":\"AppServiceProvider\"}],\" 檔案的 \",[\"$\",\"code\",null,{\"children\":\"boot\"}],\" 方法中呼叫此方法：\"]}]\n"])</script><script>self.__next_f.push([1,"1f:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" App\\\\Models\\\\Sanctum\\\\PersonalAccessToken\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" Laravel\\\\Sanctum\\\\Sanctum\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"/**\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\" * Bootstrap any application services.\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\" */\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"public\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" boot\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"()\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" void\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"{\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"    Sanctum\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"usePersonalAccessTokenModel\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"PersonalAccessToken\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::class\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\");\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"}\"}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"20:[\"$\",\"a\",null,{\"name\":\"api-token-authentication\"}]\n21:[\"$\",\"h2\",null,{\"id\":\"api-token-驗證-api-token-authentication\",\"children\":[\"$\",\"a\",null,{\"href\":\"#api-token-驗證-api-token-authentication\",\"children\":\"API Token 驗證 (API Token Authentication)\"}]}]\n22:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\n你不應該使用 API Token 來驗證你自己的第一方 SPA。相反地，請使用 Sanctum 內建的 \",[\"$\",\"a\",null,{\"href\":\"#spa-authentication\",\"children\":\"SPA 驗證功能\"}],\"。\"]}],\"\\n\"]}]\n23:[\"$\",\"a\",null,{\"name\":\"issuing-api-tokens\"}]\n24:[\"$\",\"h3\",null,{\"id\":\"發行-api-token-issuing-api-tokens\",\"children\":[\"$\",\"a\",null,{\"href\":\"#發行-api-token-issuing-api-tokens\",\"children\":\"發行 API Token (Issuing API Tokens)\"}]}]\n25:[\"$\",\"p\",null,{\"children\":[\"Sanctum 允許你發行 API Token / 個人存取 Token，這些 Token 可用於驗證對你應用程式的 API 請求。使用 API Token 發出請求時，應將 Token 包含在 \",[\"$\",\"code\",null,{\"children\":\"Authorization\"}],\" 標頭中作為 \",[\"$\",\"code\",null,{\"children\":\"Bearer\"}],\" Token。\"]}]\n26:[\"$\",\"p\",null,{\"children\":[\"要開始為使用者發行 Token，你的 User Model 應該使用 \",[\"$\",\"code\",null,{\"children\":\"Laravel\\\\Sanctum\\\\HasApiTokens\"}],\" Trait：\"]}]\n"])</script><script>self.__next_f.push([1,"27:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" Laravel\\\\Sanctum\\\\HasApiTokens\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"class\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" User\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" extends\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" Authenticatable\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"{\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" HasApiTokens\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"HasFactory\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"Notifiable\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"}\"}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"28:[\"$\",\"p\",null,{\"children\":[\"要發行 Token，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"createToken\"}],\" 方法。\",[\"$\",\"code\",null,{\"children\":\"createToken\"}],\" 方法回傳一個 \",[\"$\",\"code\",null,{\"children\":\"Laravel\\\\Sanctum\\\\NewAccessToken\"}],\" 實例。API Token 在儲存到資料庫之前會使用 SHA-256 雜湊進行雜湊處理，但你可以使用 \",[\"$\",\"code\",null,{\"children\":\"NewAccessToken\"}],\" 實例的 \",[\"$\",\"code\",null,{\"children\":\"plainTextToken\"}],\" 屬性存取 Token 的純文字值。你應該在 Token 建立後立即向使用者顯示此值：\"]}]\n"])</script><script>self.__next_f.push([1,"29:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" Illuminate\\\\Http\\\\Request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"Route\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"post\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'/tokens/create'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"Request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $request) {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    $token \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"()\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"createToken\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"($request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"token_name);\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'token'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $token\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"plainTextToken];\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"});\"}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"2a:[\"$\",\"p\",null,{\"children\":[\"你可以使用 \",[\"$\",\"code\",null,{\"children\":\"HasApiTokens\"}],\" Trait 提供的 \",[\"$\",\"code\",null,{\"children\":\"tokens\"}],\" Eloquent 關聯存取使用者的所有 Token：\"]}]\n2b:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"foreach\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" ($user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"tokens \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"as\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $token) {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"    // ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"}\"}]}]]}]}]\n2c:[\"$\",\"a\",null,{\"name\":\"token-abilities\"}]\n2d:[\"$\",\"h3\",null,{\"id\":\"token-能力-token-abilities\",\"children\":[\"$\",\"a\",null,{\"href\":\"#token-能力-token-abilities\",\"children\":\"Token 能力 (Token Abilities)\"}]}]\n2e:[\"$\",\"p\",null,{\"children\":[\"Sanctum 允許你指派「能力 (abilities)」給 Token。能力的作用類似於 OAuth 的「範圍 (scopes)」。你可以將字串能力陣列作為第二個參數傳遞給 \",[\"$\",\"code\",null,{\"children\":\"createToken\"}],\" 方法：\"]}]\n2f:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"createToken\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'token-name'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'server:update'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"])\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"plainTextToken;\"}]]}]}]}]\n30:[\"$\",\"p\",null,{\"children\":[\"當處理經由 Sanctum 驗證的傳入請求時，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"tokenCan\"}],\" 或 \",[\"$\",\"code\",null,{\"children\":\"tokenCant\"}],\" 方法判斷 Token 是否具有給定的能力：\"]}]\n"])</script><script>self.__next_f.push([1,"31:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" ($user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"tokenCan\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'server:update'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")) {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"    // ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" ($user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"tokenCant\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'server:update'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")) {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"    // ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"}\"}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"32:[\"$\",\"a\",null,{\"name\":\"token-ability-middleware\"}]\n33:[\"$\",\"h4\",null,{\"id\":\"token-能力-middleware-token-ability-middleware\",\"children\":[\"$\",\"a\",null,{\"href\":\"#token-能力-middleware-token-ability-middleware\",\"children\":\"Token 能力 Middleware (Token Ability Middleware)\"}]}]\n34:[\"$\",\"p\",null,{\"children\":[\"Sanctum 還包含兩個 Middleware，可用於驗證傳入的請求是否使用已授予給定能力的 Token 進行驗證。首先，在應用程式的 \",[\"$\",\"code\",null,{\"children\":\"bootstrap/app.php\"}],\" 檔案中定義以下 Middleware 別名：\"]}]\n"])</script><script>self.__next_f.push([1,"35:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" Laravel\\\\Sanctum\\\\Http\\\\Middleware\\\\CheckAbilities\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" Laravel\\\\Sanctum\\\\Http\\\\Middleware\\\\CheckForAnyAbility\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"withMiddleware\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"Middleware\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $middleware)\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" void\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    $middleware\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"alias\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"([\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        'abilities'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" CheckAbilities\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::class\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        'ability'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" CheckForAnyAbility\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::class\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    ]);\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"})\"}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"36:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"abilities\"}],\" Middleware 可以指派給路由，以驗證傳入請求的 Token 是否具有所有列出的能力：\"]}]\n"])</script><script>self.__next_f.push([1,"37:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"Route\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"get\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'/orders'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" () {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"    // Token has both \\\"check-status\\\" and \\\"place-orders\\\" abilities...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"})\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"middleware\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"([\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'auth:sanctum'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'abilities:check-status,place-orders'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]);\"}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"38:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"ability\"}],\" Middleware 可以指派給路由，以驗證傳入請求的 Token 是否具有列出的能力中的 \",[\"$\",\"em\",null,{\"children\":\"至少一個\"}],\"：\"]}]\n"])</script><script>self.__next_f.push([1,"39:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"Route\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"get\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'/orders'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" () {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"    // Token has the \\\"check-status\\\" or \\\"place-orders\\\" ability...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"})\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"middleware\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"([\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'auth:sanctum'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'ability:check-status,place-orders'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]);\"}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"3a:[\"$\",\"a\",null,{\"name\":\"first-party-ui-initiated-requests\"}]\n3b:[\"$\",\"h4\",null,{\"id\":\"第一方-ui-發起的請求-first-party-ui-initiated-requests\",\"children\":[\"$\",\"a\",null,{\"href\":\"#第一方-ui-發起的請求-first-party-ui-initiated-requests\",\"children\":\"第一方 UI 發起的請求 (First-Party UI Initiated Requests)\"}]}]\n3c:[\"$\",\"p\",null,{\"children\":[\"為了方便起見，如果傳入的驗證請求來自你的第一方 SPA，並且你正在使用 Sanctum 內建的 \",[\"$\",\"a\",null,{\"href\":\"#spa-authentication\",\"children\":\"SPA 驗證\"}],\"，\",[\"$\",\"code\",null,{\"children\":\"tokenCan\"}],\" 方法將始終回傳 \",[\"$\",\"code\",null,{\"children\":\"true\"}],\"。\"]}]\n3d:[\"$\",\"p\",null,{\"children\":[\"然而，這並不一定意味著你的應用程式必須允許使用者執行該動作。通常，你的應用程式的 \",[\"$\",\"a\",null,{\"href\":\"/docs/authorization#creating-policies\",\"children\":\"Authorization Policies\"}],\" 將決定 Token 是否已被授予執行能力的權限，並檢查使用者實例本身是否應被允許執行該動作。\"]}]\n3e:[\"$\",\"p\",null,{\"children\":[\"例如，如果我們想像一個管理伺服器的應用程式，這可能意味著檢查 Token 是否被授權更新伺服器 \",[\"$\",\"strong\",null,{\"children\":\"並且\"}],\" 伺服器屬於該使用者：\"]}]\n"])</script><script>self.__next_f.push([1,"3f:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"()\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"id \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"===\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $server\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"user_id \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"\u0026\u0026\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"       $request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"()\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"tokenCan\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'server:update'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"40:[\"$\",\"p\",null,{\"children\":[\"起初，允許呼叫 \",[\"$\",\"code\",null,{\"children\":\"tokenCan\"}],\" 方法並對第一方 UI 發起的請求始終回傳 \",[\"$\",\"code\",null,{\"children\":\"true\"}],\" 似乎很奇怪；然而，能夠始終假設 API Token 可用並可透過 \",[\"$\",\"code\",null,{\"children\":\"tokenCan\"}],\" 方法進行檢查是很方便的。透過採取這種方法，你可以在應用程式的 Authorization Policies 中始終呼叫 \",[\"$\",\"code\",null,{\"children\":\"tokenCan\"}],\" 方法，而不必擔心請求是從應用程式的 UI 觸發的，還是由你的 API 的第三方消費者發起的。\"]}]\n41:[\"$\",\"a\",null,{\"name\":\"protecting-routes\"}]\n42:[\"$\",\"h3\",null,{\"id\":\"保護路由-protecting-routes\",\"children\":[\"$\",\"a\",null,{\"href\":\"#保護路由-protecting-routes\",\"children\":\"保護路由 (Protecting Routes)\"}]}]\n43:[\"$\",\"p\",null,{\"children\":[\"為了保護路由，使所有傳入的請求都必須經過驗證，你應該將 \",[\"$\",\"code\",null,{\"children\":\"sanctum\"}],\" 驗證 Guard 附加到 \",[\"$\",\"code\",null,{\"children\":\"routes/web.php\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"routes/api.php\"}],\" 路由檔案中的受保護路由。此 Guard 將確保傳入的請求被驗證為有狀態的、Cookie 驗證的請求，或者如果請求來自第三方，則包含有效的 API Token 標頭。\"]}]\n44:[\"$\",\"p\",null,{\"children\":[\"你可能想知道為什麼我們建議你使用 \",[\"$\",\"code\",null,{\"children\":\"sanctum\"}],\" Guard 來驗證應用程式 \",[\"$\",\"code\",null,{\"children\":\"routes/web.php\"}],\" 檔案中的路由。請記住，Sanctum 會先嘗試使用 Laravel 典型的 Session 驗證 Cookie 來驗證傳入的請求。如果該 Cookie 不存在，Sanctum 將嘗試使用請求的 \",[\"$\",\"code\",null,{\"children\":\"Authorization\"}],\" 標頭中的 Token 來驗證請求。此外，使用 Sanctum 驗證所有請求可確保我們始終可以在當前驗證的使用者實例上呼叫 \",[\"$\",\"code\",null,{\"children\":\"tokenCan\"}],\" 方法：\"]}]\n"])</script><script>self.__next_f.push([1,"45:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" Illuminate\\\\Http\\\\Request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"Route\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"get\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'/user'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"Request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $request) {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"();\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"})\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"middleware\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'auth:sanctum'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\");\"}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"46:[\"$\",\"a\",null,{\"name\":\"revoking-tokens\"}]\n47:[\"$\",\"h3\",null,{\"id\":\"撤銷-token-revoking-tokens\",\"children\":[\"$\",\"a\",null,{\"href\":\"#撤銷-token-revoking-tokens\",\"children\":\"撤銷 Token (Revoking Tokens)\"}]}]\n48:[\"$\",\"p\",null,{\"children\":[\"你可以透過使用 \",[\"$\",\"code\",null,{\"children\":\"Laravel\\\\Sanctum\\\\HasApiTokens\"}],\" Trait 提供的 \",[\"$\",\"code\",null,{\"children\":\"tokens\"}],\" 關聯從資料庫中刪除 Token 來「撤銷」它們：\"]}]\n"])</script><script>self.__next_f.push([1,"49:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"// Revoke all tokens...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"$$user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"tokens\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"()\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"delete\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"();\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"// Revoke the token that was used to authenticate the current request...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"$$request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"()\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"currentAccessToken\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"()\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"delete\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"();\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"// Revoke a specific token...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"$$user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"tokens\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"()\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"where\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'id'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", $tokenId)\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"delete\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"();\"}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"4a:[\"$\",\"a\",null,{\"name\":\"token-expiration\"}]\n4b:[\"$\",\"h3\",null,{\"id\":\"token-過期-token-expiration\",\"children\":[\"$\",\"a\",null,{\"href\":\"#token-過期-token-expiration\",\"children\":\"Token 過期 (Token Expiration)\"}]}]\n4c:[\"$\",\"p\",null,{\"children\":[\"預設情況下，Sanctum Token 永不過期，只能透過 \",[\"$\",\"a\",null,{\"href\":\"#revoking-tokens\",\"children\":\"撤銷 Token\"}],\" 來使其無效。然而，如果你想為應用程式的 API Token 設定過期時間，你可以透過應用程式 \",[\"$\",\"code\",null,{\"children\":\"sanctum\"}],\" 設定檔中定義的 \",[\"$\",\"code\",null,{\"children\":\"expiration\"}],\" 設定選項來實現。此設定選項定義了發行的 Token 被視為過期之前的分鐘數：\"]}]\n4d:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'expiration'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" 525600\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}]}]}]\n4e:[\"$\",\"p\",null,{\"children\":[\"如果你想獨立指定每個 Token 的過期時間，你可以透過將過期時間作為第三個參數提供給 \",[\"$\",\"code\",null,{\"children\":\"createToken\"}],\" 方法來實現：\"]}]\n"])</script><script>self.__next_f.push([1,"4f:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"createToken\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"    'token-name'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'*'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"], \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"now\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"()\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"addWeek\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"plainTextToken;\"}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"50:[\"$\",\"p\",null,{\"children\":[\"如果你為應用程式設定了 Token 過期時間，你可能還希望 \",[\"$\",\"a\",null,{\"href\":\"/docs/scheduling\",\"children\":\"排程任務\"}],\" 來修剪應用程式的過期 Token。幸運的是，Sanctum 包含一個 \",[\"$\",\"code\",null,{\"children\":\"sanctum:prune-expired\"}],\" Artisan 指令，你可以用它來完成此任務。例如，你可以設定一個排程任務來刪除所有已過期至少 24 小時的過期 Token 資料庫記錄：\"]}]\n"])</script><script>self.__next_f.push([1,"51:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" Illuminate\\\\Support\\\\Facades\\\\Schedule\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"Schedule\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"command\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'sanctum:prune-expired --hours=24'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"daily\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"();\"}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"52:[\"$\",\"a\",null,{\"name\":\"spa-authentication\"}]\n53:[\"$\",\"h2\",null,{\"id\":\"spa-驗證-spa-authentication-1\",\"children\":[\"$\",\"a\",null,{\"href\":\"#spa-驗證-spa-authentication-1\",\"children\":\"SPA 驗證 (SPA Authentication)\"}]}]\n54:[\"$\",\"p\",null,{\"children\":\"Sanctum 的存在也是為了提供一種簡單的方法來驗證需要與 Laravel 驅動的 API 進行通訊的單頁應用程式 (SPA)。這些 SPA 可能存在於與你的 Laravel 應用程式相同的儲存庫中，或者可能是一個完全獨立的儲存庫。\"}]\n55:[\"$\",\"p\",null,{\"children\":\"對於此功能，Sanctum 不使用任何種類的 Token。相反地，Sanctum 使用 Laravel 內建的 Cookie 基礎 Session 驗證服務。這種驗證方法提供了 CSRF 保護、Session 驗證的好處，並防止驗證憑證透過 XSS 洩漏。\"}]\n56:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\n為了進行驗證，你的 SPA 和 API 必須共享相同的頂級網域。但是，它們可以位於不同的子網域上。此外，你應該確保在請求中發送 \",[\"$\",\"code\",null,{\"children\":\"Accept: application/json\"}],\" 標頭以及 \",[\"$\",\"code\",null,{\"children\":\"Referer\"}],\" 或 \",[\"$\",\"code\",null,{\"children\":\"Origin\"}],\" 標頭。\"]}],\"\\n\"]}]\n57:[\"$\",\"a\",null,{\"name\":\"spa-configuration\"}]\n58:[\"$\",\"h3\",null,{\"id\":\"設定-configuration-1\",\"children\":[\"$\",\"a\",null,{\"href\":\"#設定-configuration-1\",\"children\":\"設定 (Configuration)\"}]}]\n59:[\"$\",\"a\",null,{\"name\":\"configuring-your-first-party-domains\"}]\n5a:[\"$\",\"h4\",null,{\"id\":\"設定你的第一方網域-configuring-your-first-party-domains\",\"children\":[\"$\",\"a\",null,{\"href\":\"#設定你的第一方網域-configuring-your-first-party-domains\",\"children\":\"設定你的第一方網域 (Configuring Your First-Party Domains)\"}]}]\n5b:[\"$\",\"p\",null,{\"children\":[\"首先，你應該設定你的 SPA 將從哪些網域發出請求。你可以在 \",[\"$\",\"code\",null,{\"children\":\"sanctum\"}],\" 設定檔中使用 \",[\"$\",\"code\",null,{\"children\":\"stateful\"}],\" 設定選項來設定這些網域。此設定決定了哪些網域在向你的 API 發出請求時，將使用 Laravel Session Cookie 維持「有狀態 (stateful)」驗證。\"]}]\n5c:[\"$\",\"p\",null,{\"children\":[\"為了協助你設定第一方有狀態網域，Sanctum 提供了兩個輔助函式，你可以將其包含在設定中。首先，\",[\"$\",\"code\",null,{\"children\":\"Sanctum::currentApplicationUrlWithPort()\"}],\" 將回傳 \",[\"$\",\"code\",null,{\"children\":\"APP_URL\"}],\" 環境變數中的當前應用程式 URL，而 \",[\"$\",\"code\",null,{\"children\":\"Sanctum::currentRequestHost()\"}],\" 將在有狀態網域列表中注入一個佔位符，該佔位符在執行時將被當前請求的主機替換，以便所有具有相同網域的請求都被視為有狀態。\"]}]\n5d:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\n如果你是透過包含連接埠的 URL (\",[\"$\",\"code\",null,{\"children\":\"127.0.0.1:8000\"}],\") 存取你的應用程式，你應該確保將連接埠號包含在網域中。\"]}],\"\\n\"]}]\n5e:[\"$\",\"a\",null,{\"name\":\"sanctum-middleware\"}]\n5f:[\"$\",\"h4\",null,{\"id\":\"sanctum-middleware\",\"children\":[\"$\",\"a\",null,{\"href\":\"#sanctum-middleware\",\"children\":\"Sanctum Middleware\"}]}]\n60:[\"$\",\"p\",null,{\"children\":[\"接下來，你應該指示 Laravel，來自 SPA 的傳入請求可以使用 Laravel 的 Session Cookie 進行驗證，同時仍允許來自第三方或行動應用程式的請求使用 API Token 進行驗證。這可以透過在應用程式的 \",[\"$\",\"code\",null,{\"children\":\"bootstrap/app.php\"}],\" 檔案中呼叫 \",[\"$\",\"code\",null,{\"children\":\"statefulApi\"}],\" Middleware 方法輕鬆完成：\"]}]\n"])</script><script>self.__next_f.push([1,"61:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"withMiddleware\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"Middleware\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $middleware)\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" void\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    $middleware\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"statefulApi\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"();\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"})\"}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"62:[\"$\",\"a\",null,{\"name\":\"cors-and-cookies\"}]\n63:[\"$\",\"h4\",null,{\"id\":\"cors-和-cookies-cors-and-cookies\",\"children\":[\"$\",\"a\",null,{\"href\":\"#cors-和-cookies-cors-and-cookies\",\"children\":\"CORS 和 Cookies (CORS and Cookies)\"}]}]\n64:[\"$\",\"p\",null,{\"children\":\"如果你在從執行於單獨子網域的 SPA 驗證應用程式時遇到問題，你可能錯誤設定了 CORS (跨來源資源共用) 或 Session Cookie 設定。\"}]\n65:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"config/cors.php\"}],\" 設定檔預設未發佈。如果你需要自訂 Laravel 的 CORS 選項，你應該使用 \",[\"$\",\"code\",null,{\"children\":\"config:publish\"}],\" Artisan 指令發佈完整的 \",[\"$\",\"code\",null,{\"children\":\"cors\"}],\" 設定檔：\"]}]\n66:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"php\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" artisan\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" config:publish\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" cors\"}]]}]}]}]\n67:[\"$\",\"p\",null,{\"children\":[\"接下來，你應該確保應用程式的 CORS 設定回傳值為 \",[\"$\",\"code\",null,{\"children\":\"True\"}],\" 的 \",[\"$\",\"code\",null,{\"children\":\"Access-Control-Allow-Credentials\"}],\" 標頭。這可以透過將應用程式 \",[\"$\",\"code\",null,{\"children\":\"config/cors.php\"}],\" 設定檔中的 \",[\"$\",\"code\",null,{\"children\":\"supports_credentials\"}],\" 選項設定為 \",[\"$\",\"code\",null,{\"children\":\"true\"}],\" 來完成。\"]}]\n68:[\"$\",\"p\",null,{\"children\":[\"此外，你應該在應用程式的全域 \",[\"$\",\"code\",null,{\"children\":\"axios\"}],\" 實例上啟用 \",[\"$\",\"code\",null,{\"children\":\"withCredentials\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"withXSRFToken\"}],\" 選項。通常，這應該在你的 \",[\"$\",\"code\",null,{\"children\":\"resources/js/bootstrap.js\"}],\" 檔案中執行。如果你不使用 Axios 從前端發出 HTTP 請求，你應該在自己的 HTTP 用戶端上執行等效的設定：\"]}]\n69:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"axios.defaults.withCredentials \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" true\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"axios.defaults.withXSRFToken \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" true\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}]]}]}]\n6a:[\"$\",\"p\",null,{\"children\":[\"最後，你應該確保應用程式的 Session Cookie 網域設定支援你的根網域的任何子網域。你可以透過在應用程式的 \",[\"$\",\"code\",null,{\"children\":\"config/session.php\"}],\" 設定檔中為網域加上前導 \",[\"$\",\"code\",null,{\"children\":\".\"}],\" 來完成此操作：\"]}]\n6b:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'domain'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" '.domain.com'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}]}]}]\n6c:[\"$\",\"a\",null,{\"name\":\"spa-authent"])</script><script>self.__next_f.push([1,"icating\"}]\n6d:[\"$\",\"h3\",null,{\"id\":\"驗證-authenticating\",\"children\":[\"$\",\"a\",null,{\"href\":\"#驗證-authenticating\",\"children\":\"驗證 (Authenticating)\"}]}]\n6e:[\"$\",\"a\",null,{\"name\":\"csrf-protection\"}]\n6f:[\"$\",\"h4\",null,{\"id\":\"csrf-保護-csrf-protection\",\"children\":[\"$\",\"a\",null,{\"href\":\"#csrf-保護-csrf-protection\",\"children\":\"CSRF 保護 (CSRF Protection)\"}]}]\n70:[\"$\",\"p\",null,{\"children\":[\"要驗證你的 SPA，你的 SPA 的「登入」頁面應首先向 \",[\"$\",\"code\",null,{\"children\":\"/sanctum/csrf-cookie\"}],\" 端點發出請求，以初始化應用程式的 CSRF 保護：\"]}]\n"])</script><script>self.__next_f.push([1,"71:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"axios.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"get\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"/sanctum/csrf-cookie\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\").\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"response\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"  // Login...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"});\"}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"72:[\"$\",\"p\",null,{\"children\":[\"在此請求期間，Laravel 將設定一個包含當前 CSRF Token 的 \",[\"$\",\"code\",null,{\"children\":\"XSRF-TOKEN\"}],\" Cookie。然後，此 Token 應進行 URL 解碼並在後續請求的 \",[\"$\",\"code\",null,{\"children\":\"X-XSRF-TOKEN\"}],\" 標頭中傳遞，某些 HTTP 用戶端函式庫 (如 Axios 和 Angular HttpClient) 會自動為你執行此操作。如果你的 JavaScript HTTP 函式庫沒有為你設定該值，你需要手動設定 \",[\"$\",\"code\",null,{\"children\":\"X-XSRF-TOKEN\"}],\" 標頭以符合此路由設定的 \",[\"$\",\"code\",null,{\"children\":\"XSRF-TOKEN\"}],\" Cookie 的 URL 解碼值。\"]}]\n73:[\"$\",\"a\",null,{\"name\":\"logging-in\"}]\n74:[\"$\",\"h4\",null,{\"id\":\"登入-logging-in\",\"children\":[\"$\",\"a\",null,{\"href\":\"#登入-logging-in\",\"children\":\"登入 (Logging In)\"}]}]\n75:[\"$\",\"p\",null,{\"children\":[\"一旦 CSRF 保護初始化完成，你應該向 Laravel 應用程式的 \",[\"$\",\"code\",null,{\"children\":\"/login\"}],\" 路由發出 \",[\"$\",\"code\",null,{\"children\":\"POST\"}],\" 請求。此 \",[\"$\",\"code\",null,{\"children\":\"/login\"}],\" 路由可以 \",[\"$\",\"a\",null,{\"href\":\"/docs/authentication#authenticating-users\",\"children\":\"手動實作\"}],\" 或使用像 \",[\"$\",\"a\",null,{\"href\":\"/docs/fortify\",\"children\":\"Laravel Fortify\"}],\" 這樣的無頭驗證套件。\"]}]\n76:[\"$\",\"p\",null,{\"children\":[\"如果登入請求成功，你將被驗證，並且對應用程式路由的後續請求將透過 Laravel 應用程式發給用戶端的 Session Cookie 自動進行驗證。此外，由於你的應用程式已經向 \",[\"$\",\"code\",null,{\"children\":\"/sanctum/csrf-cookie\"}],\" 路由發出請求，只要你的 JavaScript HTTP 用戶端在 \",[\"$\",\"code\",null,{\"children\":\"X-XSRF-TOKEN\"}],\" 標頭中發送 \",[\"$\",\"code\",null,{\"children\":\"XSRF-TOKEN\"}],\" Cookie 的值，後續請求應自動獲得 CSRF 保護。\"]}]\n77:[\"$\",\"p\",null,{\"children\":\"當然，如果使用者的 Session 由於缺乏活動而過期，對 Laravel 應用程式的後續請求可能會收到 401 或 419 HTTP 錯誤回應。在這種情況下，你應該將使用者重新導向到 SPA 的登入頁面。\"}]\n78:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\n你可以自由編寫自己的 \",[\"$\",\"code\",null,{\"children\":\"/login\"}],\" 端點；但是，你應該確保它使用標準的、\",[\"$\",\"a\",null,{\"href\":\"/docs/authentication#authenticating-users\",\"children\":\"Laravel 提供的 Session 基礎驗證服務\"}],\" 來驗證使用者。通常，這意味著使用 \",[\"$\",\"code\",null,{\"children\":\"web\"}],\" 驗證 Guard。\"]}],\"\\n\"]}]\n79:[\"$\",\"a\",null,{\"name\":\"protecting-spa-routes\"}]\n7a:[\"$\",\"h3\",null,{\"id\":\"保護路由-protecting-routes-1\",\"children\":[\"$\",\"a\",null,{\"href\":\"#保護路由-protecting-routes-1\",\"children\":\"保護路由 (Protecting Routes)\"}]}]\n7b:[\"$\",\"p\",null,{\"children\":[\"為了保護路由，使所有傳入的請求都必須經過驗證，你應該將 \",[\"$\",\"code\",null,{\"children\":\"sanctum\"}],\" 驗證 Guard 附加到 \",[\"$\",\"code\",null,{\"children\":\"routes/api.php\"}],\" 檔案中的 API 路由。此 Guard 將確保傳入的請求被驗證為來自 SPA 的有狀態驗證請求，或者如果請求來自第三方，則包含有效的 API Token 標頭：\"]}]\n"])</script><script>self.__next_f.push([1,"7c:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" Illuminate\\\\Http\\\\Request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"Route\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"get\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'/user'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"Request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $request) {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"();\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"})\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"middleware\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'auth:sanctum'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\");\"}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"7d:[\"$\",\"a\",null,{\"name\":\"authorizing-private-broadcast-channels\"}]\n7e:[\"$\",\"h3\",null,{\"id\":\"授權私有廣播頻道-authorizing-private-broadcast-channels\",\"children\":[\"$\",\"a\",null,{\"href\":\"#授權私有廣播頻道-authorizing-private-broadcast-channels\",\"children\":\"授權私有廣播頻道 (Authorizing Private Broadcast Channels)\"}]}]\n7f:[\"$\",\"p\",null,{\"children\":[\"如果你的 SPA 需要驗證 \",[\"$\",\"a\",null,{\"href\":\"/docs/broadcasting#authorizing-channels\",\"children\":\"私有 / 存在廣播頻道\"}],\"，你應該從應用程式的 \",[\"$\",\"code\",null,{\"children\":\"bootstrap/app.php\"}],\" 檔案中包含的 \",[\"$\",\"code\",null,{\"children\":\"withRouting\"}],\" 方法中移除 \",[\"$\",\"code\",null,{\"children\":\"channels\"}],\" 項目。相反地，你應該呼叫 \",[\"$\",\"code\",null,{\"children\":\"withBroadcasting\"}],\" 方法，以便你可以為應用程式的廣播路由指定正確的 Middleware：\"]}]\n"])</script><script>self.__next_f.push([1,"80:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" Application\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"configure\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"basePath\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"dirname\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"__DIR__\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"))\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    -\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"withRouting\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"        web\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"__DIR__\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'/../routes/web.php'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"        // ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    )\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    -\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"withBroadcasting\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        __DIR__\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'/../routes/channels.php'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'prefix'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" 'api'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'middleware'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'api'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'auth:sanctum'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]],\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    )\"}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"81:[\"$\",\"p\",null,{\"children\":[\"接下來，為了使 Pusher 的授權請求成功，你在初始化 \",[\"$\",\"a\",null,{\"href\":\"/docs/broadcasting#client-side-installation\",\"children\":\"Laravel Echo\"}],\" 時需要提供一個自訂的 Pusher \",[\"$\",\"code\",null,{\"children\":\"authorizer\"}],\"。這允許你的應用程式設定 Pusher 使用 \",[\"$\",\"a\",null,{\"href\":\"#cors-and-cookies\",\"children\":\"已正確設定跨網域請求\"}],\" 的 \",[\"$\",\"code\",null,{\"children\":\"axios\"}],\" 實例：\"]}]\n"])</script><script>self.__next_f.push([1,"82:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"window.Echo \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" Echo\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"  broadcaster: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"pusher\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"  cluster: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"meta\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".env.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"VITE_PUSHER_APP_CLUSTER\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"  encrypted: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"true\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"  key: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"meta\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".env.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"VITE_PUSHER_APP_KEY\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"  authorizer\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"channel\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"options\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"      authorize\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"socketId\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"callback\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        axios\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"          .\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"post\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"/api/broadcasting/auth\\\"\"}],\"$L9e\"]}],\"\\n\",\"$L9f\",\"\\n\",\"$La0\",\"\\n\",\"$La1\",\"\\n\",\"$La2\",\"\\n\",\"$La3\",\"\\n\",\"$La4\",\"\\n\",\"$La5\",\"\\n\",\"$La6\",\"\\n\",\"$La7\",\"\\n\",\"$La8\",\"\\n\",\"$La9\",\"\\n\",\"$Laa\",\"\\n\",\"$Lab\"]}]}]\n"])</script><script>self.__next_f.push([1,"83:[\"$\",\"a\",null,{\"name\":\"mobile-application-authentication\"}]\n84:[\"$\",\"h2\",null,{\"id\":\"行動應用程式驗證-mobile-application-authentication\",\"children\":[\"$\",\"a\",null,{\"href\":\"#行動應用程式驗證-mobile-application-authentication\",\"children\":\"行動應用程式驗證 (Mobile Application Authentication)\"}]}]\n85:[\"$\",\"p\",null,{\"children\":\"你也可以使用 Sanctum Token 來驗證你的行動應用程式對 API 的請求。驗證行動應用程式請求的過程類似於驗證第三方 API 請求；但是，發行 API Token 的方式略有不同。\"}]\n86:[\"$\",\"a\",null,{\"name\":\"issuing-mobile-api-tokens\"}]\n87:[\"$\",\"h3\",null,{\"id\":\"發行-api-token-issuing-api-tokens-1\",\"children\":[\"$\",\"a\",null,{\"href\":\"#發行-api-token-issuing-api-tokens-1\",\"children\":\"發行 API Token (Issuing API Tokens)\"}]}]\n88:[\"$\",\"p\",null,{\"children\":\"首先，建立一個路由，該路由接受使用者的電子郵件 / 使用者名稱、密碼和裝置名稱，然後交換這些憑證以獲取新的 Sanctum Token。提供給此端點的「裝置名稱」僅供參考，可以是任何你想要的值。通常，裝置名稱值應該是使用者可以識別的名稱，例如「Nuno's iPhone 12」。\"}]\n89:[\"$\",\"p\",null,{\"children\":\"通常，你會從行動應用程式的「登入」畫面請求 Token 端點。端點將回傳純文字 API Token，然後可以將其儲存在行動裝置上並用於發出其他 API 請求：\"}]\n"])</script><script>self.__next_f.push([1,"8a:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" App\\\\Models\\\\User\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" Illuminate\\\\Http\\\\Request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" Illuminate\\\\Support\\\\Facades\\\\Hash\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" Illuminate\\\\Validation\\\\ValidationException\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"Route\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"post\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'/sanctum/token'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"Request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $request) {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    $request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"validate\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"([\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        'email'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" 'required|email'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        'password'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" 'required'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        'device_name'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" 'required'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    ]);\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    $user \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" User\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"where\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],\"$Lac\",\"$Lad\",\"$Lae\",\"$Laf\",\"$Lb0\",\"$Lb1\",\"$Lb2\"]}],\"\\n\",\"$Lb3\",\"\\n\",\"$Lb4\",\"\\n\",\"$Lb5\",\"\\n\",\"$Lb6\",\"\\n\",\"$Lb7\",\"\\n\",\"$Lb8\",\"\\n\",\"$Lb9\",\"\\n\",\"$Lba\",\"\\n\",\"$Lbb\"]}]}]\n"])</script><script>self.__next_f.push([1,"8b:[\"$\",\"p\",null,{\"children\":[\"當行動應用程式使用 Token 向你的應用程式發出 API 請求時，應將 Token 包含在 \",[\"$\",\"code\",null,{\"children\":\"Authorization\"}],\" 標頭中作為 \",[\"$\",\"code\",null,{\"children\":\"Bearer\"}],\" Token。\"]}]\n8c:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\n為行動應用程式發行 Token 時，你也可以自由指定 \",[\"$\",\"a\",null,{\"href\":\"#token-abilities\",\"children\":\"Token 能力\"}],\"。\"]}],\"\\n\"]}]\n8d:[\"$\",\"a\",null,{\"name\":\"protecting-mobile-api-routes\"}]\n8e:[\"$\",\"h3\",null,{\"id\":\"保護路由-protecting-routes-2\",\"children\":[\"$\",\"a\",null,{\"href\":\"#保護路由-protecting-routes-2\",\"children\":\"保護路由 (Protecting Routes)\"}]}]\n8f:[\"$\",\"p\",null,{\"children\":[\"如前所述，你可以透過將 \",[\"$\",\"code\",null,{\"children\":\"sanctum\"}],\" 驗證 Guard 附加到路由來保護路由，使所有傳入的請求都必須經過驗證：\"]}]\n"])</script><script>self.__next_f.push([1,"90:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"Route\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"get\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'/user'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"Request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $request) {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"();\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"})\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"middleware\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'auth:sanctum'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\");\"}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"91:[\"$\",\"a\",null,{\"name\":\"revoking-mobile-api-tokens\"}]\n92:[\"$\",\"h3\",null,{\"id\":\"撤銷-token-revoking-tokens-1\",\"children\":[\"$\",\"a\",null,{\"href\":\"#撤銷-token-revoking-tokens-1\",\"children\":\"撤銷 Token (Revoking Tokens)\"}]}]\n93:[\"$\",\"p\",null,{\"children\":[\"為了允許使用者撤銷發行給行動裝置的 API Token，你可以在 Web 應用程式 UI 的「帳戶設定」部分按名稱列出它們，並附上「撤銷」按鈕。當使用者點擊「撤銷」按鈕時，你可以從資料庫中刪除該 Token。請記住，你可以透過 \",[\"$\",\"code\",null,{\"children\":\"Laravel\\\\Sanctum\\\\HasApiTokens\"}],\" Trait 提供的 \",[\"$\",\"code\",null,{\"children\":\"tokens\"}],\" 關聯存取使用者的 API Token：\"]}]\n"])</script><script>self.__next_f.push([1,"94:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"// Revoke all tokens...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"$$user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"tokens\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"()\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"delete\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"();\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"// Revoke a specific token...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"$$user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"tokens\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"()\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"where\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'id'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", $tokenId)\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"delete\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"();\"}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"95:[\"$\",\"a\",null,{\"name\":\"testing\"}]\n96:[\"$\",\"h2\",null,{\"id\":\"測試-testing\",\"children\":[\"$\",\"a\",null,{\"href\":\"#測試-testing\",\"children\":\"測試 (Testing)\"}]}]\n97:[\"$\",\"p\",null,{\"children\":[\"在測試時，可以使用 \",[\"$\",\"code\",null,{\"children\":\"Sanctum::actingAs\"}],\" 方法來驗證使用者並指定應授予其 Token 的能力：\"]}]\n"])</script><script>self.__next_f.push([1,"98:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" App\\\\Models\\\\User\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" Laravel\\\\Sanctum\\\\Sanctum\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"test\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'task list can be retrieved'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" () {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"    Sanctum\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"actingAs\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        User\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"factory\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"()\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"create\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'view-tasks'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    );\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    $response \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" $this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"get\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'/api/task'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\");\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    $response\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"assertOk\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"();\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"});\"}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"99:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" App\\\\Models\\\\User\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" Laravel\\\\Sanctum\\\\Sanctum\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"public\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" function\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" test_task_list_can_be_retrieved\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"()\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" void\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"{\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"    Sanctum\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"actingAs\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        User\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"factory\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"()\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"create\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'view-tasks'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    );\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    $response \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" $this\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"get\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'/api/task'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\");\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    $response\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"assertOk\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"();\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"}\"}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"9a:[\"$\",\"p\",null,{\"children\":[\"如果你想授予 Token 所有能力，你應該在提供給 \",[\"$\",\"code\",null,{\"children\":\"actingAs\"}],\" 方法的能力列表中包含 \",[\"$\",\"code\",null,{\"children\":\"*\"}],\"：\"]}]\n"])</script><script>self.__next_f.push([1,"9b:[\"$\",\"$L9d\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"Sanctum\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"actingAs\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"    User\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"factory\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"()\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"create\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'*'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\");\"}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"9c:[\"$\",\"$Lbc\",null,{\"items\":[{\"id\":\"簡介-introduction\",\"text\":\"簡介 (Introduction)\",\"level\":2},{\"id\":\"運作原理-how-it-works\",\"text\":\"運作原理 (How it Works)\",\"level\":3},{\"id\":\"api-tokens\",\"text\":\"API Tokens\",\"level\":4},{\"id\":\"spa-驗證-spa-authentication\",\"text\":\"SPA 驗證 (SPA Authentication)\",\"level\":4},{\"id\":\"安裝-installation\",\"text\":\"安裝 (Installation)\",\"level\":2},{\"id\":\"設定-configuration\",\"text\":\"設定 (Configuration)\",\"level\":2},{\"id\":\"覆寫預設-model-overriding-default-models\",\"text\":\"覆寫預設 Model (Overriding Default Models)\",\"level\":3},{\"id\":\"api-token-驗證-api-token-authentication\",\"text\":\"API Token 驗證 (API Token Authentication)\",\"level\":2},{\"id\":\"發行-api-token-issuing-api-tokens\",\"text\":\"發行 API Token (Issuing API Tokens)\",\"level\":3},{\"id\":\"token-能力-token-abilities\",\"text\":\"Token 能力 (Token Abilities)\",\"level\":3},{\"id\":\"token-能力-middleware-token-ability-middleware\",\"text\":\"Token 能力 Middleware (Token Ability Middleware)\",\"level\":4},{\"id\":\"第一方-ui-發起的請求-first-party-ui-initiated-requests\",\"text\":\"第一方 UI 發起的請求 (First-Party UI Initiated Requests)\",\"level\":4},{\"id\":\"保護路由-protecting-routes\",\"text\":\"保護路由 (Protecting Routes)\",\"level\":3},{\"id\":\"撤銷-token-revoking-tokens\",\"text\":\"撤銷 Token (Revoking Tokens)\",\"level\":3},{\"id\":\"token-過期-token-expiration\",\"text\":\"Token 過期 (Token Expiration)\",\"level\":3},{\"id\":\"spa-驗證-spa-authentication\",\"text\":\"SPA 驗證 (SPA Authentication)\",\"level\":2},{\"id\":\"設定-configuration\",\"text\":\"設定 (Configuration)\",\"level\":3},{\"id\":\"設定你的第一方網域-configuring-your-first-party-domains\",\"text\":\"設定你的第一方網域 (Configuring Your First-Party Domains)\",\"level\":4},{\"id\":\"sanctum-middleware\",\"text\":\"Sanctum Middleware\",\"level\":4},{\"id\":\"cors-和-cookies-cors-and-cookies\",\"text\":\"CORS 和 Cookies (CORS and Cookies)\",\"level\":4},{\"id\":\"驗證-authenticating\",\"text\":\"驗證 (Authenticating)\",\"level\":3},{\"id\":\"csrf-保護-csrf-protection\",\"text\":\"CSRF 保護 (CSRF Protection)\",\"level\":4},{\"id\":\"登入-logging-in\",\"text\":\"登入 (Logging In)\",\"level\":4},{\"id\":\"保護路由-protecting-routes\",\"text\":\"保護路由 (Protecting Routes)\",\"level\":3},{\"id\":\"授權私有廣播頻道-authorizing-private-broadcast-channels\",\"text\":\"授權私有廣播頻道 (Authorizing Private Broadcast Channels)\",\"level\":3},{\"id\":\"行動應用程式驗證-mobile-application-authentication\",\"text\":\"行動應用程式驗證 (Mobile Application Authentication)\",\"level\":2},{\"id\":\"發行-api-token-issuing-api-tokens\",\"text\":\"發行 API Token (Issuing API Tokens)\",\"level\":3},{\"id\":\"保護路由-protecting-routes\",\"text\":\"保護路由 (Protecting Routes)\",\"level\":3},{\"id\":\"撤銷-token-revoking-tokens\",\"text\":\"撤銷 Token (Revoking Tokens)\",\"level\":3},{\"id\":\"測試-testing\",\"text\":\"測試 (Testing)\",\"level\":2}]}]\n"])</script><script>self.__next_f.push([1,"9e:[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", {\"}]\n9f:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"            socket_id: socketId,\"}]}]\na0:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"            channel_name: channel.name,\"}]}]\na1:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"          })\"}]}]\na2:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"          .\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"then\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"response\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}]]}]\na3:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"            callback\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"false\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", response.data);\"}]]}]\na4:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"          })\"}]}]\na5:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"          .\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"error\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}]]}]\na6:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"            callback\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"true\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", error);\"}]]}]\na7:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"          });\"}]}]\na8:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"      },\"}]}]\na9:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    };\"}]}]\naa:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"  },\"}]}]\nab:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"});\"}]}]\nac:[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'email'\"}]\nad:[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", $request\"}]\nae:[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}]\naf:[\"$\",\"span\",null"])</script><script>self.__next_f.push([1,",{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"email)\"}]\nb0:[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}]\nb1:[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"first\"}]\nb2:[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"();\"}]\nb3:[\"$\",\"span\",null,{\"className\":\"line\"}]\nb4:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    if\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"!\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $user \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"||\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" !\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" Hash\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"check\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"($request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"password, $user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"password)) {\"}]]}]\nb5:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        throw\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" ValidationException\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"withMessages\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"([\"}]]}]\nb6:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"            'email'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'The provided credentials are incorrect.'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"],\"}]]}]\nb7:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        ]);\"}]}]\nb8:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    }\"}]}]\nb9:[\"$\",\"span\",null,{\"className\":\"line\"}]\nba:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" $user\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"createToken\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"($request\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"device_name)\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"-\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"child"])</script><script>self.__next_f.push([1,"ren\":\"plainTextToken;\"}]]}]\nbb:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"});\"}]}]\n"])</script></body></html>