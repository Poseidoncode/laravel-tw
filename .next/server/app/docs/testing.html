<!DOCTYPE html><!--oT9fkv1Rls7posDurDqoH--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/ce232d23a2a15dcf.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/cbd55ab9639e1e66.js"/><script src="/_next/static/chunks/87a939617be2fa8c.js" async=""></script><script src="/_next/static/chunks/8368f298651cbd89.js" async=""></script><script src="/_next/static/chunks/6740f161f60c6ab5.js" async=""></script><script src="/_next/static/chunks/turbopack-929fc2ce3ca903db.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/247eb132b7f7b574.js" async=""></script><script src="/_next/static/chunks/796e69ae18b2784c.js" async=""></script><script src="/_next/static/chunks/2b257daea29fbb42.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased"><div hidden=""><!--$--><!--/$--></div><div class="flex min-h-screen bg-background"><div class="w-64 border-r bg-background h-screen sticky top-0 hidden md:block"><div class="p-6 font-bold text-xl border-b flex items-center gap-2"><span class="text-red-600">Laravel</span> Docs（中文）</div><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-65px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="p-4 space-y-2"><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>前言</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">發行說明</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>入門</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/installation"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">安裝</button></a><a class="block" href="/docs/configuration"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">配置</button></a><a class="block" href="/docs/structure"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">目錄結構</button></a><a class="block" href="/docs/lifecycle"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">生命週期</button></a><a class="block" href="/docs/frontend"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">前端</button></a><a class="block" href="/docs/starter-kits"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">啟動套件</button></a><a class="block" href="/docs/deployment"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">部署</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>架構</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>基礎功能</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>深入探討</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>安全性</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>資料庫</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>Eloquent ORM</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>測試</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>其他</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>官方套件</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div class="border-t pt-4 space-y-2"><a class="block" href="/docs/api"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">API 文件</button></a><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">更新日誌</button></a></div></div></div></div></div></div><main class="flex-1 relative"><div class="container mx-auto py-10"><div class="mx-auto max-w-3xl"><div class="mb-8"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">測試：入門</h1><p class="text-xl text-muted-foreground mt-2">Laravel 從一開始就考慮到測試，內建對 Pest 和 PHPUnit 的支援</p></div><article class="prose prose-slate dark:prose-invert max-w-none"><h1 id="測試入門"><a href="#測試入門">測試：入門</a></h1>
<ul>
<li><a href="#introduction">介紹</a></li>
<li><a href="#environment">環境</a></li>
<li><a href="#creating-tests">建立測試</a></li>
<li><a href="#running-tests">執行測試</a>
<ul>
<li><a href="#running-tests-in-parallel">平行執行測試</a></li>
<li><a href="#reporting-test-coverage">報告測試覆蓋率</a></li>
<li><a href="#profiling-tests">分析測試</a></li>
</ul>
</li>
<li><a href="#configuration-caching">設定快取</a></li>
</ul>
<a name="introduction"></a>
<h2 id="介紹"><a href="#介紹">介紹</a></h2>
<p>Laravel 從一開始就考慮到測試。事實上，內建就支援使用 <a href="https://pestphp.com">Pest</a> 和 <a href="https://phpunit.de">PHPUnit</a> 進行測試，並且已經為您的應用程式設定好了 <code>phpunit.xml</code> 檔案。框架還附帶了方便的輔助方法，讓您可以有效地測試您的應用程式。</p>
<p>預設情況下，您的應用程式的 <code>tests</code> 目錄包含兩個目錄：<code>Feature</code> 和 <code>Unit</code>。單元測試 (Unit tests) 是專注於程式碼中非常小、獨立部分的測試。事實上，大多數單元測試可能專注於單一方法。「Unit」測試目錄中的測試不會啟動您的 Laravel 應用程式，因此無法存取您的應用程式的資料庫或其他框架服務。</p>
<p>功能測試 (Feature tests) 可能會測試更大部分的程式碼，包括多個物件如何相互作用，甚至是完整的 HTTP request 到 JSON endpoint。<strong>一般來說，您的大多數測試應該是功能測試。這些類型的測試最能確保您的系統整體按預期運作。</strong></p>
<p><code>Feature</code> 和 <code>Unit</code> 測試目錄中都提供了 <code>ExampleTest.php</code> 檔案。安裝新的 Laravel 應用程式後，執行 <code>vendor/bin/pest</code>、<code>vendor/bin/phpunit</code> 或 <code>php artisan test</code> 命令來執行您的測試。</p>
<a name="environment"></a>
<h2 id="環境"><a href="#環境">環境</a></h2>
<p>執行測試時，Laravel 會自動將 <a href="/docs/configuration#environment-configuration">設定環境</a> 設定為 <code>testing</code>，因為 <code>phpunit.xml</code> 檔案中定義了環境變數。Laravel 也會自動將 session 和 cache 設定為 <code>array</code> 驅動程式，這樣在測試時就不會保留任何 session 或 cache 資料。</p>
<p>您可以根據需要自由定義其他測試環境設定值。<code>testing</code> 環境變數可以在應用程式的 <code>phpunit.xml</code> 檔案中設定，但請確保在執行測試之前使用 <code>config:clear</code> Artisan 命令清除您的設定快取！</p>
<a name="the-env-testing-environment-file"></a>
<h4 id="envtesting-環境檔案"><a href="#envtesting-環境檔案"><code>.env.testing</code> 環境檔案</a></h4>
<p>此外，您可以在專案的根目錄中建立一個 <code>.env.testing</code> 檔案。當執行 Pest 和 PHPUnit 測試或使用 <code>--env=testing</code> 選項執行 Artisan 命令時，將使用此檔案代替 <code>.env</code> 檔案。</p>
<a name="creating-tests"></a>
<h2 id="建立測試"><a href="#建立測試">建立測試</a></h2>
<p>要建立新的測試案例，請使用 <code>make:test</code> Artisan 命令。預設情況下，測試將放置在 <code>tests/Feature</code> 目錄中：</p>
<pre><code class="language-shell">php artisan make:test UserTest
</code></pre>
<p>如果您想在 <code>tests/Unit</code> 目錄中建立測試，您可以在執行 <code>make:test</code> 命令時使用 <code>--unit</code> 選項：</p>
<pre><code class="language-shell">php artisan make:test UserTest --unit
</code></pre>
<blockquote>
<p>[!NOTE]
測試 stubs 可以使用 <a href="/docs/artisan#stub-customization">stub 發布</a> 來自訂。</p>
</blockquote>
<p>測試產生後，您可以像平常一樣使用 Pest 或 PHPUnit 定義測試。要執行您的測試，請從終端機執行 <code>vendor/bin/pest</code>、<code>vendor/bin/phpunit</code> 或 <code>php artisan test</code> 命令：</p>
<pre><code class="language-php">&lt;?php

test(&#x27;basic&#x27;, function () {
    expect(true)-&gt;toBeTrue();
});
</code></pre>
<pre><code class="language-php">&lt;?php

namespace Tests\Unit;

use PHPUnit\Framework\TestCase;

class ExampleTest extends TestCase
{
    /**
     * A basic test example.
     */
    public function test_basic_test(): void
    {
        $this-&gt;assertTrue(true);
    }
}
</code></pre>
<blockquote>
<p>[!WARNING]
如果您在測試類別中定義了自己的 <code>setUp</code> / <code>tearDown</code> 方法，請確保在父類別上呼叫相應的 <code>parent::setUp()</code> / <code>parent::tearDown()</code> 方法。通常，您應該在自己的 <code>setUp</code> 方法開頭呼叫 <code>parent::setUp()</code>，並在 <code>tearDown</code> 方法結尾呼叫 <code>parent::tearDown()</code>。</p>
</blockquote>
<a name="running-tests"></a>
<h2 id="執行測試"><a href="#執行測試">執行測試</a></h2>
<p>如前所述，撰寫測試後，您可以使用 <code>pest</code> 或 <code>phpunit</code> 執行它們：</p>
<pre><code class="language-shell">./vendor/bin/pest
</code></pre>
<pre><code class="language-shell">./vendor/bin/phpunit
</code></pre>
<p>除了 <code>pest</code> 或 <code>phpunit</code> 命令外，您還可以使用 <code>test</code> Artisan 命令來執行測試。Artisan 測試執行器提供詳細的測試報告，以便於開發和除錯：</p>
<pre><code class="language-shell">php artisan test
</code></pre>
<p>任何可以傳遞給 <code>pest</code> 或 <code>phpunit</code> 命令的參數也可以傳遞給 Artisan <code>test</code> 命令：</p>
<pre><code class="language-shell">php artisan test --testsuite=Feature --stop-on-failure
</code></pre>
<a name="running-tests-in-parallel"></a>
<h3 id="平行執行測試"><a href="#平行執行測試">平行執行測試</a></h3>
<p>預設情況下，Laravel 和 Pest / PHPUnit 會在單一 process 中依序執行您的測試。但是，您可以透過跨多個 processes 同時執行測試來大幅減少執行測試所需的時間。首先，您應該安裝 <code>brianium/paratest</code> Composer 套件作為「dev」依賴項。然後，在執行 <code>test</code> Artisan 命令時加入 <code>--parallel</code> 選項：</p>
<pre><code class="language-shell">composer require brianium/paratest --dev

php artisan test --parallel
</code></pre>
<p>預設情況下，Laravel 會建立與您機器上可用 CPU 核心數量相同的 processes。但是，您可以使用 <code>--processes</code> 選項來調整 processes 的數量：</p>
<pre><code class="language-shell">php artisan test --parallel --processes=4
</code></pre>
<blockquote>
<p>[!WARNING]
平行執行測試時，某些 Pest / PHPUnit 選項（例如 <code>--do-not-cache-result</code>）可能無法使用。</p>
</blockquote>
<a name="parallel-testing-and-databases"></a>
<h4 id="平行測試與資料庫"><a href="#平行測試與資料庫">平行測試與資料庫</a></h4>
<p>只要您已設定主要資料庫連線，Laravel 會自動為執行測試的每個平行 process 建立和遷移測試資料庫。測試資料庫會加上 process token 作為後綴，每個 process 都是唯一的。例如，如果您有兩個平行測試 processes，Laravel 會建立並使用 <code>your_db_test_1</code> 和 <code>your_db_test_2</code> 測試資料庫。</p>
<p>預設情況下，測試資料庫會在 <code>test</code> Artisan 命令呼叫之間保留，以便後續的 <code>test</code> 呼叫可以再次使用它們。但是，您可以使用 <code>--recreate-databases</code> 選項來重新建立它們：</p>
<pre><code class="language-shell">php artisan test --parallel --recreate-databases
</code></pre>
<a name="parallel-testing-hooks"></a>
<h4 id="平行測試-hooks"><a href="#平行測試-hooks">平行測試 Hooks</a></h4>
<p>有時候，您可能需要準備應用程式測試使用的某些資源，以便它們可以被多個測試 processes 安全地使用。</p>
<p>使用 <code>ParallelTesting</code> facade，您可以指定在 process 或測試案例的 <code>setUp</code> 和 <code>tearDown</code> 上執行的程式碼。給定的 closures 會接收 <code>$token</code> 和 <code>$testCase</code> 變數，分別包含 process token 和目前的測試案例：</p>
<pre><code class="language-php">&lt;?php

namespace App\Providers;

use Illuminate\Support\Facades\Artisan;
use Illuminate\Support\Facades\ParallelTesting;
use Illuminate\Support\ServiceProvider;
use PHPUnit\Framework\TestCase;

class AppServiceProvider extends ServiceProvider
{
    /**
     * Bootstrap any application services.
     */
    public function boot(): void
    {
        ParallelTesting::setUpProcess(function (int $token) {
            // ...
        });

        ParallelTesting::setUpTestCase(function (int $token, TestCase $testCase) {
            // ...
        });

        // Executed when a test database is created...
        ParallelTesting::setUpTestDatabase(function (string $database, int $token) {
            Artisan::call(&#x27;db:seed&#x27;);
        });

        ParallelTesting::tearDownTestCase(function (int $token, TestCase $testCase) {
            // ...
        });

        ParallelTesting::tearDownProcess(function (int $token) {
            // ...
        });
    }
}
</code></pre>
<a name="accessing-the-parallel-testing-token"></a>
<h4 id="存取平行測試-token"><a href="#存取平行測試-token">存取平行測試 Token</a></h4>
<p>如果您想從應用程式測試程式碼的任何其他位置存取目前的平行 process「token」，您可以使用 <code>token</code> 方法。此 token 是單個測試 process 的唯一字串識別碼，可用於跨平行測試 processes 分隔資源。例如，Laravel 會自動將此 token 附加到每個平行測試 process 建立的測試資料庫末尾：</p>
<p>$token = ParallelTesting::token();</p>
<a name="reporting-test-coverage"></a>
<h3 id="報告測試覆蓋率"><a href="#報告測試覆蓋率">報告測試覆蓋率</a></h3>
<blockquote>
<p>[!WARNING]
此功能需要 <a href="https://xdebug.org">Xdebug</a> 或 <a href="https://pecl.php.net/package/pcov">PCOV</a>。</p>
</blockquote>
<p>執行應用程式測試時，您可能想要確定您的測試案例是否實際覆蓋了應用程式程式碼，以及在執行測試時使用了多少應用程式程式碼。要達成這一點，您可以在呼叫 <code>test</code> 命令時提供 <code>--coverage</code> 選項：</p>
<pre><code class="language-shell">php artisan test --coverage
</code></pre>
<a name="enforcing-a-minimum-coverage-threshold"></a>
<h4 id="強制執行最低覆蓋率門檻"><a href="#強制執行最低覆蓋率門檻">強制執行最低覆蓋率門檻</a></h4>
<p>您可以使用 <code>--min</code> 選項為您的應用程式定義最低測試覆蓋率門檻。如果未達到此門檻，測試套件將失敗：</p>
<pre><code class="language-shell">php artisan test --coverage --min=80.3
</code></pre>
<a name="profiling-tests"></a>
<h3 id="分析測試"><a href="#分析測試">分析測試</a></h3>
<p>Artisan 測試執行器還包含一個方便的機制，用於列出應用程式最慢的測試。使用 <code>--profile</code> 選項呼叫 <code>test</code> 命令，將會顯示十個最慢的測試列表，讓您可以輕鬆調查哪些測試可以改進以加速您的測試套件：</p>
<pre><code class="language-shell">php artisan test --profile
</code></pre>
<a name="configuration-caching"></a>
<h2 id="設定快取"><a href="#設定快取">設定快取</a></h2>
<p>執行測試時，Laravel 會為每個單獨的測試方法啟動應用程式。如果沒有快取的設定檔，每次測試開始時都必須載入應用程式中的每個設定檔。要建立一次設定並在單次執行的所有測試中重複使用它，您可以使用 <code>Illuminate\Foundation\Testing\WithCachedConfig</code> trait：</p>
<pre><code class="language-php">&lt;?php

use Illuminate\Foundation\Testing\WithCachedConfig;

pest()-&gt;use(WithCachedConfig::class);

// ...
</code></pre>
<pre><code class="language-php">&lt;?php

namespace Tests\Feature;

use Illuminate\Foundation\Testing\WithCachedConfig;
use Tests\TestCase;

class ConfigTest extends TestCase
{
    use WithCachedConfig;

    // ...
}
</code></pre></article></div></div><!--$--><!--/$--></main></div><script src="/_next/static/chunks/cbd55ab9639e1e66.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n4:I[93649,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/2b257daea29fbb42.js\"],\"DocsSidebar\"]\n6:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"ViewportBoundary\"]\nb:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"MetadataBoundary\"]\nd:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/ce232d23a2a15dcf.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"oT9fkv1Rls7posDurDqoH\",\"c\":[\"\",\"docs\",\"testing\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"testing\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/ce232d23a2a15dcf.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/796e69ae18b2784c.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/2b257daea29fbb42.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"div\",null,{\"className\":\"flex min-h-screen bg-background\",\"children\":[[\"$\",\"$L4\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 relative\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"className\":\"container mx-auto py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-3xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl\",\"children\":\"測試：入門\"}],[\"$\",\"p\",null,{\"className\":\"text-xl text-muted-foreground mt-2\",\"children\":\"Laravel 從一開始就考慮到測試，內建對 Pest 和 PHPUnit 的支援\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"測試入門\",\"children\":[\"$\",\"a\",null,{\"href\":\"#測試入門\",\"children\":\"測試：入門\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#introduction\",\"children\":\"介紹\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#environment\",\"children\":\"環境\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#creating-tests\",\"children\":\"建立測試\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#running-tests\",\"children\":\"執行測試\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#running-tests-in-parallel\",\"children\":\"平行執行測試\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#reporting-test-coverage\",\"children\":\"報告測試覆蓋率\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#profiling-tests\",\"children\":\"分析測試\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#configuration-caching\",\"children\":\"設定快取\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"introduction\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"介紹\",\"children\":[\"$\",\"a\",null,{\"href\":\"#介紹\",\"children\":\"介紹\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Laravel 從一開始就考慮到測試。事實上，內建就支援使用 \",[\"$\",\"a\",null,{\"href\":\"https://pestphp.com\",\"children\":\"Pest\"}],\" 和 \",[\"$\",\"a\",null,{\"href\":\"https://phpunit.de\",\"children\":\"PHPUnit\"}],\" 進行測試，並且已經為您的應用程式設定好了 \",[\"$\",\"code\",null,{\"children\":\"phpunit.xml\"}],\" 檔案。框架還附帶了方便的輔助方法，讓您可以有效地測試您的應用程式。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"預設情況下，您的應用程式的 \",[\"$\",\"code\",null,{\"children\":\"tests\"}],\" 目錄包含兩個目錄：\",[\"$\",\"code\",null,{\"children\":\"Feature\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"Unit\"}],\"。單元測試 (Unit tests) 是專注於程式碼中非常小、獨立部分的測試。事實上，大多數單元測試可能專注於單一方法。「Unit」測試目錄中的測試不會啟動您的 Laravel 應用程式，因此無法存取您的應用程式的資料庫或其他框架服務。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"功能測試 (Feature tests) 可能會測試更大部分的程式碼，包括多個物件如何相互作用，甚至是完整的 HTTP request 到 JSON endpoint。\",[\"$\",\"strong\",null,{\"children\":\"一般來說，您的大多數測試應該是功能測試。這些類型的測試最能確保您的系統整體按預期運作。\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Feature\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"Unit\"}],\" 測試目錄中都提供了 \",[\"$\",\"code\",null,{\"children\":\"ExampleTest.php\"}],\" 檔案。安裝新的 Laravel 應用程式後，執行 \",[\"$\",\"code\",null,{\"children\":\"vendor/bin/pest\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"vendor/bin/phpunit\"}],\" 或 \",[\"$\",\"code\",null,{\"children\":\"php artisan test\"}],\" 命令來執行您的測試。\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"environment\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"環境\",\"children\":[\"$\",\"a\",null,{\"href\":\"#環境\",\"children\":\"環境\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"執行測試時，Laravel 會自動將 \",[\"$\",\"a\",null,{\"href\":\"/docs/configuration#environment-configuration\",\"children\":\"設定環境\"}],\" 設定為 \",[\"$\",\"code\",null,{\"children\":\"testing\"}],\"，因為 \",[\"$\",\"code\",null,{\"children\":\"phpunit.xml\"}],\" 檔案中定義了環境變數。Laravel 也會自動將 session 和 cache 設定為 \",[\"$\",\"code\",null,{\"children\":\"array\"}],\" 驅動程式，這樣在測試時就不會保留任何 session 或 cache 資料。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"您可以根據需要自由定義其他測試環境設定值。\",[\"$\",\"code\",null,{\"children\":\"testing\"}],\" 環境變數可以在應用程式的 \",[\"$\",\"code\",null,{\"children\":\"phpunit.xml\"}],\" 檔案中設定，但請確保在執行測試之前使用 \",[\"$\",\"code\",null,{\"children\":\"config:clear\"}],\" Artisan 命令清除您的設定快取！\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"the-env-testing-environment-file\"}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"envtesting-環境檔案\",\"children\":[\"$\",\"a\",null,{\"href\":\"#envtesting-環境檔案\",\"children\":[[\"$\",\"code\",null,{\"children\":\".env.testing\"}],\" 環境檔案\"]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"此外，您可以在專案的根目錄中建立一個 \",[\"$\",\"code\",null,{\"children\":\".env.testing\"}],\" 檔案。當執行 Pest 和 PHPUnit 測試或使用 \",[\"$\",\"code\",null,{\"children\":\"--env=testing\"}],\" 選項執行 Artisan 命令時，將使用此檔案代替 \",[\"$\",\"code\",null,{\"children\":\".env\"}],\" 檔案。\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"creating-tests\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"建立測試\",\"children\":[\"$\",\"a\",null,{\"href\":\"#建立測試\",\"children\":\"建立測試\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"要建立新的測試案例，請使用 \",[\"$\",\"code\",null,{\"children\":\"make:test\"}],\" Artisan 命令。預設情況下，測試將放置在 \",[\"$\",\"code\",null,{\"children\":\"tests/Feature\"}],\" 目錄中：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan make:test UserTest\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"如果您想在 \",[\"$\",\"code\",null,{\"children\":\"tests/Unit\"}],\" 目錄中建立測試，您可以在執行 \",[\"$\",\"code\",null,{\"children\":\"make:test\"}],\" 命令時使用 \",[\"$\",\"code\",null,{\"children\":\"--unit\"}],\" 選項：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan make:test UserTest --unit\\n\"}]}],\"\\n\",\"$Le\",\"\\n\",\"$Lf\",\"\\n\",\"$L10\",\"\\n\",\"$L11\",\"\\n\",\"$L12\",\"\\n\",\"$L13\",\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\"]}]]}]}]\n"])</script><script>self.__next_f.push([1,"e:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\n測試 stubs 可以使用 \",[\"$\",\"a\",null,{\"href\":\"/docs/artisan#stub-customization\",\"children\":\"stub 發布\"}],\" 來自訂。\"]}],\"\\n\"]}]\nf:[\"$\",\"p\",null,{\"children\":[\"測試產生後，您可以像平常一樣使用 Pest 或 PHPUnit 定義測試。要執行您的測試，請從終端機執行 \",[\"$\",\"code\",null,{\"children\":\"vendor/bin/pest\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"vendor/bin/phpunit\"}],\" 或 \",[\"$\",\"code\",null,{\"children\":\"php artisan test\"}],\" 命令：\"]}]\n10:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\ntest('basic', function () {\\n    expect(true)-\u003etoBeTrue();\\n});\\n\"}]}]\n11:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace Tests\\\\Unit;\\n\\nuse PHPUnit\\\\Framework\\\\TestCase;\\n\\nclass ExampleTest extends TestCase\\n{\\n    /**\\n     * A basic test example.\\n     */\\n    public function test_basic_test(): void\\n    {\\n        $this-\u003eassertTrue(true);\\n    }\\n}\\n\"}]}]\n12:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\n如果您在測試類別中定義了自己的 \",[\"$\",\"code\",null,{\"children\":\"setUp\"}],\" / \",[\"$\",\"code\",null,{\"children\":\"tearDown\"}],\" 方法，請確保在父類別上呼叫相應的 \",[\"$\",\"code\",null,{\"children\":\"parent::setUp()\"}],\" / \",[\"$\",\"code\",null,{\"children\":\"parent::tearDown()\"}],\" 方法。通常，您應該在自己的 \",[\"$\",\"code\",null,{\"children\":\"setUp\"}],\" 方法開頭呼叫 \",[\"$\",\"code\",null,{\"children\":\"parent::setUp()\"}],\"，並在 \",[\"$\",\"code\",null,{\"children\":\"tearDown\"}],\" 方法結尾呼叫 \",[\"$\",\"code\",null,{\"children\":\"parent::tearDown()\"}],\"。\"]}],\"\\n\"]}]\n13:[\"$\",\"a\",null,{\"name\":\"running-tests\"}]\n14:[\"$\",\"h2\",null,{\"id\":\"執行測試\",\"children\":[\"$\",\"a\",null,{\"href\":\"#執行測試\",\"children\":\"執行測試\"}]}]\n15:[\"$\",\"p\",null,{\"children\":[\"如前所述，撰寫測試後，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"pest\"}],\" 或 \",[\"$\",\"code\",null,{\"children\":\"phpunit\"}],\" 執行它們：\"]}]\n16:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"./vendor/bin/pest\\n\"}]}]\n17:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"./vendor/bin/phpunit\\n\"}]}]\n18:[\"$\",\"p\",null,{\"children\":[\"除了 \",[\"$\",\"code\",null,{\"children\":\"pest\"}],\" 或 \",[\"$\",\"code\",null,{\"children\":\"phpunit\"}],\" 命令外，您還可以使用 \",[\"$\",\"code\",null,{\"children\":\"test\"}],\" Artisan 命令來執行測試。Artisan 測試執行器提供詳細的測試報告，以便於開發和除錯：\"]}]\n19:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan test\\n\"}]}]\n1a:[\"$\",\"p\",null,{\"children\":[\"任何可以傳遞給 \",[\"$\",\"code\",null,{\"children\":\"pest\"}],\" 或 \",[\"$\",\"code\",null,{\"children\":\"phpunit\"}],\" 命令的參數也可以傳遞給 Artisan \",[\"$\",\"code\",null,{\"children\":\"test\"}],\" 命令：\"]}]\n1b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan test --testsuite=Feature --stop-on-failure\\n\"}]}]\n1c:[\"$\",\"a\",null,{\"name\":\"running-tests-in-parallel\"}]\n1d:[\"$\",\"h3\",null,{\"id\":\"平行執行測試\",\"children\":[\"$\",\"a\",null,{\"href\":\"#平行執行測試\",\"children\":\"平行執行測試\"}]}]\n1e:[\"$\",\"p\",null,{\"children\":[\"預設情況下，Laravel 和 Pest / PHPUnit 會在單一 process 中依序執行您的測試。但是，您可以透過跨多個 processes 同時執行測試來大幅減少執行測試所需的時間。首先，您應該安裝 \",[\"$\",\"code\",null,{\"children\":\"brianium/paratest\"}],\" Composer 套件作為「dev」依賴項。然後，在執行 \",[\"$\",\"code\",null,{\"children\":\"test\"}],\" Artisan 命令時加入 \",[\"$\",\"code\",null,{\"children\":\"--parallel\"}],\" 選項：\"]}]\n1f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"composer require brianium/paratest --dev\\n\\nphp artisan test --parallel\\n\"}]}]\n20:[\"$\",\"p\",null,{\"children\":[\"預設情況下，Laravel 會建"])</script><script>self.__next_f.push([1,"立與您機器上可用 CPU 核心數量相同的 processes。但是，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"--processes\"}],\" 選項來調整 processes 的數量：\"]}]\n21:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan test --parallel --processes=4\\n\"}]}]\n22:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\n平行執行測試時，某些 Pest / PHPUnit 選項（例如 \",[\"$\",\"code\",null,{\"children\":\"--do-not-cache-result\"}],\"）可能無法使用。\"]}],\"\\n\"]}]\n23:[\"$\",\"a\",null,{\"name\":\"parallel-testing-and-databases\"}]\n24:[\"$\",\"h4\",null,{\"id\":\"平行測試與資料庫\",\"children\":[\"$\",\"a\",null,{\"href\":\"#平行測試與資料庫\",\"children\":\"平行測試與資料庫\"}]}]\n25:[\"$\",\"p\",null,{\"children\":[\"只要您已設定主要資料庫連線，Laravel 會自動為執行測試的每個平行 process 建立和遷移測試資料庫。測試資料庫會加上 process token 作為後綴，每個 process 都是唯一的。例如，如果您有兩個平行測試 processes，Laravel 會建立並使用 \",[\"$\",\"code\",null,{\"children\":\"your_db_test_1\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"your_db_test_2\"}],\" 測試資料庫。\"]}]\n26:[\"$\",\"p\",null,{\"children\":[\"預設情況下，測試資料庫會在 \",[\"$\",\"code\",null,{\"children\":\"test\"}],\" Artisan 命令呼叫之間保留，以便後續的 \",[\"$\",\"code\",null,{\"children\":\"test\"}],\" 呼叫可以再次使用它們。但是，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"--recreate-databases\"}],\" 選項來重新建立它們：\"]}]\n27:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan test --parallel --recreate-databases\\n\"}]}]\n28:[\"$\",\"a\",null,{\"name\":\"parallel-testing-hooks\"}]\n29:[\"$\",\"h4\",null,{\"id\":\"平行測試-hooks\",\"children\":[\"$\",\"a\",null,{\"href\":\"#平行測試-hooks\",\"children\":\"平行測試 Hooks\"}]}]\n2a:[\"$\",\"p\",null,{\"children\":\"有時候，您可能需要準備應用程式測試使用的某些資源，以便它們可以被多個測試 processes 安全地使用。\"}]\n2b:[\"$\",\"p\",null,{\"children\":[\"使用 \",[\"$\",\"code\",null,{\"children\":\"ParallelTesting\"}],\" facade，您可以指定在 process 或測試案例的 \",[\"$\",\"code\",null,{\"children\":\"setUp\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"tearDown\"}],\" 上執行的程式碼。給定的 closures 會接收 \",[\"$\",\"code\",null,{\"children\":\"$$token\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"$$testCase\"}],\" 變數，分別包含 process token 和目前的測試案例：\"]}]\n2c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Providers;\\n\\nuse Illuminate\\\\Support\\\\Facades\\\\Artisan;\\nuse Illuminate\\\\Support\\\\Facades\\\\ParallelTesting;\\nuse Illuminate\\\\Support\\\\ServiceProvider;\\nuse PHPUnit\\\\Framework\\\\TestCase;\\n\\nclass AppServiceProvider extends ServiceProvider\\n{\\n    /**\\n     * Bootstrap any application services.\\n     */\\n    public function boot(): void\\n    {\\n        ParallelTesting::setUpProcess(function (int $token) {\\n            // ...\\n        });\\n\\n        ParallelTesting::setUpTestCase(function (int $token, TestCase $testCase) {\\n            // ...\\n        });\\n\\n        // Executed when a test database is created...\\n        ParallelTesting::setUpTestDatabase(function (string $database, int $token) {\\n            Artisan::call('db:seed');\\n        });\\n\\n        ParallelTesting::tearDownTestCase(function (int $token, TestCase $testCase) {\\n            // ...\\n        });\\n\\n        ParallelTesting::tearDownProcess(function (int $token) {\\n            // ...\\n        });\\n    }\\n}\\n\"}]}]\n2d:[\"$\",\"a\",null,{\"name\":\"accessing-the-parallel-testing-token\"}]\n2e:[\"$\",\"h4\",null,{\"id\":\"存取平行測試-token\",\"children\":[\"$\",\"a\",null,{\"href\":\"#存取平行測試-token\",\"children\":\"存取平行測試 Token\"}]}]\n2f:[\"$\",\"p\",null,{\"children\":[\"如果您想從應用程式測試程式碼的任何其他位置存取目前的平行 process「token」，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"token\"}],\" 方法。此 token "])</script><script>self.__next_f.push([1,"是單個測試 process 的唯一字串識別碼，可用於跨平行測試 processes 分隔資源。例如，Laravel 會自動將此 token 附加到每個平行測試 process 建立的測試資料庫末尾：\"]}]\n30:[\"$\",\"p\",null,{\"children\":\"$$token = ParallelTesting::token();\"}]\n31:[\"$\",\"a\",null,{\"name\":\"reporting-test-coverage\"}]\n32:[\"$\",\"h3\",null,{\"id\":\"報告測試覆蓋率\",\"children\":[\"$\",\"a\",null,{\"href\":\"#報告測試覆蓋率\",\"children\":\"報告測試覆蓋率\"}]}]\n33:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\n此功能需要 \",[\"$\",\"a\",null,{\"href\":\"https://xdebug.org\",\"children\":\"Xdebug\"}],\" 或 \",[\"$\",\"a\",null,{\"href\":\"https://pecl.php.net/package/pcov\",\"children\":\"PCOV\"}],\"。\"]}],\"\\n\"]}]\n34:[\"$\",\"p\",null,{\"children\":[\"執行應用程式測試時，您可能想要確定您的測試案例是否實際覆蓋了應用程式程式碼，以及在執行測試時使用了多少應用程式程式碼。要達成這一點，您可以在呼叫 \",[\"$\",\"code\",null,{\"children\":\"test\"}],\" 命令時提供 \",[\"$\",\"code\",null,{\"children\":\"--coverage\"}],\" 選項：\"]}]\n35:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan test --coverage\\n\"}]}]\n36:[\"$\",\"a\",null,{\"name\":\"enforcing-a-minimum-coverage-threshold\"}]\n37:[\"$\",\"h4\",null,{\"id\":\"強制執行最低覆蓋率門檻\",\"children\":[\"$\",\"a\",null,{\"href\":\"#強制執行最低覆蓋率門檻\",\"children\":\"強制執行最低覆蓋率門檻\"}]}]\n38:[\"$\",\"p\",null,{\"children\":[\"您可以使用 \",[\"$\",\"code\",null,{\"children\":\"--min\"}],\" 選項為您的應用程式定義最低測試覆蓋率門檻。如果未達到此門檻，測試套件將失敗：\"]}]\n39:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan test --coverage --min=80.3\\n\"}]}]\n3a:[\"$\",\"a\",null,{\"name\":\"profiling-tests\"}]\n3b:[\"$\",\"h3\",null,{\"id\":\"分析測試\",\"children\":[\"$\",\"a\",null,{\"href\":\"#分析測試\",\"children\":\"分析測試\"}]}]\n3c:[\"$\",\"p\",null,{\"children\":[\"Artisan 測試執行器還包含一個方便的機制，用於列出應用程式最慢的測試。使用 \",[\"$\",\"code\",null,{\"children\":\"--profile\"}],\" 選項呼叫 \",[\"$\",\"code\",null,{\"children\":\"test\"}],\" 命令，將會顯示十個最慢的測試列表，讓您可以輕鬆調查哪些測試可以改進以加速您的測試套件：\"]}]\n3d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan test --profile\\n\"}]}]\n3e:[\"$\",\"a\",null,{\"name\":\"configuration-caching\"}]\n3f:[\"$\",\"h2\",null,{\"id\":\"設定快取\",\"children\":[\"$\",\"a\",null,{\"href\":\"#設定快取\",\"children\":\"設定快取\"}]}]\n40:[\"$\",\"p\",null,{\"children\":[\"執行測試時，Laravel 會為每個單獨的測試方法啟動應用程式。如果沒有快取的設定檔，每次測試開始時都必須載入應用程式中的每個設定檔。要建立一次設定並在單次執行的所有測試中重複使用它，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Foundation\\\\Testing\\\\WithCachedConfig\"}],\" trait：\"]}]\n41:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nuse Illuminate\\\\Foundation\\\\Testing\\\\WithCachedConfig;\\n\\npest()-\u003euse(WithCachedConfig::class);\\n\\n// ...\\n\"}]}]\n42:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace Tests\\\\Feature;\\n\\nuse Illuminate\\\\Foundation\\\\Testing\\\\WithCachedConfig;\\nuse Tests\\\\TestCase;\\n\\nclass ConfigTest extends TestCase\\n{\\n    use WithCachedConfig;\\n\\n    // ...\\n}\\n\"}]}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"43:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$L43\",\"3\",{}]]\n8:null\n"])</script></body></html>