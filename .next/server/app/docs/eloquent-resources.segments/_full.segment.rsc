1:"$Sreact.fragment"
2:I[39756,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/247eb132b7f7b574.js"],"default"]
3:I[37457,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/247eb132b7f7b574.js"],"default"]
4:I[93649,["/_next/static/chunks/796e69ae18b2784c.js","/_next/static/chunks/97c0560122aa0f49.js"],"DocsSidebar"]
6:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/247eb132b7f7b574.js"],"OutletBoundary"]
7:"$Sreact.suspense"
9:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/247eb132b7f7b574.js"],"ViewportBoundary"]
b:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/247eb132b7f7b574.js"],"MetadataBoundary"]
d:I[68027,[],"default"]
:HL["/_next/static/chunks/8d8bfdb8c7183f74.css","style"]
:HL["/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
0:{"P":null,"b":"c2cpI4EdIeAozP6eEqxqR","c":["","docs","eloquent-resources"],"q":"","i":false,"f":[[["",{"children":["docs",{"children":[["slug","eloquent-resources","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],[["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/chunks/8d8bfdb8c7183f74.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","children":["$","body",null,{"className":"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased","children":["$","$L2",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}]]}],{"children":[["$","$1","c",{"children":[[["$","script","script-0",{"src":"/_next/static/chunks/796e69ae18b2784c.js","async":true,"nonce":"$undefined"}],["$","script","script-1",{"src":"/_next/static/chunks/97c0560122aa0f49.js","async":true,"nonce":"$undefined"}]],["$","div",null,{"className":"flex min-h-screen bg-background","children":[["$","$L4",null,{}],["$","main",null,{"className":"flex-1 relative","children":["$","$L2",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]}]]}]]}],{"children":[["$","$1","c",{"children":[null,["$","$L2",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["$","$1","c",{"children":["$L5",null,["$","$L6",null,{"children":["$","$7",null,{"name":"Next.MetadataOutlet","children":"$@8"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],["$","$1","h",{"children":[null,["$","$L9",null,{"children":"$@a"}],["$","div",null,{"hidden":true,"children":["$","$Lb",null,{"children":["$","$7",null,{"name":"Next.Metadata","children":"$@c"}]}]}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],false]],"m":"$undefined","G":["$d",[]],"S":true}
5:["$","div",null,{"className":"container mx-auto py-10","children":["$","div",null,{"className":"mx-auto max-w-3xl","children":[["$","div",null,{"className":"mb-8","children":[["$","h1",null,{"className":"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl","children":"Eloquent：API Resources"}],"$undefined"]}],["$","article",null,{"className":"prose prose-slate dark:prose-invert max-w-none","children":[["$","h1",null,{"id":"eloquentapi-resources","children":["$","a",null,{"href":"#eloquentapi-resources","children":"Eloquent：API Resources"}]}],"\n",["$","h2",null,{"id":"簡介","children":["$","a",null,{"href":"#簡介","children":"簡介"}]}],"\n",["$","p",null,{"children":"當建構 API 時，你可能需要一個轉換層，位於 Eloquent Model 和實際回傳給應用程式使用者的 JSON 回應之間。例如，你可能希望為一部分使用者顯示某些屬性而不是其他使用者，或者你可能希望在 Model 的 JSON 表示中始終包含某些關聯。Eloquent 的 Resource 類別讓你可以表達性地且輕鬆地將 Model 和 Model Collection 轉換為 JSON。"}],"\n",["$","p",null,{"children":["當然，你可以使用 Eloquent Model 或 Collection 的 ",["$","code",null,{"children":"toJson"}]," 方法將它們轉換為 JSON；但是，Eloquent Resources 提供了對 Model 及其關聯的 JSON 序列化更細緻和強大的控制。"]}],"\n",["$","h2",null,{"id":"產生-resources","children":["$","a",null,{"href":"#產生-resources","children":"產生 Resources"}]}],"\n",["$","p",null,{"children":["要產生一個 Resource 類別，你可以使用 ",["$","code",null,{"children":"make:resource"}]," Artisan 指令。預設情況下，Resources 會放置在應用程式的 ",["$","code",null,{"children":"app/Http/Resources"}]," 目錄中。Resources 繼承 ",["$","code",null,{"children":"Illuminate\\Http\\Resources\\Json\\JsonResource"}]," 類別："]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-shell","children":"php artisan make:resource UserResource\n"}]}],"\n",["$","h4",null,{"id":"resource-collections","children":["$","a",null,{"href":"#resource-collections","children":"Resource Collections"}]}],"\n",["$","p",null,{"children":"除了產生轉換個別 Model 的 Resources 之外，你還可以產生負責轉換 Model Collection 的 Resources。這讓你的 JSON 回應可以包含與給定 Resource 整個 Collection 相關的連結和其他元資訊。"}],"\n",["$","p",null,{"children":["要建立一個 Resource Collection，你應該在建立 Resource 時使用 ",["$","code",null,{"children":"--collection"}]," 旗標。或者，在 Resource 名稱中包含 ",["$","code",null,{"children":"Collection"}]," 這個詞會讓 Laravel 知道它應該建立一個 Collection Resource。Collection Resources 繼承 ",["$","code",null,{"children":"Illuminate\\Http\\Resources\\Json\\ResourceCollection"}]," 類別："]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-shell","children":"php artisan make:resource User --collection\n\nphp artisan make:resource UserCollection\n"}]}],"\n",["$","h2",null,{"id":"概念概述","children":["$","a",null,{"href":"#概念概述","children":"概念概述"}]}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"[!NOTE]\n這是對 Resources 和 Resource Collections 的高階概述。強烈建議你閱讀本文件的其他章節，以深入了解 Resources 提供給你的自訂和功能。"}],"\n"]}],"\n",["$","p",null,{"children":["在深入了解撰寫 Resources 時可用的所有選項之前，讓我們先從高階層面看看如何在 Laravel 中使用 Resources。一個 Resource 類別代表一個需要轉換為 JSON 結構的單一 Model。例如，這是一個簡單的 ",["$","code",null,{"children":"UserResource"}]," Resource 類別："]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Http\\Resources;\n\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\Resources\\Json\\JsonResource;\n\nclass UserResource extends JsonResource\n{\n    /**\n     * 將 Resource 轉換為陣列。\n     *\n     * @return array<string, mixed>\n     */\n    public function toArray(Request $request): array\n    {\n        return [\n            'id' => $this->id,\n            'name' => $this->name,\n            'email' => $this->email,\n            'created_at' => $this->created_at,\n            'updated_at' => $this->updated_at,\n        ];\n    }\n}\n"}]}],"\n",["$","p",null,{"children":["每個 Resource 類別都定義一個 ",["$","code",null,{"children":"toArray"}]," 方法，當 Resource 從路由或控制器方法作為回應回傳時，它會回傳應該轉換為 JSON 的屬性陣列。"]}],"\n",["$","p",null,{"children":["請注意，我們可以直接從 ",["$","code",null,{"children":"$$this"}]," 變數存取 Model 屬性。這是因為 Resource 類別會自動將屬性和方法存取代理到底層 Model 以方便存取。一旦定義了 Resource，它可以從路由或控制器回傳。Resource 透過其建構函式接受底層 Model 實例："]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use App\\Http\\Resources\\UserResource;\nuse App\\Models\\User;\n\nRoute::get('/user/{id}', function (string $id) {\n    return new UserResource(User::findOrFail($id));\n});\n"}]}],"\n","$Le","\n","$Lf","\n","$L10","\n","$L11","\n","$L12","\n","$L13","\n","$L14","\n","$L15","\n","$L16","\n","$L17","\n","$L18","\n","$L19","\n","$L1a","\n","$L1b","\n","$L1c","\n","$L1d","\n","$L1e","\n","$L1f","\n","$L20","\n","$L21","\n","$L22","\n","$L23","\n","$L24","\n","$L25","\n","$L26","\n","$L27","\n","$L28","\n","$L29","\n","$L2a","\n","$L2b","\n","$L2c","\n","$L2d","\n","$L2e","\n","$L2f","\n","$L30","\n","$L31","\n","$L32","\n","$L33","\n","$L34","\n","$L35","\n","$L36","\n","$L37","\n","$L38","\n","$L39","\n","$L3a","\n","$L3b","\n","$L3c","\n","$L3d","\n","$L3e","\n","$L3f","\n","$L40","\n","$L41","\n","$L42","\n","$L43","\n","$L44","\n","$L45","\n","$L46","\n","$L47","\n","$L48","\n","$L49","\n","$L4a","\n","$L4b","\n","$L4c","\n","$L4d","\n","$L4e","\n","$L4f","\n","$L50","\n","$L51","\n","$L52","\n","$L53","\n","$L54","\n","$L55","\n","$L56","\n","$L57","\n","$L58","\n","$L59","\n","$L5a","\n","$L5b","\n","$L5c","\n","$L5d","\n","$L5e","\n","$L5f","\n","$L60","\n","$L61","\n","$L62","\n","$L63","\n","$L64","\n","$L65","\n","$L66","\n","$L67","\n","$L68","\n","$L69","\n","$L6a","\n","$L6b","\n","$L6c","\n","$L6d","\n","$L6e","\n","$L6f","\n","$L70","\n","$L71","\n","$L72","\n","$L73","\n","$L74","\n","$L75","\n","$L76","\n","$L77","\n","$L78","\n","$L79","\n","$L7a","\n","$L7b","\n","$L7c","\n","$L7d","\n","$L7e","\n","$L7f","\n","$L80","\n","$L81","\n","$L82","\n","$L83","\n","$L84","\n","$L85","\n","$L86","\n","$L87","\n","$L88","\n","$L89","\n","$L8a","\n","$L8b","\n","$L8c","\n","$L8d","\n","$L8e","\n","$L8f","\n","$L90"]}]]}]}]
e:["$","p",null,{"children":["為了方便起見，你可以使用 Model 的 ",["$","code",null,{"children":"toResource"}]," 方法，它會使用框架約定自動發現 Model 的底層 Resource："]}]
f:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"return User::findOrFail($id)->toResource();\n"}]}]
10:["$","p",null,{"children":["當呼叫 ",["$","code",null,{"children":"toResource"}]," 方法時，Laravel 會嘗試找到一個與 Model 名稱匹配且可選地以 ",["$","code",null,{"children":"Resource"}]," 為後綴的 Resource，位於最接近 Model 命名空間的 ",["$","code",null,{"children":"Http\\Resources"}]," 命名空間中。"]}]
11:["$","p",null,{"children":["如果你的 Resource 類別不遵循這個命名約定或位於不同的命名空間，你可以使用 ",["$","code",null,{"children":"UseResource"}]," 屬性為 Model 指定預設的 Resource："]}]
12:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Models;\n\nuse App\\Http\\Resources\\CustomUserResource;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Attributes\\UseResource;\n\n#[UseResource(CustomUserResource::class)]\nclass User extends Model\n{\n    // ...\n}\n"}]}]
13:["$","p",null,{"children":["或者，你可以透過將它傳遞給 ",["$","code",null,{"children":"toResource"}]," 方法來指定 Resource 類別："]}]
14:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"return User::findOrFail($id)->toResource(CustomUserResource::class);\n"}]}]
15:["$","h3",null,{"id":"resource-collections-1","children":["$","a",null,{"href":"#resource-collections-1","children":"Resource Collections"}]}]
16:["$","p",null,{"children":["如果你要回傳一個 Resource Collection 或分頁回應，你應該在路由或控制器中建立 Resource 實例時使用 Resource 類別提供的 ",["$","code",null,{"children":"collection"}]," 方法："]}]
17:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use App\\Http\\Resources\\UserResource;\nuse App\\Models\\User;\n\nRoute::get('/users', function () {\n    return UserResource::collection(User::all());\n});\n"}]}]
18:["$","p",null,{"children":["或者，為了方便起見，你可以使用 Eloquent Collection 的 ",["$","code",null,{"children":"toResourceCollection"}]," 方法，它會使用框架約定自動發現 Model 的底層 Resource Collection："]}]
19:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"return User::all()->toResourceCollection();\n"}]}]
1a:["$","p",null,{"children":["當呼叫 ",["$","code",null,{"children":"toResourceCollection"}]," 方法時，Laravel 會嘗試找到一個與 Model 名稱匹配且以 ",["$","code",null,{"children":"Collection"}]," 為後綴的 Resource Collection，位於最接近 Model 命名空間的 ",["$","code",null,{"children":"Http\\Resources"}]," 命名空間中。"]}]
1b:["$","p",null,{"children":["如果你的 Resource Collection 類別不遵循這個命名約定或位於不同的命名空間，你可以使用 ",["$","code",null,{"children":"UseResourceCollection"}]," 屬性為 Model 指定預設的 Resource Collection："]}]
1c:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Models;\n\nuse App\\Http\\Resources\\CustomUserCollection;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Attributes\\UseResourceCollection;\n\n#[UseResourceCollection(CustomUserCollection::class)]\nclass User extends Model\n{\n    // ...\n}\n"}]}]
1d:["$","p",null,{"children":["或者，你可以透過將它傳遞給 ",["$","code",null,{"children":"toResourceCollection"}]," 方法來指定 Resource Collection 類別："]}]
1e:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"return User::all()->toResourceCollection(CustomUserCollection::class);\n"}]}]
1f:["$","h4",null,{"id":"自訂-resource-collections","children":["$","a",null,{"href":"#自訂-resource-collections","children":"自訂 Resource Collections"}]}]
20:["$","p",null,{"children":"預設情況下，Resource Collections 不允許新增任何可能需要與 Collection 一起回傳的自訂元資料。如果你想自訂 Resource Collection 回應，你可以建立一個專用的 Resource 來代表 Collection："}]
21:["$","pre",null,{"children":["$","code",null,{"className":"language-shell","children":"php artisan make:resource UserCollection\n"}]}]
22:["$","p",null,{"children":"一旦 Resource Collection 類別產生後，你可以輕鬆地定義任何應該包含在回應中的元資料："}]
23:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Http\\Resources;\n\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\Resources\\Json\\ResourceCollection;\n\nclass UserCollection extends ResourceCollection\n{\n    /**\n     * 將 Resource Collection 轉換為陣列。\n     *\n     * @return array<int|string, mixed>\n     */\n    public function toArray(Request $request): array\n    {\n        return [\n            'data' => $this->collection,\n            'links' => [\n                'self' => 'link-value',\n            ],\n        ];\n    }\n}\n"}]}]
24:["$","p",null,{"children":"定義 Resource Collection 後，它可以從路由或控制器回傳："}]
25:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use App\\Http\\Resources\\UserCollection;\nuse App\\Models\\User;\n\nRoute::get('/users', function () {\n    return new UserCollection(User::all());\n});\n"}]}]
26:["$","p",null,{"children":["或者，為了方便起見，你可以使用 Eloquent Collection 的 ",["$","code",null,{"children":"toResourceCollection"}]," 方法，它會使用框架約定自動發現 Model 的底層 Resource Collection："]}]
27:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"return User::all()->toResourceCollection();\n"}]}]
28:["$","p",null,{"children":["當呼叫 ",["$","code",null,{"children":"toResourceCollection"}]," 方法時，Laravel 會嘗試找到一個與 Model 名稱匹配且以 ",["$","code",null,{"children":"Collection"}]," 為後綴的 Resource Collection，位於最接近 Model 命名空間的 ",["$","code",null,{"children":"Http\\Resources"}]," 命名空間中。"]}]
29:["$","h4",null,{"id":"保留-collection-鍵","children":["$","a",null,{"href":"#保留-collection-鍵","children":"保留 Collection 鍵"}]}]
2a:["$","p",null,{"children":["當從路由回傳 Resource Collection 時，Laravel 會重置 Collection 的鍵，使它們按數字順序排列。但是，你可以在 Resource 類別中新增 ",["$","code",null,{"children":"preserveKeys"}]," 屬性，指示是否應該保留 Collection 的原始鍵："]}]
2b:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Http\\Resources;\n\nuse Illuminate\\Http\\Resources\\Json\\JsonResource;\n\nclass UserResource extends JsonResource\n{\n    /**\n     * 指示是否應該保留 Resource 的 Collection 鍵。\n     *\n     * @var bool\n     */\n    public $preserveKeys = true;\n}\n"}]}]
2c:["$","p",null,{"children":["當 ",["$","code",null,{"children":"preserveKeys"}]," 屬性設定為 ",["$","code",null,{"children":"true"}]," 時，當 Collection 從路由或控制器回傳時，Collection 鍵將被保留："]}]
2d:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use App\\Http\\Resources\\UserResource;\nuse App\\Models\\User;\n\nRoute::get('/users', function () {\n    return UserResource::collection(User::all()->keyBy->id);\n});\n"}]}]
2e:["$","h4",null,{"id":"自訂底層-resource-類別","children":["$","a",null,{"href":"#自訂底層-resource-類別","children":"自訂底層 Resource 類別"}]}]
2f:["$","p",null,{"children":["通常，Resource Collection 的 ",["$","code",null,{"children":"$$this->collection"}]," 屬性會自動填入將 Collection 的每個項目映射到其單數 Resource 類別的結果。單數 Resource 類別被假設為 Collection 的類別名稱，去掉類別名稱末尾的 ",["$","code",null,{"children":"Collection"}]," 部分。此外，根據你的個人偏好，單數 Resource 類別可能有也可能沒有 ",["$","code",null,{"children":"Resource"}]," 後綴。"]}]
30:["$","p",null,{"children":["例如，",["$","code",null,{"children":"UserCollection"}]," 會嘗試將給定的使用者實例映射到 ",["$","code",null,{"children":"UserResource"}]," Resource。要自訂此行為，你可以覆寫 Resource Collection 的 ",["$","code",null,{"children":"$$collects"}]," 屬性："]}]
31:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Http\\Resources;\n\nuse Illuminate\\Http\\Resources\\Json\\ResourceCollection;\n\nclass UserCollection extends ResourceCollection\n{\n    /**\n     * 此 Resource 收集的 Resource。\n     *\n     * @var string\n     */\n    public $collects = Member::class;\n}\n"}]}]
32:["$","h2",null,{"id":"撰寫-resources","children":["$","a",null,{"href":"#撰寫-resources","children":"撰寫 Resources"}]}]
33:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!NOTE]\n如果你還沒有閱讀",["$","a",null,{"href":"#concept-overview","children":"概念概述"}],"，強烈建議你在繼續閱讀本文件之前先閱讀。"]}],"\n"]}]
34:["$","p",null,{"children":["Resources 只需要將給定的 Model 轉換為陣列。因此，每個 Resource 都包含一個 ",["$","code",null,{"children":"toArray"}]," 方法，它將你 Model 的屬性轉換為可以從應用程式的路由或控制器回傳的 API 友好陣列："]}]
35:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Http\\Resources;\n\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\Resources\\Json\\JsonResource;\n\nclass UserResource extends JsonResource\n{\n    /**\n     * 將 Resource 轉換為陣列。\n     *\n     * @return array<string, mixed>\n     */\n    public function toArray(Request $request): array\n    {\n        return [\n            'id' => $this->id,\n            'name' => $this->name,\n            'email' => $this->email,\n            'created_at' => $this->created_at,\n            'updated_at' => $this->updated_at,\n        ];\n    }\n}\n"}]}]
36:["$","p",null,{"children":"一旦定義了 Resource，它可以直接從路由或控制器回傳："}]
37:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use App\\Models\\User;\n\nRoute::get('/user/{id}', function (string $id) {\n    return User::findOrFail($id)->toUserResource();\n});\n"}]}]
38:["$","h4",null,{"id":"關聯","children":["$","a",null,{"href":"#關聯","children":"關聯"}]}]
39:["$","p",null,{"children":["如果你想在回應中包含相關的 Resources，你可以將它們加入到 Resource 的 ",["$","code",null,{"children":"toArray"}]," 方法回傳的陣列中。在這個範例中，我們將使用 ",["$","code",null,{"children":"PostResource"}]," Resource 的 ",["$","code",null,{"children":"collection"}]," 方法將使用者的部落格文章加入到 Resource 回應中："]}]
3a:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use App\\Http\\Resources\\PostResource;\nuse Illuminate\\Http\\Request;\n\n/**\n * 將 Resource 轉換為陣列。\n *\n * @return array<string, mixed>\n */\npublic function toArray(Request $request): array\n{\n    return [\n        'id' => $this->id,\n        'name' => $this->name,\n        'email' => $this->email,\n        'posts' => PostResource::collection($this->posts),\n        'created_at' => $this->created_at,\n        'updated_at' => $this->updated_at,\n    ];\n}\n"}]}]
3b:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!NOTE]\n如果你只想在關聯已經載入時才包含它們，請查看",["$","a",null,{"href":"#conditional-relationships","children":"條件式關聯"}],"的文件。"]}],"\n"]}]
3c:["$","h4",null,{"id":"resource-collections-2","children":["$","a",null,{"href":"#resource-collections-2","children":"Resource Collections"}]}]
3d:["$","p",null,{"children":["雖然 Resources 將單一 Model 轉換為陣列，但 Resource Collections 將 Model Collection 轉換為陣列。但是，並非絕對必要為每個 Model 定義一個 Resource Collection 類別，因為所有 Eloquent Model Collection 都提供 ",["$","code",null,{"children":"toResourceCollection"}]," 方法來動態產生「即時」Resource Collection："]}]
3e:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use App\\Models\\User;\n\nRoute::get('/users', function () {\n    return User::all()->toResourceCollection();\n});\n"}]}]
3f:["$","p",null,{"children":"但是，如果你需要自訂與 Collection 一起回傳的元資料，則有必要定義你自己的 Resource Collection："}]
40:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Http\\Resources;\n\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\Resources\\Json\\ResourceCollection;\n\nclass UserCollection extends ResourceCollection\n{\n    /**\n     * 將 Resource Collection 轉換為陣列。\n     *\n     * @return array<string, mixed>\n     */\n    public function toArray(Request $request): array\n    {\n        return [\n            'data' => $this->collection,\n            'links' => [\n                'self' => 'link-value',\n            ],\n        ];\n    }\n}\n"}]}]
41:["$","p",null,{"children":"與單數 Resources 一樣，Resource Collections 可以直接從路由或控制器回傳："}]
42:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use App\\Http\\Resources\\UserCollection;\nuse App\\Models\\User;\n\nRoute::get('/users', function () {\n    return new UserCollection(User::all());\n});\n"}]}]
43:["$","p",null,{"children":["或者，為了方便起見，你可以使用 Eloquent Collection 的 ",["$","code",null,{"children":"toResourceCollection"}]," 方法，它會使用框架約定自動發現 Model 的底層 Resource Collection："]}]
44:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"return User::all()->toResourceCollection();\n"}]}]
45:["$","p",null,{"children":["當呼叫 ",["$","code",null,{"children":"toResourceCollection"}]," 方法時，Laravel 會嘗試找到一個與 Model 名稱匹配且以 ",["$","code",null,{"children":"Collection"}]," 為後綴的 Resource Collection，位於最接近 Model 命名空間的 ",["$","code",null,{"children":"Http\\Resources"}]," 命名空間中。"]}]
46:["$","h3",null,{"id":"資料包裝","children":["$","a",null,{"href":"#資料包裝","children":"資料包裝"}]}]
47:["$","p",null,{"children":["預設情況下，當 Resource 回應轉換為 JSON 時，最外層的 Resource 會被包裝在 ",["$","code",null,{"children":"data"}]," 鍵中。因此，例如，一個典型的 Resource Collection 回應看起來像這樣："]}]
48:["$","pre",null,{"children":["$","code",null,{"className":"language-json","children":"{\n    \"data\": [\n        {\n            \"id\": 1,\n            \"name\": \"Eladio Schroeder Sr.\",\n            \"email\": \"therese28@example.com\"\n        },\n        {\n            \"id\": 2,\n            \"name\": \"Liliana Mayert\",\n            \"email\": \"evandervort@example.com\"\n        }\n    ]\n}\n"}]}]
49:["$","p",null,{"children":["如果你想停用最外層 Resource 的包裝，你應該在基礎 ",["$","code",null,{"children":"Illuminate\\Http\\Resources\\Json\\JsonResource"}]," 類別上呼叫 ",["$","code",null,{"children":"withoutWrapping"}]," 方法。通常，你應該從 ",["$","code",null,{"children":"AppServiceProvider"}]," 或另一個在每次請求時載入的",["$","a",null,{"href":"/docs/%7B%7Bversion%7D%7D/providers","children":"服務提供者"}],"呼叫此方法："]}]
4a:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Providers;\n\nuse Illuminate\\Http\\Resources\\Json\\JsonResource;\nuse Illuminate\\Support\\ServiceProvider;\n\nclass AppServiceProvider extends ServiceProvider\n{\n    /**\n     * 註冊任何應用程式服務。\n     */\n    public function register(): void\n    {\n        // ...\n    }\n\n    /**\n     * 啟動任何應用程式服務。\n     */\n    public function boot(): void\n    {\n        JsonResource::withoutWrapping();\n    }\n}\n"}]}]
4b:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!WARNING]\n",["$","code",null,{"children":"withoutWrapping"}]," 方法只影響最外層的回應，不會移除你手動加入到自己 Resource Collections 的 ",["$","code",null,{"children":"data"}]," 鍵。"]}],"\n"]}]
4c:["$","h4",null,{"id":"包裝巢狀-resources","children":["$","a",null,{"href":"#包裝巢狀-resources","children":"包裝巢狀 Resources"}]}]
4d:["$","p",null,{"children":["你可以完全自由地決定 Resource 的關聯如何被包裝。如果你希望所有 Resource Collections 都被包裝在 ",["$","code",null,{"children":"data"}]," 鍵中，無論它們的巢狀層級如何，你應該為每個 Resource 定義一個 Resource Collection 類別，並在 ",["$","code",null,{"children":"data"}]," 鍵中回傳 Collection。"]}]
4e:["$","p",null,{"children":["你可能會想知道這是否會導致最外層的 Resource 被包裝在兩個 ",["$","code",null,{"children":"data"}]," 鍵中。別擔心，Laravel 永遠不會讓你的 Resources 意外地被雙重包裝，所以你不必擔心正在轉換的 Resource Collection 的巢狀層級："]}]
4f:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Http\\Resources;\n\nuse Illuminate\\Http\\Resources\\Json\\ResourceCollection;\n\nclass CommentsCollection extends ResourceCollection\n{\n    /**\n     * 將 Resource Collection 轉換為陣列。\n     *\n     * @return array<string, mixed>\n     */\n    public function toArray(Request $request): array\n    {\n        return ['data' => $this->collection];\n    }\n}\n"}]}]
50:["$","h4",null,{"id":"資料包裝與分頁","children":["$","a",null,{"href":"#資料包裝與分頁","children":"資料包裝與分頁"}]}]
51:["$","p",null,{"children":["當透過 Resource 回應回傳分頁 Collections 時，即使呼叫了 ",["$","code",null,{"children":"withoutWrapping"}]," 方法，Laravel 也會將 Resource 資料包裝在 ",["$","code",null,{"children":"data"}]," 鍵中。這是因為分頁回應總是包含關於分頁器狀態的 ",["$","code",null,{"children":"meta"}]," 和 ",["$","code",null,{"children":"links"}]," 鍵："]}]
52:["$","pre",null,{"children":["$","code",null,{"className":"language-json","children":"{\n    \"data\": [\n        {\n            \"id\": 1,\n            \"name\": \"Eladio Schroeder Sr.\",\n            \"email\": \"therese28@example.com\"\n        },\n        {\n            \"id\": 2,\n            \"name\": \"Liliana Mayert\",\n            \"email\": \"evandervort@example.com\"\n        }\n    ],\n    \"links\":{\n        \"first\": \"http://example.com/users?page=1\",\n        \"last\": \"http://example.com/users?page=1\",\n        \"prev\": null,\n        \"next\": null\n    },\n    \"meta\":{\n        \"current_page\": 1,\n        \"from\": 1,\n        \"last_page\": 1,\n        \"path\": \"http://example.com/users\",\n        \"per_page\": 15,\n        \"to\": 10,\n        \"total\": 10\n    }\n}\n"}]}]
53:["$","h3",null,{"id":"分頁","children":["$","a",null,{"href":"#分頁","children":"分頁"}]}]
54:["$","p",null,{"children":["你可以將 Laravel 分頁器實例傳遞給 Resource 的 ",["$","code",null,{"children":"collection"}]," 方法或自訂 Resource Collection："]}]
55:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use App\\Http\\Resources\\UserCollection;\nuse App\\Models\\User;\n\nRoute::get('/users', function () {\n    return new UserCollection(User::paginate());\n});\n"}]}]
56:["$","p",null,{"children":["或者，為了方便起見，你可以使用分頁器的 ",["$","code",null,{"children":"toResourceCollection"}]," 方法，它會使用框架約定自動發現分頁 Model 的底層 Resource Collection："]}]
57:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"return User::paginate()->toResourceCollection();\n"}]}]
58:["$","p",null,{"children":["分頁回應總是包含關於分頁器狀態的 ",["$","code",null,{"children":"meta"}]," 和 ",["$","code",null,{"children":"links"}]," 鍵："]}]
59:["$","pre",null,{"children":["$","code",null,{"className":"language-json","children":"{\n    \"data\": [\n        {\n            \"id\": 1,\n            \"name\": \"Eladio Schroeder Sr.\",\n            \"email\": \"therese28@example.com\"\n        },\n        {\n            \"id\": 2,\n            \"name\": \"Liliana Mayert\",\n            \"email\": \"evandervort@example.com\"\n        }\n    ],\n    \"links\":{\n        \"first\": \"http://example.com/users?page=1\",\n        \"last\": \"http://example.com/users?page=1\",\n        \"prev\": null,\n        \"next\": null\n    },\n    \"meta\":{\n        \"current_page\": 1,\n        \"from\": 1,\n        \"last_page\": 1,\n        \"path\": \"http://example.com/users\",\n        \"per_page\": 15,\n        \"to\": 10,\n        \"total\": 10\n    }\n}\n"}]}]
5a:["$","h4",null,{"id":"自訂分頁資訊","children":["$","a",null,{"href":"#自訂分頁資訊","children":"自訂分頁資訊"}]}]
5b:["$","p",null,{"children":["如果你想自訂分頁回應中 ",["$","code",null,{"children":"links"}]," 或 ",["$","code",null,{"children":"meta"}]," 鍵中包含的資訊，你可以在 Resource 上定義一個 ",["$","code",null,{"children":"paginationInformation"}]," 方法。此方法會接收 ",["$","code",null,{"children":"$$paginated"}]," 資料和 ",["$","code",null,{"children":"$$default"}]," 資訊陣列，這是一個包含 ",["$","code",null,{"children":"links"}]," 和 ",["$","code",null,{"children":"meta"}]," 鍵的陣列："]}]
5c:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"/**\n * 自訂 Resource 的分頁資訊。\n *\n * @param  \\Illuminate\\Http\\Request  $request\n * @param  array  $paginated\n * @param  array  $default\n * @return array\n */\npublic function paginationInformation($request, $paginated, $default)\n{\n    $default['links']['custom'] = 'https://example.com';\n\n    return $default;\n}\n"}]}]
5d:["$","h3",null,{"id":"條件式屬性","children":["$","a",null,{"href":"#條件式屬性","children":"條件式屬性"}]}]
5e:["$","p",null,{"children":["有時你可能希望只在滿足給定條件時才在 Resource 回應中包含屬性。例如，你可能希望只在當前使用者是「管理員」時才包含一個值。Laravel 提供了各種輔助方法來協助你處理這種情況。",["$","code",null,{"children":"when"}]," 方法可用於有條件地將屬性加入到 Resource 回應中："]}]
5f:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"/**\n * 將 Resource 轉換為陣列。\n *\n * @return array<string, mixed>\n */\npublic function toArray(Request $request): array\n{\n    return [\n        'id' => $this->id,\n        'name' => $this->name,\n        'email' => $this->email,\n        'secret' => $this->when($request->user()->isAdmin(), 'secret-value'),\n        'created_at' => $this->created_at,\n        'updated_at' => $this->updated_at,\n    ];\n}\n"}]}]
60:["$","p",null,{"children":["在這個範例中，只有當已認證使用者的 ",["$","code",null,{"children":"isAdmin"}]," 方法回傳 ",["$","code",null,{"children":"true"}]," 時，",["$","code",null,{"children":"secret"}]," 鍵才會在最終 Resource 回應中回傳。如果該方法回傳 ",["$","code",null,{"children":"false"}],"，",["$","code",null,{"children":"secret"}]," 鍵會在 Resource 回應發送給客戶端之前被移除。",["$","code",null,{"children":"when"}]," 方法讓你可以表達性地定義 Resources，而無需在建構陣列時使用條件陳述式。"]}]
61:["$","p",null,{"children":[["$","code",null,{"children":"when"}]," 方法也接受閉包作為其第二個參數，讓你只在給定條件為 ",["$","code",null,{"children":"true"}]," 時才計算結果值："]}]
62:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"'secret' => $this->when($request->user()->isAdmin(), function () {\n    return 'secret-value';\n}),\n"}]}]
63:["$","p",null,{"children":[["$","code",null,{"children":"whenHas"}]," 方法可用於在屬性實際存在於底層 Model 時包含它："]}]
64:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"'name' => $this->whenHas('name'),\n"}]}]
65:["$","p",null,{"children":["此外，",["$","code",null,{"children":"whenNotNull"}]," 方法可用於在屬性不為 null 時將它包含在 Resource 回應中："]}]
66:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"'name' => $this->whenNotNull($this->name),\n"}]}]
67:["$","h4",null,{"id":"合併條件式屬性","children":["$","a",null,{"href":"#合併條件式屬性","children":"合併條件式屬性"}]}]
68:["$","p",null,{"children":["有時你可能有多個屬性應該只在相同條件下包含在 Resource 回應中。在這種情況下，你可以使用 ",["$","code",null,{"children":"mergeWhen"}]," 方法，只在給定條件為 ",["$","code",null,{"children":"true"}]," 時才將屬性包含在回應中："]}]
69:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"/**\n * 將 Resource 轉換為陣列。\n *\n * @return array<string, mixed>\n */\npublic function toArray(Request $request): array\n{\n    return [\n        'id' => $this->id,\n        'name' => $this->name,\n        'email' => $this->email,\n        $this->mergeWhen($request->user()->isAdmin(), [\n            'first-secret' => 'value',\n            'second-secret' => 'value',\n        ]),\n        'created_at' => $this->created_at,\n        'updated_at' => $this->updated_at,\n    ];\n}\n"}]}]
6a:["$","p",null,{"children":["同樣地，如果給定條件為 ",["$","code",null,{"children":"false"}],"，這些屬性會在 Resource 回應發送給客戶端之前被移除。"]}]
6b:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!WARNING]\n",["$","code",null,{"children":"mergeWhen"}]," 方法不應該用於混合字串和數字鍵的陣列中。此外，它不應該用於數字鍵未按順序排列的陣列中。"]}],"\n"]}]
6c:["$","h3",null,{"id":"條件式關聯","children":["$","a",null,{"href":"#條件式關聯","children":"條件式關聯"}]}]
6d:["$","p",null,{"children":"除了有條件地載入屬性之外，你還可以根據關聯是否已經載入到 Model 上，有條件地在 Resource 回應中包含關聯。這讓你的控制器可以決定哪些關聯應該載入到 Model 上，而 Resource 可以在它們實際被載入時才輕鬆地包含它們。最終，這讓你更容易避免 Resources 中的「N+1」查詢問題。"}]
6e:["$","p",null,{"children":[["$","code",null,{"children":"whenLoaded"}]," 方法可用於有條件地載入關聯。為了避免不必要地載入關聯，此方法接受關聯的名稱而不是關聯本身："]}]
6f:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use App\\Http\\Resources\\PostResource;\n\n/**\n * 將 Resource 轉換為陣列。\n *\n * @return array<string, mixed>\n */\npublic function toArray(Request $request): array\n{\n    return [\n        'id' => $this->id,\n        'name' => $this->name,\n        'email' => $this->email,\n        'posts' => PostResource::collection($this->whenLoaded('posts')),\n        'created_at' => $this->created_at,\n        'updated_at' => $this->updated_at,\n    ];\n}\n"}]}]
70:["$","p",null,{"children":["在這個範例中，如果關聯尚未載入，",["$","code",null,{"children":"posts"}]," 鍵會在 Resource 回應發送給客戶端之前被移除。"]}]
71:["$","h4",null,{"id":"條件式關聯計數","children":["$","a",null,{"href":"#條件式關聯計數","children":"條件式關聯計數"}]}]
72:["$","p",null,{"children":"除了有條件地包含關聯之外，你還可以根據關聯的計數是否已載入到 Model 上，有條件地在 Resource 回應中包含關聯「計數」："}]
73:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"new UserResource($user->loadCount('posts'));\n"}]}]
74:["$","p",null,{"children":[["$","code",null,{"children":"whenCounted"}]," 方法可用於有條件地在 Resource 回應中包含關聯的計數。如果關聯的計數不存在，此方法會避免不必要地包含屬性："]}]
75:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"/**\n * 將 Resource 轉換為陣列。\n *\n * @return array<string, mixed>\n */\npublic function toArray(Request $request): array\n{\n    return [\n        'id' => $this->id,\n        'name' => $this->name,\n        'email' => $this->email,\n        'posts_count' => $this->whenCounted('posts'),\n        'created_at' => $this->created_at,\n        'updated_at' => $this->updated_at,\n    ];\n}\n"}]}]
76:["$","p",null,{"children":["在這個範例中，如果 ",["$","code",null,{"children":"posts"}]," 關聯的計數尚未載入，",["$","code",null,{"children":"posts_count"}]," 鍵會在 Resource 回應發送給客戶端之前被移除。"]}]
77:["$","p",null,{"children":["其他類型的聚合，如 ",["$","code",null,{"children":"avg"}],"、",["$","code",null,{"children":"sum"}],"、",["$","code",null,{"children":"min"}]," 和 ",["$","code",null,{"children":"max"}],"，也可以使用 ",["$","code",null,{"children":"whenAggregated"}]," 方法有條件地載入："]}]
78:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"'words_avg' => $this->whenAggregated('posts', 'words', 'avg'),\n'words_sum' => $this->whenAggregated('posts', 'words', 'sum'),\n'words_min' => $this->whenAggregated('posts', 'words', 'min'),\n'words_max' => $this->whenAggregated('posts', 'words', 'max'),\n"}]}]
79:["$","h4",null,{"id":"條件式-pivot-資訊","children":["$","a",null,{"href":"#條件式-pivot-資訊","children":"條件式 Pivot 資訊"}]}]
7a:["$","p",null,{"children":["除了有條件地在 Resource 回應中包含關聯資訊之外，你還可以使用 ",["$","code",null,{"children":"whenPivotLoaded"}]," 方法有條件地包含多對多關聯的中間資料表的資料。",["$","code",null,{"children":"whenPivotLoaded"}]," 方法接受 pivot 資料表的名稱作為其第一個參數。第二個參數應該是一個閉包，它回傳當 Model 上有 pivot 資訊時要回傳的值："]}]
7b:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"/**\n * 將 Resource 轉換為陣列。\n *\n * @return array<string, mixed>\n */\npublic function toArray(Request $request): array\n{\n    return [\n        'id' => $this->id,\n        'name' => $this->name,\n        'expires_at' => $this->whenPivotLoaded('role_user', function () {\n            return $this->pivot->expires_at;\n        }),\n    ];\n}\n"}]}]
7c:["$","p",null,{"children":["如果你的關聯使用",["$","a",null,{"href":"/docs/%7B%7Bversion%7D%7D/eloquent-relationships#defining-custom-intermediate-table-models","children":"自訂中間資料表 Model"}],"，你可以將中間資料表 Model 的實例作為第一個參數傳遞給 ",["$","code",null,{"children":"whenPivotLoaded"}]," 方法："]}]
7d:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"'expires_at' => $this->whenPivotLoaded(new Membership, function () {\n    return $this->pivot->expires_at;\n}),\n"}]}]
7e:["$","p",null,{"children":["如果你的中間資料表使用的存取器不是 ",["$","code",null,{"children":"pivot"}],"，你可以使用 ",["$","code",null,{"children":"whenPivotLoadedAs"}]," 方法："]}]
7f:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"/**\n * 將 Resource 轉換為陣列。\n *\n * @return array<string, mixed>\n */\npublic function toArray(Request $request): array\n{\n    return [\n        'id' => $this->id,\n        'name' => $this->name,\n        'expires_at' => $this->whenPivotLoadedAs('subscription', 'role_user', function () {\n            return $this->subscription->expires_at;\n        }),\n    ];\n}\n"}]}]
80:["$","h3",null,{"id":"新增元資料","children":["$","a",null,{"href":"#新增元資料","children":"新增元資料"}]}]
81:["$","p",null,{"children":["一些 JSON API 標準要求在 Resource 和 Resource Collection 回應中新增元資料。這通常包括 Resource 或相關 Resources 的 ",["$","code",null,{"children":"links"}],"，或關於 Resource 本身的元資料。如果你需要回傳關於 Resource 的額外元資料，請將其包含在你的 ",["$","code",null,{"children":"toArray"}]," 方法中。例如，你可能在轉換 Resource Collection 時包含 ",["$","code",null,{"children":"links"}]," 資訊："]}]
82:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"/**\n * 將 Resource 轉換為陣列。\n *\n * @return array<string, mixed>\n */\npublic function toArray(Request $request): array\n{\n    return [\n        'data' => $this->collection,\n        'links' => [\n            'self' => 'link-value',\n        ],\n    ];\n}\n"}]}]
83:["$","p",null,{"children":["當從 Resources 回傳額外的元資料時，你永遠不必擔心意外覆蓋 Laravel 在回傳分頁回應時自動新增的 ",["$","code",null,{"children":"links"}]," 或 ",["$","code",null,{"children":"meta"}]," 鍵。你定義的任何額外 ",["$","code",null,{"children":"links"}]," 都會與分頁器提供的連結合併。"]}]
84:["$","h4",null,{"id":"頂層元資料","children":["$","a",null,{"href":"#頂層元資料","children":"頂層元資料"}]}]
85:["$","p",null,{"children":["有時你可能希望只在 Resource 是正在回傳的最外層 Resource 時才包含某些元資料。通常，這包括關於整個回應的元資訊。要定義此元資料，請在 Resource 類別中新增一個 ",["$","code",null,{"children":"with"}]," 方法。此方法應該回傳一個元資料陣列，只有當 Resource 是正在轉換的最外層 Resource 時才會包含在 Resource 回應中："]}]
86:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Http\\Resources;\n\nuse Illuminate\\Http\\Resources\\Json\\ResourceCollection;\n\nclass UserCollection extends ResourceCollection\n{\n    /**\n     * 將 Resource Collection 轉換為陣列。\n     *\n     * @return array<string, mixed>\n     */\n    public function toArray(Request $request): array\n    {\n        return parent::toArray($request);\n    }\n\n    /**\n     * 取得應該與 Resource 陣列一起回傳的額外資料。\n     *\n     * @return array<string, mixed>\n     */\n    public function with(Request $request): array\n    {\n        return [\n            'meta' => [\n                'key' => 'value',\n            ],\n        ];\n    }\n}\n"}]}]
87:["$","h4",null,{"id":"在建構-resources-時新增元資料","children":["$","a",null,{"href":"#在建構-resources-時新增元資料","children":"在建構 Resources 時新增元資料"}]}]
88:["$","p",null,{"children":["你也可以在路由或控制器中建構 Resource 實例時新增頂層資料。所有 Resources 都有 ",["$","code",null,{"children":"additional"}]," 方法，它接受一個應該新增到 Resource 回應的資料陣列："]}]
89:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"return User::all()\n    ->load('roles')\n    ->toResourceCollection()\n    ->additional(['meta' => [\n        'key' => 'value',\n    ]]);\n"}]}]
8a:["$","h2",null,{"id":"resource-回應","children":["$","a",null,{"href":"#resource-回應","children":"Resource 回應"}]}]
8b:["$","p",null,{"children":"如你所讀，Resources 可以直接從路由和控制器回傳："}]
8c:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use App\\Models\\User;\n\nRoute::get('/user/{id}', function (string $id) {\n    return User::findOrFail($id)->toResource();\n});\n"}]}]
8d:["$","p",null,{"children":["但是，有時你可能需要在將傳出的 HTTP 回應發送給客戶端之前自訂它。有兩種方式可以完成這個操作。首先，你可以在 Resource 上鏈接 ",["$","code",null,{"children":"response"}]," 方法。此方法會回傳一個 ",["$","code",null,{"children":"Illuminate\\Http\\JsonResponse"}]," 實例，讓你完全控制回應的標頭："]}]
8e:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use App\\Http\\Resources\\UserResource;\nuse App\\Models\\User;\n\nRoute::get('/user', function () {\n    return User::find(1)\n        ->toResource()\n        ->response()\n        ->header('X-Value', 'True');\n});\n"}]}]
8f:["$","p",null,{"children":["或者，你可以在 Resource 本身中定義一個 ",["$","code",null,{"children":"withResponse"}]," 方法。當 Resource 作為回應中最外層的 Resource 回傳時，會呼叫此方法："]}]
90:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Http\\Resources;\n\nuse Illuminate\\Http\\JsonResponse;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\Resources\\Json\\JsonResource;\n\nclass UserResource extends JsonResource\n{\n    /**\n     * 將 Resource 轉換為陣列。\n     *\n     * @return array<string, mixed>\n     */\n    public function toArray(Request $request): array\n    {\n        return [\n            'id' => $this->id,\n        ];\n    }\n\n    /**\n     * 自訂 Resource 的傳出回應。\n     */\n    public function withResponse(Request $request, JsonResponse $response): void\n    {\n        $response->header('X-Value', 'True');\n    }\n}\n"}]}]
a:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
91:I[27201,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/247eb132b7f7b574.js"],"IconMark"]
c:[["$","title","0",{"children":"Create Next App"}],["$","meta","1",{"name":"description","content":"Generated by create next app"}],["$","link","2",{"rel":"icon","href":"/favicon.ico?favicon.0b3bf435.ico","sizes":"256x256","type":"image/x-icon"}],["$","$L91","3",{}]]
8:null
