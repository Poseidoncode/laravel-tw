<!DOCTYPE html><!--nnU_zX1rdsG27Kj4AIESC--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/c9244a6c0749cc53.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/cbd55ab9639e1e66.js"/><script src="/_next/static/chunks/87a939617be2fa8c.js" async=""></script><script src="/_next/static/chunks/8368f298651cbd89.js" async=""></script><script src="/_next/static/chunks/6740f161f60c6ab5.js" async=""></script><script src="/_next/static/chunks/turbopack-929fc2ce3ca903db.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/247eb132b7f7b574.js" async=""></script><script src="/_next/static/chunks/796e69ae18b2784c.js" async=""></script><script src="/_next/static/chunks/2b257daea29fbb42.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased"><div hidden=""><!--$--><!--/$--></div><div class="flex min-h-screen bg-background"><div class="w-64 border-r bg-background h-screen sticky top-0 hidden md:block"><div class="p-6 font-bold text-xl border-b flex items-center gap-2"><span class="text-red-600">Laravel</span> Docs（中文）</div><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-65px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="p-4 space-y-2"><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>前言</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">發行說明</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>入門</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/installation"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">安裝</button></a><a class="block" href="/docs/configuration"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">配置</button></a><a class="block" href="/docs/structure"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">目錄結構</button></a><a class="block" href="/docs/lifecycle"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">生命週期</button></a><a class="block" href="/docs/frontend"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">前端</button></a><a class="block" href="/docs/starter-kits"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">啟動套件</button></a><a class="block" href="/docs/deployment"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">部署</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>架構</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>基礎功能</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>深入探討</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>安全性</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>資料庫</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>Eloquent ORM</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>測試</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>其他</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>官方套件</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div class="border-t pt-4 space-y-2"><a class="block" href="/docs/api"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">API 文件</button></a><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">更新日誌</button></a></div></div></div></div></div></div><main class="flex-1 relative"><div class="container mx-auto py-10"><div class="mx-auto max-w-3xl"><div class="mb-8"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Reverb</h1><p class="text-xl text-muted-foreground mt-2">Laravel Reverb 是一個高效能的 WebSocket 伺服器</p></div><article class="prose prose-slate dark:prose-invert max-w-none"><h1 id="laravel-reverb"><a href="#laravel-reverb">Laravel Reverb</a></h1>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#configuration">Configuration</a>
<ul>
<li><a href="#application-credentials">Application Credentials</a></li>
<li><a href="#allowed-origins">Allowed Origins</a></li>
<li><a href="#additional-applications">Additional Applications</a></li>
<li><a href="#ssl">SSL</a></li>
</ul>
</li>
<li><a href="#running-server">Running the Server</a>
<ul>
<li><a href="#debugging">Debugging</a></li>
<li><a href="#restarting">Restarting</a></li>
</ul>
</li>
<li><a href="#monitoring">Monitoring</a></li>
<li><a href="#production">Running Reverb in Production</a>
<ul>
<li><a href="#open-files">Open Files</a></li>
<li><a href="#event-loop">Event Loop</a></li>
<li><a href="#web-server">Web Server</a></li>
<li><a href="#ports">Ports</a></li>
<li><a href="#process-management">Process Management</a></li>
<li><a href="#scaling">Scaling</a></li>
</ul>
</li>
</ul>
<a name="introduction"></a>
<h2 id="簡介"><a href="#簡介">簡介</a></h2>
<p><a href="https://github.com/laravel/reverb">Laravel Reverb</a> brings blazing-fast and scalable real-time WebSocket communication directly to your Laravel application, and provides seamless integration with Laravel&#x27;s existing suite of <a href="/docs/12.x/broadcasting">event broadcasting tools</a>.</p>
<a name="installation"></a>
<h2 id="安裝"><a href="#安裝">安裝</a></h2>
<p>You may install Reverb using the <code>install:broadcasting</code> Artisan command:</p>
<pre><code class="language-shell">php artisan install:broadcasting
</code></pre>
<a name="configuration"></a>
<h2 id="設定"><a href="#設定">設定</a></h2>
<p>Behind the scenes, the <code>install:broadcasting</code> Artisan command will run the <code>reverb:install</code> command, which will install Reverb with a sensible set of default configuration options. If you would like to make any configuration changes, you may do so by updating Reverb&#x27;s environment variables or by updating the <code>config/reverb.php</code> configuration file.</p>
<a name="application-credentials"></a>
<h3 id="application-credentials"><a href="#application-credentials">Application Credentials</a></h3>
<p>In order to establish a connection to Reverb, a set of Reverb &quot;application&quot; credentials must be exchanged between the client and server. These credentials are configured on the server and are used to verify the request from the client. You may define these credentials using the following environment variables:</p>
<pre><code class="language-ini">REVERB_APP_ID=my-app-id
REVERB_APP_KEY=my-app-key
REVERB_APP_SECRET=my-app-secret
</code></pre>
<a name="allowed-origins"></a>
<h3 id="allowed-origins"><a href="#allowed-origins">Allowed Origins</a></h3>
<p>You may also define the origins from which client requests may originate by updating the value of the <code>allowed_origins</code> configuration value within the <code>apps</code> section of the <code>config/reverb.php</code> configuration file. Any requests from an origin not listed in your allowed origins will be rejected. You may allow all origins using <code>*</code>:</p>
<pre><code class="language-php">&#x27;apps&#x27; =&gt; [
    [
        &#x27;app_id&#x27; =&gt; &#x27;my-app-id&#x27;,
        &#x27;allowed_origins&#x27; =&gt; [&#x27;laravel.com&#x27;],
        // ...
    ]
]
</code></pre>
<a name="additional-applications"></a>
<h3 id="additional-applications"><a href="#additional-applications">Additional Applications</a></h3>
<p>Typically, Reverb provides a WebSocket server for the application in which it is installed. However, it is possible to serve more than one application using a single Reverb installation.</p>
<p>For example, you may wish to maintain a single Laravel application which, via Reverb, provides WebSocket connectivity for multiple applications. This can be achieved by defining multiple <code>apps</code> in your application&#x27;s <code>config/reverb.php</code> configuration file:</p>
<pre><code class="language-php">&#x27;apps&#x27; =&gt; [
    [
        &#x27;app_id&#x27; =&gt; &#x27;my-app-one&#x27;,
        // ...
    ],
    [
        &#x27;app_id&#x27; =&gt; &#x27;my-app-two&#x27;,
        // ...
    ],
],
</code></pre>
<a name="ssl"></a>
<h3 id="ssl"><a href="#ssl">SSL</a></h3>
<p>In most cases, secure WebSocket connections are handled by the upstream web server (Nginx, etc.) before the request is proxied to your Reverb server.</p>
<p>However, it can sometimes be useful, such as during local development, for the Reverb server to handle secure connections directly. If you are using <a href="https://herd.laravel.com">Laravel Herd&#x27;s</a> secure site feature or you are using <a href="/docs/12.x/valet">Laravel Valet</a> and have run the <a href="/docs/12.x/valet#securing-sites">secure command</a> against your application, you may use the Herd / Valet certificate generated for your site to secure your Reverb connections. To do so, set the <code>REVERB_HOST</code> environment variable to your site&#x27;s hostname or explicitly pass the hostname option when starting the Reverb server:</p>
<pre><code class="language-shell">php artisan reverb:start --host=&quot;0.0.0.0&quot; --port=8080 --hostname=&quot;laravel.test&quot;
</code></pre>
<p>Since Herd and Valet domains resolve to <code>localhost</code>, running the command above will result in your Reverb server being accessible via the secure WebSocket protocol (<code>wss</code>) at <code>wss://laravel.test:8080</code>.</p>
<p>You may also manually choose a certificate by defining <code>tls</code> options in your application&#x27;s <code>config/reverb.php</code> configuration file. Within the array of <code>tls</code> options, you may provide any of the options supported by <a href="https://www.php.net/manual/en/context.ssl.php">PHP&#x27;s SSL context options</a>:</p>
<pre><code class="language-php">&#x27;options&#x27; =&gt; [
    &#x27;tls&#x27; =&gt; [
        &#x27;local_cert&#x27; =&gt; &#x27;/path/to/cert.pem&#x27;
    ],
],
</code></pre>
<a name="running-server"></a>
<h2 id="running-the-server"><a href="#running-the-server">Running the Server</a></h2>
<p>The Reverb server can be started using the <code>reverb:start</code> Artisan command:</p>
<pre><code class="language-shell">php artisan reverb:start
</code></pre>
<p>By default, the Reverb server will be started at <code>0.0.0.0:8080</code>, making it accessible from all network interfaces.</p>
<p>If you need to specify a custom host or port, you may do so via the <code>--host</code> and <code>--port</code> options when starting the server:</p>
<pre><code class="language-shell">php artisan reverb:start --host=127.0.0.1 --port=9000
</code></pre>
<p>Alternatively, you may define <code>REVERB_SERVER_HOST</code> and <code>REVERB_SERVER_PORT</code> environment variables in your application&#x27;s <code>.env</code> configuration file.</p>
<p>The <code>REVERB_SERVER_HOST</code> and <code>REVERB_SERVER_PORT</code> environment variables should not be confused with <code>REVERB_HOST</code> and <code>REVERB_PORT</code>. The former specify the host and port on which to run the Reverb server itself, while the latter pair instruct Laravel where to send broadcast messages. For example, in a production environment, you may route requests from your public Reverb hostname on port <code>443</code> to a Reverb server operating on <code>0.0.0.0:8080</code>. In this scenario, your environment variables would be defined as follows:</p>
<pre><code class="language-ini">REVERB_SERVER_HOST=0.0.0.0
REVERB_SERVER_PORT=8080

REVERB_HOST=ws.laravel.com
REVERB_PORT=443
</code></pre>
<a name="debugging"></a>
<h3 id="debugging"><a href="#debugging">Debugging</a></h3>
<p>To improve performance, Reverb does not output any debug information by default. If you would like to see the stream of data passing through your Reverb server, you may provide the <code>--debug</code> option to the <code>reverb:start</code> command:</p>
<pre><code class="language-shell">php artisan reverb:start --debug
</code></pre>
<a name="restarting"></a>
<h3 id="restarting"><a href="#restarting">Restarting</a></h3>
<p>Since Reverb is a long-running process, changes to your code will not be reflected without restarting the server via the <code>reverb:restart</code> Artisan command.</p>
<p>The <code>reverb:restart</code> command ensures all connections are gracefully terminated before stopping the server. If you are running Reverb with a process manager such as Supervisor, the server will be automatically restarted by the process manager after all connections have been terminated:</p>
<pre><code class="language-shell">php artisan reverb:restart
</code></pre>
<a name="monitoring"></a>
<h2 id="monitoring"><a href="#monitoring">Monitoring</a></h2>
<p>Reverb may be monitored via an integration with <a href="/docs/12.x/pulse">Laravel Pulse</a>. By enabling Reverb&#x27;s Pulse integration, you may track the number of connections and messages being handled by your server.</p>
<p>To enable the integration, you should first ensure you have <a href="/docs/12.x/pulse#installation">installed Pulse</a>. Then, add any of Reverb&#x27;s recorders to your application&#x27;s <code>config/pulse.php</code> configuration file:</p>
<pre><code class="language-php">use Laravel\Reverb\Pulse\Recorders\ReverbConnections;
use Laravel\Reverb\Pulse\Recorders\ReverbMessages;

&#x27;recorders&#x27; =&gt; [
    ReverbConnections::class =&gt; [
        &#x27;sample_rate&#x27; =&gt; 1,
    ],

    ReverbMessages::class =&gt; [
        &#x27;sample_rate&#x27; =&gt; 1,
    ],

    // ...
],
</code></pre>
<p>Next, add the Pulse cards for each recorder to your <a href="/docs/12.x/pulse#dashboard-customization">Pulse dashboard</a>:</p>
<pre><code class="language-blade">&lt;x-pulse&gt;
    &lt;livewire:reverb.connections cols=&quot;full&quot; /&gt;
    &lt;livewire:reverb.messages cols=&quot;full&quot; /&gt;
    ...
&lt;/x-pulse&gt;
</code></pre>
<p>Connection activity is recorded by polling for new updates on a periodic basis. To ensure this information is rendered correctly on the Pulse dashboard, you must run the <code>pulse:check</code> daemon on your Reverb server. If you are running Reverb in a <a href="#scaling">horizontally scaled</a> configuration, you should only run this daemon on one of your servers.</p>
<a name="production"></a>
<h2 id="running-reverb-in-production"><a href="#running-reverb-in-production">Running Reverb in Production</a></h2>
<p>Due to the long-running nature of WebSocket servers, you may need to make some optimizations to your server and hosting environment to ensure your Reverb server can effectively handle the optimal number of connections for the resources available on your server.</p>
<blockquote>
<p>[!NOTE]
If your site is managed by <a href="https://forge.laravel.com">Laravel Forge</a>, you may automatically optimize your server for Reverb directly from the &quot;Application&quot; panel. By enabling the Reverb integration, Forge will ensure your server is production-ready, including installing any required extensions and increasing the allowed number of connections.</p>
</blockquote>
<a name="open-files"></a>
<h3 id="open-files"><a href="#open-files">Open Files</a></h3>
<p>Each WebSocket connection is held in memory until either the client or server disconnects. In Unix and Unix-like environments, each connection is represented by a file. However, there are often limits on the number of allowed open files at both the operating system and application level.</p>
<a name="operating-system"></a>
<h4 id="operating-system"><a href="#operating-system">Operating System</a></h4>
<p>On a Unix based operating system, you may determine the allowed number of open files using the <code>ulimit</code> command:</p>
<pre><code class="language-shell">ulimit -n
</code></pre>
<p>This command will display the open file limits allowed for different users. You may update these values by editing the <code>/etc/security/limits.conf</code> file. For example, updating the maximum number of open files to 10,000 for the <code>forge</code> user would look like the following:</p>
<pre><code class="language-ini"># /etc/security/limits.conf
forge        soft  nofile  10000
forge        hard  nofile  10000
</code></pre>
<a name="event-loop"></a>
<h3 id="event-loop"><a href="#event-loop">Event Loop</a></h3>
<p>Under the hood, Reverb uses a ReactPHP event loop to manage WebSocket connections on the server. By default, this event loop is powered by <code>stream_select</code>, which doesn&#x27;t require any additional extensions. However, <code>stream_select</code> is typically limited to 1,024 open files. As such, if you plan to handle more than 1,000 concurrent connections, you will need to use an alternative event loop not bound to the same restrictions.</p>
<p>Reverb will automatically switch to an <code>ext-uv</code> powered loop when available. This PHP extension is available for install via PECL:</p>
<pre><code class="language-shell">pecl install uv
</code></pre>
<a name="web-server"></a>
<h3 id="web-server"><a href="#web-server">Web Server</a></h3>
<p>In most cases, Reverb runs on a non web-facing port on your server. So, in order to route traffic to Reverb, you should configure a reverse proxy. Assuming Reverb is running on host <code>0.0.0.0</code> and port <code>8080</code> and your server utilizes the Nginx web server, a reverse proxy can be defined for your Reverb server using the following Nginx site configuration:</p>
<pre><code class="language-nginx">server {
    ...

    location / {
        proxy_http_version 1.1;
        proxy_set_header Host $http_host;
        proxy_set_header Scheme $scheme;
        proxy_set_header SERVER_PORT $server_port;
        proxy_set_header REMOTE_ADDR $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection &quot;Upgrade&quot;;

        proxy_pass http://0.0.0.0:8080;
    }

    ...
}
</code></pre>
<blockquote>
<p>[!WARNING]
Reverb listens for WebSocket connections at <code>/app</code> and handles API requests at <code>/apps</code>. You should ensure the web server handling Reverb requests can serve both of these URIs. If you are using <a href="https://forge.laravel.com">Laravel Forge</a> to manage your servers, your Reverb server will be correctly configured by default.</p>
</blockquote>
<p>Typically, web servers are configured to limit the number of allowed connections in order to prevent overloading the server. To increase the number of allowed connections on an Nginx web server to 10,000, the <code>worker_rlimit_nofile</code> and <code>worker_connections</code> values of the <code>nginx.conf</code> file should be updated:</p>
<pre><code class="language-nginx">user forge;
worker_processes auto;
pid /run/nginx.pid;
include /etc/nginx/modules-enabled/*.conf;
worker_rlimit_nofile 10000;

events {
  worker_connections 10000;
  multi_accept on;
}
</code></pre>
<p>The configuration above will allow up to 10,000 Nginx workers per process to be spawned. In addition, this configuration sets Nginx&#x27;s open file limit to 10,000.</p>
<a name="ports"></a>
<h3 id="ports"><a href="#ports">Ports</a></h3>
<p>Unix-based operating systems typically limit the number of ports which can be opened on the server. You may see the current allowed range via the following command:</p>
<pre><code class="language-shell">cat /proc/sys/net/ipv4/ip_local_port_range
# 32768	60999
</code></pre>
<p>The output above shows the server can handle a maximum of 28,231 (60,999 - 32,768) connections since each connection requires a free port. Although we recommend <a href="#scaling">horizontal scaling</a> to increase the number of allowed connections, you may increase the number of available open ports by updating the allowed port range in your server&#x27;s <code>/etc/sysctl.conf</code> configuration file.</p>
<a name="process-management"></a>
<h3 id="process-management"><a href="#process-management">Process Management</a></h3>
<p>In most cases, you should use a process manager such as Supervisor to ensure the Reverb server is continually running. If you are using Supervisor to run Reverb, you should update the <code>minfds</code> setting of your server&#x27;s <code>supervisor.conf</code> file to ensure Supervisor is able to open the files required to handle connections to your Reverb server:</p>
<pre><code class="language-ini">[supervisord]
...
minfds=10000
</code></pre>
<a name="scaling"></a>
<h3 id="scaling"><a href="#scaling">Scaling</a></h3>
<p>If you need to handle more connections than a single server will allow, you may scale your Reverb server horizontally. Utilizing the publish / subscribe capabilities of Redis, Reverb is able to manage connections across multiple servers. When a message is received by one of your application&#x27;s Reverb servers, the server will use Redis to publish the incoming message to all other servers.</p>
<p>To enable horizontal scaling, you should set the <code>REVERB_SCALING_ENABLED</code> environment variable to <code>true</code> in your application&#x27;s <code>.env</code> configuration file:</p>
<pre><code class="language-env">REVERB_SCALING_ENABLED=true
</code></pre>
<p>Next, you should have a dedicated, central Redis server to which all of the Reverb servers will communicate. Reverb will use the <a href="/docs/12.x/redis#configuration">default Redis connection configured for your application</a> to publish messages to all of your Reverb servers.</p>
<p>Once you have enabled Reverb&#x27;s scaling option and configured a Redis server, you may simply invoke the <code>reverb:start</code> command on multiple servers that are able to communicate with your Redis server. These Reverb servers should be placed behind a load balancer that distributes incoming requests evenly among the servers.</p></article></div></div><!--$--><!--/$--></main></div><script src="/_next/static/chunks/cbd55ab9639e1e66.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n4:I[93649,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/2b257daea29fbb42.js\"],\"DocsSidebar\"]\n6:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"ViewportBoundary\"]\nb:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"MetadataBoundary\"]\nd:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/c9244a6c0749cc53.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"nnU_zX1rdsG27Kj4AIESC\",\"c\":[\"\",\"docs\",\"reverb\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"reverb\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/c9244a6c0749cc53.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/796e69ae18b2784c.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/2b257daea29fbb42.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"div\",null,{\"className\":\"flex min-h-screen bg-background\",\"children\":[[\"$\",\"$L4\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 relative\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"className\":\"container mx-auto py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-3xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl\",\"children\":\"Reverb\"}],[\"$\",\"p\",null,{\"className\":\"text-xl text-muted-foreground mt-2\",\"children\":\"Laravel Reverb 是一個高效能的 WebSocket 伺服器\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"laravel-reverb\",\"children\":[\"$\",\"a\",null,{\"href\":\"#laravel-reverb\",\"children\":\"Laravel Reverb\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#introduction\",\"children\":\"Introduction\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#installation\",\"children\":\"Installation\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#configuration\",\"children\":\"Configuration\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#application-credentials\",\"children\":\"Application Credentials\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#allowed-origins\",\"children\":\"Allowed Origins\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#additional-applications\",\"children\":\"Additional Applications\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#ssl\",\"children\":\"SSL\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#running-server\",\"children\":\"Running the Server\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#debugging\",\"children\":\"Debugging\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#restarting\",\"children\":\"Restarting\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#monitoring\",\"children\":\"Monitoring\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#production\",\"children\":\"Running Reverb in Production\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#open-files\",\"children\":\"Open Files\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#event-loop\",\"children\":\"Event Loop\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#web-server\",\"children\":\"Web Server\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#ports\",\"children\":\"Ports\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#process-management\",\"children\":\"Process Management\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#scaling\",\"children\":\"Scaling\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"introduction\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"簡介\",\"children\":[\"$\",\"a\",null,{\"href\":\"#簡介\",\"children\":\"簡介\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"https://github.com/laravel/reverb\",\"children\":\"Laravel Reverb\"}],\" brings blazing-fast and scalable real-time WebSocket communication directly to your Laravel application, and provides seamless integration with Laravel's existing suite of \",[\"$\",\"a\",null,{\"href\":\"/docs/12.x/broadcasting\",\"children\":\"event broadcasting tools\"}],\".\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"installation\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"安裝\",\"children\":[\"$\",\"a\",null,{\"href\":\"#安裝\",\"children\":\"安裝\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"You may install Reverb using the \",[\"$\",\"code\",null,{\"children\":\"install:broadcasting\"}],\" Artisan command:\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan install:broadcasting\\n\"}]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"configuration\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"設定\",\"children\":[\"$\",\"a\",null,{\"href\":\"#設定\",\"children\":\"設定\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Behind the scenes, the \",[\"$\",\"code\",null,{\"children\":\"install:broadcasting\"}],\" Artisan command will run the \",[\"$\",\"code\",null,{\"children\":\"reverb:install\"}],\" command, which will install Reverb with a sensible set of default configuration options. If you would like to make any configuration changes, you may do so by updating Reverb's environment variables or by updating the \",[\"$\",\"code\",null,{\"children\":\"config/reverb.php\"}],\" configuration file.\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"application-credentials\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"application-credentials\",\"children\":[\"$\",\"a\",null,{\"href\":\"#application-credentials\",\"children\":\"Application Credentials\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"In order to establish a connection to Reverb, a set of Reverb \\\"application\\\" credentials must be exchanged between the client and server. These credentials are configured on the server and are used to verify the request from the client. You may define these credentials using the following environment variables:\"}],\"\\n\",\"$Le\",\"\\n\",\"$Lf\",\"\\n\",\"$L10\",\"\\n\",\"$L11\",\"\\n\",\"$L12\",\"\\n\",\"$L13\",\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\",\"\\n\",\"$L55\",\"\\n\",\"$L56\",\"\\n\",\"$L57\",\"\\n\",\"$L58\",\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\",\"\\n\",\"$L5c\",\"\\n\",\"$L5d\",\"\\n\",\"$L5e\",\"\\n\",\"$L5f\",\"\\n\",\"$L60\",\"\\n\",\"$L61\",\"\\n\",\"$L62\",\"\\n\",\"$L63\",\"\\n\",\"$L64\"]}]]}]}]\n"])</script><script>self.__next_f.push([1,"e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-ini\",\"children\":\"REVERB_APP_ID=my-app-id\\nREVERB_APP_KEY=my-app-key\\nREVERB_APP_SECRET=my-app-secret\\n\"}]}]\nf:[\"$\",\"a\",null,{\"name\":\"allowed-origins\"}]\n10:[\"$\",\"h3\",null,{\"id\":\"allowed-origins\",\"children\":[\"$\",\"a\",null,{\"href\":\"#allowed-origins\",\"children\":\"Allowed Origins\"}]}]\n11:[\"$\",\"p\",null,{\"children\":[\"You may also define the origins from which client requests may originate by updating the value of the \",[\"$\",\"code\",null,{\"children\":\"allowed_origins\"}],\" configuration value within the \",[\"$\",\"code\",null,{\"children\":\"apps\"}],\" section of the \",[\"$\",\"code\",null,{\"children\":\"config/reverb.php\"}],\" configuration file. Any requests from an origin not listed in your allowed origins will be rejected. You may allow all origins using \",[\"$\",\"code\",null,{\"children\":\"*\"}],\":\"]}]\n12:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'apps' =\u003e [\\n    [\\n        'app_id' =\u003e 'my-app-id',\\n        'allowed_origins' =\u003e ['laravel.com'],\\n        // ...\\n    ]\\n]\\n\"}]}]\n13:[\"$\",\"a\",null,{\"name\":\"additional-applications\"}]\n14:[\"$\",\"h3\",null,{\"id\":\"additional-applications\",\"children\":[\"$\",\"a\",null,{\"href\":\"#additional-applications\",\"children\":\"Additional Applications\"}]}]\n15:[\"$\",\"p\",null,{\"children\":\"Typically, Reverb provides a WebSocket server for the application in which it is installed. However, it is possible to serve more than one application using a single Reverb installation.\"}]\n16:[\"$\",\"p\",null,{\"children\":[\"For example, you may wish to maintain a single Laravel application which, via Reverb, provides WebSocket connectivity for multiple applications. This can be achieved by defining multiple \",[\"$\",\"code\",null,{\"children\":\"apps\"}],\" in your application's \",[\"$\",\"code\",null,{\"children\":\"config/reverb.php\"}],\" configuration file:\"]}]\n17:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'apps' =\u003e [\\n    [\\n        'app_id' =\u003e 'my-app-one',\\n        // ...\\n    ],\\n    [\\n        'app_id' =\u003e 'my-app-two',\\n        // ...\\n    ],\\n],\\n\"}]}]\n18:[\"$\",\"a\",null,{\"name\":\"ssl\"}]\n19:[\"$\",\"h3\",null,{\"id\":\"ssl\",\"children\":[\"$\",\"a\",null,{\"href\":\"#ssl\",\"children\":\"SSL\"}]}]\n1a:[\"$\",\"p\",null,{\"children\":\"In most cases, secure WebSocket connections are handled by the upstream web server (Nginx, etc.) before the request is proxied to your Reverb server.\"}]\n1b:[\"$\",\"p\",null,{\"children\":[\"However, it can sometimes be useful, such as during local development, for the Reverb server to handle secure connections directly. If you are using \",[\"$\",\"a\",null,{\"href\":\"https://herd.laravel.com\",\"children\":\"Laravel Herd's\"}],\" secure site feature or you are using \",[\"$\",\"a\",null,{\"href\":\"/docs/12.x/valet\",\"children\":\"Laravel Valet\"}],\" and have run the \",[\"$\",\"a\",null,{\"href\":\"/docs/12.x/valet#securing-sites\",\"children\":\"secure command\"}],\" against your application, you may use the Herd / Valet certificate generated for your site to secure your Reverb connections. To do so, set the \",[\"$\",\"code\",null,{\"children\":\"REVERB_HOST\"}],\" environment variable to your site's hostname or explicitly pass the hostname option when starting the Reverb server:\"]}]\n1c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan reverb:start --host=\\\"0.0.0.0\\\" --port=8080 --hostname=\\\"laravel.test\\\"\\n\"}]}]\n1d:[\"$\",\"p\",null,{\"children\":[\"Since Herd and Valet domains resolve to \",[\"$\",\"code\",null,{\"children\":\"localhost\"}],\", running the command above will result in your Reverb server being accessible via the secure WebSocket protocol (\",[\"$\",\"code\",null,{\"children\":\"wss\"}],\") at \",[\"$\",\"code\",null,{\"children\":\"wss://laravel.test:8080\"}],\".\"]}]\n1e:[\"$\",\"p\",null,{\"children\":[\"You may also manually choose a certificate by defining \",[\"$\",\"code\",null,{\"children\":\"tls\"}],\" options in your application's \",[\"$\",\"code\",null,{\"children\":\"config/reverb.php\"}],\" configuration file. Within the array of \",[\"$\",\"code\",null,{\"children\":\"tls\"}],\" options, you may provide any of the options supported by \",[\"$\",\"a\",null,{"])</script><script>self.__next_f.push([1,"\"href\":\"https://www.php.net/manual/en/context.ssl.php\",\"children\":\"PHP's SSL context options\"}],\":\"]}]\n1f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'options' =\u003e [\\n    'tls' =\u003e [\\n        'local_cert' =\u003e '/path/to/cert.pem'\\n    ],\\n],\\n\"}]}]\n20:[\"$\",\"a\",null,{\"name\":\"running-server\"}]\n21:[\"$\",\"h2\",null,{\"id\":\"running-the-server\",\"children\":[\"$\",\"a\",null,{\"href\":\"#running-the-server\",\"children\":\"Running the Server\"}]}]\n22:[\"$\",\"p\",null,{\"children\":[\"The Reverb server can be started using the \",[\"$\",\"code\",null,{\"children\":\"reverb:start\"}],\" Artisan command:\"]}]\n23:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan reverb:start\\n\"}]}]\n24:[\"$\",\"p\",null,{\"children\":[\"By default, the Reverb server will be started at \",[\"$\",\"code\",null,{\"children\":\"0.0.0.0:8080\"}],\", making it accessible from all network interfaces.\"]}]\n25:[\"$\",\"p\",null,{\"children\":[\"If you need to specify a custom host or port, you may do so via the \",[\"$\",\"code\",null,{\"children\":\"--host\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"--port\"}],\" options when starting the server:\"]}]\n26:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan reverb:start --host=127.0.0.1 --port=9000\\n\"}]}]\n27:[\"$\",\"p\",null,{\"children\":[\"Alternatively, you may define \",[\"$\",\"code\",null,{\"children\":\"REVERB_SERVER_HOST\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"REVERB_SERVER_PORT\"}],\" environment variables in your application's \",[\"$\",\"code\",null,{\"children\":\".env\"}],\" configuration file.\"]}]\n28:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"REVERB_SERVER_HOST\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"REVERB_SERVER_PORT\"}],\" environment variables should not be confused with \",[\"$\",\"code\",null,{\"children\":\"REVERB_HOST\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"REVERB_PORT\"}],\". The former specify the host and port on which to run the Reverb server itself, while the latter pair instruct Laravel where to send broadcast messages. For example, in a production environment, you may route requests from your public Reverb hostname on port \",[\"$\",\"code\",null,{\"children\":\"443\"}],\" to a Reverb server operating on \",[\"$\",\"code\",null,{\"children\":\"0.0.0.0:8080\"}],\". In this scenario, your environment variables would be defined as follows:\"]}]\n29:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-ini\",\"children\":\"REVERB_SERVER_HOST=0.0.0.0\\nREVERB_SERVER_PORT=8080\\n\\nREVERB_HOST=ws.laravel.com\\nREVERB_PORT=443\\n\"}]}]\n2a:[\"$\",\"a\",null,{\"name\":\"debugging\"}]\n2b:[\"$\",\"h3\",null,{\"id\":\"debugging\",\"children\":[\"$\",\"a\",null,{\"href\":\"#debugging\",\"children\":\"Debugging\"}]}]\n2c:[\"$\",\"p\",null,{\"children\":[\"To improve performance, Reverb does not output any debug information by default. If you would like to see the stream of data passing through your Reverb server, you may provide the \",[\"$\",\"code\",null,{\"children\":\"--debug\"}],\" option to the \",[\"$\",\"code\",null,{\"children\":\"reverb:start\"}],\" command:\"]}]\n2d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan reverb:start --debug\\n\"}]}]\n2e:[\"$\",\"a\",null,{\"name\":\"restarting\"}]\n2f:[\"$\",\"h3\",null,{\"id\":\"restarting\",\"children\":[\"$\",\"a\",null,{\"href\":\"#restarting\",\"children\":\"Restarting\"}]}]\n30:[\"$\",\"p\",null,{\"children\":[\"Since Reverb is a long-running process, changes to your code will not be reflected without restarting the server via the \",[\"$\",\"code\",null,{\"children\":\"reverb:restart\"}],\" Artisan command.\"]}]\n31:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"reverb:restart\"}],\" command ensures all connections are gracefully terminated before stopping the server. If you are running Reverb with a process manager such as Supervisor, the server will be automatically restarted by the process manager after all connections have been terminated:\"]}]\n32:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan reverb:restart\\n\"}]}]\n33:[\"$\",\"a\",null,{\"name\":\"monitoring\"}]\n34:[\"$\",\"h2\",null,{\"id\":\"monitoring\",\"childr"])</script><script>self.__next_f.push([1,"en\":[\"$\",\"a\",null,{\"href\":\"#monitoring\",\"children\":\"Monitoring\"}]}]\n35:[\"$\",\"p\",null,{\"children\":[\"Reverb may be monitored via an integration with \",[\"$\",\"a\",null,{\"href\":\"/docs/12.x/pulse\",\"children\":\"Laravel Pulse\"}],\". By enabling Reverb's Pulse integration, you may track the number of connections and messages being handled by your server.\"]}]\n36:[\"$\",\"p\",null,{\"children\":[\"To enable the integration, you should first ensure you have \",[\"$\",\"a\",null,{\"href\":\"/docs/12.x/pulse#installation\",\"children\":\"installed Pulse\"}],\". Then, add any of Reverb's recorders to your application's \",[\"$\",\"code\",null,{\"children\":\"config/pulse.php\"}],\" configuration file:\"]}]\n37:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Laravel\\\\Reverb\\\\Pulse\\\\Recorders\\\\ReverbConnections;\\nuse Laravel\\\\Reverb\\\\Pulse\\\\Recorders\\\\ReverbMessages;\\n\\n'recorders' =\u003e [\\n    ReverbConnections::class =\u003e [\\n        'sample_rate' =\u003e 1,\\n    ],\\n\\n    ReverbMessages::class =\u003e [\\n        'sample_rate' =\u003e 1,\\n    ],\\n\\n    // ...\\n],\\n\"}]}]\n38:[\"$\",\"p\",null,{\"children\":[\"Next, add the Pulse cards for each recorder to your \",[\"$\",\"a\",null,{\"href\":\"/docs/12.x/pulse#dashboard-customization\",\"children\":\"Pulse dashboard\"}],\":\"]}]\n39:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-blade\",\"children\":\"\u003cx-pulse\u003e\\n    \u003clivewire:reverb.connections cols=\\\"full\\\" /\u003e\\n    \u003clivewire:reverb.messages cols=\\\"full\\\" /\u003e\\n    ...\\n\u003c/x-pulse\u003e\\n\"}]}]\n3a:[\"$\",\"p\",null,{\"children\":[\"Connection activity is recorded by polling for new updates on a periodic basis. To ensure this information is rendered correctly on the Pulse dashboard, you must run the \",[\"$\",\"code\",null,{\"children\":\"pulse:check\"}],\" daemon on your Reverb server. If you are running Reverb in a \",[\"$\",\"a\",null,{\"href\":\"#scaling\",\"children\":\"horizontally scaled\"}],\" configuration, you should only run this daemon on one of your servers.\"]}]\n3b:[\"$\",\"a\",null,{\"name\":\"production\"}]\n3c:[\"$\",\"h2\",null,{\"id\":\"running-reverb-in-production\",\"children\":[\"$\",\"a\",null,{\"href\":\"#running-reverb-in-production\",\"children\":\"Running Reverb in Production\"}]}]\n3d:[\"$\",\"p\",null,{\"children\":\"Due to the long-running nature of WebSocket servers, you may need to make some optimizations to your server and hosting environment to ensure your Reverb server can effectively handle the optimal number of connections for the resources available on your server.\"}]\n3e:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\nIf your site is managed by \",[\"$\",\"a\",null,{\"href\":\"https://forge.laravel.com\",\"children\":\"Laravel Forge\"}],\", you may automatically optimize your server for Reverb directly from the \\\"Application\\\" panel. By enabling the Reverb integration, Forge will ensure your server is production-ready, including installing any required extensions and increasing the allowed number of connections.\"]}],\"\\n\"]}]\n3f:[\"$\",\"a\",null,{\"name\":\"open-files\"}]\n40:[\"$\",\"h3\",null,{\"id\":\"open-files\",\"children\":[\"$\",\"a\",null,{\"href\":\"#open-files\",\"children\":\"Open Files\"}]}]\n41:[\"$\",\"p\",null,{\"children\":\"Each WebSocket connection is held in memory until either the client or server disconnects. In Unix and Unix-like environments, each connection is represented by a file. However, there are often limits on the number of allowed open files at both the operating system and application level.\"}]\n42:[\"$\",\"a\",null,{\"name\":\"operating-system\"}]\n43:[\"$\",\"h4\",null,{\"id\":\"operating-system\",\"children\":[\"$\",\"a\",null,{\"href\":\"#operating-system\",\"children\":\"Operating System\"}]}]\n44:[\"$\",\"p\",null,{\"children\":[\"On a Unix based operating system, you may determine the allowed number of open files using the \",[\"$\",\"code\",null,{\"children\":\"ulimit\"}],\" command:\"]}]\n45:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"ulimit -n\\n\"}]}]\n46:[\"$\",\"p\",null,{\"children\":[\"This command will display the open file limits allowed for different users. You may update these values by editing the \",[\"$\",\"code\",null,{\"children\":\"/etc/security/limits.conf\"}],\" file. For example, updating the "])</script><script>self.__next_f.push([1,"maximum number of open files to 10,000 for the \",[\"$\",\"code\",null,{\"children\":\"forge\"}],\" user would look like the following:\"]}]\n47:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-ini\",\"children\":\"# /etc/security/limits.conf\\nforge        soft  nofile  10000\\nforge        hard  nofile  10000\\n\"}]}]\n48:[\"$\",\"a\",null,{\"name\":\"event-loop\"}]\n49:[\"$\",\"h3\",null,{\"id\":\"event-loop\",\"children\":[\"$\",\"a\",null,{\"href\":\"#event-loop\",\"children\":\"Event Loop\"}]}]\n4a:[\"$\",\"p\",null,{\"children\":[\"Under the hood, Reverb uses a ReactPHP event loop to manage WebSocket connections on the server. By default, this event loop is powered by \",[\"$\",\"code\",null,{\"children\":\"stream_select\"}],\", which doesn't require any additional extensions. However, \",[\"$\",\"code\",null,{\"children\":\"stream_select\"}],\" is typically limited to 1,024 open files. As such, if you plan to handle more than 1,000 concurrent connections, you will need to use an alternative event loop not bound to the same restrictions.\"]}]\n4b:[\"$\",\"p\",null,{\"children\":[\"Reverb will automatically switch to an \",[\"$\",\"code\",null,{\"children\":\"ext-uv\"}],\" powered loop when available. This PHP extension is available for install via PECL:\"]}]\n4c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"pecl install uv\\n\"}]}]\n4d:[\"$\",\"a\",null,{\"name\":\"web-server\"}]\n4e:[\"$\",\"h3\",null,{\"id\":\"web-server\",\"children\":[\"$\",\"a\",null,{\"href\":\"#web-server\",\"children\":\"Web Server\"}]}]\n4f:[\"$\",\"p\",null,{\"children\":[\"In most cases, Reverb runs on a non web-facing port on your server. So, in order to route traffic to Reverb, you should configure a reverse proxy. Assuming Reverb is running on host \",[\"$\",\"code\",null,{\"children\":\"0.0.0.0\"}],\" and port \",[\"$\",\"code\",null,{\"children\":\"8080\"}],\" and your server utilizes the Nginx web server, a reverse proxy can be defined for your Reverb server using the following Nginx site configuration:\"]}]\n50:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-nginx\",\"children\":\"server {\\n    ...\\n\\n    location / {\\n        proxy_http_version 1.1;\\n        proxy_set_header Host $http_host;\\n        proxy_set_header Scheme $scheme;\\n        proxy_set_header SERVER_PORT $server_port;\\n        proxy_set_header REMOTE_ADDR $remote_addr;\\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\\n        proxy_set_header Upgrade $http_upgrade;\\n        proxy_set_header Connection \\\"Upgrade\\\";\\n\\n        proxy_pass http://0.0.0.0:8080;\\n    }\\n\\n    ...\\n}\\n\"}]}]\n51:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\nReverb listens for WebSocket connections at \",[\"$\",\"code\",null,{\"children\":\"/app\"}],\" and handles API requests at \",[\"$\",\"code\",null,{\"children\":\"/apps\"}],\". You should ensure the web server handling Reverb requests can serve both of these URIs. If you are using \",[\"$\",\"a\",null,{\"href\":\"https://forge.laravel.com\",\"children\":\"Laravel Forge\"}],\" to manage your servers, your Reverb server will be correctly configured by default.\"]}],\"\\n\"]}]\n52:[\"$\",\"p\",null,{\"children\":[\"Typically, web servers are configured to limit the number of allowed connections in order to prevent overloading the server. To increase the number of allowed connections on an Nginx web server to 10,000, the \",[\"$\",\"code\",null,{\"children\":\"worker_rlimit_nofile\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"worker_connections\"}],\" values of the \",[\"$\",\"code\",null,{\"children\":\"nginx.conf\"}],\" file should be updated:\"]}]\n53:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-nginx\",\"children\":\"user forge;\\nworker_processes auto;\\npid /run/nginx.pid;\\ninclude /etc/nginx/modules-enabled/*.conf;\\nworker_rlimit_nofile 10000;\\n\\nevents {\\n  worker_connections 10000;\\n  multi_accept on;\\n}\\n\"}]}]\n54:[\"$\",\"p\",null,{\"children\":\"The configuration above will allow up to 10,000 Nginx workers per process to be spawned. In addition, this configuration sets Nginx's open file limit to 10,000.\"}]\n55:[\"$\",\"a\",null,{\"name\":\"ports\"}]\n56:[\"$\",\"h3\",null,{\"id\":\"ports\",\"children\":[\"$\",\"a\",null,{\"href\":\"#ports\",\"childre"])</script><script>self.__next_f.push([1,"n\":\"Ports\"}]}]\n57:[\"$\",\"p\",null,{\"children\":\"Unix-based operating systems typically limit the number of ports which can be opened on the server. You may see the current allowed range via the following command:\"}]\n58:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"cat /proc/sys/net/ipv4/ip_local_port_range\\n# 32768\\t60999\\n\"}]}]\n59:[\"$\",\"p\",null,{\"children\":[\"The output above shows the server can handle a maximum of 28,231 (60,999 - 32,768) connections since each connection requires a free port. Although we recommend \",[\"$\",\"a\",null,{\"href\":\"#scaling\",\"children\":\"horizontal scaling\"}],\" to increase the number of allowed connections, you may increase the number of available open ports by updating the allowed port range in your server's \",[\"$\",\"code\",null,{\"children\":\"/etc/sysctl.conf\"}],\" configuration file.\"]}]\n5a:[\"$\",\"a\",null,{\"name\":\"process-management\"}]\n5b:[\"$\",\"h3\",null,{\"id\":\"process-management\",\"children\":[\"$\",\"a\",null,{\"href\":\"#process-management\",\"children\":\"Process Management\"}]}]\n5c:[\"$\",\"p\",null,{\"children\":[\"In most cases, you should use a process manager such as Supervisor to ensure the Reverb server is continually running. If you are using Supervisor to run Reverb, you should update the \",[\"$\",\"code\",null,{\"children\":\"minfds\"}],\" setting of your server's \",[\"$\",\"code\",null,{\"children\":\"supervisor.conf\"}],\" file to ensure Supervisor is able to open the files required to handle connections to your Reverb server:\"]}]\n5d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-ini\",\"children\":\"[supervisord]\\n...\\nminfds=10000\\n\"}]}]\n5e:[\"$\",\"a\",null,{\"name\":\"scaling\"}]\n5f:[\"$\",\"h3\",null,{\"id\":\"scaling\",\"children\":[\"$\",\"a\",null,{\"href\":\"#scaling\",\"children\":\"Scaling\"}]}]\n60:[\"$\",\"p\",null,{\"children\":\"If you need to handle more connections than a single server will allow, you may scale your Reverb server horizontally. Utilizing the publish / subscribe capabilities of Redis, Reverb is able to manage connections across multiple servers. When a message is received by one of your application's Reverb servers, the server will use Redis to publish the incoming message to all other servers.\"}]\n61:[\"$\",\"p\",null,{\"children\":[\"To enable horizontal scaling, you should set the \",[\"$\",\"code\",null,{\"children\":\"REVERB_SCALING_ENABLED\"}],\" environment variable to \",[\"$\",\"code\",null,{\"children\":\"true\"}],\" in your application's \",[\"$\",\"code\",null,{\"children\":\".env\"}],\" configuration file:\"]}]\n62:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-env\",\"children\":\"REVERB_SCALING_ENABLED=true\\n\"}]}]\n63:[\"$\",\"p\",null,{\"children\":[\"Next, you should have a dedicated, central Redis server to which all of the Reverb servers will communicate. Reverb will use the \",[\"$\",\"a\",null,{\"href\":\"/docs/12.x/redis#configuration\",\"children\":\"default Redis connection configured for your application\"}],\" to publish messages to all of your Reverb servers.\"]}]\n64:[\"$\",\"p\",null,{\"children\":[\"Once you have enabled Reverb's scaling option and configured a Redis server, you may simply invoke the \",[\"$\",\"code\",null,{\"children\":\"reverb:start\"}],\" command on multiple servers that are able to communicate with your Redis server. These Reverb servers should be placed behind a load balancer that distributes incoming requests evenly among the servers.\"]}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"65:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$L65\",\"3\",{}]]\n8:null\n"])</script></body></html>