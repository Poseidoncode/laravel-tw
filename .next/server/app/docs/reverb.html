<!DOCTYPE html><!--gbL4GoSDzWGRgd1sk9dHs--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/c5ae50772a9dac16.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/a63c9e88afa04ceb.js"/><script src="/_next/static/chunks/256659360a5e7c6b.js" async=""></script><script src="/_next/static/chunks/8368f298651cbd89.js" async=""></script><script src="/_next/static/chunks/6740f161f60c6ab5.js" async=""></script><script src="/_next/static/chunks/turbopack-0d70034ddb9a55f9.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/247eb132b7f7b574.js" async=""></script><script src="/_next/static/chunks/796e69ae18b2784c.js" async=""></script><script src="/_next/static/chunks/0a3d48cc7de64d8a.js" async=""></script><script src="/_next/static/chunks/b9cc757437f01a9b.js" async=""></script><script src="/_next/static/chunks/88f06ded2e8cebb1.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased"><div hidden=""><!--$--><!--/$--></div><div class="flex min-h-screen bg-background flex-col md:flex-row"><div class="md:hidden p-4 border-b flex items-center sticky top-0 bg-background z-10"><button data-slot="sheet-trigger" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-9 md:hidden" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-_R_5ivb_" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-6 w-6" aria-hidden="true"><path d="M4 5h16"></path><path d="M4 12h16"></path><path d="M4 19h16"></path></svg><span class="sr-only">Toggle menu</span></button><span class="ml-2 font-bold text-lg"><span class="text-red-600">Laravel</span> Docs</span></div><div class="w-64 border-r bg-background h-screen sticky top-0 hidden md:block"><div class="p-6 font-bold text-xl border-b flex items-center gap-2"><span class="text-red-600">Laravel</span> Docs（中文）</div><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-65px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="p-4 space-y-2"><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>前言</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">發行說明</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>入門</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/installation"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">安裝</button></a><a class="block" href="/docs/configuration"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">配置</button></a><a class="block" href="/docs/structure"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">目錄結構</button></a><a class="block" href="/docs/lifecycle"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">生命週期</button></a><a class="block" href="/docs/frontend"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">前端</button></a><a class="block" href="/docs/starter-kits"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">啟動套件</button></a><a class="block" href="/docs/deployment"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">部署</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>架構</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>基礎功能</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>深入探討</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>安全性</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>資料庫</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>Eloquent ORM</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>測試</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>其他</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>官方套件</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div class="border-t pt-4 space-y-2"><a class="block" href="/docs/api"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">API 文件</button></a><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">更新日誌</button></a></div></div></div></div></div></div><main class="flex-1 relative"><div class="container mx-auto py-10"><div class="flex gap-8 justify-center"><div class="flex-1 max-w-3xl"><div class="mb-8"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Reverb</h1><p class="text-xl text-muted-foreground mt-2">Laravel Reverb 是一個高效能的 WebSocket 伺服器</p></div><article class="prose prose-slate dark:prose-invert max-w-none"><ul>
<li><a href="#introduction">簡介</a></li>
<li><a href="#installation">安裝</a></li>
<li><a href="#configuration">設定</a>
<ul>
<li><a href="#application-credentials">應用程式憑證</a></li>
<li><a href="#allowed-origins">允許的來源</a></li>
<li><a href="#additional-applications">額外的應用程式</a></li>
<li><a href="#ssl">SSL</a></li>
</ul>
</li>
<li><a href="#running-server">執行伺服器</a>
<ul>
<li><a href="#debugging">除錯</a></li>
<li><a href="#restarting">重新啟動</a></li>
</ul>
</li>
<li><a href="#monitoring">監控</a></li>
<li><a href="#production">在正式環境執行 Reverb</a>
<ul>
<li><a href="#open-files">開啟的檔案</a></li>
<li><a href="#event-loop">事件迴圈</a></li>
<li><a href="#web-server">網頁伺服器</a></li>
<li><a href="#ports">連接埠</a></li>
<li><a href="#process-management">程序管理</a></li>
<li><a href="#scaling">擴展</a></li>
</ul>
</li>
</ul>
<a name="introduction"></a>
<h2 id="簡介-introduction"><a href="#簡介-introduction">簡介 (Introduction)</a></h2>
<p><a href="https://github.com/laravel/reverb">Laravel Reverb</a> 為您的 Laravel 應用程式帶來極速且可擴展的即時 WebSocket 通訊,並與 Laravel 現有的<a href="/docs/broadcasting">事件廣播工具</a>套件無縫整合。</p>
<a name="installation"></a>
<h2 id="安裝-installation"><a href="#安裝-installation">安裝 (Installation)</a></h2>
<p>您可以使用 <code>install:broadcasting</code> Artisan 指令來安裝 Reverb:</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#B392F0;--shiki-light:#6F42C1">php</span><span style="color:#9ECBFF;--shiki-light:#032F62"> artisan</span><span style="color:#9ECBFF;--shiki-light:#032F62"> install:broadcasting</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="configuration"></a>
<h2 id="設定-configuration"><a href="#設定-configuration">設定 (Configuration)</a></h2>
<p>在幕後,<code>install:broadcasting</code> Artisan 指令會執行 <code>reverb:install</code> 指令,該指令會使用一組合理的預設設定選項來安裝 Reverb。如果您想要進行任何設定變更,可以透過更新 Reverb 的環境變數或更新 <code>config/reverb.php</code> 設定檔來完成。</p>
<a name="application-credentials"></a>
<h3 id="應用程式憑證-application-credentials"><a href="#應用程式憑證-application-credentials">應用程式憑證 (Application Credentials)</a></h3>
<p>為了建立與 Reverb 的連線,必須在客戶端和伺服器之間交換一組 Reverb「應用程式」憑證。這些憑證在伺服器上設定,用於驗證來自客戶端的請求。您可以使用以下環境變數來定義這些憑證:</p>
<div class="relative group"><pre class="language-ini"><code class="language-ini">REVERB_APP_ID=my-app-id
REVERB_APP_KEY=my-app-key
REVERB_APP_SECRET=my-app-secret
</code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="allowed-origins"></a>
<h3 id="允許的來源-allowed-origins"><a href="#允許的來源-allowed-origins">允許的來源 (Allowed Origins)</a></h3>
<p>您也可以透過更新 <code>config/reverb.php</code> 設定檔中 <code>apps</code> 區段內的 <code>allowed_origins</code> 設定值來定義客戶端請求可能來自的來源。任何來自未列在允許來源清單中的請求都將被拒絕。您可以使用 <code>*</code> 來允許所有來源:</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;apps&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E"> [</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    [</span></span>
<span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">        &#x27;app_id&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#9ECBFF;--shiki-light:#032F62"> &#x27;my-app-id&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">        &#x27;allowed_origins&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E"> [</span><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;laravel.com&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">],</span></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D">        // ...</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    ]</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">]</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="additional-applications"></a>
<h3 id="額外的應用程式-additional-applications"><a href="#額外的應用程式-additional-applications">額外的應用程式 (Additional Applications)</a></h3>
<p>通常,Reverb 為安裝它的應用程式提供 WebSocket 伺服器。然而,可以使用單一 Reverb 安裝來服務多個應用程式。</p>
<p>例如,您可能希望維護一個單一的 Laravel 應用程式,透過 Reverb 為多個應用程式提供 WebSocket 連線。這可以透過在應用程式的 <code>config/reverb.php</code> 設定檔中定義多個 <code>apps</code> 來實現:</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;apps&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E"> [</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    [</span></span>
<span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">        &#x27;app_id&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#9ECBFF;--shiki-light:#032F62"> &#x27;my-app-one&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D">        // ...</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    [</span></span>
<span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">        &#x27;app_id&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#9ECBFF;--shiki-light:#032F62"> &#x27;my-app-two&#x27;</span><span style="color:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D">        // ...</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">],</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="ssl"></a>
<h3 id="ssl"><a href="#ssl">SSL</a></h3>
<p>在大多數情況下,安全的 WebSocket 連線由上游網頁伺服器(Nginx 等)處理,然後再將請求代理到您的 Reverb 伺服器。</p>
<p>然而,有時候讓 Reverb 伺服器直接處理安全連線會很有用,例如在本機開發期間。如果您使用 <a href="https://herd.laravel.com">Laravel Herd</a> 的安全網站功能,或者您使用 <a href="/docs/valet">Laravel Valet</a> 並對您的應用程式執行了 <a href="/docs/valet#securing-sites">secure 指令</a>,您可以使用為您的網站產生的 Herd / Valet 憑證來保護您的 Reverb 連線。要這樣做,請將 <code>REVERB_HOST</code> 環境變數設定為您網站的主機名稱,或在啟動 Reverb 伺服器時明確傳遞主機名稱選項:</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#B392F0;--shiki-light:#6F42C1">php</span><span style="color:#9ECBFF;--shiki-light:#032F62"> artisan</span><span style="color:#9ECBFF;--shiki-light:#032F62"> reverb:start</span><span style="color:#79B8FF;--shiki-light:#005CC5"> --host=</span><span style="color:#9ECBFF;--shiki-light:#032F62">&quot;0.0.0.0&quot;</span><span style="color:#79B8FF;--shiki-light:#005CC5"> --port=8080</span><span style="color:#79B8FF;--shiki-light:#005CC5"> --hostname=</span><span style="color:#9ECBFF;--shiki-light:#032F62">&quot;laravel.test&quot;</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>由於 Herd 和 Valet 網域解析為 <code>localhost</code>,執行上述指令將使您的 Reverb 伺服器可透過安全的 WebSocket 協定 (<code>wss</code>) 在 <code>wss://laravel.test:8080</code> 存取。</p>
<p>您也可以透過在應用程式的 <code>config/reverb.php</code> 設定檔中定義 <code>tls</code> 選項來手動選擇憑證。在 <code>tls</code> 選項陣列中,您可以提供 <a href="https://www.php.net/manual/en/context.ssl.php">PHP 的 SSL 上下文選項</a>支援的任何選項:</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;options&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E"> [</span></span>
<span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">    &#x27;tls&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E"> [</span></span>
<span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">        &#x27;local_cert&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#9ECBFF;--shiki-light:#032F62"> &#x27;/path/to/cert.pem&#x27;</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">],</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="running-server"></a>
<h2 id="執行伺服器-running-the-server"><a href="#執行伺服器-running-the-server">執行伺服器 (Running the Server)</a></h2>
<p>可以使用 <code>reverb:start</code> Artisan 指令來啟動 Reverb 伺服器:</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#B392F0;--shiki-light:#6F42C1">php</span><span style="color:#9ECBFF;--shiki-light:#032F62"> artisan</span><span style="color:#9ECBFF;--shiki-light:#032F62"> reverb:start</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>預設情況下,Reverb 伺服器將在 <code>0.0.0.0:8080</code> 啟動,使其可從所有網路介面存取。</p>
<p>如果您需要指定自訂的主機或連接埠,可以在啟動伺服器時透過 <code>--host</code> 和 <code>--port</code> 選項來完成:</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#B392F0;--shiki-light:#6F42C1">php</span><span style="color:#9ECBFF;--shiki-light:#032F62"> artisan</span><span style="color:#9ECBFF;--shiki-light:#032F62"> reverb:start</span><span style="color:#79B8FF;--shiki-light:#005CC5"> --host=127.0.0.1</span><span style="color:#79B8FF;--shiki-light:#005CC5"> --port=9000</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>或者,您可以在應用程式的 <code>.env</code> 設定檔中定義 <code>REVERB_SERVER_HOST</code> 和 <code>REVERB_SERVER_PORT</code> 環境變數。</p>
<p><code>REVERB_SERVER_HOST</code> 和 <code>REVERB_SERVER_PORT</code> 環境變數不應與 <code>REVERB_HOST</code> 和 <code>REVERB_PORT</code> 混淆。前者指定執行 Reverb 伺服器本身的主機和連接埠,而後者則指示 Laravel 將廣播訊息發送到何處。例如,在正式環境中,您可能會將來自公開 Reverb 主機名稱的連接埠 <code>443</code> 請求路由到在 <code>0.0.0.0:8080</code> 上運作的 Reverb 伺服器。在這種情況下,您的環境變數將定義如下:</p>
<div class="relative group"><pre class="language-ini"><code class="language-ini">REVERB_SERVER_HOST=0.0.0.0
REVERB_SERVER_PORT=8080

REVERB_HOST=ws.laravel.com
REVERB_PORT=443
</code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="debugging"></a>
<h3 id="除錯-debugging"><a href="#除錯-debugging">除錯 (Debugging)</a></h3>
<p>為了提高效能,Reverb 預設不會輸出任何除錯資訊。如果您想查看通過 Reverb 伺服器的資料流,可以為 <code>reverb:start</code> 指令提供 <code>--debug</code> 選項:</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#B392F0;--shiki-light:#6F42C1">php</span><span style="color:#9ECBFF;--shiki-light:#032F62"> artisan</span><span style="color:#9ECBFF;--shiki-light:#032F62"> reverb:start</span><span style="color:#79B8FF;--shiki-light:#005CC5"> --debug</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="restarting"></a>
<h3 id="重新啟動-restarting"><a href="#重新啟動-restarting">重新啟動 (Restarting)</a></h3>
<p>由於 Reverb 是一個長時間執行的程序,對程式碼的變更不會反映出來,除非透過 <code>reverb:restart</code> Artisan 指令重新啟動伺服器。</p>
<p><code>reverb:restart</code> 指令確保所有連線在停止伺服器之前都被優雅地終止。如果您使用程序管理器(如 Supervisor)執行 Reverb,伺服器將在所有連線終止後由程序管理器自動重新啟動:</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#B392F0;--shiki-light:#6F42C1">php</span><span style="color:#9ECBFF;--shiki-light:#032F62"> artisan</span><span style="color:#9ECBFF;--shiki-light:#032F62"> reverb:restart</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="monitoring"></a>
<h2 id="監控-monitoring"><a href="#監控-monitoring">監控 (Monitoring)</a></h2>
<p>Reverb 可以透過與 <a href="/docs/pulse">Laravel Pulse</a> 的整合來監控。透過啟用 Reverb 的 Pulse 整合,您可以追蹤伺服器處理的連線數和訊息數。</p>
<p>要啟用整合,您應該首先確保已<a href="/docs/pulse#installation">安裝 Pulse</a>。然後,將任何 Reverb 的記錄器新增到應用程式的 <code>config/pulse.php</code> 設定檔中:</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> Laravel\Reverb\Pulse\Recorders\ReverbConnections</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"><span style="color:#F97583;--shiki-light:#D73A49">use</span><span style="color:#79B8FF;--shiki-light:#005CC5"> Laravel\Reverb\Pulse\Recorders\ReverbMessages</span><span style="color:#E1E4E8;--shiki-light:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">&#x27;recorders&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E"> [</span></span>
<span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">    ReverbConnections</span><span style="color:#F97583;--shiki-light:#D73A49">::class</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E"> [</span></span>
<span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">        &#x27;sample_rate&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#79B8FF;--shiki-light:#005CC5"> 1</span><span style="color:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    ],</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">    ReverbMessages</span><span style="color:#F97583;--shiki-light:#D73A49">::class</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#E1E4E8;--shiki-light:#24292E"> [</span></span>
<span class="line"><span style="color:#9ECBFF;--shiki-light:#032F62">        &#x27;sample_rate&#x27;</span><span style="color:#F97583;--shiki-light:#D73A49"> =&gt;</span><span style="color:#79B8FF;--shiki-light:#005CC5"> 1</span><span style="color:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    ],</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D">    // ...</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">],</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>接下來,將每個記錄器的 Pulse 卡片新增到您的 <a href="/docs/pulse#dashboard-customization">Pulse 儀表板</a>:</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">&lt;</span><span style="color:#85E89D;--shiki-light:#22863A">x-pulse</span><span style="color:#E1E4E8;--shiki-light:#24292E">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    &lt;</span><span style="color:#85E89D;--shiki-light:#22863A">livewire:reverb.connections</span><span style="color:#B392F0;--shiki-light:#6F42C1"> cols</span><span style="color:#E1E4E8;--shiki-light:#24292E">=</span><span style="color:#9ECBFF;--shiki-light:#032F62">&quot;full&quot;</span><span style="color:#E1E4E8;--shiki-light:#24292E"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    &lt;</span><span style="color:#85E89D;--shiki-light:#22863A">livewire:reverb.messages</span><span style="color:#B392F0;--shiki-light:#6F42C1"> cols</span><span style="color:#E1E4E8;--shiki-light:#24292E">=</span><span style="color:#9ECBFF;--shiki-light:#032F62">&quot;full&quot;</span><span style="color:#E1E4E8;--shiki-light:#24292E"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">    ...</span></span>
<span class="line"><span style="color:#E1E4E8;--shiki-light:#24292E">&lt;/</span><span style="color:#85E89D;--shiki-light:#22863A">x-pulse</span><span style="color:#E1E4E8;--shiki-light:#24292E">&gt;</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>連線活動是透過定期輪詢新更新來記錄的。為了確保此資訊在 Pulse 儀表板上正確呈現,您必須在 Reverb 伺服器上執行 <code>pulse:check</code> 守護程序。如果您在<a href="#scaling">水平擴展</a>設定中執行 Reverb,您應該只在其中一台伺服器上執行此守護程序。</p>
<a name="production"></a>
<h2 id="在正式環境執行-reverb-running-reverb-in-production"><a href="#在正式環境執行-reverb-running-reverb-in-production">在正式環境執行 Reverb (Running Reverb in Production)</a></h2>
<p>由於 WebSocket 伺服器的長時間執行特性,您可能需要對伺服器和主機環境進行一些最佳化,以確保您的 Reverb 伺服器能夠有效處理伺服器上可用資源的最佳連線數。</p>
<blockquote>
<p>[!NOTE]
如果您的網站由 <a href="https://forge.laravel.com">Laravel Forge</a> 管理,您可以直接從「Application」面板自動為 Reverb 最佳化您的伺服器。透過啟用 Reverb 整合,Forge 將確保您的伺服器已準備好用於正式環境,包括安裝任何必要的擴充套件並增加允許的連線數。</p>
</blockquote>
<a name="open-files"></a>
<h3 id="開啟的檔案-open-files"><a href="#開啟的檔案-open-files">開啟的檔案 (Open Files)</a></h3>
<p>每個 WebSocket 連線都會保存在記憶體中,直到客戶端或伺服器斷開連線。在 Unix 和類 Unix 環境中,每個連線都由一個檔案表示。然而,在作業系統和應用程式層級通常都有允許開啟檔案數量的限制。</p>
<a name="operating-system"></a>
<h4 id="作業系統-operating-system"><a href="#作業系統-operating-system">作業系統 (Operating System)</a></h4>
<p>在基於 Unix 的作業系統上,您可以使用 <code>ulimit</code> 指令來確定允許的開啟檔案數量:</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#79B8FF;--shiki-light:#005CC5">ulimit</span><span style="color:#79B8FF;--shiki-light:#005CC5"> -n</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>此指令將顯示不同使用者允許的開啟檔案限制。您可以透過編輯 <code>/etc/security/limits.conf</code> 檔案來更新這些值。例如,將 <code>forge</code> 使用者的最大開啟檔案數更新為 10,000 將如下所示:</p>
<div class="relative group"><pre class="language-ini"><code class="language-ini"># /etc/security/limits.conf
forge        soft  nofile  10000
forge        hard  nofile  10000
</code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="event-loop"></a>
<h3 id="事件迴圈-event-loop"><a href="#事件迴圈-event-loop">事件迴圈 (Event Loop)</a></h3>
<p>在幕後,Reverb 使用 ReactPHP 事件迴圈來管理伺服器上的 WebSocket 連線。預設情況下,此事件迴圈由 <code>stream_select</code> 驅動,不需要任何額外的擴充套件。然而,<code>stream_select</code> 通常限制為 1,024 個開啟的檔案。因此,如果您計劃處理超過 1,000 個並發連線,您將需要使用不受相同限制約束的替代事件迴圈。</p>
<p>當可用時,Reverb 將自動切換到由 <code>ext-uv</code> 驅動的迴圈。此 PHP 擴充套件可透過 PECL 安裝:</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#B392F0;--shiki-light:#6F42C1">pecl</span><span style="color:#9ECBFF;--shiki-light:#032F62"> install</span><span style="color:#9ECBFF;--shiki-light:#032F62"> uv</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="web-server"></a>
<h3 id="網頁伺服器-web-server"><a href="#網頁伺服器-web-server">網頁伺服器 (Web Server)</a></h3>
<p>在大多數情況下,Reverb 在伺服器上的非面向網頁的連接埠上執行。因此,為了將流量路由到 Reverb,您應該設定反向代理。假設 Reverb 在主機 <code>0.0.0.0</code> 和連接埠 <code>8080</code> 上執行,並且您的伺服器使用 Nginx 網頁伺服器,可以使用以下 Nginx 網站設定為您的 Reverb 伺服器定義反向代理:</p>
<div class="relative group"><pre class="language-nginx"><code class="language-nginx">server {
    ...

    location / {
        proxy_http_version 1.1;
        proxy_set_header Host $http_host;
        proxy_set_header Scheme $scheme;
        proxy_set_header SERVER_PORT $server_port;
        proxy_set_header REMOTE_ADDR $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection &quot;Upgrade&quot;;

        proxy_pass http://0.0.0.0:8080;
    }

    ...
}
</code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<blockquote>
<p>[!WARNING]
Reverb 在 <code>/app</code> 監聽 WebSocket 連線,並在 <code>/apps</code> 處理 API 請求。您應該確保處理 Reverb 請求的網頁伺服器可以服務這兩個 URI。如果您使用 <a href="https://forge.laravel.com">Laravel Forge</a> 管理您的伺服器,您的 Reverb 伺服器預設將被正確設定。</p>
</blockquote>
<p>通常,網頁伺服器被設定為限制允許的連線數,以防止伺服器過載。要將 Nginx 網頁伺服器上允許的連線數增加到 10,000,應更新 <code>nginx.conf</code> 檔案的 <code>worker_rlimit_nofile</code> 和 <code>worker_connections</code> 值:</p>
<div class="relative group"><pre class="language-nginx"><code class="language-nginx">user forge;
worker_processes auto;
pid /run/nginx.pid;
include /etc/nginx/modules-enabled/*.conf;
worker_rlimit_nofile 10000;

events {
  worker_connections 10000;
  multi_accept on;
}
</code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>上述設定將允許每個程序產生最多 10,000 個 Nginx 工作程序。此外,此設定將 Nginx 的開啟檔案限制設定為 10,000。</p>
<a name="ports"></a>
<h3 id="連接埠-ports"><a href="#連接埠-ports">連接埠 (Ports)</a></h3>
<p>基於 Unix 的作業系統通常會限制可以在伺服器上開啟的連接埠數量。您可以透過以下指令查看目前允許的範圍:</p>
<div class="relative group"><pre class=""><code><span class="line"><span style="color:#B392F0;--shiki-light:#6F42C1">cat</span><span style="color:#9ECBFF;--shiki-light:#032F62"> /proc/sys/net/ipv4/ip_local_port_range</span></span>
<span class="line"><span style="color:#6A737D;--shiki-light:#6A737D"># 32768	60999</span></span></code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>上述輸出顯示伺服器最多可以處理 28,231 (60,999 - 32,768) 個連線,因為每個連線都需要一個空閒的連接埠。雖然我們建議使用<a href="#scaling">水平擴展</a>來增加允許的連線數,但您可以透過更新伺服器的 <code>/etc/sysctl.conf</code> 設定檔中允許的連接埠範圍來增加可用的開啟連接埠數量。</p>
<a name="process-management"></a>
<h3 id="程序管理-process-management"><a href="#程序管理-process-management">程序管理 (Process Management)</a></h3>
<p>在大多數情況下,您應該使用程序管理器(如 Supervisor)來確保 Reverb 伺服器持續執行。如果您使用 Supervisor 執行 Reverb,您應該更新伺服器的 <code>supervisor.conf</code> 檔案的 <code>minfds</code> 設定,以確保 Supervisor 能夠開啟處理 Reverb 伺服器連線所需的檔案:</p>
<div class="relative group"><pre class="language-ini"><code class="language-ini">[supervisord]
...
minfds=10000
</code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<a name="scaling"></a>
<h3 id="擴展-scaling"><a href="#擴展-scaling">擴展 (Scaling)</a></h3>
<p>如果您需要處理超過單一伺服器允許的連線數,您可以水平擴展您的 Reverb 伺服器。利用 Redis 的發布/訂閱功能,Reverb 能夠管理跨多個伺服器的連線。當您的應用程式的其中一個 Reverb 伺服器接收到訊息時,該伺服器將使用 Redis 將傳入的訊息發布到所有其他伺服器。</p>
<p>要啟用水平擴展,您應該在應用程式的 <code>.env</code> 設定檔中將 <code>REVERB_SCALING_ENABLED</code> 環境變數設定為 <code>true</code>:</p>
<div class="relative group"><pre class="language-env"><code class="language-env">REVERB_SCALING_ENABLED=true
</code></pre><button class="absolute top-3 right-3 p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-4 w-4" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div>
<p>接下來,您應該有一個專用的中央 Redis 伺服器,所有 Reverb 伺服器都將與之通訊。Reverb 將使用<a href="/docs/redis#configuration">為您的應用程式設定的預設 Redis 連線</a>將訊息發布到所有 Reverb 伺服器。</p>
<p>一旦您啟用了 Reverb 的擴展選項並設定了 Redis 伺服器,您只需在能夠與您的 Redis 伺服器通訊的多個伺服器上呼叫 <code>reverb:start</code> 指令。這些 Reverb 伺服器應該放置在負載平衡器後面,該負載平衡器將傳入的請求均勻分配到各個伺服器。</p></article></div><div class="hidden xl:block w-64 sticky top-0 h-screen"><div class="p-6"><h4 class="text-sm font-semibold mb-4 text-foreground">On this page</h4><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-120px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><nav class="space-y-1"><a href="#簡介-introduction" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:12px">簡介</a><a href="#安裝-installation" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:12px">安裝</a><a href="#設定-configuration" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:12px">設定</a><a href="#應用程式憑證-application-credentials" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">應用程式憑證</a><a href="#允許的來源-allowed-origins" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">允許的來源</a><a href="#額外的應用程式-additional-applications" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">額外的應用程式</a><a href="#ssl" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">SSL</a><a href="#執行伺服器-running-the-server" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:12px">執行伺服器</a><a href="#除錯-debugging" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">除錯</a><a href="#重新啟動-restarting" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">重新啟動</a><a href="#監控-monitoring" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:12px">監控</a><a href="#在正式環境執行-reverb-running-reverb-in-production" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:12px">在正式環境執行 Reverb</a><a href="#開啟的檔案-open-files" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">開啟的檔案</a><a href="#作業系統-operating-system" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:36px">作業系統</a><a href="#事件迴圈-event-loop" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">事件迴圈</a><a href="#網頁伺服器-web-server" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">網頁伺服器</a><a href="#連接埠-ports" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">連接埠</a><a href="#程序管理-process-management" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">程序管理</a><a href="#擴展-scaling" class="
                    block text-sm py-1 transition-colors
                    text-muted-foreground hover:text-foreground border-l-2 border-transparent -ml-px
                  " style="padding-left:24px">擴展</a></nav></div></div></div></div></div></div></div><!--$--><!--/$--></main></div><script src="/_next/static/chunks/a63c9e88afa04ceb.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n4:I[95549,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/0a3d48cc7de64d8a.js\",\"/_next/static/chunks/b9cc757437f01a9b.js\"],\"MobileNav\"]\n5:I[93649,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/0a3d48cc7de64d8a.js\",\"/_next/static/chunks/b9cc757437f01a9b.js\"],\"DocsSidebar\"]\n7:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"OutletBoundary\"]\n8:\"$Sreact.suspense\"\na:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"ViewportBoundary\"]\nc:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"MetadataBoundary\"]\ne:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/c5ae50772a9dac16.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"gbL4GoSDzWGRgd1sk9dHs\",\"c\":[\"\",\"docs\",\"reverb\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"reverb\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/c5ae50772a9dac16.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/796e69ae18b2784c.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/0a3d48cc7de64d8a.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-2\",{\"src\":\"/_next/static/chunks/b9cc757437f01a9b.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"div\",null,{\"className\":\"flex min-h-screen bg-background flex-col md:flex-row\",\"children\":[[\"$\",\"div\",null,{\"className\":\"md:hidden p-4 border-b flex items-center sticky top-0 bg-background z-10\",\"children\":[[\"$\",\"$L4\",null,{}],[\"$\",\"span\",null,{\"className\":\"ml-2 font-bold text-lg\",\"children\":[[\"$\",\"span\",null,{\"className\":\"text-red-600\",\"children\":\"Laravel\"}],\" Docs\"]}]]}],[\"$\",\"$L5\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 relative\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/88f06ded2e8cebb1.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$L7\",null,{\"children\":[\"$\",\"$8\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@9\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$La\",null,{\"children\":\"$@b\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lc\",null,{\"children\":[\"$\",\"$8\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@d\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$e\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"f:I[74715,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/0a3d48cc7de64d8a.js\",\"/_next/static/chunks/b9cc757437f01a9b.js\",\"/_next/static/chunks/88f06ded2e8cebb1.js\"],\"CodeBlock\"]\n"])</script><script>self.__next_f.push([1,"6:[\"$\",\"div\",null,{\"className\":\"container mx-auto py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex gap-8 justify-center\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex-1 max-w-3xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl\",\"children\":\"Reverb\"}],[\"$\",\"p\",null,{\"className\":\"text-xl text-muted-foreground mt-2\",\"children\":\"Laravel Reverb 是一個高效能的 WebSocket 伺服器\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#introduction\",\"children\":\"簡介\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#installation\",\"children\":\"安裝\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#configuration\",\"children\":\"設定\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#application-credentials\",\"children\":\"應用程式憑證\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#allowed-origins\",\"children\":\"允許的來源\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#additional-applications\",\"children\":\"額外的應用程式\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#ssl\",\"children\":\"SSL\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#running-server\",\"children\":\"執行伺服器\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#debugging\",\"children\":\"除錯\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#restarting\",\"children\":\"重新啟動\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#monitoring\",\"children\":\"監控\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#production\",\"children\":\"在正式環境執行 Reverb\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#open-files\",\"children\":\"開啟的檔案\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#event-loop\",\"children\":\"事件迴圈\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#web-server\",\"children\":\"網頁伺服器\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#ports\",\"children\":\"連接埠\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#process-management\",\"children\":\"程序管理\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#scaling\",\"children\":\"擴展\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"introduction\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"簡介-introduction\",\"children\":[\"$\",\"a\",null,{\"href\":\"#簡介-introduction\",\"children\":\"簡介 (Introduction)\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"https://github.com/laravel/reverb\",\"children\":\"Laravel Reverb\"}],\" 為您的 Laravel 應用程式帶來極速且可擴展的即時 WebSocket 通訊,並與 Laravel 現有的\",[\"$\",\"a\",null,{\"href\":\"/docs/broadcasting\",\"children\":\"事件廣播工具\"}],\"套件無縫整合。\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"installation\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"安裝-installation\",\"children\":[\"$\",\"a\",null,{\"href\":\"#安裝-installation\",\"children\":\"安裝 (Installation)\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"您可以使用 \",[\"$\",\"code\",null,{\"children\":\"install:broadcasting\"}],\" Artisan 指令來安裝 Reverb:\"]}],\"\\n\",[\"$\",\"$Lf\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"php\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" artisan\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" install:broadcasting\"}]]}]}]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"configuration\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"設定-configuration\",\"children\":[\"$\",\"a\",null,{\"href\":\"#設定-configuration\",\"children\":\"設定 (Configuration)\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"在幕後,\",[\"$\",\"code\",null,{\"children\":\"install:broadcasting\"}],\" Artisan 指令會執行 \",[\"$\",\"code\",null,{\"children\":\"reverb:install\"}],\" 指令,該指令會使用一組合理的預設設定選項來安裝 Reverb。如果您想要進行任何設定變更,可以透過更新 Reverb 的環境變數或更新 \",[\"$\",\"code\",null,{\"children\":\"config/reverb.php\"}],\" 設定檔來完成。\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"application-credentials\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"應用程式憑證-application-credentials\",\"children\":[\"$\",\"a\",null,{\"href\":\"#應用程式憑證-application-credentials\",\"children\":\"應用程式憑證 (Application Credentials)\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"為了建立與 Reverb 的連線,必須在客戶端和伺服器之間交換一組 Reverb「應用程式」憑證。這些憑證在伺服器上設定,用於驗證來自客戶端的請求。您可以使用以下環境變數來定義這些憑證:\"}],\"\\n\",[\"$\",\"$Lf\",null,{\"className\":\"language-ini\",\"raw\":\"REVERB_APP_ID=my-app-id\\nREVERB_APP_KEY=my-app-key\\nREVERB_APP_SECRET=my-app-secret\\n\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-ini\",\"children\":\"REVERB_APP_ID=my-app-id\\nREVERB_APP_KEY=my-app-key\\nREVERB_APP_SECRET=my-app-secret\\n\"}]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"allowed-origins\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"允許的來源-allowed-origins\",\"children\":[\"$\",\"a\",null,{\"href\":\"#允許的來源-allowed-origins\",\"children\":\"允許的來源 (Allowed Origins)\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"您也可以透過更新 \",\"$L10\",\" 設定檔中 \",\"$L11\",\" 區段內的 \",\"$L12\",\" 設定值來定義客戶端請求可能來自的來源。任何來自未列在允許來源清單中的請求都將被拒絕。您可以使用 \",\"$L13\",\" 來允許所有來源:\"]}],\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\",\"\\n\",\"$L55\",\"\\n\",\"$L56\",\"\\n\",\"$L57\",\"\\n\",\"$L58\",\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\",\"\\n\",\"$L5c\",\"\\n\",\"$L5d\",\"\\n\",\"$L5e\",\"\\n\",\"$L5f\",\"\\n\",\"$L60\",\"\\n\",\"$L61\",\"\\n\",\"$L62\",\"\\n\",\"$L63\",\"\\n\",\"$L64\",\"\\n\",\"$L65\",\"\\n\",\"$L66\"]}]]}],\"$L67\"]}]}]\n"])</script><script>self.__next_f.push([1,"68:I[48399,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/0a3d48cc7de64d8a.js\",\"/_next/static/chunks/b9cc757437f01a9b.js\",\"/_next/static/chunks/88f06ded2e8cebb1.js\"],\"TableOfContents\"]\n10:[\"$\",\"code\",null,{\"children\":\"config/reverb.php\"}]\n11:[\"$\",\"code\",null,{\"children\":\"apps\"}]\n12:[\"$\",\"code\",null,{\"children\":\"allowed_origins\"}]\n13:[\"$\",\"code\",null,{\"children\":\"*\"}]\n"])</script><script>self.__next_f.push([1,"14:[\"$\",\"$Lf\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'apps'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" [\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    [\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        'app_id'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" 'my-app-id'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        'allowed_origins'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" [\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'laravel.com'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"],\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"        // ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    ]\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]\"}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"15:[\"$\",\"a\",null,{\"name\":\"additional-applications\"}]\n16:[\"$\",\"h3\",null,{\"id\":\"額外的應用程式-additional-applications\",\"children\":[\"$\",\"a\",null,{\"href\":\"#額外的應用程式-additional-applications\",\"children\":\"額外的應用程式 (Additional Applications)\"}]}]\n17:[\"$\",\"p\",null,{\"children\":\"通常,Reverb 為安裝它的應用程式提供 WebSocket 伺服器。然而,可以使用單一 Reverb 安裝來服務多個應用程式。\"}]\n18:[\"$\",\"p\",null,{\"children\":[\"例如,您可能希望維護一個單一的 Laravel 應用程式,透過 Reverb 為多個應用程式提供 WebSocket 連線。這可以透過在應用程式的 \",[\"$\",\"code\",null,{\"children\":\"config/reverb.php\"}],\" 設定檔中定義多個 \",[\"$\",\"code\",null,{\"children\":\"apps\"}],\" 來實現:\"]}]\n"])</script><script>self.__next_f.push([1,"19:[\"$\",\"$Lf\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'apps'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" [\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    [\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        'app_id'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" 'my-app-one'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"        // ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    ],\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    [\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        'app_id'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" 'my-app-two'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"        // ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    ],\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"],\"}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"1a:[\"$\",\"a\",null,{\"name\":\"ssl\"}]\n1b:[\"$\",\"h3\",null,{\"id\":\"ssl\",\"children\":[\"$\",\"a\",null,{\"href\":\"#ssl\",\"children\":\"SSL\"}]}]\n1c:[\"$\",\"p\",null,{\"children\":\"在大多數情況下,安全的 WebSocket 連線由上游網頁伺服器(Nginx 等)處理,然後再將請求代理到您的 Reverb 伺服器。\"}]\n1d:[\"$\",\"p\",null,{\"children\":[\"然而,有時候讓 Reverb 伺服器直接處理安全連線會很有用,例如在本機開發期間。如果您使用 \",[\"$\",\"a\",null,{\"href\":\"https://herd.laravel.com\",\"children\":\"Laravel Herd\"}],\" 的安全網站功能,或者您使用 \",[\"$\",\"a\",null,{\"href\":\"/docs/valet\",\"children\":\"Laravel Valet\"}],\" 並對您的應用程式執行了 \",[\"$\",\"a\",null,{\"href\":\"/docs/valet#securing-sites\",\"children\":\"secure 指令\"}],\",您可以使用為您的網站產生的 Herd / Valet 憑證來保護您的 Reverb 連線。要這樣做,請將 \",[\"$\",\"code\",null,{\"children\":\"REVERB_HOST\"}],\" 環境變數設定為您網站的主機名稱,或在啟動 Reverb 伺服器時明確傳遞主機名稱選項:\"]}]\n1e:[\"$\",\"$Lf\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"php\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" artisan\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" reverb:start\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" --host=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"0.0.0.0\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" --port=8080\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" --hostname=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"laravel.test\\\"\"}]]}]}]}]\n1f:[\"$\",\"p\",null,{\"children\":[\"由於 Herd 和 Valet 網域解析為 \",[\"$\",\"code\",null,{\"children\":\"localhost\"}],\",執行上述指令將使您的 Reverb 伺服器可透過安全的 WebSocket 協定 (\",[\"$\",\"code\",null,{\"children\":\"wss\"}],\") 在 \",[\"$\",\"code\",null,{\"children\":\"wss://laravel.test:8080\"}],\" 存取。\"]}]\n20:[\"$\",\"p\",null,{\"children\":[\"您也可以透過在應用程式的 \",[\"$\",\"code\",null,{\"children\":\"config/reverb.php\"}],\" 設定檔中定義 \",[\"$\",\"code\",null,{\"children\":\"tls\"}],\" 選項來手動選擇憑證。在 \",[\"$\",\"code\",null,{\"children\":\"tls\"}],\" 選項陣列中,您可以提供 \",[\"$\",\"a\",null,{\"href\":\"https://www.php.net/manual/en/context.ssl.php\",\"children\":\"PHP 的 SSL 上下文選項\"}],\"支援的任何選項:\"]}]\n"])</script><script>self.__next_f.push([1,"21:[\"$\",\"$Lf\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'options'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" [\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"    'tls'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" [\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        'local_cert'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" '/path/to/cert.pem'\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    ],\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"],\"}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"22:[\"$\",\"a\",null,{\"name\":\"running-server\"}]\n23:[\"$\",\"h2\",null,{\"id\":\"執行伺服器-running-the-server\",\"children\":[\"$\",\"a\",null,{\"href\":\"#執行伺服器-running-the-server\",\"children\":\"執行伺服器 (Running the Server)\"}]}]\n24:[\"$\",\"p\",null,{\"children\":[\"可以使用 \",[\"$\",\"code\",null,{\"children\":\"reverb:start\"}],\" Artisan 指令來啟動 Reverb 伺服器:\"]}]\n25:[\"$\",\"$Lf\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"php\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" artisan\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" reverb:start\"}]]}]}]}]\n26:[\"$\",\"p\",null,{\"children\":[\"預設情況下,Reverb 伺服器將在 \",[\"$\",\"code\",null,{\"children\":\"0.0.0.0:8080\"}],\" 啟動,使其可從所有網路介面存取。\"]}]\n27:[\"$\",\"p\",null,{\"children\":[\"如果您需要指定自訂的主機或連接埠,可以在啟動伺服器時透過 \",[\"$\",\"code\",null,{\"children\":\"--host\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"--port\"}],\" 選項來完成:\"]}]\n28:[\"$\",\"$Lf\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"php\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" artisan\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" reverb:start\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" --host=127.0.0.1\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" --port=9000\"}]]}]}]}]\n29:[\"$\",\"p\",null,{\"children\":[\"或者,您可以在應用程式的 \",[\"$\",\"code\",null,{\"children\":\".env\"}],\" 設定檔中定義 \",[\"$\",\"code\",null,{\"children\":\"REVERB_SERVER_HOST\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"REVERB_SERVER_PORT\"}],\" 環境變數。\"]}]\n2a:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"REVERB_SERVER_HOST\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"REVERB_SERVER_PORT\"}],\" 環境變數不應與 \",[\"$\",\"code\",null,{\"children\":\"REVERB_HOST\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"REVERB_PORT\"}],\" 混淆。前者指定執行 Reverb 伺服器本身的主機和連接埠,而後者則指示 Laravel 將廣播訊息發送到何處。例如,在正式環境中,您可能會將來自公開 Reverb 主機名稱的連接埠 \",[\"$\",\"code\",null,{\"children\":\"443\"}],\" 請求路由到在 \",[\"$\",\"code\",null,{\"children\":\"0.0.0.0:8080\"}],\" 上運作的 Reverb 伺服器。在這種情況下,您的環境變數將定義如下:\"]}]\n2b:[\"$\",\"$Lf\",null,{\"className\":\"language-ini\",\"raw\":\"REVERB_SERVER_HOST=0.0.0.0\\nREVERB_SERVER_PORT=8080\\n\\nREVERB_HOST=ws.laravel.com\\nREVERB_PORT=443\\n\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-ini\",\"children\":\"REVERB_SERVER_HOST=0.0.0.0\\nREVERB_SERVER_PORT=8080\\n\\nREVERB_HOST=ws.laravel.com\\nREVERB_PORT=443\\n\"}]}]\n2c:[\"$\",\"a\",null,{\"name\":\"debugging\"}]\n2d:[\"$\",\"h3\",null,{\"id\":\"除錯-debugging\",\"children\":[\"$\",\"a\",null,{\"href\":\"#除錯-debugging\",\"children\":\"除錯 (Debugging)\"}]}]\n2e:[\"$\",\"p\",null,{\"children\":[\"為了提高效能,Reverb 預設不會輸出任何除錯資訊。如果您想查看通過 Reverb 伺服器的資料流,可以為 \",[\"$\",\"code\",null,{\"children\":\"reverb:start\"}],\" 指令提供 \",[\"$\",\"code\",null,{\"children\":\"--debug\"}],\" 選項:\"]}]\n2f:[\"$\",\"$Lf\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"php\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" artisan\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" reverb:start\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" -"])</script><script>self.__next_f.push([1,"-debug\"}]]}]}]}]\n30:[\"$\",\"a\",null,{\"name\":\"restarting\"}]\n31:[\"$\",\"h3\",null,{\"id\":\"重新啟動-restarting\",\"children\":[\"$\",\"a\",null,{\"href\":\"#重新啟動-restarting\",\"children\":\"重新啟動 (Restarting)\"}]}]\n32:[\"$\",\"p\",null,{\"children\":[\"由於 Reverb 是一個長時間執行的程序,對程式碼的變更不會反映出來,除非透過 \",[\"$\",\"code\",null,{\"children\":\"reverb:restart\"}],\" Artisan 指令重新啟動伺服器。\"]}]\n33:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"reverb:restart\"}],\" 指令確保所有連線在停止伺服器之前都被優雅地終止。如果您使用程序管理器(如 Supervisor)執行 Reverb,伺服器將在所有連線終止後由程序管理器自動重新啟動:\"]}]\n34:[\"$\",\"$Lf\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"php\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" artisan\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" reverb:restart\"}]]}]}]}]\n35:[\"$\",\"a\",null,{\"name\":\"monitoring\"}]\n36:[\"$\",\"h2\",null,{\"id\":\"監控-monitoring\",\"children\":[\"$\",\"a\",null,{\"href\":\"#監控-monitoring\",\"children\":\"監控 (Monitoring)\"}]}]\n37:[\"$\",\"p\",null,{\"children\":[\"Reverb 可以透過與 \",[\"$\",\"a\",null,{\"href\":\"/docs/pulse\",\"children\":\"Laravel Pulse\"}],\" 的整合來監控。透過啟用 Reverb 的 Pulse 整合,您可以追蹤伺服器處理的連線數和訊息數。\"]}]\n38:[\"$\",\"p\",null,{\"children\":[\"要啟用整合,您應該首先確保已\",[\"$\",\"a\",null,{\"href\":\"/docs/pulse#installation\",\"children\":\"安裝 Pulse\"}],\"。然後,將任何 Reverb 的記錄器新增到應用程式的 \",[\"$\",\"code\",null,{\"children\":\"config/pulse.php\"}],\" 設定檔中:\"]}]\n"])</script><script>self.__next_f.push([1,"39:[\"$\",\"$Lf\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" Laravel\\\\Reverb\\\\Pulse\\\\Recorders\\\\ReverbConnections\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"use\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" Laravel\\\\Reverb\\\\Pulse\\\\Recorders\\\\ReverbMessages\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'recorders'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" [\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"    ReverbConnections\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::class\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" [\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        'sample_rate'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" 1\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    ],\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"    ReverbMessages\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"::class\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" [\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        'sample_rate'\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" 1\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    ],\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"    // ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"],\"}]}]]}]}]\n"])</script><script>self.__next_f.push([1,"3a:[\"$\",\"p\",null,{\"children\":[\"接下來,將每個記錄器的 Pulse 卡片新增到您的 \",[\"$\",\"a\",null,{\"href\":\"/docs/pulse#dashboard-customization\",\"children\":\"Pulse 儀表板\"}],\":\"]}]\n"])</script><script>self.__next_f.push([1,"3b:[\"$\",\"$Lf\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#85E89D\",\"--shiki-light\":\"#22863A\"},\"children\":\"x-pulse\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"\u003e\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    \u003c\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#85E89D\",\"--shiki-light\":\"#22863A\"},\"children\":\"livewire:reverb.connections\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" cols\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"full\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" /\u003e\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    \u003c\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#85E89D\",\"--shiki-light\":\"#22863A\"},\"children\":\"livewire:reverb.messages\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" cols\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"full\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" /\u003e\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"\u003c/\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#85E89D\",\"--shiki-light\":\"#22863A\"},\"children\":\"x-pulse\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"\u003e\"}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"3c:[\"$\",\"p\",null,{\"children\":[\"連線活動是透過定期輪詢新更新來記錄的。為了確保此資訊在 Pulse 儀表板上正確呈現,您必須在 Reverb 伺服器上執行 \",[\"$\",\"code\",null,{\"children\":\"pulse:check\"}],\" 守護程序。如果您在\",[\"$\",\"a\",null,{\"href\":\"#scaling\",\"children\":\"水平擴展\"}],\"設定中執行 Reverb,您應該只在其中一台伺服器上執行此守護程序。\"]}]\n3d:[\"$\",\"a\",null,{\"name\":\"production\"}]\n3e:[\"$\",\"h2\",null,{\"id\":\"在正式環境執行-reverb-running-reverb-in-production\",\"children\":[\"$\",\"a\",null,{\"href\":\"#在正式環境執行-reverb-running-reverb-in-production\",\"children\":\"在正式環境執行 Reverb (Running Reverb in Production)\"}]}]\n3f:[\"$\",\"p\",null,{\"children\":\"由於 WebSocket 伺服器的長時間執行特性,您可能需要對伺服器和主機環境進行一些最佳化,以確保您的 Reverb 伺服器能夠有效處理伺服器上可用資源的最佳連線數。\"}]\n40:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\n如果您的網站由 \",[\"$\",\"a\",null,{\"href\":\"https://forge.laravel.com\",\"children\":\"Laravel Forge\"}],\" 管理,您可以直接從「Application」面板自動為 Reverb 最佳化您的伺服器。透過啟用 Reverb 整合,Forge 將確保您的伺服器已準備好用於正式環境,包括安裝任何必要的擴充套件並增加允許的連線數。\"]}],\"\\n\"]}]\n41:[\"$\",\"a\",null,{\"name\":\"open-files\"}]\n42:[\"$\",\"h3\",null,{\"id\":\"開啟的檔案-open-files\",\"children\":[\"$\",\"a\",null,{\"href\":\"#開啟的檔案-open-files\",\"children\":\"開啟的檔案 (Open Files)\"}]}]\n43:[\"$\",\"p\",null,{\"children\":\"每個 WebSocket 連線都會保存在記憶體中,直到客戶端或伺服器斷開連線。在 Unix 和類 Unix 環境中,每個連線都由一個檔案表示。然而,在作業系統和應用程式層級通常都有允許開啟檔案數量的限制。\"}]\n44:[\"$\",\"a\",null,{\"name\":\"operating-system\"}]\n45:[\"$\",\"h4\",null,{\"id\":\"作業系統-operating-system\",\"children\":[\"$\",\"a\",null,{\"href\":\"#作業系統-operating-system\",\"children\":\"作業系統 (Operating System)\"}]}]\n46:[\"$\",\"p\",null,{\"children\":[\"在基於 Unix 的作業系統上,您可以使用 \",[\"$\",\"code\",null,{\"children\":\"ulimit\"}],\" 指令來確定允許的開啟檔案數量:\"]}]\n47:[\"$\",\"$Lf\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"ulimit\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" -n\"}]]}]}]}]\n48:[\"$\",\"p\",null,{\"children\":[\"此指令將顯示不同使用者允許的開啟檔案限制。您可以透過編輯 \",[\"$\",\"code\",null,{\"children\":\"/etc/security/limits.conf\"}],\" 檔案來更新這些值。例如,將 \",[\"$\",\"code\",null,{\"children\":\"forge\"}],\" 使用者的最大開啟檔案數更新為 10,000 將如下所示:\"]}]\n49:[\"$\",\"$Lf\",null,{\"className\":\"language-ini\",\"raw\":\"# /etc/security/limits.conf\\nforge        soft  nofile  10000\\nforge        hard  nofile  10000\\n\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-ini\",\"children\":\"# /etc/security/limits.conf\\nforge        soft  nofile  10000\\nforge        hard  nofile  10000\\n\"}]}]\n4a:[\"$\",\"a\",null,{\"name\":\"event-loop\"}]\n4b:[\"$\",\"h3\",null,{\"id\":\"事件迴圈-event-loop\",\"children\":[\"$\",\"a\",null,{\"href\":\"#事件迴圈-event-loop\",\"children\":\"事件迴圈 (Event Loop)\"}]}]\n4c:[\"$\",\"p\",null,{\"children\":[\"在幕後,Reverb 使用 ReactPHP 事件迴圈來管理伺服器上的 WebSocket 連線。預設情況下,此事件迴圈由 \",[\"$\",\"code\",null,{\"children\":\"stream_select\"}],\" 驅動,不需要任何額外的擴充套件。然而,\",[\"$\",\"code\",null,{\"children\":\"stream_select\"}],\" 通常限制為 1,024 個開啟的檔案。因此,如果您計劃處理超過 1,000 個並發連線,您將需要使用不受相同限制約束的替代事件迴圈。\"]}]\n4d:[\"$\",\"p\",null,{\"children\":[\"當可用時,Reverb 將自動切換到由 \",[\"$\",\"code\",null,{\"children\":\"ext-uv\"}],\" 驅動的迴圈。此 PHP 擴充"])</script><script>self.__next_f.push([1,"套件可透過 PECL 安裝:\"]}]\n4e:[\"$\",\"$Lf\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"pecl\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" install\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" uv\"}]]}]}]}]\n4f:[\"$\",\"a\",null,{\"name\":\"web-server\"}]\n50:[\"$\",\"h3\",null,{\"id\":\"網頁伺服器-web-server\",\"children\":[\"$\",\"a\",null,{\"href\":\"#網頁伺服器-web-server\",\"children\":\"網頁伺服器 (Web Server)\"}]}]\n51:[\"$\",\"p\",null,{\"children\":[\"在大多數情況下,Reverb 在伺服器上的非面向網頁的連接埠上執行。因此,為了將流量路由到 Reverb,您應該設定反向代理。假設 Reverb 在主機 \",[\"$\",\"code\",null,{\"children\":\"0.0.0.0\"}],\" 和連接埠 \",[\"$\",\"code\",null,{\"children\":\"8080\"}],\" 上執行,並且您的伺服器使用 Nginx 網頁伺服器,可以使用以下 Nginx 網站設定為您的 Reverb 伺服器定義反向代理:\"]}]\n52:[\"$\",\"$Lf\",null,{\"className\":\"language-nginx\",\"raw\":\"server {\\n    ...\\n\\n    location / {\\n        proxy_http_version 1.1;\\n        proxy_set_header Host $http_host;\\n        proxy_set_header Scheme $scheme;\\n        proxy_set_header SERVER_PORT $server_port;\\n        proxy_set_header REMOTE_ADDR $remote_addr;\\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\\n        proxy_set_header Upgrade $http_upgrade;\\n        proxy_set_header Connection \\\"Upgrade\\\";\\n\\n        proxy_pass http://0.0.0.0:8080;\\n    }\\n\\n    ...\\n}\\n\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-nginx\",\"children\":\"server {\\n    ...\\n\\n    location / {\\n        proxy_http_version 1.1;\\n        proxy_set_header Host $http_host;\\n        proxy_set_header Scheme $scheme;\\n        proxy_set_header SERVER_PORT $server_port;\\n        proxy_set_header REMOTE_ADDR $remote_addr;\\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\\n        proxy_set_header Upgrade $http_upgrade;\\n        proxy_set_header Connection \\\"Upgrade\\\";\\n\\n        proxy_pass http://0.0.0.0:8080;\\n    }\\n\\n    ...\\n}\\n\"}]}]\n53:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\nReverb 在 \",[\"$\",\"code\",null,{\"children\":\"/app\"}],\" 監聽 WebSocket 連線,並在 \",[\"$\",\"code\",null,{\"children\":\"/apps\"}],\" 處理 API 請求。您應該確保處理 Reverb 請求的網頁伺服器可以服務這兩個 URI。如果您使用 \",[\"$\",\"a\",null,{\"href\":\"https://forge.laravel.com\",\"children\":\"Laravel Forge\"}],\" 管理您的伺服器,您的 Reverb 伺服器預設將被正確設定。\"]}],\"\\n\"]}]\n54:[\"$\",\"p\",null,{\"children\":[\"通常,網頁伺服器被設定為限制允許的連線數,以防止伺服器過載。要將 Nginx 網頁伺服器上允許的連線數增加到 10,000,應更新 \",[\"$\",\"code\",null,{\"children\":\"nginx.conf\"}],\" 檔案的 \",[\"$\",\"code\",null,{\"children\":\"worker_rlimit_nofile\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"worker_connections\"}],\" 值:\"]}]\n55:[\"$\",\"$Lf\",null,{\"className\":\"language-nginx\",\"raw\":\"user forge;\\nworker_processes auto;\\npid /run/nginx.pid;\\ninclude /etc/nginx/modules-enabled/*.conf;\\nworker_rlimit_nofile 10000;\\n\\nevents {\\n  worker_connections 10000;\\n  multi_accept on;\\n}\\n\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-nginx\",\"children\":\"user forge;\\nworker_processes auto;\\npid /run/nginx.pid;\\ninclude /etc/nginx/modules-enabled/*.conf;\\nworker_rlimit_nofile 10000;\\n\\nevents {\\n  worker_connections 10000;\\n  multi_accept on;\\n}\\n\"}]}]\n56:[\"$\",\"p\",null,{\"children\":\"上述設定將允許每個程序產生最多 10,000 個 Nginx 工作程序。此外,此設定將 Nginx 的開啟檔案限制設定為 10,000。\"}]\n57:[\"$\",\"a\",null,{\"name\":\"ports\"}]\n58:[\"$\",\"h3\",null,{\"id\":\"連接埠-ports\",\"children\":[\"$\",\"a\",null,{\"href\":\"#連接埠-ports\",\"children\":\"連接埠 (Ports)\"}]}]\n59:[\"$\",\"p\",null,{\"children\":\"基於 Unix 的作業系統通常會限制可以在伺服器上開啟的連接埠"])</script><script>self.__next_f.push([1,"數量。您可以透過以下指令查看目前允許的範圍:\"}]\n5a:[\"$\",\"$Lf\",null,{\"className\":\"\",\"raw\":\"$undefined\",\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\"cat\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" /proc/sys/net/ipv4/ip_local_port_range\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"# 32768\\t60999\"}]}]]}]}]\n5b:[\"$\",\"p\",null,{\"children\":[\"上述輸出顯示伺服器最多可以處理 28,231 (60,999 - 32,768) 個連線,因為每個連線都需要一個空閒的連接埠。雖然我們建議使用\",[\"$\",\"a\",null,{\"href\":\"#scaling\",\"children\":\"水平擴展\"}],\"來增加允許的連線數,但您可以透過更新伺服器的 \",[\"$\",\"code\",null,{\"children\":\"/etc/sysctl.conf\"}],\" 設定檔中允許的連接埠範圍來增加可用的開啟連接埠數量。\"]}]\n5c:[\"$\",\"a\",null,{\"name\":\"process-management\"}]\n5d:[\"$\",\"h3\",null,{\"id\":\"程序管理-process-management\",\"children\":[\"$\",\"a\",null,{\"href\":\"#程序管理-process-management\",\"children\":\"程序管理 (Process Management)\"}]}]\n5e:[\"$\",\"p\",null,{\"children\":[\"在大多數情況下,您應該使用程序管理器(如 Supervisor)來確保 Reverb 伺服器持續執行。如果您使用 Supervisor 執行 Reverb,您應該更新伺服器的 \",[\"$\",\"code\",null,{\"children\":\"supervisor.conf\"}],\" 檔案的 \",[\"$\",\"code\",null,{\"children\":\"minfds\"}],\" 設定,以確保 Supervisor 能夠開啟處理 Reverb 伺服器連線所需的檔案:\"]}]\n5f:[\"$\",\"$Lf\",null,{\"className\":\"language-ini\",\"raw\":\"[supervisord]\\n...\\nminfds=10000\\n\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-ini\",\"children\":\"[supervisord]\\n...\\nminfds=10000\\n\"}]}]\n60:[\"$\",\"a\",null,{\"name\":\"scaling\"}]\n61:[\"$\",\"h3\",null,{\"id\":\"擴展-scaling\",\"children\":[\"$\",\"a\",null,{\"href\":\"#擴展-scaling\",\"children\":\"擴展 (Scaling)\"}]}]\n62:[\"$\",\"p\",null,{\"children\":\"如果您需要處理超過單一伺服器允許的連線數,您可以水平擴展您的 Reverb 伺服器。利用 Redis 的發布/訂閱功能,Reverb 能夠管理跨多個伺服器的連線。當您的應用程式的其中一個 Reverb 伺服器接收到訊息時,該伺服器將使用 Redis 將傳入的訊息發布到所有其他伺服器。\"}]\n63:[\"$\",\"p\",null,{\"children\":[\"要啟用水平擴展,您應該在應用程式的 \",[\"$\",\"code\",null,{\"children\":\".env\"}],\" 設定檔中將 \",[\"$\",\"code\",null,{\"children\":\"REVERB_SCALING_ENABLED\"}],\" 環境變數設定為 \",[\"$\",\"code\",null,{\"children\":\"true\"}],\":\"]}]\n64:[\"$\",\"$Lf\",null,{\"className\":\"language-env\",\"raw\":\"REVERB_SCALING_ENABLED=true\\n\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-env\",\"children\":\"REVERB_SCALING_ENABLED=true\\n\"}]}]\n65:[\"$\",\"p\",null,{\"children\":[\"接下來,您應該有一個專用的中央 Redis 伺服器,所有 Reverb 伺服器都將與之通訊。Reverb 將使用\",[\"$\",\"a\",null,{\"href\":\"/docs/redis#configuration\",\"children\":\"為您的應用程式設定的預設 Redis 連線\"}],\"將訊息發布到所有 Reverb 伺服器。\"]}]\n66:[\"$\",\"p\",null,{\"children\":[\"一旦您啟用了 Reverb 的擴展選項並設定了 Redis 伺服器,您只需在能夠與您的 Redis 伺服器通訊的多個伺服器上呼叫 \",[\"$\",\"code\",null,{\"children\":\"reverb:start\"}],\" 指令。這些 Reverb 伺服器應該放置在負載平衡器後面,該負載平衡器將傳入的請求均勻分配到各個伺服器。\"]}]\n67:[\"$\",\"$L68\",null,{\"items\":[{\"id\":\"簡介-introduction\",\"text\":\"簡介 (Introduction)\",\"level\":2},{\"id\":\"安裝-installation\",\"text\":\"安裝 (Installation)\",\"level\":2},{\"id\":\"設定-configuration\",\"text\":\"設定 (Configuration)\",\"level\":2},{\"id\":\"應用程式憑證-application-credentials\",\"text\":\"應用程式憑證 (Application Credentials)\",\"level\":3},{\"id\":\"允許的來源-allowed-origins\",\"text\":\"允許的來源 (Allowed Origins)\",\"level\":3},{\"id\":\"額外的應用程式-additional-applications\",\"text\":\"額外的應用"])</script><script>self.__next_f.push([1,"程式 (Additional Applications)\",\"level\":3},{\"id\":\"ssl\",\"text\":\"SSL\",\"level\":3},{\"id\":\"執行伺服器-running-the-server\",\"text\":\"執行伺服器 (Running the Server)\",\"level\":2},{\"id\":\"除錯-debugging\",\"text\":\"除錯 (Debugging)\",\"level\":3},{\"id\":\"重新啟動-restarting\",\"text\":\"重新啟動 (Restarting)\",\"level\":3},{\"id\":\"監控-monitoring\",\"text\":\"監控 (Monitoring)\",\"level\":2},{\"id\":\"在正式環境執行-reverb-running-reverb-in-production\",\"text\":\"在正式環境執行 Reverb (Running Reverb in Production)\",\"level\":2},{\"id\":\"開啟的檔案-open-files\",\"text\":\"開啟的檔案 (Open Files)\",\"level\":3},{\"id\":\"作業系統-operating-system\",\"text\":\"作業系統 (Operating System)\",\"level\":4},{\"id\":\"事件迴圈-event-loop\",\"text\":\"事件迴圈 (Event Loop)\",\"level\":3},{\"id\":\"網頁伺服器-web-server\",\"text\":\"網頁伺服器 (Web Server)\",\"level\":3},{\"id\":\"連接埠-ports\",\"text\":\"連接埠 (Ports)\",\"level\":3},{\"id\":\"程序管理-process-management\",\"text\":\"程序管理 (Process Management)\",\"level\":3},{\"id\":\"擴展-scaling\",\"text\":\"擴展 (Scaling)\",\"level\":3}]}]\n"])</script><script>self.__next_f.push([1,"69:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"IconMark\"]\nd:[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$L69\",\"3\",{}]]\n9:null\n"])</script></body></html>