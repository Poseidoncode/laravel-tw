<!DOCTYPE html><!--mFHGnIr2wV_N13OtGl4eL--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/d0bdc467f6614b6a.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/cbd55ab9639e1e66.js"/><script src="/_next/static/chunks/87a939617be2fa8c.js" async=""></script><script src="/_next/static/chunks/8368f298651cbd89.js" async=""></script><script src="/_next/static/chunks/6740f161f60c6ab5.js" async=""></script><script src="/_next/static/chunks/turbopack-929fc2ce3ca903db.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/247eb132b7f7b574.js" async=""></script><script src="/_next/static/chunks/796e69ae18b2784c.js" async=""></script><script src="/_next/static/chunks/080eab8e3bf47110.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased"><div hidden=""><!--$--><!--/$--></div><div class="flex min-h-screen bg-background"><div class="w-64 border-r bg-background h-screen sticky top-0 hidden md:block"><div class="p-6 font-bold text-xl border-b flex items-center gap-2"><span class="text-red-600">Laravel</span> Docs CN</div><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-65px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="p-4 space-y-2"><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>前言</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">發行說明</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>入門</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/installation"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">安裝</button></a><a class="block" href="/docs/configuration"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">配置</button></a><a class="block" href="/docs/structure"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">目錄結構</button></a><a class="block" href="/docs/lifecycle"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">生命週期</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>架構</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>基礎功能</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>深入探討</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>安全性</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>資料庫</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>Eloquent ORM</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>測試</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>其他</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>官方套件</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div class="border-t pt-4 space-y-2"><a class="block" href="/docs/api"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">API 文件</button></a><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">更新日誌</button></a></div></div></div></div></div></div><main class="flex-1 relative"><div class="container mx-auto py-10"><div class="mx-auto max-w-3xl"><div class="mb-8"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Controllers</h1><p class="text-xl text-muted-foreground mt-2">學習如何使用 Laravel Controllers 組織請求處理邏輯</p></div><article class="prose prose-slate dark:prose-invert max-w-none"><h1 id="controllers"><a href="#controllers">Controllers</a></h1>
<ul>
<li><a href="#introduction">簡介</a></li>
<li><a href="#writing-controllers">撰寫 Controllers</a>
<ul>
<li><a href="#basic-controllers">基本 Controllers</a></li>
<li><a href="#single-action-controllers">單一動作 Controllers</a></li>
</ul>
</li>
<li><a href="#controller-middleware">Controller Middleware</a></li>
<li><a href="#resource-controllers">Resource Controllers</a>
<ul>
<li><a href="#restful-partial-resource-routes">部分 Resource 路由</a></li>
<li><a href="#restful-nested-resources">巢狀 Resources</a></li>
<li><a href="#restful-naming-resource-routes">命名 Resource 路由</a></li>
<li><a href="#restful-naming-resource-route-parameters">命名 Resource 路由參數</a></li>
<li><a href="#restful-scoping-resource-routes">限定 Resource 路由範圍</a></li>
<li><a href="#restful-localizing-resource-uris">在地化 Resource URIs</a></li>
<li><a href="#restful-supplementing-resource-controllers">補充 Resource Controllers</a></li>
<li><a href="#singleton-resource-controllers">Singleton Resource Controllers</a></li>
<li><a href="#middleware-and-resource-controllers">Middleware 與 Resource Controllers</a></li>
</ul>
</li>
<li><a href="#dependency-injection-and-controllers">依賴注入與 Controllers</a></li>
</ul>
<a name="introduction"></a>
<h2 id="簡介"><a href="#簡介">簡介</a></h2>
<p>除了在路由檔案中將所有請求處理邏輯定義為閉包之外，你可能會希望使用「controller」類別來組織這些行為。Controllers 可以將相關的請求處理邏輯組合到一個類別中。例如，一個 <code>UserController</code> 類別可能處理所有與使用者相關的傳入請求，包括顯示、建立、更新和刪除使用者。預設情況下，controllers 會儲存在 <code>app/Http/Controllers</code> 目錄中。</p>
<a name="writing-controllers"></a>
<h2 id="撰寫-controllers"><a href="#撰寫-controllers">撰寫 Controllers</a></h2>
<a name="basic-controllers"></a>
<h3 id="基本-controllers"><a href="#基本-controllers">基本 Controllers</a></h3>
<p>要快速產生一個新的 controller，你可以執行 <code>make:controller</code> Artisan 指令。預設情況下，應用程式的所有 controllers 都儲存在 <code>app/Http/Controllers</code> 目錄中：</p>
<pre><code class="language-shell">php artisan make:controller UserController
</code></pre>
<p>讓我們看一個基本 controller 的範例。一個 controller 可以有任意數量的公開方法來回應傳入的 HTTP 請求：</p>
<pre><code class="language-php">&lt;?php

namespace App\Http\Controllers;

use App\Models\User;
use Illuminate\View\View;

class UserController extends Controller
{
    /**
     * Show the profile for a given user.
     */
    public function show(string $id): View
    {
        return view(&#x27;user.profile&#x27;, [
            &#x27;user&#x27; =&gt; User::findOrFail($id)
        ]);
    }
}
</code></pre>
<p>撰寫完 controller 類別和方法後，你可以像這樣定義一個路由到 controller 方法：</p>
<pre><code class="language-php">use App\Http\Controllers\UserController;

Route::get(&#x27;/user/{&#x27;{id}&#x27;}&#x27;, [UserController::class, &#x27;show&#x27;]);
</code></pre>
<p>當傳入請求符合指定的路由 URI 時，<code>App\Http\Controllers\UserController</code> 類別上的 <code>show</code> 方法將會被呼叫，並且路由參數將被傳遞給該方法。</p>
<blockquote>
<p>[!NOTE]
Controllers <strong>並非必須</strong>繼承基底類別。但是，有時候繼承一個包含應該在所有 controllers 之間共享的方法的基底 controller 類別會很方便。</p>
</blockquote>
<a name="single-action-controllers"></a>
<h3 id="單一動作-controllers"><a href="#單一動作-controllers">單一動作 Controllers</a></h3>
<p>如果一個 controller 動作特別複雜，你可能會發現將整個 controller 類別專門用於該單一動作很方便。為了實現這一點，你可以在 controller 內定義一個單一的 <code>__invoke</code> 方法：</p>
<pre><code class="language-php">&lt;?php

namespace App\Http\Controllers;

class ProvisionServer extends Controller
{
    /**
     * Provision a new web server.
     */
    public function __invoke()
    {
        // ...
    }
}
</code></pre>
<p>當為單一動作 controllers 註冊路由時，你不需要指定 controller 方法。相反地,你可以直接將 controller 的名稱傳遞給路由器：</p>
<pre><code class="language-php">use App\Http\Controllers\ProvisionServer;

Route::post(&#x27;/server&#x27;, ProvisionServer::class);
</code></pre>
<p>你可以在使用 <code>make:controller</code> Artisan 指令時使用 <code>--invokable</code> 選項來產生可呼叫的 controller：</p>
<pre><code class="language-shell">php artisan make:controller ProvisionServer --invokable
</code></pre>
<blockquote>
<p>[!NOTE]
Controller 樣板可以使用 <a href="/docs/12.x/artisan#stub-customization">stub 發布</a> 進行自訂。</p>
</blockquote>
<a name="controller-middleware"></a>
<h2 id="controller-middleware"><a href="#controller-middleware">Controller Middleware</a></h2>
<p><a href="/docs/12.x/middleware">Middleware</a> 可以在路由檔案中指派給 controller 的路由：</p>
<pre><code class="language-php">Route::get(&#x27;/profile&#x27;, [UserController::class, &#x27;show&#x27;])-&gt;middleware(&#x27;auth&#x27;);
</code></pre>
<p>或者，你可能會發現在 controller 類別中指定 middleware 很方便。為此，你的 controller 應該實作 <code>HasMiddleware</code> 介面，該介面要求 controller 具有一個靜態的 <code>middleware</code> 方法。從這個方法中，你可以回傳一個應該套用於 controller 動作的 middleware 陣列：</p>
<pre><code class="language-php">&lt;?php

namespace App\Http\Controllers;

use Illuminate\Routing\Controllers\HasMiddleware;
use Illuminate\Routing\Controllers\Middleware;

class UserController implements HasMiddleware
{
    /**
     * Get the middleware that should be assigned to the controller.
     */
    public static function middleware(): array
    {
        return [
            &#x27;auth&#x27;,
            new Middleware(&#x27;log&#x27;, only: [&#x27;index&#x27;]),
            new Middleware(&#x27;subscribed&#x27;, except: [&#x27;store&#x27;]),
        ];
    }

    // ...
}
</code></pre>
<p>你也可以將 controller middleware 定義為閉包，這提供了一種方便的方式來定義內聯 middleware 而無需撰寫完整的 middleware 類別：</p>
<pre><code class="language-php">use Closure;
use Illuminate\Http\Request;

/**
 * Get the middleware that should be assigned to the controller.
 */
public static function middleware(): array
{
    return [
        function (Request $request, Closure $next) {
            return $next($request);
        },
    ];
}
</code></pre>
<a name="resource-controllers"></a>
<h2 id="resource-controllers"><a href="#resource-controllers">Resource Controllers</a></h2>
<p>如果你將應用程式中的每個 Eloquent model 視為一個「resource」，那麼對應用程式中的每個 resource 執行相同的動作集是很常見的。例如，假設你的應用程式包含一個 <code>Photo</code> model 和一個 <code>Movie</code> model。使用者很可能可以建立、讀取、更新或刪除這些 resources。</p>
<p>由於這種常見的使用情境，Laravel resource 路由只需一行程式碼就可以將典型的建立、讀取、更新和刪除（「CRUD」）路由指派給 controller。首先，我們可以使用 <code>make:controller</code> Artisan 指令的 <code>--resource</code> 選項來快速建立一個 controller 來處理這些動作：</p>
<pre><code class="language-shell">php artisan make:controller PhotoController --resource
</code></pre>
<p>此指令將在 <code>app/Http/Controllers/PhotoController.php</code> 產生一個 controller。該 controller 將包含每個可用 resource 操作的方法。接下來，你可以註冊一個指向該 controller 的 resource 路由：</p>
<pre><code class="language-php">use App\Http\Controllers\PhotoController;

Route::resource(&#x27;photos&#x27;, PhotoController::class);
</code></pre>
<p>這個單一的路由宣告會建立多個路由來處理 resource 上的各種動作。產生的 controller 將已經為每個動作準備好方法樣板。請記住，你隨時可以透過執行 <code>route:list</code> Artisan 指令來快速查看應用程式的路由概覽。</p>
<p>你甚至可以透過將陣列傳遞給 <code>resources</code> 方法來一次註冊多個 resource controllers：</p>
<pre><code class="language-php">Route::resources([
    &#x27;photos&#x27; =&gt; PhotoController::class,
    &#x27;posts&#x27; =&gt; PostController::class,
]);
</code></pre>
<p><code>softDeletableResources</code> 方法會註冊多個 resources controllers，它們都使用 <code>withTrashed</code> 方法：</p>
<pre><code class="language-php">Route::softDeletableResources([
    &#x27;photos&#x27; =&gt; PhotoController::class,
    &#x27;posts&#x27; =&gt; PostController::class,
]);
</code></pre>
<a name="actions-handled-by-resource-controllers"></a>
<h4 id="resource-controllers-處理的動作"><a href="#resource-controllers-處理的動作">Resource Controllers 處理的動作</a></h4>
<div class="overflow-auto"><p>| 動詞      | URI                    | 動作    | 路由名稱       |
| --------- | ---------------------- | ------- | -------------- |
| GET       | <code>/photos</code>              | index   | photos.index   |
| GET       | <code>/photos/create</code>       | create  | photos.create  |
| POST      | <code>/photos</code>              | store   | photos.store   |
| GET       | <code>/photos/{photo}</code>      | show    | photos.show    |
| GET       | <code>/photos/{photo}/edit</code> | edit    | photos.edit    |
| PUT/PATCH | <code>/photos/{photo}</code>      | update  | photos.update  |
| DELETE    | <code>/photos/{photo}</code>      | destroy | photos.destroy |</p></div>
<a name="customizing-missing-model-behavior"></a>
<h4 id="自訂找不到-model-的行為"><a href="#自訂找不到-model-的行為">自訂找不到 Model 的行為</a></h4>
<p>通常，如果找不到隱式繫結的 resource model，將會產生 404 HTTP 回應。但是，你可以在定義 resource 路由時呼叫 <code>missing</code> 方法來自訂此行為。<code>missing</code> 方法接受一個閉包，如果對於任何 resource 的路由都找不到隱式繫結的 model，該閉包將會被呼叫：</p>
<pre><code class="language-php">use App\Http\Controllers\PhotoController;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Redirect;

Route::resource(&#x27;photos&#x27;, PhotoController::class)
    -&gt;missing(function (Request $request) {
        return Redirect::route(&#x27;photos.index&#x27;);
    });
</code></pre>
<a name="soft-deleted-models"></a>
<h4 id="軟刪除-models"><a href="#軟刪除-models">軟刪除 Models</a></h4>
<p>通常，隱式 model 繫結不會擷取已經<a href="/docs/12.x/eloquent#soft-deleting">軟刪除</a>的 models，而是會回傳 404 HTTP 回應。但是，你可以在定義 resource 路由時呼叫 <code>withTrashed</code> 方法來指示框架允許軟刪除的 models：</p>
<pre><code class="language-php">use App\Http\Controllers\PhotoController;

Route::resource(&#x27;photos&#x27;, PhotoController::class)-&gt;withTrashed();
</code></pre>
<p>不帶參數呼叫 <code>withTrashed</code> 將允許 <code>show</code>、<code>edit</code> 和 <code>update</code> resource 路由使用軟刪除的 models。你可以透過將陣列傳遞給 <code>withTrashed</code> 方法來指定這些路由的子集：</p>
<pre><code class="language-php">Route::resource(&#x27;photos&#x27;, PhotoController::class)-&gt;withTrashed([&#x27;show&#x27;]);
</code></pre>
<a name="specifying-the-resource-model"></a>
<h4 id="指定-resource-model"><a href="#指定-resource-model">指定 Resource Model</a></h4>
<p>如果你正在使用<a href="/docs/12.x/routing#route-model-binding">路由 model 繫結</a>並且希望 resource controller 的方法對 model 實例進行型別提示，你可以在產生 controller 時使用 <code>--model</code> 選項：</p>
<pre><code class="language-shell">php artisan make:controller PhotoController --model=Photo --resource
</code></pre>
<a name="generating-form-requests"></a>
<h4 id="產生表單請求"><a href="#產生表單請求">產生表單請求</a></h4>
<p>你可以在產生 resource controller 時提供 <code>--requests</code> 選項，以指示 Artisan 為 controller 的儲存和更新方法產生 <a href="/docs/12.x/validation#form-request-validation">form request 類別</a>：</p>
<pre><code class="language-shell">php artisan make:controller PhotoController --model=Photo --resource --requests
</code></pre>
<a name="restful-partial-resource-routes"></a>
<h3 id="部分-resource-路由"><a href="#部分-resource-路由">部分 Resource 路由</a></h3>
<p>在宣告 resource 路由時，你可以指定 controller 應該處理的動作子集，而不是完整的預設動作集：</p>
<pre><code class="language-php">use App\Http\Controllers\PhotoController;

Route::resource(&#x27;photos&#x27;, PhotoController::class)-&gt;only([
    &#x27;index&#x27;, &#x27;show&#x27;
]);

Route::resource(&#x27;photos&#x27;, PhotoController::class)-&gt;except([
    &#x27;create&#x27;, &#x27;store&#x27;, &#x27;update&#x27;, &#x27;destroy&#x27;
]);
</code></pre>
<a name="api-resource-routes"></a>
<h4 id="api-resource-路由"><a href="#api-resource-路由">API Resource 路由</a></h4>
<p>當宣告將被 APIs 使用的 resource 路由時,你通常會希望排除呈現 HTML 樣板的路由，例如 <code>create</code> 和 <code>edit</code>。為了方便起見，你可以使用 <code>apiResource</code> 方法自動排除這兩個路由：</p>
<pre><code class="language-php">use App\Http\Controllers\PhotoController;

Route::apiResource(&#x27;photos&#x27;, PhotoController::class);
</code></pre>
<p>你可以透過將陣列傳遞給 <code>apiResources</code> 方法來一次註冊多個 API resource controllers：</p>
<pre><code class="language-php">use App\Http\Controllers\PhotoController;
use App\Http\Controllers\PostController;

Route::apiResources([
    &#x27;photos&#x27; =&gt; PhotoController::class,
    &#x27;posts&#x27; =&gt; PostController::class,
]);
</code></pre>
<p>要快速產生不包含 <code>create</code> 或 <code>edit</code> 方法的 API resource controller，請在執行 <code>make:controller</code> 指令時使用 <code>--api</code> 開關：</p>
<pre><code class="language-shell">php artisan make:controller PhotoController --api
</code></pre>
<a name="restful-nested-resources"></a>
<h3 id="巢狀-resources"><a href="#巢狀-resources">巢狀 Resources</a></h3>
<p>有時候你可能需要定義到巢狀 resource 的路由。例如，一個照片 resource 可能有多個附加到照片的評論。要巢狀 resource controllers，你可以在路由宣告中使用「點」符號：</p>
<pre><code class="language-php">use App\Http\Controllers\PhotoCommentController;

Route::resource(&#x27;photos.comments&#x27;, PhotoCommentController::class);
</code></pre>
<p>此路由將註冊一個巢狀 resource，可以使用如下 URIs 存取：</p>
<pre><code class="language-text">/photos/{&#x27;{photo}&#x27;}/comments/{&#x27;{comment}&#x27;}
</code></pre>
<a name="scoping-nested-resources"></a>
<h4 id="限定巢狀-resources-的範圍"><a href="#限定巢狀-resources-的範圍">限定巢狀 Resources 的範圍</a></h4>
<p>Laravel 的<a href="/docs/12.x/routing#implicit-model-binding-scoping">隱式 model 繫結</a>功能可以自動限定巢狀繫結的範圍，使得已解析的子 model 被確認屬於父 model。透過在定義巢狀 resource 時使用 <code>scoped</code> 方法，你可以啟用自動範圍限定，並指示 Laravel 應該透過哪個欄位擷取子 resource。有關如何完成此操作的更多資訊，請參閱有關<a href="#restful-scoping-resource-routes">限定 resource 路由範圍</a>的文件。</p>
<a name="shallow-nesting"></a>
<h4 id="淺層巢狀"><a href="#淺層巢狀">淺層巢狀</a></h4>
<p>通常，在 URI 中同時擁有父 ID 和子 ID 並不是完全必要的，因為子 ID 已經是唯一識別碼。當使用諸如自動遞增主鍵之類的唯一識別碼來識別 URI 區段中的 models 時，你可以選擇使用「淺層巢狀」：</p>
<pre><code class="language-php">use App\Http\Controllers\CommentController;

Route::resource(&#x27;photos.comments&#x27;, CommentController::class)-&gt;shallow();
</code></pre>
<p>此路由定義將定義以下路由：</p>
<div class="overflow-auto"><p>| 動詞      | URI                               | 動作    | 路由名稱               |
| --------- | --------------------------------- | ------- | ---------------------- |
| GET       | <code>/photos/{photo}/comments</code>        | index   | photos.comments.index  |
| GET       | <code>/photos/{photo}/comments/create</code> | create  | photos.comments.create |
| POST      | <code>/photos/{photo}/comments</code>        | store   | photos.comments.store  |
| GET       | <code>/comments/{comment}</code>             | show    | comments.show          |
| GET       | <code>/comments/{comment}/edit</code>        | edit    | comments.edit          |
| PUT/PATCH | <code>/comments/{comment}</code>             | update  | comments.update        |
| DELETE    | <code>/comments/{comment}</code>             | destroy | comments.destroy       |</p></div>
<a name="restful-naming-resource-routes"></a>
<h3 id="命名-resource-路由"><a href="#命名-resource-路由">命名 Resource 路由</a></h3>
<p>預設情況下，所有 resource controller 動作都有一個路由名稱；但是，你可以透過傳遞一個 <code>names</code> 陣列來覆蓋這些名稱，其中包含你想要的路由名稱：</p>
<pre><code class="language-php">use App\Http\Controllers\PhotoController;

Route::resource(&#x27;photos&#x27;, PhotoController::class)-&gt;names([
    &#x27;create&#x27; =&gt; &#x27;photos.build&#x27;
]);
</code></pre>
<a name="restful-naming-resource-route-parameters"></a>
<h3 id="命名-resource-路由參數"><a href="#命名-resource-路由參數">命名 Resource 路由參數</a></h3>
<p>預設情況下，<code>Route::resource</code> 將根據 resource 名稱的「單數化」版本為你的 resource 路由建立路由參數。你可以使用 <code>parameters</code> 方法輕鬆地在每個 resource 基礎上覆蓋此設定。傳遞給 <code>parameters</code> 方法的陣列應該是 resource 名稱和參數名稱的關聯陣列：</p>
<pre><code class="language-php">use App\Http\Controllers\AdminUserController;

Route::resource(&#x27;users&#x27;, AdminUserController::class)-&gt;parameters([
    &#x27;users&#x27; =&gt; &#x27;admin_user&#x27;
]);
</code></pre>
<p>上面的範例為 resource 的 <code>show</code> 路由產生以下 URI：</p>
<pre><code class="language-text">/users/{&#x27;{admin_user}&#x27;}
</code></pre>
<a name="restful-scoping-resource-routes"></a>
<h3 id="限定-resource-路由範圍"><a href="#限定-resource-路由範圍">限定 Resource 路由範圍</a></h3>
<p>Laravel 的<a href="/docs/12.x/routing#implicit-model-binding-scoping">限定範圍的隱式 model 繫結</a>功能可以自動限定巢狀繫結的範圍，使得已解析的子 model 被確認屬於父 model。透過在定義巢狀 resource 時使用 <code>scoped</code> 方法，你可以啟用自動範圍限定，並指示 Laravel 應該透過哪個欄位擷取子 resource：</p>
<pre><code class="language-php">use App\Http\Controllers\PhotoCommentController;

Route::resource(&#x27;photos.comments&#x27;, PhotoCommentController::class)-&gt;scoped([
    &#x27;comment&#x27; =&gt; &#x27;slug&#x27;,
]);
</code></pre>
<p>此路由將註冊一個限定範圍的巢狀 resource，可以使用如下 URIs 存取：</p>
<pre><code class="language-text">/photos/{&#x27;{photo}&#x27;}/comments/{comment:slug}
</code></pre>
<p>當使用自訂鍵隱式繫結作為巢狀路由參數時，Laravel 將自動限定查詢範圍，以透過其父項擷取巢狀 model，使用慣例來猜測父項上的關聯名稱。在這種情況下，將假定 <code>Photo</code> model 具有一個名為 <code>comments</code>（路由參數名稱的複數形式）的關聯，可用於擷取 <code>Comment</code> model。</p>
<a name="restful-localizing-resource-uris"></a>
<h3 id="在地化-resource-uris"><a href="#在地化-resource-uris">在地化 Resource URIs</a></h3>
<p>預設情況下，<code>Route::resource</code> 將使用英文動詞和複數規則建立 resource URIs。如果你需要在地化 <code>create</code> 和 <code>edit</code> 動作動詞，你可以使用 <code>Route::resourceVerbs</code> 方法。這可以在應用程式的 <code>App\Providers\AppServiceProvider</code> 中的 <code>boot</code> 方法開始時完成：</p>
<pre><code class="language-php">/**
 * Bootstrap any application services.
 */
public function boot(): void
{
    Route::resourceVerbs([
        &#x27;create&#x27; =&gt; &#x27;crear&#x27;,
        &#x27;edit&#x27; =&gt; &#x27;editar&#x27;,
    ]);
}
</code></pre>
<p>Laravel 的複數化器支援<a href="/docs/12.x/localization#pluralization-language">數種不同的語言，你可以根據需要進行設定</a>。自訂動詞和複數化語言後，像 <code>Route::resource(&#x27;publicacion&#x27;, PublicacionController::class)</code> 這樣的 resource 路由註冊將產生以下 URIs：</p>
<pre><code class="language-text">/publicacion/crear

/publicacion/{&#x27;{publicaciones}&#x27;}/editar
</code></pre>
<a name="restful-supplementing-resource-controllers"></a>
<h3 id="補充-resource-controllers"><a href="#補充-resource-controllers">補充 Resource Controllers</a></h3>
<p>如果你需要在 resource controller 中新增超出預設 resource 路由集的額外路由，你應該在呼叫 <code>Route::resource</code> 方法之前定義這些路由；否則，由 <code>resource</code> 方法定義的路由可能會無意中優先於你的補充路由：</p>
<pre><code class="language-php">use App\Http\Controller\PhotoController;

Route::get(&#x27;/photos/popular&#x27;, [PhotoController::class, &#x27;popular&#x27;]);
Route::resource(&#x27;photos&#x27;, PhotoController::class);
</code></pre>
<blockquote>
<p>[!NOTE]
記住要保持你的 controllers 專注。如果你發現自己經常需要典型 resource 動作集之外的方法，請考慮將你的 controller 拆分為兩個較小的 controllers。</p>
</blockquote>
<a name="singleton-resource-controllers"></a>
<h3 id="singleton-resource-controllers"><a href="#singleton-resource-controllers">Singleton Resource Controllers</a></h3>
<p>有時候，你的應用程式會有只能有單一實例的 resources。例如，使用者的「個人資料」可以被編輯或更新，但使用者不能有多個「個人資料」。同樣地，一張圖片可能有一個「縮圖」。這些 resources 被稱為「singleton resources」，意味著該 resource 只能存在一個且唯一的實例。在這些情況下，你可以註冊一個「singleton」resource controller：</p>
<pre><code class="language-php">use App\Http\Controllers\ProfileController;
use Illuminate\Support\Facades\Route;

Route::singleton(&#x27;profile&#x27;, ProfileController::class);
</code></pre>
<p>上面的 singleton resource 定義將註冊以下路由。如你所見，singleton resources 不會註冊「建立」路由，並且註冊的路由不接受識別碼，因為該 resource 只能存在一個實例：</p>
<div class="overflow-auto"><p>| 動詞      | URI             | 動作   | 路由名稱       |
| --------- | --------------- | ------ | -------------- |
| GET       | <code>/profile</code>      | show   | profile.show   |
| GET       | <code>/profile/edit</code> | edit   | profile.edit   |
| PUT/PATCH | <code>/profile</code>      | update | profile.update |</p></div>
<p>Singleton resources 也可以巢狀在標準 resource 中：</p>
<pre><code class="language-php">Route::singleton(&#x27;photos.thumbnail&#x27;, ThumbnailController::class);
</code></pre>
<p>在此範例中，<code>photos</code> resource 將接收所有<a href="#actions-handled-by-resource-controllers">標準 resource 路由</a>；但是，<code>thumbnail</code> resource 將是一個 singleton resource，具有以下路由：</p>
<div class="overflow-auto"><p>| 動詞      | URI                              | 動作   | 路由名稱                |
| --------- | -------------------------------- | ------ | ----------------------- |
| GET       | <code>/photos/{photo}/thumbnail</code>      | show   | photos.thumbnail.show   |
| GET       | <code>/photos/{photo}/thumbnail/edit</code> | edit   | photos.thumbnail.edit   |
| PUT/PATCH | <code>/photos/{photo}/thumbnail</code>      | update | photos.thumbnail.update |</p></div>
<a name="creatable-singleton-resources"></a>
<h4 id="可建立的-singleton-resources"><a href="#可建立的-singleton-resources">可建立的 Singleton Resources</a></h4>
<p>有時候，你可能想要為 singleton resource 定義建立和儲存路由。要完成此操作，你可以在註冊 singleton resource 路由時呼叫 <code>creatable</code> 方法：</p>
<pre><code class="language-php">Route::singleton(&#x27;photos.thumbnail&#x27;, ThumbnailController::class)-&gt;creatable();
</code></pre>
<p>在此範例中，將註冊以下路由。如你所見，可建立的 singleton resources 也將註冊一個 <code>DELETE</code> 路由：</p>
<div class="overflow-auto"><p>| 動詞      | URI                                | 動作    | 路由名稱                 |
| --------- | ---------------------------------- | ------- | ------------------------ |
| GET       | <code>/photos/{photo}/thumbnail/create</code> | create  | photos.thumbnail.create  |
| POST      | <code>/photos/{photo}/thumbnail</code>        | store   | photos.thumbnail.store   |
| GET       | <code>/photos/{photo}/thumbnail</code>        | show    | photos.thumbnail.show    |
| GET       | <code>/photos/{photo}/thumbnail/edit</code>   | edit    | photos.thumbnail.edit    |
| PUT/PATCH | <code>/photos/{photo}/thumbnail</code>        | update  | photos.thumbnail.update  |
| DELETE    | <code>/photos/{photo}/thumbnail</code>        | destroy | photos.thumbnail.destroy |</p></div>
<p>如果你希望 Laravel 為 singleton resource 註冊 <code>DELETE</code> 路由，但不註冊建立或儲存路由，你可以使用 <code>destroyable</code> 方法：</p>
<pre><code class="language-php">Route::singleton(...)-&gt;destroyable();
</code></pre>
<a name="api-singleton-resources"></a>
<h4 id="api-singleton-resources"><a href="#api-singleton-resources">API Singleton Resources</a></h4>
<p><code>apiSingleton</code> 方法可用於註冊將透過 API 操作的 singleton resource，從而使 <code>create</code> 和 <code>edit</code> 路由變得不必要：</p>
<pre><code class="language-php">Route::apiSingleton(&#x27;profile&#x27;, ProfileController::class);
</code></pre>
<p>當然，API singleton resources 也可以是 <code>creatable</code> 的，這將為 resource 註冊 <code>store</code> 和 <code>destroy</code> 路由：</p>
<pre><code class="language-php">Route::apiSingleton(&#x27;photos.thumbnail&#x27;, ProfileController::class)-&gt;creatable();
</code></pre>
<a name="middleware-and-resource-controllers"></a>
<h3 id="middleware-與-resource-controllers"><a href="#middleware-與-resource-controllers">Middleware 與 Resource Controllers</a></h3>
<p>Laravel 允許你使用 <code>middleware</code>、<code>middlewareFor</code> 和 <code>withoutMiddlewareFor</code> 方法將 middleware 指派給 resource 路由的所有或僅特定方法。這些方法提供對每個 resource 動作套用哪些 middleware 的細緻控制。</p>
<h4 id="將-middleware-套用於所有方法"><a href="#將-middleware-套用於所有方法">將 Middleware 套用於所有方法</a></h4>
<p>你可以使用 <code>middleware</code> 方法將 middleware 指派給由 resource 或 singleton resource 路由產生的所有路由：</p>
<pre><code class="language-php">Route::resource(&#x27;users&#x27;, UserController::class)
    -&gt;middleware([&#x27;auth&#x27;, &#x27;verified&#x27;]);

Route::singleton(&#x27;profile&#x27;, ProfileController::class)
    -&gt;middleware(&#x27;auth&#x27;);
</code></pre>
<h4 id="將-middleware-套用於特定方法"><a href="#將-middleware-套用於特定方法">將 Middleware 套用於特定方法</a></h4>
<p>你可以使用 <code>middlewareFor</code> 方法將 middleware 指派給給定 resource controller 的一個或多個特定方法：</p>
<pre><code class="language-php">Route::resource(&#x27;users&#x27;, UserController::class)
    -&gt;middlewareFor(&#x27;show&#x27;, &#x27;auth&#x27;);

Route::apiResource(&#x27;users&#x27;, UserController::class)
    -&gt;middlewareFor([&#x27;show&#x27;, &#x27;update&#x27;], &#x27;auth&#x27;);

Route::resource(&#x27;users&#x27;, UserController::class)
    -&gt;middlewareFor(&#x27;show&#x27;, &#x27;auth&#x27;)
    -&gt;middlewareFor(&#x27;update&#x27;, &#x27;auth&#x27;);

Route::apiResource(&#x27;users&#x27;, UserController::class)
    -&gt;middlewareFor([&#x27;show&#x27;, &#x27;update&#x27;], [&#x27;auth&#x27;, &#x27;verified&#x27;]);
</code></pre>
<p><code>middlewareFor</code> 方法也可以與 singleton 和 API singleton resource controllers 一起使用：</p>
<pre><code class="language-php">Route::singleton(&#x27;profile&#x27;, ProfileController::class)
    -&gt;middlewareFor(&#x27;show&#x27;, &#x27;auth&#x27;);

Route::apiSingleton(&#x27;profile&#x27;, ProfileController::class)
    -&gt;middlewareFor([&#x27;show&#x27;, &#x27;update&#x27;], &#x27;auth&#x27;);
</code></pre>
<h4 id="從特定方法中排除-middleware"><a href="#從特定方法中排除-middleware">從特定方法中排除 Middleware</a></h4>
<p>你可以使用 <code>withoutMiddlewareFor</code> 方法從 resource controller 的特定方法中排除 middleware：</p>
<pre><code class="language-php">Route::middleware([&#x27;auth&#x27;, &#x27;verified&#x27;, &#x27;subscribed&#x27;])-&gt;group(function () {
    Route::resource(&#x27;users&#x27;, UserController::class)
        -&gt;withoutMiddlewareFor(&#x27;index&#x27;, [&#x27;auth&#x27;, &#x27;verified&#x27;])
        -&gt;withoutMiddlewareFor([&#x27;create&#x27;, &#x27;store&#x27;], &#x27;verified&#x27;)
        -&gt;withoutMiddlewareFor(&#x27;destroy&#x27;, &#x27;subscribed&#x27;);
});
</code></pre>
<a name="dependency-injection-and-controllers"></a>
<h2 id="依賴注入與-controllers"><a href="#依賴注入與-controllers">依賴注入與 Controllers</a></h2>
<a name="constructor-injection"></a>
<h4 id="建構子注入"><a href="#建構子注入">建構子注入</a></h4>
<p>Laravel <a href="/docs/12.x/container">service container</a> 用於解析所有 Laravel controllers。因此，你可以在 controller 的建構子中對其可能需要的任何依賴進行型別提示。宣告的依賴將自動被解析並注入到 controller 實例中：</p>
<pre><code class="language-php">&lt;?php

namespace App\Http\Controllers;

use App\Repositories\UserRepository;

class UserController extends Controller
{
    /**
     * Create a new controller instance.
     */
    public function __construct(
        protected UserRepository $users,
    ) {}
}
</code></pre>
<a name="method-injection"></a>
<h4 id="方法注入"><a href="#方法注入">方法注入</a></h4>
<p>除了建構子注入之外，你還可以在 controller 的方法上對依賴進行型別提示。方法注入的一個常見用例是將 <code>Illuminate\Http\Request</code> 實例注入到 controller 方法中：</p>
<pre><code class="language-php">&lt;?php

namespace App\Http\Controllers;

use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;

class UserController extends Controller
{
    /**
     * Store a new user.
     */
    public function store(Request $request): RedirectResponse
    {
        $name = $request-&gt;name;

        // Store the user...

        return redirect(&#x27;/users&#x27;);
    }
}
</code></pre>
<p>如果你的 controller 方法還期望從路由參數接收輸入，請在其他依賴之後列出路由參數。例如，如果你的路由定義如下：</p>
<pre><code class="language-php">use App\Http\Controllers\UserController;

Route::put(&#x27;/user/{&#x27;{id}&#x27;}&#x27;, [UserController::class, &#x27;update&#x27;]);
</code></pre>
<p>你仍然可以對 <code>Illuminate\Http\Request</code> 進行型別提示，並透過如下定義 controller 方法來存取你的 <code>id</code> 參數：</p>
<pre><code class="language-php">&lt;?php

namespace App\Http\Controllers;

use Illuminate\Http\RedirectResponse;
use Illuminate\Http\Request;

class UserController extends Controller
{
    /**
     * Update the given user.
     */
    public function update(Request $request, string $id): RedirectResponse
    {
        // Update the user...

        return redirect(&#x27;/users&#x27;);
    }
}
</code></pre></article></div></div><!--$--><!--/$--></main></div><script src="/_next/static/chunks/cbd55ab9639e1e66.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n4:I[93649,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/080eab8e3bf47110.js\"],\"DocsSidebar\"]\n6:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"ViewportBoundary\"]\nb:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"MetadataBoundary\"]\nd:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/d0bdc467f6614b6a.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"mFHGnIr2wV_N13OtGl4eL\",\"c\":[\"\",\"docs\",\"controllers\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"controllers\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/d0bdc467f6614b6a.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/796e69ae18b2784c.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/080eab8e3bf47110.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"div\",null,{\"className\":\"flex min-h-screen bg-background\",\"children\":[[\"$\",\"$L4\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 relative\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"className\":\"container mx-auto py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-3xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl\",\"children\":\"Controllers\"}],[\"$\",\"p\",null,{\"className\":\"text-xl text-muted-foreground mt-2\",\"children\":\"學習如何使用 Laravel Controllers 組織請求處理邏輯\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"controllers\",\"children\":[\"$\",\"a\",null,{\"href\":\"#controllers\",\"children\":\"Controllers\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#introduction\",\"children\":\"簡介\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#writing-controllers\",\"children\":\"撰寫 Controllers\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#basic-controllers\",\"children\":\"基本 Controllers\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#single-action-controllers\",\"children\":\"單一動作 Controllers\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#controller-middleware\",\"children\":\"Controller Middleware\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#resource-controllers\",\"children\":\"Resource Controllers\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#restful-partial-resource-routes\",\"children\":\"部分 Resource 路由\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#restful-nested-resources\",\"children\":\"巢狀 Resources\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#restful-naming-resource-routes\",\"children\":\"命名 Resource 路由\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#restful-naming-resource-route-parameters\",\"children\":\"命名 Resource 路由參數\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#restful-scoping-resource-routes\",\"children\":\"限定 Resource 路由範圍\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#restful-localizing-resource-uris\",\"children\":\"在地化 Resource URIs\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#restful-supplementing-resource-controllers\",\"children\":\"補充 Resource Controllers\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#singleton-resource-controllers\",\"children\":\"Singleton Resource Controllers\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#middleware-and-resource-controllers\",\"children\":\"Middleware 與 Resource Controllers\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#dependency-injection-and-controllers\",\"children\":\"依賴注入與 Controllers\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"introduction\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"簡介\",\"children\":[\"$\",\"a\",null,{\"href\":\"#簡介\",\"children\":\"簡介\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"除了在路由檔案中將所有請求處理邏輯定義為閉包之外，你可能會希望使用「controller」類別來組織這些行為。Controllers 可以將相關的請求處理邏輯組合到一個類別中。例如，一個 \",[\"$\",\"code\",null,{\"children\":\"UserController\"}],\" 類別可能處理所有與使用者相關的傳入請求，包括顯示、建立、更新和刪除使用者。預設情況下，controllers 會儲存在 \",[\"$\",\"code\",null,{\"children\":\"app/Http/Controllers\"}],\" 目錄中。\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"writing-controllers\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"撰寫-controllers\",\"children\":[\"$\",\"a\",null,{\"href\":\"#撰寫-controllers\",\"children\":\"撰寫 Controllers\"}]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"basic-controllers\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"基本-controllers\",\"children\":[\"$\",\"a\",null,{\"href\":\"#基本-controllers\",\"children\":\"基本 Controllers\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"要快速產生一個新的 controller，你可以執行 \",[\"$\",\"code\",null,{\"children\":\"make:controller\"}],\" Artisan 指令。預設情況下，應用程式的所有 controllers 都儲存在 \",[\"$\",\"code\",null,{\"children\":\"app/Http/Controllers\"}],\" 目錄中：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan make:controller UserController\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"讓我們看一個基本 controller 的範例。一個 controller 可以有任意數量的公開方法來回應傳入的 HTTP 請求：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Http\\\\Controllers;\\n\\nuse App\\\\Models\\\\User;\\nuse Illuminate\\\\View\\\\View;\\n\\nclass UserController extends Controller\\n{\\n    /**\\n     * Show the profile for a given user.\\n     */\\n    public function show(string $id): View\\n    {\\n        return view('user.profile', [\\n            'user' =\u003e User::findOrFail($id)\\n        ]);\\n    }\\n}\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"撰寫完 controller 類別和方法後，你可以像這樣定義一個路由到 controller 方法：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Http\\\\Controllers\\\\UserController;\\n\\nRoute::get('/user/{'{id}'}', [UserController::class, 'show']);\\n\"}]}],\"\\n\",\"$Le\",\"\\n\",\"$Lf\",\"\\n\",\"$L10\",\"\\n\",\"$L11\",\"\\n\",\"$L12\",\"\\n\",\"$L13\",\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\",\"\\n\",\"$L55\",\"\\n\",\"$L56\",\"\\n\",\"$L57\",\"\\n\",\"$L58\",\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\",\"\\n\",\"$L5c\",\"\\n\",\"$L5d\",\"\\n\",\"$L5e\",\"\\n\",\"$L5f\",\"\\n\",\"$L60\",\"\\n\",\"$L61\",\"\\n\",\"$L62\",\"\\n\",\"$L63\",\"\\n\",\"$L64\",\"\\n\",\"$L65\",\"\\n\",\"$L66\",\"\\n\",\"$L67\",\"\\n\",\"$L68\",\"\\n\",\"$L69\",\"\\n\",\"$L6a\",\"\\n\",\"$L6b\",\"\\n\",\"$L6c\",\"\\n\",\"$L6d\",\"\\n\",\"$L6e\",\"\\n\",\"$L6f\",\"\\n\",\"$L70\",\"\\n\",\"$L71\",\"\\n\",\"$L72\",\"\\n\",\"$L73\",\"\\n\",\"$L74\",\"\\n\",\"$L75\",\"\\n\",\"$L76\",\"\\n\",\"$L77\",\"\\n\",\"$L78\",\"\\n\",\"$L79\",\"\\n\",\"$L7a\",\"\\n\",\"$L7b\",\"\\n\",\"$L7c\",\"\\n\",\"$L7d\",\"\\n\",\"$L7e\",\"\\n\",\"$L7f\",\"\\n\",\"$L80\",\"\\n\",\"$L81\",\"\\n\",\"$L82\",\"\\n\",\"$L83\",\"\\n\",\"$L84\",\"\\n\",\"$L85\",\"\\n\",\"$L86\",\"\\n\",\"$L87\",\"\\n\",\"$L88\",\"\\n\",\"$L89\",\"\\n\",\"$L8a\",\"\\n\",\"$L8b\",\"\\n\",\"$L8c\",\"\\n\",\"$L8d\",\"\\n\",\"$L8e\",\"\\n\",\"$L8f\",\"\\n\",\"$L90\",\"\\n\",\"$L91\",\"\\n\",\"$L92\",\"\\n\",\"$L93\",\"\\n\",\"$L94\",\"\\n\",\"$L95\",\"\\n\",\"$L96\",\"\\n\",\"$L97\",\"\\n\",\"$L98\",\"\\n\",\"$L99\",\"\\n\",\"$L9a\",\"\\n\",\"$L9b\",\"\\n\",\"$L9c\",\"\\n\",\"$L9d\",\"\\n\",\"$L9e\",\"\\n\",\"$L9f\",\"\\n\",\"$La0\",\"\\n\",\"$La1\",\"\\n\",\"$La2\",\"\\n\",\"$La3\",\"\\n\",\"$La4\",\"\\n\",\"$La5\",\"\\n\",\"$La6\",\"\\n\",\"$La7\",\"\\n\",\"$La8\",\"\\n\",\"$La9\",\"\\n\",\"$Laa\",\"\\n\",\"$Lab\",\"\\n\",\"$Lac\"]}]]}]}]\n"])</script><script>self.__next_f.push([1,"e:[\"$\",\"p\",null,{\"children\":[\"當傳入請求符合指定的路由 URI 時，\",[\"$\",\"code\",null,{\"children\":\"App\\\\Http\\\\Controllers\\\\UserController\"}],\" 類別上的 \",[\"$\",\"code\",null,{\"children\":\"show\"}],\" 方法將會被呼叫，並且路由參數將被傳遞給該方法。\"]}]\nf:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\nControllers \",[\"$\",\"strong\",null,{\"children\":\"並非必須\"}],\"繼承基底類別。但是，有時候繼承一個包含應該在所有 controllers 之間共享的方法的基底 controller 類別會很方便。\"]}],\"\\n\"]}]\n10:[\"$\",\"a\",null,{\"name\":\"single-action-controllers\"}]\n11:[\"$\",\"h3\",null,{\"id\":\"單一動作-controllers\",\"children\":[\"$\",\"a\",null,{\"href\":\"#單一動作-controllers\",\"children\":\"單一動作 Controllers\"}]}]\n12:[\"$\",\"p\",null,{\"children\":[\"如果一個 controller 動作特別複雜，你可能會發現將整個 controller 類別專門用於該單一動作很方便。為了實現這一點，你可以在 controller 內定義一個單一的 \",[\"$\",\"code\",null,{\"children\":\"__invoke\"}],\" 方法：\"]}]\n13:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Http\\\\Controllers;\\n\\nclass ProvisionServer extends Controller\\n{\\n    /**\\n     * Provision a new web server.\\n     */\\n    public function __invoke()\\n    {\\n        // ...\\n    }\\n}\\n\"}]}]\n14:[\"$\",\"p\",null,{\"children\":\"當為單一動作 controllers 註冊路由時，你不需要指定 controller 方法。相反地,你可以直接將 controller 的名稱傳遞給路由器：\"}]\n15:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Http\\\\Controllers\\\\ProvisionServer;\\n\\nRoute::post('/server', ProvisionServer::class);\\n\"}]}]\n16:[\"$\",\"p\",null,{\"children\":[\"你可以在使用 \",[\"$\",\"code\",null,{\"children\":\"make:controller\"}],\" Artisan 指令時使用 \",[\"$\",\"code\",null,{\"children\":\"--invokable\"}],\" 選項來產生可呼叫的 controller：\"]}]\n17:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan make:controller ProvisionServer --invokable\\n\"}]}]\n18:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\nController 樣板可以使用 \",[\"$\",\"a\",null,{\"href\":\"/docs/12.x/artisan#stub-customization\",\"children\":\"stub 發布\"}],\" 進行自訂。\"]}],\"\\n\"]}]\n19:[\"$\",\"a\",null,{\"name\":\"controller-middleware\"}]\n1a:[\"$\",\"h2\",null,{\"id\":\"controller-middleware\",\"children\":[\"$\",\"a\",null,{\"href\":\"#controller-middleware\",\"children\":\"Controller Middleware\"}]}]\n1b:[\"$\",\"p\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"/docs/12.x/middleware\",\"children\":\"Middleware\"}],\" 可以在路由檔案中指派給 controller 的路由：\"]}]\n1c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::get('/profile', [UserController::class, 'show'])-\u003emiddleware('auth');\\n\"}]}]\n1d:[\"$\",\"p\",null,{\"children\":[\"或者，你可能會發現在 controller 類別中指定 middleware 很方便。為此，你的 controller 應該實作 \",[\"$\",\"code\",null,{\"children\":\"HasMiddleware\"}],\" 介面，該介面要求 controller 具有一個靜態的 \",[\"$\",\"code\",null,{\"children\":\"middleware\"}],\" 方法。從這個方法中，你可以回傳一個應該套用於 controller 動作的 middleware 陣列：\"]}]\n1e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Http\\\\Controllers;\\n\\nuse Illuminate\\\\Routing\\\\Controllers\\\\HasMiddleware;\\nuse Illuminate\\\\Routing\\\\Controllers\\\\Middleware;\\n\\nclass UserController implements HasMiddleware\\n{\\n    /**\\n     * Get the middleware that should be assigned to the controller.\\n     */\\n    public static function middleware(): array\\n    {\\n        return [\\n            'auth',\\n            new Middleware('log', only: ['index']),\\n            new Middleware('subscribed', except: ['store']),\\n        ];\\n    }\\n\\n    // ...\\n}\\n\"}]}]\n1f:[\"$\",\"p\",null,{\"children\":\"你也可以將 controller middleware 定義為閉包，這提供了一種方便的方式來定義"])</script><script>self.__next_f.push([1,"內聯 middleware 而無需撰寫完整的 middleware 類別：\"}]\n20:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Closure;\\nuse Illuminate\\\\Http\\\\Request;\\n\\n/**\\n * Get the middleware that should be assigned to the controller.\\n */\\npublic static function middleware(): array\\n{\\n    return [\\n        function (Request $request, Closure $next) {\\n            return $next($request);\\n        },\\n    ];\\n}\\n\"}]}]\n21:[\"$\",\"a\",null,{\"name\":\"resource-controllers\"}]\n22:[\"$\",\"h2\",null,{\"id\":\"resource-controllers\",\"children\":[\"$\",\"a\",null,{\"href\":\"#resource-controllers\",\"children\":\"Resource Controllers\"}]}]\n23:[\"$\",\"p\",null,{\"children\":[\"如果你將應用程式中的每個 Eloquent model 視為一個「resource」，那麼對應用程式中的每個 resource 執行相同的動作集是很常見的。例如，假設你的應用程式包含一個 \",[\"$\",\"code\",null,{\"children\":\"Photo\"}],\" model 和一個 \",[\"$\",\"code\",null,{\"children\":\"Movie\"}],\" model。使用者很可能可以建立、讀取、更新或刪除這些 resources。\"]}]\n24:[\"$\",\"p\",null,{\"children\":[\"由於這種常見的使用情境，Laravel resource 路由只需一行程式碼就可以將典型的建立、讀取、更新和刪除（「CRUD」）路由指派給 controller。首先，我們可以使用 \",[\"$\",\"code\",null,{\"children\":\"make:controller\"}],\" Artisan 指令的 \",[\"$\",\"code\",null,{\"children\":\"--resource\"}],\" 選項來快速建立一個 controller 來處理這些動作：\"]}]\n25:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan make:controller PhotoController --resource\\n\"}]}]\n26:[\"$\",\"p\",null,{\"children\":[\"此指令將在 \",[\"$\",\"code\",null,{\"children\":\"app/Http/Controllers/PhotoController.php\"}],\" 產生一個 controller。該 controller 將包含每個可用 resource 操作的方法。接下來，你可以註冊一個指向該 controller 的 resource 路由：\"]}]\n27:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Http\\\\Controllers\\\\PhotoController;\\n\\nRoute::resource('photos', PhotoController::class);\\n\"}]}]\n28:[\"$\",\"p\",null,{\"children\":[\"這個單一的路由宣告會建立多個路由來處理 resource 上的各種動作。產生的 controller 將已經為每個動作準備好方法樣板。請記住，你隨時可以透過執行 \",[\"$\",\"code\",null,{\"children\":\"route:list\"}],\" Artisan 指令來快速查看應用程式的路由概覽。\"]}]\n29:[\"$\",\"p\",null,{\"children\":[\"你甚至可以透過將陣列傳遞給 \",[\"$\",\"code\",null,{\"children\":\"resources\"}],\" 方法來一次註冊多個 resource controllers：\"]}]\n2a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::resources([\\n    'photos' =\u003e PhotoController::class,\\n    'posts' =\u003e PostController::class,\\n]);\\n\"}]}]\n2b:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"softDeletableResources\"}],\" 方法會註冊多個 resources controllers，它們都使用 \",[\"$\",\"code\",null,{\"children\":\"withTrashed\"}],\" 方法：\"]}]\n2c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::softDeletableResources([\\n    'photos' =\u003e PhotoController::class,\\n    'posts' =\u003e PostController::class,\\n]);\\n\"}]}]\n2d:[\"$\",\"a\",null,{\"name\":\"actions-handled-by-resource-controllers\"}]\n2e:[\"$\",\"h4\",null,{\"id\":\"resource-controllers-處理的動作\",\"children\":[\"$\",\"a\",null,{\"href\":\"#resource-controllers-處理的動作\",\"children\":\"Resource Controllers 處理的動作\"}]}]\n2f:[\"$\",\"div\",null,{\"className\":\"overflow-auto\",\"children\":[\"$\",\"p\",null,{\"children\":[\"| 動詞      | URI                    | 動作    | 路由名稱       |\\n| --------- | ---------------------- | ------- | -------------- |\\n| GET       | \",[\"$\",\"code\",null,{\"children\":\"/photos\"}],\"              | index   | photos.index   |\\n| GET       | \",[\"$\",\"code\",null,{\"children\":\"/photos/create\"}],\"       | create  | photos.create  |\\n| POST      | \",[\"$\",\"code\",null,{\"children\":\"/photos\"}],\"              | store   | photos.store   |\\n| GET      "])</script><script>self.__next_f.push([1," | \",[\"$\",\"code\",null,{\"children\":\"/photos/{photo}\"}],\"      | show    | photos.show    |\\n| GET       | \",[\"$\",\"code\",null,{\"children\":\"/photos/{photo}/edit\"}],\" | edit    | photos.edit    |\\n| PUT/PATCH | \",[\"$\",\"code\",null,{\"children\":\"/photos/{photo}\"}],\"      | update  | photos.update  |\\n| DELETE    | \",[\"$\",\"code\",null,{\"children\":\"/photos/{photo}\"}],\"      | destroy | photos.destroy |\"]}]}]\n30:[\"$\",\"a\",null,{\"name\":\"customizing-missing-model-behavior\"}]\n31:[\"$\",\"h4\",null,{\"id\":\"自訂找不到-model-的行為\",\"children\":[\"$\",\"a\",null,{\"href\":\"#自訂找不到-model-的行為\",\"children\":\"自訂找不到 Model 的行為\"}]}]\n32:[\"$\",\"p\",null,{\"children\":[\"通常，如果找不到隱式繫結的 resource model，將會產生 404 HTTP 回應。但是，你可以在定義 resource 路由時呼叫 \",[\"$\",\"code\",null,{\"children\":\"missing\"}],\" 方法來自訂此行為。\",[\"$\",\"code\",null,{\"children\":\"missing\"}],\" 方法接受一個閉包，如果對於任何 resource 的路由都找不到隱式繫結的 model，該閉包將會被呼叫：\"]}]\n33:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Http\\\\Controllers\\\\PhotoController;\\nuse Illuminate\\\\Http\\\\Request;\\nuse Illuminate\\\\Support\\\\Facades\\\\Redirect;\\n\\nRoute::resource('photos', PhotoController::class)\\n    -\u003emissing(function (Request $request) {\\n        return Redirect::route('photos.index');\\n    });\\n\"}]}]\n34:[\"$\",\"a\",null,{\"name\":\"soft-deleted-models\"}]\n35:[\"$\",\"h4\",null,{\"id\":\"軟刪除-models\",\"children\":[\"$\",\"a\",null,{\"href\":\"#軟刪除-models\",\"children\":\"軟刪除 Models\"}]}]\n36:[\"$\",\"p\",null,{\"children\":[\"通常，隱式 model 繫結不會擷取已經\",[\"$\",\"a\",null,{\"href\":\"/docs/12.x/eloquent#soft-deleting\",\"children\":\"軟刪除\"}],\"的 models，而是會回傳 404 HTTP 回應。但是，你可以在定義 resource 路由時呼叫 \",[\"$\",\"code\",null,{\"children\":\"withTrashed\"}],\" 方法來指示框架允許軟刪除的 models：\"]}]\n37:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Http\\\\Controllers\\\\PhotoController;\\n\\nRoute::resource('photos', PhotoController::class)-\u003ewithTrashed();\\n\"}]}]\n38:[\"$\",\"p\",null,{\"children\":[\"不帶參數呼叫 \",[\"$\",\"code\",null,{\"children\":\"withTrashed\"}],\" 將允許 \",[\"$\",\"code\",null,{\"children\":\"show\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"edit\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"update\"}],\" resource 路由使用軟刪除的 models。你可以透過將陣列傳遞給 \",[\"$\",\"code\",null,{\"children\":\"withTrashed\"}],\" 方法來指定這些路由的子集：\"]}]\n39:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::resource('photos', PhotoController::class)-\u003ewithTrashed(['show']);\\n\"}]}]\n3a:[\"$\",\"a\",null,{\"name\":\"specifying-the-resource-model\"}]\n3b:[\"$\",\"h4\",null,{\"id\":\"指定-resource-model\",\"children\":[\"$\",\"a\",null,{\"href\":\"#指定-resource-model\",\"children\":\"指定 Resource Model\"}]}]\n3c:[\"$\",\"p\",null,{\"children\":[\"如果你正在使用\",[\"$\",\"a\",null,{\"href\":\"/docs/12.x/routing#route-model-binding\",\"children\":\"路由 model 繫結\"}],\"並且希望 resource controller 的方法對 model 實例進行型別提示，你可以在產生 controller 時使用 \",[\"$\",\"code\",null,{\"children\":\"--model\"}],\" 選項：\"]}]\n3d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan make:controller PhotoController --model=Photo --resource\\n\"}]}]\n3e:[\"$\",\"a\",null,{\"name\":\"generating-form-requests\"}]\n3f:[\"$\",\"h4\",null,{\"id\":\"產生表單請求\",\"children\":[\"$\",\"a\",null,{\"href\":\"#產生表單請求\",\"children\":\"產生表單請求\"}]}]\n40:[\"$\",\"p\",null,{\"children\":[\"你可以在產生 resource controller 時提供 \",[\"$\",\"code\",null,{\"children\":\"--requests\"}],\" 選項，以指示 Artisan 為 controller 的儲存和更新方法產生 \",[\"$\",\"a\",null,{\"href\":\"/docs/12.x/validation#form-request-validation\",\"children\":\"form request 類別\"}],\"：\"]}]\n41:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan make:controller"])</script><script>self.__next_f.push([1," PhotoController --model=Photo --resource --requests\\n\"}]}]\n42:[\"$\",\"a\",null,{\"name\":\"restful-partial-resource-routes\"}]\n43:[\"$\",\"h3\",null,{\"id\":\"部分-resource-路由\",\"children\":[\"$\",\"a\",null,{\"href\":\"#部分-resource-路由\",\"children\":\"部分 Resource 路由\"}]}]\n44:[\"$\",\"p\",null,{\"children\":\"在宣告 resource 路由時，你可以指定 controller 應該處理的動作子集，而不是完整的預設動作集：\"}]\n45:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Http\\\\Controllers\\\\PhotoController;\\n\\nRoute::resource('photos', PhotoController::class)-\u003eonly([\\n    'index', 'show'\\n]);\\n\\nRoute::resource('photos', PhotoController::class)-\u003eexcept([\\n    'create', 'store', 'update', 'destroy'\\n]);\\n\"}]}]\n46:[\"$\",\"a\",null,{\"name\":\"api-resource-routes\"}]\n47:[\"$\",\"h4\",null,{\"id\":\"api-resource-路由\",\"children\":[\"$\",\"a\",null,{\"href\":\"#api-resource-路由\",\"children\":\"API Resource 路由\"}]}]\n48:[\"$\",\"p\",null,{\"children\":[\"當宣告將被 APIs 使用的 resource 路由時,你通常會希望排除呈現 HTML 樣板的路由，例如 \",[\"$\",\"code\",null,{\"children\":\"create\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"edit\"}],\"。為了方便起見，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"apiResource\"}],\" 方法自動排除這兩個路由：\"]}]\n49:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Http\\\\Controllers\\\\PhotoController;\\n\\nRoute::apiResource('photos', PhotoController::class);\\n\"}]}]\n4a:[\"$\",\"p\",null,{\"children\":[\"你可以透過將陣列傳遞給 \",[\"$\",\"code\",null,{\"children\":\"apiResources\"}],\" 方法來一次註冊多個 API resource controllers：\"]}]\n4b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Http\\\\Controllers\\\\PhotoController;\\nuse App\\\\Http\\\\Controllers\\\\PostController;\\n\\nRoute::apiResources([\\n    'photos' =\u003e PhotoController::class,\\n    'posts' =\u003e PostController::class,\\n]);\\n\"}]}]\n4c:[\"$\",\"p\",null,{\"children\":[\"要快速產生不包含 \",[\"$\",\"code\",null,{\"children\":\"create\"}],\" 或 \",[\"$\",\"code\",null,{\"children\":\"edit\"}],\" 方法的 API resource controller，請在執行 \",[\"$\",\"code\",null,{\"children\":\"make:controller\"}],\" 指令時使用 \",[\"$\",\"code\",null,{\"children\":\"--api\"}],\" 開關：\"]}]\n4d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan make:controller PhotoController --api\\n\"}]}]\n4e:[\"$\",\"a\",null,{\"name\":\"restful-nested-resources\"}]\n4f:[\"$\",\"h3\",null,{\"id\":\"巢狀-resources\",\"children\":[\"$\",\"a\",null,{\"href\":\"#巢狀-resources\",\"children\":\"巢狀 Resources\"}]}]\n50:[\"$\",\"p\",null,{\"children\":\"有時候你可能需要定義到巢狀 resource 的路由。例如，一個照片 resource 可能有多個附加到照片的評論。要巢狀 resource controllers，你可以在路由宣告中使用「點」符號：\"}]\n51:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Http\\\\Controllers\\\\PhotoCommentController;\\n\\nRoute::resource('photos.comments', PhotoCommentController::class);\\n\"}]}]\n52:[\"$\",\"p\",null,{\"children\":\"此路由將註冊一個巢狀 resource，可以使用如下 URIs 存取：\"}]\n53:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-text\",\"children\":\"/photos/{'{photo}'}/comments/{'{comment}'}\\n\"}]}]\n54:[\"$\",\"a\",null,{\"name\":\"scoping-nested-resources\"}]\n55:[\"$\",\"h4\",null,{\"id\":\"限定巢狀-resources-的範圍\",\"children\":[\"$\",\"a\",null,{\"href\":\"#限定巢狀-resources-的範圍\",\"children\":\"限定巢狀 Resources 的範圍\"}]}]\n56:[\"$\",\"p\",null,{\"children\":[\"Laravel 的\",[\"$\",\"a\",null,{\"href\":\"/docs/12.x/routing#implicit-model-binding-scoping\",\"children\":\"隱式 model 繫結\"}],\"功能可以自動限定巢狀繫結的範圍，使得已解析的子 model 被確認屬於父 model。透過在定義巢狀 resource 時使用 \",[\"$\",\"code\",null,{\"children\":\"scoped\"}],\" 方法，你可以啟用自動範圍限定，並指示 Laravel 應該透過哪個欄位擷取子 resource。有關如何完成此操作的更多資訊，請參閱有關\",["])</script><script>self.__next_f.push([1,"\"$\",\"a\",null,{\"href\":\"#restful-scoping-resource-routes\",\"children\":\"限定 resource 路由範圍\"}],\"的文件。\"]}]\n57:[\"$\",\"a\",null,{\"name\":\"shallow-nesting\"}]\n58:[\"$\",\"h4\",null,{\"id\":\"淺層巢狀\",\"children\":[\"$\",\"a\",null,{\"href\":\"#淺層巢狀\",\"children\":\"淺層巢狀\"}]}]\n59:[\"$\",\"p\",null,{\"children\":\"通常，在 URI 中同時擁有父 ID 和子 ID 並不是完全必要的，因為子 ID 已經是唯一識別碼。當使用諸如自動遞增主鍵之類的唯一識別碼來識別 URI 區段中的 models 時，你可以選擇使用「淺層巢狀」：\"}]\n5a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Http\\\\Controllers\\\\CommentController;\\n\\nRoute::resource('photos.comments', CommentController::class)-\u003eshallow();\\n\"}]}]\n5b:[\"$\",\"p\",null,{\"children\":\"此路由定義將定義以下路由：\"}]\n5c:[\"$\",\"div\",null,{\"className\":\"overflow-auto\",\"children\":[\"$\",\"p\",null,{\"children\":[\"| 動詞      | URI                               | 動作    | 路由名稱               |\\n| --------- | --------------------------------- | ------- | ---------------------- |\\n| GET       | \",[\"$\",\"code\",null,{\"children\":\"/photos/{photo}/comments\"}],\"        | index   | photos.comments.index  |\\n| GET       | \",[\"$\",\"code\",null,{\"children\":\"/photos/{photo}/comments/create\"}],\" | create  | photos.comments.create |\\n| POST      | \",[\"$\",\"code\",null,{\"children\":\"/photos/{photo}/comments\"}],\"        | store   | photos.comments.store  |\\n| GET       | \",[\"$\",\"code\",null,{\"children\":\"/comments/{comment}\"}],\"             | show    | comments.show          |\\n| GET       | \",[\"$\",\"code\",null,{\"children\":\"/comments/{comment}/edit\"}],\"        | edit    | comments.edit          |\\n| PUT/PATCH | \",[\"$\",\"code\",null,{\"children\":\"/comments/{comment}\"}],\"             | update  | comments.update        |\\n| DELETE    | \",[\"$\",\"code\",null,{\"children\":\"/comments/{comment}\"}],\"             | destroy | comments.destroy       |\"]}]}]\n5d:[\"$\",\"a\",null,{\"name\":\"restful-naming-resource-routes\"}]\n5e:[\"$\",\"h3\",null,{\"id\":\"命名-resource-路由\",\"children\":[\"$\",\"a\",null,{\"href\":\"#命名-resource-路由\",\"children\":\"命名 Resource 路由\"}]}]\n5f:[\"$\",\"p\",null,{\"children\":[\"預設情況下，所有 resource controller 動作都有一個路由名稱；但是，你可以透過傳遞一個 \",[\"$\",\"code\",null,{\"children\":\"names\"}],\" 陣列來覆蓋這些名稱，其中包含你想要的路由名稱：\"]}]\n60:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Http\\\\Controllers\\\\PhotoController;\\n\\nRoute::resource('photos', PhotoController::class)-\u003enames([\\n    'create' =\u003e 'photos.build'\\n]);\\n\"}]}]\n61:[\"$\",\"a\",null,{\"name\":\"restful-naming-resource-route-parameters\"}]\n62:[\"$\",\"h3\",null,{\"id\":\"命名-resource-路由參數\",\"children\":[\"$\",\"a\",null,{\"href\":\"#命名-resource-路由參數\",\"children\":\"命名 Resource 路由參數\"}]}]\n63:[\"$\",\"p\",null,{\"children\":[\"預設情況下，\",[\"$\",\"code\",null,{\"children\":\"Route::resource\"}],\" 將根據 resource 名稱的「單數化」版本為你的 resource 路由建立路由參數。你可以使用 \",[\"$\",\"code\",null,{\"children\":\"parameters\"}],\" 方法輕鬆地在每個 resource 基礎上覆蓋此設定。傳遞給 \",[\"$\",\"code\",null,{\"children\":\"parameters\"}],\" 方法的陣列應該是 resource 名稱和參數名稱的關聯陣列：\"]}]\n64:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Http\\\\Controllers\\\\AdminUserController;\\n\\nRoute::resource('users', AdminUserController::class)-\u003eparameters([\\n    'users' =\u003e 'admin_user'\\n]);\\n\"}]}]\n65:[\"$\",\"p\",null,{\"children\":[\"上面的範例為 resource 的 \",[\"$\",\"code\",null,{\"children\":\"show\"}],\" 路由產生以下 URI：\"]}]\n66:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-text\",\"children\":\"/users/{'{admin_user}'}\\n\"}]}]\n67:[\"$\",\"a\",null,{\"name\":\"restful-scoping-resource-routes\"}]\n68:[\"$\",\"h3\",null,{\"id\":\"限定-resource-路由範圍\",\"children\":[\"$\",\"a\",null,{\"href\":\"#限定-resource-路由範圍\",\"children\":\"限定 Resource "])</script><script>self.__next_f.push([1,"路由範圍\"}]}]\n69:[\"$\",\"p\",null,{\"children\":[\"Laravel 的\",[\"$\",\"a\",null,{\"href\":\"/docs/12.x/routing#implicit-model-binding-scoping\",\"children\":\"限定範圍的隱式 model 繫結\"}],\"功能可以自動限定巢狀繫結的範圍，使得已解析的子 model 被確認屬於父 model。透過在定義巢狀 resource 時使用 \",[\"$\",\"code\",null,{\"children\":\"scoped\"}],\" 方法，你可以啟用自動範圍限定，並指示 Laravel 應該透過哪個欄位擷取子 resource：\"]}]\n6a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Http\\\\Controllers\\\\PhotoCommentController;\\n\\nRoute::resource('photos.comments', PhotoCommentController::class)-\u003escoped([\\n    'comment' =\u003e 'slug',\\n]);\\n\"}]}]\n6b:[\"$\",\"p\",null,{\"children\":\"此路由將註冊一個限定範圍的巢狀 resource，可以使用如下 URIs 存取：\"}]\n6c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-text\",\"children\":\"/photos/{'{photo}'}/comments/{comment:slug}\\n\"}]}]\n6d:[\"$\",\"p\",null,{\"children\":[\"當使用自訂鍵隱式繫結作為巢狀路由參數時，Laravel 將自動限定查詢範圍，以透過其父項擷取巢狀 model，使用慣例來猜測父項上的關聯名稱。在這種情況下，將假定 \",[\"$\",\"code\",null,{\"children\":\"Photo\"}],\" model 具有一個名為 \",[\"$\",\"code\",null,{\"children\":\"comments\"}],\"（路由參數名稱的複數形式）的關聯，可用於擷取 \",[\"$\",\"code\",null,{\"children\":\"Comment\"}],\" model。\"]}]\n6e:[\"$\",\"a\",null,{\"name\":\"restful-localizing-resource-uris\"}]\n6f:[\"$\",\"h3\",null,{\"id\":\"在地化-resource-uris\",\"children\":[\"$\",\"a\",null,{\"href\":\"#在地化-resource-uris\",\"children\":\"在地化 Resource URIs\"}]}]\n70:[\"$\",\"p\",null,{\"children\":[\"預設情況下，\",[\"$\",\"code\",null,{\"children\":\"Route::resource\"}],\" 將使用英文動詞和複數規則建立 resource URIs。如果你需要在地化 \",[\"$\",\"code\",null,{\"children\":\"create\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"edit\"}],\" 動作動詞，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"Route::resourceVerbs\"}],\" 方法。這可以在應用程式的 \",[\"$\",\"code\",null,{\"children\":\"App\\\\Providers\\\\AppServiceProvider\"}],\" 中的 \",[\"$\",\"code\",null,{\"children\":\"boot\"}],\" 方法開始時完成：\"]}]\n71:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"/**\\n * Bootstrap any application services.\\n */\\npublic function boot(): void\\n{\\n    Route::resourceVerbs([\\n        'create' =\u003e 'crear',\\n        'edit' =\u003e 'editar',\\n    ]);\\n}\\n\"}]}]\n72:[\"$\",\"p\",null,{\"children\":[\"Laravel 的複數化器支援\",[\"$\",\"a\",null,{\"href\":\"/docs/12.x/localization#pluralization-language\",\"children\":\"數種不同的語言，你可以根據需要進行設定\"}],\"。自訂動詞和複數化語言後，像 \",[\"$\",\"code\",null,{\"children\":\"Route::resource('publicacion', PublicacionController::class)\"}],\" 這樣的 resource 路由註冊將產生以下 URIs：\"]}]\n73:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-text\",\"children\":\"/publicacion/crear\\n\\n/publicacion/{'{publicaciones}'}/editar\\n\"}]}]\n74:[\"$\",\"a\",null,{\"name\":\"restful-supplementing-resource-controllers\"}]\n75:[\"$\",\"h3\",null,{\"id\":\"補充-resource-controllers\",\"children\":[\"$\",\"a\",null,{\"href\":\"#補充-resource-controllers\",\"children\":\"補充 Resource Controllers\"}]}]\n76:[\"$\",\"p\",null,{\"children\":[\"如果你需要在 resource controller 中新增超出預設 resource 路由集的額外路由，你應該在呼叫 \",[\"$\",\"code\",null,{\"children\":\"Route::resource\"}],\" 方法之前定義這些路由；否則，由 \",[\"$\",\"code\",null,{\"children\":\"resource\"}],\" 方法定義的路由可能會無意中優先於你的補充路由：\"]}]\n77:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Http\\\\Controller\\\\PhotoController;\\n\\nRoute::get('/photos/popular', [PhotoController::class, 'popular']);\\nRoute::resource('photos', PhotoController::class);\\n\"}]}]\n78:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"[!NOTE]\\n記住要保持你的 controllers 專注。如果你"])</script><script>self.__next_f.push([1,"發現自己經常需要典型 resource 動作集之外的方法，請考慮將你的 controller 拆分為兩個較小的 controllers。\"}],\"\\n\"]}]\n79:[\"$\",\"a\",null,{\"name\":\"singleton-resource-controllers\"}]\n7a:[\"$\",\"h3\",null,{\"id\":\"singleton-resource-controllers\",\"children\":[\"$\",\"a\",null,{\"href\":\"#singleton-resource-controllers\",\"children\":\"Singleton Resource Controllers\"}]}]\n7b:[\"$\",\"p\",null,{\"children\":\"有時候，你的應用程式會有只能有單一實例的 resources。例如，使用者的「個人資料」可以被編輯或更新，但使用者不能有多個「個人資料」。同樣地，一張圖片可能有一個「縮圖」。這些 resources 被稱為「singleton resources」，意味著該 resource 只能存在一個且唯一的實例。在這些情況下，你可以註冊一個「singleton」resource controller：\"}]\n7c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Http\\\\Controllers\\\\ProfileController;\\nuse Illuminate\\\\Support\\\\Facades\\\\Route;\\n\\nRoute::singleton('profile', ProfileController::class);\\n\"}]}]\n7d:[\"$\",\"p\",null,{\"children\":\"上面的 singleton resource 定義將註冊以下路由。如你所見，singleton resources 不會註冊「建立」路由，並且註冊的路由不接受識別碼，因為該 resource 只能存在一個實例：\"}]\n7e:[\"$\",\"div\",null,{\"className\":\"overflow-auto\",\"children\":[\"$\",\"p\",null,{\"children\":[\"| 動詞      | URI             | 動作   | 路由名稱       |\\n| --------- | --------------- | ------ | -------------- |\\n| GET       | \",[\"$\",\"code\",null,{\"children\":\"/profile\"}],\"      | show   | profile.show   |\\n| GET       | \",[\"$\",\"code\",null,{\"children\":\"/profile/edit\"}],\" | edit   | profile.edit   |\\n| PUT/PATCH | \",[\"$\",\"code\",null,{\"children\":\"/profile\"}],\"      | update | profile.update |\"]}]}]\n7f:[\"$\",\"p\",null,{\"children\":\"Singleton resources 也可以巢狀在標準 resource 中：\"}]\n80:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::singleton('photos.thumbnail', ThumbnailController::class);\\n\"}]}]\n81:[\"$\",\"p\",null,{\"children\":[\"在此範例中，\",[\"$\",\"code\",null,{\"children\":\"photos\"}],\" resource 將接收所有\",[\"$\",\"a\",null,{\"href\":\"#actions-handled-by-resource-controllers\",\"children\":\"標準 resource 路由\"}],\"；但是，\",[\"$\",\"code\",null,{\"children\":\"thumbnail\"}],\" resource 將是一個 singleton resource，具有以下路由：\"]}]\n82:[\"$\",\"div\",null,{\"className\":\"overflow-auto\",\"children\":[\"$\",\"p\",null,{\"children\":[\"| 動詞      | URI                              | 動作   | 路由名稱                |\\n| --------- | -------------------------------- | ------ | ----------------------- |\\n| GET       | \",[\"$\",\"code\",null,{\"children\":\"/photos/{photo}/thumbnail\"}],\"      | show   | photos.thumbnail.show   |\\n| GET       | \",[\"$\",\"code\",null,{\"children\":\"/photos/{photo}/thumbnail/edit\"}],\" | edit   | photos.thumbnail.edit   |\\n| PUT/PATCH | \",[\"$\",\"code\",null,{\"children\":\"/photos/{photo}/thumbnail\"}],\"      | update | photos.thumbnail.update |\"]}]}]\n83:[\"$\",\"a\",null,{\"name\":\"creatable-singleton-resources\"}]\n84:[\"$\",\"h4\",null,{\"id\":\"可建立的-singleton-resources\",\"children\":[\"$\",\"a\",null,{\"href\":\"#可建立的-singleton-resources\",\"children\":\"可建立的 Singleton Resources\"}]}]\n85:[\"$\",\"p\",null,{\"children\":[\"有時候，你可能想要為 singleton resource 定義建立和儲存路由。要完成此操作，你可以在註冊 singleton resource 路由時呼叫 \",[\"$\",\"code\",null,{\"children\":\"creatable\"}],\" 方法：\"]}]\n86:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::singleton('photos.thumbnail', ThumbnailController::class)-\u003ecreatable();\\n\"}]}]\n87:[\"$\",\"p\",null,{\"children\":[\"在此範例中，將註冊以下路由。如你所見，可建立的 singleton resources 也將註冊一個 \",[\"$\",\"code\",null,{\"children\":\"DELETE\"}],\" 路由：\"]}]\n88:[\"$\",\"div\",null,{\"className\":\"overflow-auto\",\"children\":[\"$\",\"p\",null,{\"children\":[\"| 動詞      | URI                                | 動作    | 路由名稱"])</script><script>self.__next_f.push([1,"                 |\\n| --------- | ---------------------------------- | ------- | ------------------------ |\\n| GET       | \",[\"$\",\"code\",null,{\"children\":\"/photos/{photo}/thumbnail/create\"}],\" | create  | photos.thumbnail.create  |\\n| POST      | \",[\"$\",\"code\",null,{\"children\":\"/photos/{photo}/thumbnail\"}],\"        | store   | photos.thumbnail.store   |\\n| GET       | \",[\"$\",\"code\",null,{\"children\":\"/photos/{photo}/thumbnail\"}],\"        | show    | photos.thumbnail.show    |\\n| GET       | \",[\"$\",\"code\",null,{\"children\":\"/photos/{photo}/thumbnail/edit\"}],\"   | edit    | photos.thumbnail.edit    |\\n| PUT/PATCH | \",[\"$\",\"code\",null,{\"children\":\"/photos/{photo}/thumbnail\"}],\"        | update  | photos.thumbnail.update  |\\n| DELETE    | \",[\"$\",\"code\",null,{\"children\":\"/photos/{photo}/thumbnail\"}],\"        | destroy | photos.thumbnail.destroy |\"]}]}]\n89:[\"$\",\"p\",null,{\"children\":[\"如果你希望 Laravel 為 singleton resource 註冊 \",[\"$\",\"code\",null,{\"children\":\"DELETE\"}],\" 路由，但不註冊建立或儲存路由，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"destroyable\"}],\" 方法：\"]}]\n8a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::singleton(...)-\u003edestroyable();\\n\"}]}]\n8b:[\"$\",\"a\",null,{\"name\":\"api-singleton-resources\"}]\n8c:[\"$\",\"h4\",null,{\"id\":\"api-singleton-resources\",\"children\":[\"$\",\"a\",null,{\"href\":\"#api-singleton-resources\",\"children\":\"API Singleton Resources\"}]}]\n8d:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"apiSingleton\"}],\" 方法可用於註冊將透過 API 操作的 singleton resource，從而使 \",[\"$\",\"code\",null,{\"children\":\"create\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"edit\"}],\" 路由變得不必要：\"]}]\n8e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::apiSingleton('profile', ProfileController::class);\\n\"}]}]\n8f:[\"$\",\"p\",null,{\"children\":[\"當然，API singleton resources 也可以是 \",[\"$\",\"code\",null,{\"children\":\"creatable\"}],\" 的，這將為 resource 註冊 \",[\"$\",\"code\",null,{\"children\":\"store\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"destroy\"}],\" 路由：\"]}]\n90:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::apiSingleton('photos.thumbnail', ProfileController::class)-\u003ecreatable();\\n\"}]}]\n91:[\"$\",\"a\",null,{\"name\":\"middleware-and-resource-controllers\"}]\n92:[\"$\",\"h3\",null,{\"id\":\"middleware-與-resource-controllers\",\"children\":[\"$\",\"a\",null,{\"href\":\"#middleware-與-resource-controllers\",\"children\":\"Middleware 與 Resource Controllers\"}]}]\n93:[\"$\",\"p\",null,{\"children\":[\"Laravel 允許你使用 \",[\"$\",\"code\",null,{\"children\":\"middleware\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"middlewareFor\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"withoutMiddlewareFor\"}],\" 方法將 middleware 指派給 resource 路由的所有或僅特定方法。這些方法提供對每個 resource 動作套用哪些 middleware 的細緻控制。\"]}]\n94:[\"$\",\"h4\",null,{\"id\":\"將-middleware-套用於所有方法\",\"children\":[\"$\",\"a\",null,{\"href\":\"#將-middleware-套用於所有方法\",\"children\":\"將 Middleware 套用於所有方法\"}]}]\n95:[\"$\",\"p\",null,{\"children\":[\"你可以使用 \",[\"$\",\"code\",null,{\"children\":\"middleware\"}],\" 方法將 middleware 指派給由 resource 或 singleton resource 路由產生的所有路由：\"]}]\n96:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::resource('users', UserController::class)\\n    -\u003emiddleware(['auth', 'verified']);\\n\\nRoute::singleton('profile', ProfileController::class)\\n    -\u003emiddleware('auth');\\n\"}]}]\n97:[\"$\",\"h4\",null,{\"id\":\"將-middleware-套用於特定方法\",\"children\":[\"$\",\"a\",null,{\"href\":\"#將-middleware-套用於特定方法\",\"children\":\"將 Middleware 套用於特定方法\"}]}]\n98:[\"$\",\"p\",null,{\"children\":[\"你可以使用 \",[\"$\",\"code\",null,{\"children\":\"middlewareFor\"}],\" 方法將 middleware 指派給給定 resource controller 的一個或多個特定方法：\"]}]\n99:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::resource('users',"])</script><script>self.__next_f.push([1," UserController::class)\\n    -\u003emiddlewareFor('show', 'auth');\\n\\nRoute::apiResource('users', UserController::class)\\n    -\u003emiddlewareFor(['show', 'update'], 'auth');\\n\\nRoute::resource('users', UserController::class)\\n    -\u003emiddlewareFor('show', 'auth')\\n    -\u003emiddlewareFor('update', 'auth');\\n\\nRoute::apiResource('users', UserController::class)\\n    -\u003emiddlewareFor(['show', 'update'], ['auth', 'verified']);\\n\"}]}]\n9a:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"middlewareFor\"}],\" 方法也可以與 singleton 和 API singleton resource controllers 一起使用：\"]}]\n9b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::singleton('profile', ProfileController::class)\\n    -\u003emiddlewareFor('show', 'auth');\\n\\nRoute::apiSingleton('profile', ProfileController::class)\\n    -\u003emiddlewareFor(['show', 'update'], 'auth');\\n\"}]}]\n9c:[\"$\",\"h4\",null,{\"id\":\"從特定方法中排除-middleware\",\"children\":[\"$\",\"a\",null,{\"href\":\"#從特定方法中排除-middleware\",\"children\":\"從特定方法中排除 Middleware\"}]}]\n9d:[\"$\",\"p\",null,{\"children\":[\"你可以使用 \",[\"$\",\"code\",null,{\"children\":\"withoutMiddlewareFor\"}],\" 方法從 resource controller 的特定方法中排除 middleware：\"]}]\n9e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::middleware(['auth', 'verified', 'subscribed'])-\u003egroup(function () {\\n    Route::resource('users', UserController::class)\\n        -\u003ewithoutMiddlewareFor('index', ['auth', 'verified'])\\n        -\u003ewithoutMiddlewareFor(['create', 'store'], 'verified')\\n        -\u003ewithoutMiddlewareFor('destroy', 'subscribed');\\n});\\n\"}]}]\n9f:[\"$\",\"a\",null,{\"name\":\"dependency-injection-and-controllers\"}]\na0:[\"$\",\"h2\",null,{\"id\":\"依賴注入與-controllers\",\"children\":[\"$\",\"a\",null,{\"href\":\"#依賴注入與-controllers\",\"children\":\"依賴注入與 Controllers\"}]}]\na1:[\"$\",\"a\",null,{\"name\":\"constructor-injection\"}]\na2:[\"$\",\"h4\",null,{\"id\":\"建構子注入\",\"children\":[\"$\",\"a\",null,{\"href\":\"#建構子注入\",\"children\":\"建構子注入\"}]}]\na3:[\"$\",\"p\",null,{\"children\":[\"Laravel \",[\"$\",\"a\",null,{\"href\":\"/docs/12.x/container\",\"children\":\"service container\"}],\" 用於解析所有 Laravel controllers。因此，你可以在 controller 的建構子中對其可能需要的任何依賴進行型別提示。宣告的依賴將自動被解析並注入到 controller 實例中：\"]}]\na4:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Http\\\\Controllers;\\n\\nuse App\\\\Repositories\\\\UserRepository;\\n\\nclass UserController extends Controller\\n{\\n    /**\\n     * Create a new controller instance.\\n     */\\n    public function __construct(\\n        protected UserRepository $users,\\n    ) {}\\n}\\n\"}]}]\na5:[\"$\",\"a\",null,{\"name\":\"method-injection\"}]\na6:[\"$\",\"h4\",null,{\"id\":\"方法注入\",\"children\":[\"$\",\"a\",null,{\"href\":\"#方法注入\",\"children\":\"方法注入\"}]}]\na7:[\"$\",\"p\",null,{\"children\":[\"除了建構子注入之外，你還可以在 controller 的方法上對依賴進行型別提示。方法注入的一個常見用例是將 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Request\"}],\" 實例注入到 controller 方法中：\"]}]\na8:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Http\\\\Controllers;\\n\\nuse Illuminate\\\\Http\\\\RedirectResponse;\\nuse Illuminate\\\\Http\\\\Request;\\n\\nclass UserController extends Controller\\n{\\n    /**\\n     * Store a new user.\\n     */\\n    public function store(Request $request): RedirectResponse\\n    {\\n        $name = $request-\u003ename;\\n\\n        // Store the user...\\n\\n        return redirect('/users');\\n    }\\n}\\n\"}]}]\na9:[\"$\",\"p\",null,{\"children\":\"如果你的 controller 方法還期望從路由參數接收輸入，請在其他依賴之後列出路由參數。例如，如果你的路由定義如下：\"}]\naa:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use App\\\\Http\\\\Controllers\\\\UserController;\\n\\nRoute::put('/user/{'{id}'}', [UserController::class, 'update']"])</script><script>self.__next_f.push([1,");\\n\"}]}]\nab:[\"$\",\"p\",null,{\"children\":[\"你仍然可以對 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\Request\"}],\" 進行型別提示，並透過如下定義 controller 方法來存取你的 \",[\"$\",\"code\",null,{\"children\":\"id\"}],\" 參數：\"]}]\nac:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Http\\\\Controllers;\\n\\nuse Illuminate\\\\Http\\\\RedirectResponse;\\nuse Illuminate\\\\Http\\\\Request;\\n\\nclass UserController extends Controller\\n{\\n    /**\\n     * Update the given user.\\n     */\\n    public function update(Request $request, string $id): RedirectResponse\\n    {\\n        // Update the user...\\n\\n        return redirect('/users');\\n    }\\n}\\n\"}]}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"ad:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$Lad\",\"3\",{}]]\n8:null\n"])</script></body></html>