1:"$Sreact.fragment"
d2:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/247eb132b7f7b574.js"],"OutletBoundary"]
d3:"$Sreact.suspense"
0:{"buildId":"DBhogvPSakldbZwCRUzLf","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"container mx-auto py-10","children":["$","div",null,{"className":"mx-auto max-w-3xl","children":[["$","div",null,{"className":"mb-8","children":[["$","h1",null,{"className":"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl","children":"HTTP Client"}],["$","p",null,{"className":"text-xl text-muted-foreground mt-2","children":"Laravel 提供表達性且最小化的 API 來發送 HTTP 請求"}]]}],["$","article",null,{"className":"prose prose-slate dark:prose-invert max-w-none","children":[["$","h1",null,{"id":"http-client","children":["$","a",null,{"href":"#http-client","children":"HTTP Client"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#introduction","children":"簡介"}]}],"\n",["$","li",null,{"children":[["$","a",null,{"href":"#making-requests","children":"發送請求"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#request-data","children":"請求資料"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#headers","children":"標頭"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#authentication","children":"認證"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#timeout","children":"逾時"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#retries","children":"重試"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#error-handling","children":"錯誤處理"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#guzzle-middleware","children":"Guzzle Middleware"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#guzzle-options","children":"Guzzle 選項"}]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":[["$","a",null,{"href":"#concurrent-requests","children":"並發請求"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#request-pooling","children":"請求池"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#request-batching","children":"請求批次處理"}]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#macros","children":"巨集"}]}],"\n",["$","li",null,{"children":[["$","a",null,{"href":"#testing","children":"測試"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#faking-responses","children":"偽造回應"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#inspecting-requests","children":"檢查請求"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#preventing-stray-requests","children":"防止意外請求"}]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#events","children":"事件"}]}],"\n"]}],"\n",["$","a",null,{"name":"introduction"}],"\n",["$","h2",null,{"id":"簡介","children":["$","a",null,{"href":"#簡介","children":"簡介"}]}],"\n",["$","p",null,{"children":["Laravel 為 ",["$","a",null,{"href":"http://docs.guzzlephp.org/en/stable/","children":"Guzzle HTTP client"}]," 提供了一套表達性強且簡潔的 API，讓你能夠快速發送 HTTP 請求與其他 Web 應用程式進行通訊。Laravel 對 Guzzle 的封裝專注於其最常見的使用案例，並提供極佳的開發者體驗。"]}],"\n",["$","a",null,{"name":"making-requests"}],"\n",["$","h2",null,{"id":"發送請求","children":["$","a",null,{"href":"#發送請求","children":"發送請求"}]}],"\n",["$","p",null,{"children":["要發送請求，你可以使用 ",["$","code",null,{"children":"Http"}]," facade 提供的 ",["$","code",null,{"children":"head"}],", ",["$","code",null,{"children":"get"}],", ",["$","code",null,{"children":"post"}],", ",["$","code",null,{"children":"put"}],", ",["$","code",null,{"children":"patch"}],", 和 ",["$","code",null,{"children":"delete"}]," 方法。首先，讓我們看看如何發送一個基本的 ",["$","code",null,{"children":"GET"}]," 請求到另一個 URL："]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Support\\Facades\\Http;\n\n$response = Http::get('http://example.com');\n"}]}],"\n",["$","p",null,{"children":[["$","code",null,{"children":"get"}]," 方法回傳一個 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\Response"}]," 實例，該實例提供了多種方法來檢查回應："]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$response->body() : string;\n$response->json($key = null, $default = null) : mixed;\n$response->object() : object;\n$response->collect($key = null) : Illuminate\\Support\\Collection;\n$response->resource() : resource;\n$response->status() : int;\n$response->successful() : bool;\n$response->redirect(): bool;\n$response->failed() : bool;\n$response->clientError() : bool;\n$response->header($header) : string;\n$response->headers() : array;\n"}]}],"\n",["$","p",null,{"children":[["$","code",null,{"children":"Illuminate\\Http\\Client\\Response"}]," 物件也實作了 PHP 的 ",["$","code",null,{"children":"ArrayAccess"}]," 介面，允許你直接存取回應中的 JSON 資料："]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"return Http::get('http://example.com/users/1')['name'];\n"}]}],"\n",["$","p",null,{"children":"除了上述的回應方法外，還可以使用以下方法來判斷回應是否具有特定的狀態碼："}],"\n","$L2","\n","$L3","\n","$L4","\n","$L5","\n","$L6","\n","$L7","\n","$L8","\n","$L9","\n","$La","\n","$Lb","\n","$Lc","\n","$Ld","\n","$Le","\n","$Lf","\n","$L10","\n","$L11","\n","$L12","\n","$L13","\n","$L14","\n","$L15","\n","$L16","\n","$L17","\n","$L18","\n","$L19","\n","$L1a","\n","$L1b","\n","$L1c","\n","$L1d","\n","$L1e","\n","$L1f","\n","$L20","\n","$L21","\n","$L22","\n","$L23","\n","$L24","\n","$L25","\n","$L26","\n","$L27","\n","$L28","\n","$L29","\n","$L2a","\n","$L2b","\n","$L2c","\n","$L2d","\n","$L2e","\n","$L2f","\n","$L30","\n","$L31","\n","$L32","\n","$L33","\n","$L34","\n","$L35","\n","$L36","\n","$L37","\n","$L38","\n","$L39","\n","$L3a","\n","$L3b","\n","$L3c","\n","$L3d","\n","$L3e","\n","$L3f","\n","$L40","\n","$L41","\n","$L42","\n","$L43","\n","$L44","\n","$L45","\n","$L46","\n","$L47","\n","$L48","\n","$L49","\n","$L4a","\n","$L4b","\n","$L4c","\n","$L4d","\n","$L4e","\n","$L4f","\n","$L50","\n","$L51","\n","$L52","\n","$L53","\n","$L54","\n","$L55","\n","$L56","\n","$L57","\n","$L58","\n","$L59","\n","$L5a","\n","$L5b","\n","$L5c","\n","$L5d","\n","$L5e","\n","$L5f","\n","$L60","\n","$L61","\n","$L62","\n","$L63","\n","$L64","\n","$L65","\n","$L66","\n","$L67","\n","$L68","\n","$L69","\n","$L6a","\n","$L6b","\n","$L6c","\n","$L6d","\n","$L6e","\n","$L6f","\n","$L70","\n","$L71","\n","$L72","\n","$L73","\n","$L74","\n","$L75","\n","$L76","\n","$L77","\n","$L78","\n","$L79","\n","$L7a","\n","$L7b","\n","$L7c","\n","$L7d","\n","$L7e","\n","$L7f","\n","$L80","\n","$L81","\n","$L82","\n","$L83","\n","$L84","\n","$L85","\n","$L86","\n","$L87","\n","$L88","\n","$L89","\n","$L8a","\n","$L8b","\n","$L8c","\n","$L8d","\n","$L8e","\n","$L8f","\n","$L90","\n","$L91","\n","$L92","\n","$L93","\n","$L94","\n","$L95","\n","$L96","\n","$L97","\n","$L98","\n","$L99","\n","$L9a","\n","$L9b","\n","$L9c","\n","$L9d","\n","$L9e","\n","$L9f","\n","$La0","\n","$La1","\n","$La2","\n","$La3","\n","$La4","\n","$La5","\n","$La6","\n","$La7","\n","$La8","\n","$La9","\n","$Laa","\n","$Lab","\n","$Lac","\n","$Lad","\n","$Lae","\n","$Laf","\n","$Lb0","\n","$Lb1","\n","$Lb2","\n","$Lb3","\n","$Lb4","\n","$Lb5","\n","$Lb6","\n","$Lb7","\n","$Lb8","\n","$Lb9","\n","$Lba","\n","$Lbb","\n","$Lbc","\n","$Lbd","\n","$Lbe","\n","$Lbf","\n","$Lc0","\n","$Lc1","\n","$Lc2","\n","$Lc3","\n","$Lc4","\n","$Lc5","\n","$Lc6","\n","$Lc7","\n","$Lc8","\n","$Lc9","\n","$Lca","\n","$Lcb","\n","$Lcc","\n","$Lcd","\n","$Lce","\n","$Lcf","\n","$Ld0"]}]]}]}],null,"$Ld1"]}],"loading":null,"isPartial":false}
2:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$response->ok() : bool;                  // 200 OK\n$response->created() : bool;             // 201 Created\n$response->accepted() : bool;            // 202 Accepted\n$response->noContent() : bool;           // 204 No Content\n$response->movedPermanently() : bool;    // 301 Moved Permanently\n$response->found() : bool;               // 302 Found\n$response->badRequest() : bool;          // 400 Bad Request\n$response->unauthorized() : bool;        // 401 Unauthorized\n$response->paymentRequired() : bool;     // 402 Payment Required\n$response->forbidden() : bool;           // 403 Forbidden\n$response->notFound() : bool;            // 404 Not Found\n$response->requestTimeout() : bool;      // 408 Request Timeout\n$response->conflict() : bool;            // 409 Conflict\n$response->unprocessableEntity() : bool; // 422 Unprocessable Entity\n$response->tooManyRequests() : bool;     // 429 Too Many Requests\n$response->serverError() : bool;         // 500 Internal Server Error\n"}]}]
3:["$","a",null,{"name":"uri-templates"}]
4:["$","h4",null,{"id":"uri-模板","children":["$","a",null,{"href":"#uri-模板","children":"URI 模板"}]}]
5:["$","p",null,{"children":["HTTP Client 也允許你使用 ",["$","a",null,{"href":"https://www.rfc-editor.org/rfc/rfc6570","children":"URI 模板規範"}]," 來建構請求 URL。要定義可由 URI 模板擴展的 URL 參數，你可以使用 ",["$","code",null,{"children":"withUrlParameters"}]," 方法："]}]
6:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Http::withUrlParameters([\n    'endpoint' => 'https://laravel.com',\n    'page' => 'docs',\n    'version' => '12.x',\n    'topic' => 'validation',\n])->get('{+endpoint}/{page}/{version}/{topic}');\n"}]}]
7:["$","a",null,{"name":"dumping-requests"}]
8:["$","h4",null,{"id":"傾印請求","children":["$","a",null,{"href":"#傾印請求","children":"傾印請求"}]}]
9:["$","p",null,{"children":["如果你想在發送請求之前傾印 (dump) 輸出的請求實例並終止腳本執行，你可以在請求定義的開頭加上 ",["$","code",null,{"children":"dd"}]," 方法："]}]
a:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"return Http::dd()->get('http://example.com');\n"}]}]
b:["$","a",null,{"name":"request-data"}]
c:["$","h3",null,{"id":"請求資料","children":["$","a",null,{"href":"#請求資料","children":"請求資料"}]}]
d:["$","p",null,{"children":["當然，在發送 ",["$","code",null,{"children":"POST"}],", ",["$","code",null,{"children":"PUT"}],", 和 ",["$","code",null,{"children":"PATCH"}]," 請求時，通常會隨請求發送額外的資料，因此這些方法接受一個資料陣列作為第二個參數。預設情況下，資料將使用 ",["$","code",null,{"children":"application/json"}]," 內容類型發送："]}]
e:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Support\\Facades\\Http;\n\n$response = Http::post('http://example.com/users', [\n    'name' => 'Steve',\n    'role' => 'Network Administrator',\n]);\n"}]}]
f:["$","a",null,{"name":"get-request-query-parameters"}]
10:["$","h4",null,{"id":"get-請求查詢參數","children":["$","a",null,{"href":"#get-請求查詢參數","children":"GET 請求查詢參數"}]}]
11:["$","p",null,{"children":["在發送 ",["$","code",null,{"children":"GET"}]," 請求時，你可以直接將查詢字串附加到 URL，或是將鍵/值對陣列作為第二個參數傳遞給 ",["$","code",null,{"children":"get"}]," 方法："]}]
12:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$response = Http::get('http://example.com/users', [\n    'name' => 'Taylor',\n    'page' => 1,\n]);\n"}]}]
13:["$","p",null,{"children":["或者，也可以使用 ",["$","code",null,{"children":"withQueryParameters"}]," 方法："]}]
14:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Http::retry(3, 100)->withQueryParameters([\n    'name' => 'Taylor',\n    'page' => 1,\n])->get('http://example.com/users');\n"}]}]
15:["$","a",null,{"name":"sending-form-url-encoded-requests"}]
16:["$","h4",null,{"id":"發送-form-url-encoded-請求","children":["$","a",null,{"href":"#發送-form-url-encoded-請求","children":"發送 Form URL Encoded 請求"}]}]
17:["$","p",null,{"children":["如果你想使用 ",["$","code",null,{"children":"application/x-www-form-urlencoded"}]," 內容類型發送資料，你應該在發送請求之前呼叫 ",["$","code",null,{"children":"asForm"}]," 方法："]}]
18:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$response = Http::asForm()->post('http://example.com/users', [\n    'name' => 'Sara',\n    'role' => 'Privacy Consultant',\n]);\n"}]}]
19:["$","a",null,{"name":"sending-a-raw-request-body"}]
1a:["$","h4",null,{"id":"發送原始請求內容-raw-request-body","children":["$","a",null,{"href":"#發送原始請求內容-raw-request-body","children":"發送原始請求內容 (Raw Request Body)"}]}]
1b:["$","p",null,{"children":["如果你想在發送請求時提供原始請求內容，可以使用 ",["$","code",null,{"children":"withBody"}]," 方法。內容類型可以透過該方法的第二個參數提供："]}]
1c:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$response = Http::withBody(\n    base64_encode($photo), 'image/jpeg'\n)->post('http://example.com/photo');\n"}]}]
1d:["$","a",null,{"name":"multi-part-requests"}]
1e:["$","h4",null,{"id":"multi-part-請求","children":["$","a",null,{"href":"#multi-part-請求","children":"Multi-Part 請求"}]}]
1f:["$","p",null,{"children":["如果你想將檔案作為 multi-part 請求發送，你應該在發送請求之前呼叫 ",["$","code",null,{"children":"attach"}]," 方法。此方法接受檔案名稱及其內容。如果需要，你可以提供第三個參數作為檔案的檔名，而第四個參數可用於提供與該檔案相關的標頭："]}]
20:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$response = Http::attach(\n    'attachment', file_get_contents('photo.jpg'), 'photo.jpg', ['Content-Type' => 'image/jpeg']\n)->post('http://example.com/attachments');\n"}]}]
21:["$","p",null,{"children":"除了傳遞檔案的原始內容，你也可以傳遞一個 stream resource："}]
22:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$photo = fopen('photo.jpg', 'r');\n\n$response = Http::attach(\n    'attachment', $photo, 'photo.jpg'\n)->post('http://example.com/attachments');\n"}]}]
23:["$","a",null,{"name":"headers"}]
24:["$","h3",null,{"id":"標頭","children":["$","a",null,{"href":"#標頭","children":"標頭"}]}]
25:["$","p",null,{"children":["可以使用 ",["$","code",null,{"children":"withHeaders"}]," 方法將標頭添加到請求中。此 ",["$","code",null,{"children":"withHeaders"}]," 方法接受一個鍵/值對陣列："]}]
26:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$response = Http::withHeaders([\n    'X-First' => 'foo',\n    'X-Second' => 'bar'\n])->post('http://example.com/users', [\n    'name' => 'Taylor',\n]);\n"}]}]
27:["$","p",null,{"children":["你可以使用 ",["$","code",null,{"children":"accept"}]," 方法指定你的應用程式期望回應的內容類型："]}]
28:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$response = Http::accept('application/json')->get('http://example.com/users');\n"}]}]
29:["$","p",null,{"children":["為了方便起見，你可以使用 ",["$","code",null,{"children":"acceptJson"}]," 方法快速指定你的應用程式期望回應 ",["$","code",null,{"children":"application/json"}]," 內容類型："]}]
2a:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$response = Http::acceptJson()->get('http://example.com/users');\n"}]}]
2b:["$","p",null,{"children":[["$","code",null,{"children":"withHeaders"}]," 方法會將新的標頭合併到請求現有的標頭中。如果需要，你可以使用 ",["$","code",null,{"children":"replaceHeaders"}]," 方法完全替換所有標頭："]}]
2c:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$response = Http::withHeaders([\n    'X-Original' => 'foo',\n])->replaceHeaders([\n    'X-Replacement' => 'bar',\n])->post('http://example.com/users', [\n    'name' => 'Taylor',\n]);\n"}]}]
2d:["$","a",null,{"name":"authentication"}]
2e:["$","h3",null,{"id":"認證","children":["$","a",null,{"href":"#認證","children":"認證"}]}]
2f:["$","p",null,{"children":["你可以分別使用 ",["$","code",null,{"children":"withBasicAuth"}]," 和 ",["$","code",null,{"children":"withDigestAuth"}]," 方法指定 Basic 和 Digest 認證憑證："]}]
30:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"// Basic authentication...\n$response = Http::withBasicAuth('taylor@laravel.com', 'secret')->post(/* ... */);\n\n// Digest authentication...\n$response = Http::withDigestAuth('taylor@laravel.com', 'secret')->post(/* ... */);\n"}]}]
31:["$","a",null,{"name":"bearer-tokens"}]
32:["$","h4",null,{"id":"bearer-tokens","children":["$","a",null,{"href":"#bearer-tokens","children":"Bearer Tokens"}]}]
33:["$","p",null,{"children":["如果你想快速將 Bearer token 添加到請求的 ",["$","code",null,{"children":"Authorization"}]," 標頭，可以使用 ",["$","code",null,{"children":"withToken"}]," 方法："]}]
34:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$response = Http::withToken('token')->post(/* ... */);\n"}]}]
35:["$","a",null,{"name":"timeout"}]
36:["$","h3",null,{"id":"逾時","children":["$","a",null,{"href":"#逾時","children":"逾時"}]}]
37:["$","p",null,{"children":[["$","code",null,{"children":"timeout"}]," 方法可用於指定等待回應的最大秒數。預設情況下，HTTP client 將在 30 秒後逾時："]}]
38:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$response = Http::timeout(3)->get(/* ... */);\n"}]}]
39:["$","p",null,{"children":["如果超過給定的逾時時間，將會拋出 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\ConnectionException"}]," 實例。"]}]
3a:["$","p",null,{"children":["你可以使用 ",["$","code",null,{"children":"connectTimeout"}]," 方法指定嘗試連線到伺服器的最大等待秒數。預設為 10 秒："]}]
3b:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$response = Http::connectTimeout(3)->get(/* ... */);\n"}]}]
3c:["$","a",null,{"name":"retries"}]
3d:["$","h3",null,{"id":"重試","children":["$","a",null,{"href":"#重試","children":"重試"}]}]
3e:["$","p",null,{"children":["如果你希望 HTTP client 在發生客戶端或伺服器錯誤時自動重試請求，可以使用 ",["$","code",null,{"children":"retry"}]," 方法。",["$","code",null,{"children":"retry"}]," 方法接受請求應嘗試的最大次數以及 Laravel 在兩次嘗試之間應等待的毫秒數："]}]
3f:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$response = Http::retry(3, 100)->post(/* ... */);\n"}]}]
40:["$","p",null,{"children":["如果你想手動計算嘗試之間休眠的毫秒數，可以傳遞一個閉包作為 ",["$","code",null,{"children":"retry"}]," 方法的第二個參數："]}]
41:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Exception;\n\n$response = Http::retry(3, function (int $attempt, Exception $exception) {\n    return $attempt * 100;\n})->post(/* ... */);\n"}]}]
42:["$","p",null,{"children":["為了方便起見，你也可以提供一個陣列作為 ",["$","code",null,{"children":"retry"}]," 方法的第一個參數。此陣列將用於確定在後續嘗試之間休眠多少毫秒："]}]
43:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$response = Http::retry([100, 200])->post(/* ... */);\n"}]}]
44:["$","p",null,{"children":["如果需要，你可以傳遞第三個參數給 ",["$","code",null,{"children":"retry"}]," 方法。第三個參數應該是一個 callable，用於確定是否應該實際嘗試重試。例如，你可能只想在初始請求遇到 ",["$","code",null,{"children":"ConnectionException"}]," 時重試請求："]}]
45:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Exception;\nuse Illuminate\\Http\\Client\\PendingRequest;\n\n$response = Http::retry(3, 100, function (Exception $exception, PendingRequest $request) {\n    return $exception instanceof ConnectionException;\n})->post(/* ... */);\n"}]}]
46:["$","p",null,{"children":["如果請求嘗試失敗，你可能希望在進行新的嘗試之前更改請求。你可以透過修改提供給 ",["$","code",null,{"children":"retry"}]," 方法的 callable 的 request 參數來實現這一點。例如，如果第一次嘗試返回了身份驗證錯誤，你可能希望使用新的授權 token 重試請求："]}]
47:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Exception;\nuse Illuminate\\Http\\Client\\PendingRequest;\nuse Illuminate\\Http\\Client\\RequestException;\n\n$response = Http::withToken($this->getToken())->retry(2, 0, function (Exception $exception, PendingRequest $request) {\n    if (! $exception instanceof RequestException || $exception->response->status() !== 401) {\n        return false;\n    }\n\n    $request->withToken($this->getNewToken());\n\n    return true;\n})->post(/* ... */);\n"}]}]
48:["$","p",null,{"children":["如果所有請求都失敗，將拋出 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\RequestException"}]," 實例。如果你想禁用此行為，可以提供一個值為 ",["$","code",null,{"children":"false"}]," 的 ",["$","code",null,{"children":"throw"}]," 參數。禁用時，在所有重試都嘗試過後，將回傳客戶端收到的最後一個回應："]}]
49:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$response = Http::retry(3, 100, throw: false)->post(/* ... */);\n"}]}]
4a:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!WARNING]\n如果所有請求都因為連線問題而失敗，即使 ",["$","code",null,{"children":"throw"}]," 參數設定為 ",["$","code",null,{"children":"false"}],"，仍然會拋出 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\ConnectionException"}],"。"]}],"\n"]}]
4b:["$","a",null,{"name":"error-handling"}]
4c:["$","h3",null,{"id":"錯誤處理","children":["$","a",null,{"href":"#錯誤處理","children":"錯誤處理"}]}]
4d:["$","p",null,{"children":["與 Guzzle 的預設行為不同，Laravel 的 HTTP client 封裝器不會在客戶端或伺服器錯誤（來自伺服器的 ",["$","code",null,{"children":"400"}]," 和 ",["$","code",null,{"children":"500"}]," 級別回應）時拋出異常。你可以使用 ",["$","code",null,{"children":"successful"}],", ",["$","code",null,{"children":"clientError"}],", 或 ",["$","code",null,{"children":"serverError"}]," 方法來判斷是否返回了這些錯誤之一："]}]
4e:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"// Determine if the status code is >= 200 and < 300...\n$response->successful();\n\n// Determine if the status code is >= 400...\n$response->failed();\n\n// Determine if the response has a 400 level status code...\n$response->clientError();\n\n// Determine if the response has a 500 level status code...\n$response->serverError();\n\n// Immediately execute the given callback if there was a client or server error...\n$response->onError(callable $callback);\n"}]}]
4f:["$","a",null,{"name":"throwing-exceptions"}]
50:["$","h4",null,{"id":"拋出異常","children":["$","a",null,{"href":"#拋出異常","children":"拋出異常"}]}]
51:["$","p",null,{"children":["如果你有一個回應實例，並且希望在回應狀態碼指示客戶端或伺服器錯誤時拋出 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\RequestException"}]," 實例，你可以使用 ",["$","code",null,{"children":"throw"}]," 或 ",["$","code",null,{"children":"throwIf"}]," 方法："]}]
52:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Http\\Client\\Response;\n\n$response = Http::post(/* ... */);\n\n// Throw an exception if a client or server error occurred...\n$response->throw();\n\n// Throw an exception if an error occurred and the given condition is true...\n$response->throwIf($condition);\n\n// Throw an exception if an error occurred and the given closure resolves to true...\n$response->throwIf(fn (Response $response) => true);\n\n// Throw an exception if an error occurred and the given condition is false...\n$response->throwUnless($condition);\n\n// Throw an exception if an error occurred and the given closure resolves to false...\n$response->throwUnless(fn (Response $response) => false);\n\n// Throw an exception if the response has a specific status code...\n$response->throwIfStatus(403);\n\n// Throw an exception unless the response has a specific status code...\n$response->throwUnlessStatus(200);\n\nreturn $response['user']['id'];\n"}]}]
53:["$","p",null,{"children":[["$","code",null,{"children":"Illuminate\\Http\\Client\\RequestException"}]," 實例有一個公開的 ",["$","code",null,{"children":"$$response"}]," 屬性，允許你檢查返回的回應。"]}]
54:["$","p",null,{"children":["如果沒有發生錯誤，",["$","code",null,{"children":"throw"}]," 方法將回傳回應實例，允許你將其他操作鏈接到 ",["$","code",null,{"children":"throw"}]," 方法上："]}]
55:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"return Http::post(/* ... */)->throw()->json();\n"}]}]
56:["$","p",null,{"children":["如果你想在拋出異常之前執行一些額外的邏輯，你可以將一個閉包傳遞給 ",["$","code",null,{"children":"throw"}]," 方法。異常將在閉包被調用後自動拋出，因此你不需要在閉包內重新拋出異常："]}]
57:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Http\\Client\\Response;\nuse Illuminate\\Http\\Client\\RequestException;\n\nreturn Http::post(/* ... */)->throw(function (Response $response, RequestException $e) {\n    // ...\n})->json();\n"}]}]
58:["$","p",null,{"children":["預設情況下，",["$","code",null,{"children":"RequestException"}]," 訊息在記錄或報告時會被截斷為 120 個字元。要自定義或禁用此行為，你可以在 ",["$","code",null,{"children":"bootstrap/app.php"}]," 檔案中配置應用程式的註冊行為時使用 ",["$","code",null,{"children":"truncateAt"}]," 和 ",["$","code",null,{"children":"dontTruncate"}]," 方法："]}]
59:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Http\\Client\\RequestException;\n\n->registered(function (): void {\n    // Truncate request exception messages to 240 characters...\n    RequestException::truncateAt(240);\n\n    // Disable request exception message truncation...\n    RequestException::dontTruncate();\n})\n"}]}]
5a:["$","p",null,{"children":["或者，你可以使用 ",["$","code",null,{"children":"truncateExceptionsAt"}]," 方法自定義每個請求的異常截斷行為："]}]
5b:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"return Http::truncateExceptionsAt(240)->post(/* ... */);\n"}]}]
5c:["$","a",null,{"name":"guzzle-middleware"}]
5d:["$","h3",null,{"id":"guzzle-middleware","children":["$","a",null,{"href":"#guzzle-middleware","children":"Guzzle Middleware"}]}]
5e:["$","p",null,{"children":["由於 Laravel 的 HTTP client 是由 Guzzle 驅動的，你可以利用 ",["$","a",null,{"href":"https://docs.guzzlephp.org/en/stable/handlers-and-middleware.html","children":"Guzzle Middleware"}]," 來操作輸出的請求或檢查輸入的回應。要操作輸出的請求，請透過 ",["$","code",null,{"children":"withRequestMiddleware"}]," 方法註冊 Guzzle middleware："]}]
5f:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Support\\Facades\\Http;\nuse Psr\\Http\\Message\\RequestInterface;\n\n$response = Http::withRequestMiddleware(\n    function (RequestInterface $request) {\n        return $request->withHeader('X-Example', 'Value');\n    }\n)->get('http://example.com');\n"}]}]
60:["$","p",null,{"children":["同樣地，你可以透過 ",["$","code",null,{"children":"withResponseMiddleware"}]," 方法註冊 middleware 來檢查輸入的 HTTP 回應："]}]
61:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Support\\Facades\\Http;\nuse Psr\\Http\\Message\\ResponseInterface;\n\n$response = Http::withResponseMiddleware(\n    function (ResponseInterface $response) {\n        $header = $response->getHeader('X-Example');\n\n        // ...\n\n        return $response;\n    }\n)->get('http://example.com');\n"}]}]
62:["$","a",null,{"name":"global-middleware"}]
63:["$","h4",null,{"id":"全域-middleware","children":["$","a",null,{"href":"#全域-middleware","children":"全域 Middleware"}]}]
64:["$","p",null,{"children":["有時，你可能希望註冊一個適用於每個輸出請求和輸入回應的 middleware。要實現這一點，你可以使用 ",["$","code",null,{"children":"globalRequestMiddleware"}]," 和 ",["$","code",null,{"children":"globalResponseMiddleware"}]," 方法。通常，這些方法應該在應用程式的 ",["$","code",null,{"children":"AppServiceProvider"}]," 的 ",["$","code",null,{"children":"boot"}]," 方法中調用："]}]
65:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Support\\Facades\\Http;\n\nHttp::globalRequestMiddleware(fn ($request) => $request->withHeader(\n    'User-Agent', 'Example Application/1.0'\n));\n\nHttp::globalResponseMiddleware(fn ($response) => $response->withHeader(\n    'X-Finished-At', now()->toDateTimeString()\n));\n"}]}]
66:["$","a",null,{"name":"guzzle-options"}]
67:["$","h3",null,{"id":"guzzle-選項","children":["$","a",null,{"href":"#guzzle-選項","children":"Guzzle 選項"}]}]
68:["$","p",null,{"children":["你可以使用 ",["$","code",null,{"children":"withOptions"}]," 方法為輸出請求指定額外的 ",["$","a",null,{"href":"http://docs.guzzlephp.org/en/stable/request-options.html","children":"Guzzle 請求選項"}],"。",["$","code",null,{"children":"withOptions"}]," 方法接受一個鍵/值對陣列："]}]
69:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$response = Http::withOptions([\n    'debug' => true,\n])->get('http://example.com/users');\n"}]}]
6a:["$","a",null,{"name":"global-options"}]
6b:["$","h4",null,{"id":"全域選項","children":["$","a",null,{"href":"#全域選項","children":"全域選項"}]}]
6c:["$","p",null,{"children":["要為每個輸出請求配置預設選項，你可以利用 ",["$","code",null,{"children":"globalOptions"}]," 方法。通常，此方法應該從應用程式的 ",["$","code",null,{"children":"AppServiceProvider"}]," 的 ",["$","code",null,{"children":"boot"}]," 方法中調用："]}]
6d:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Support\\Facades\\Http;\n\n/**\n * Bootstrap any application services.\n */\npublic function boot(): void\n{\n    Http::globalOptions([\n        'allow_redirects' => false,\n    ]);\n}\n"}]}]
6e:["$","a",null,{"name":"concurrent-requests"}]
6f:["$","h2",null,{"id":"並發請求","children":["$","a",null,{"href":"#並發請求","children":"並發請求"}]}]
70:["$","p",null,{"children":"有時，你可能希望並發發送多個 HTTP 請求。換句話說，你希望同時發送多個請求，而不是按順序發送請求。這在與緩慢的 HTTP API 互動時可以顯著提高效能。"}]
71:["$","a",null,{"name":"request-pooling"}]
72:["$","h3",null,{"id":"請求池","children":["$","a",null,{"href":"#請求池","children":"請求池"}]}]
73:["$","p",null,{"children":["幸運的是，你可以使用 ",["$","code",null,{"children":"pool"}]," 方法來實現這一點。",["$","code",null,{"children":"pool"}]," 方法接受一個閉包，該閉包接收一個 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\Pool"}]," 實例，允許你輕鬆地將請求添加到請求池中以進行調度："]}]
74:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Http\\Client\\Pool;\nuse Illuminate\\Support\\Facades\\Http;\n\n$responses = Http::pool(fn (Pool $pool) => [\n    $pool->get('http://localhost/first'),\n    $pool->get('http://localhost/second'),\n    $pool->get('http://localhost/third'),\n]);\n\nreturn $responses[0]->ok() &&\n       $responses[1]->ok() &&\n       $responses[2]->ok();\n"}]}]
75:["$","p",null,{"children":["如你所見，每個回應實例都可以根據它被添加到池中的順序來存取。如果你願意，你可以使用 ",["$","code",null,{"children":"as"}]," 方法為請求命名，這允許你按名稱存取相應的回應："]}]
76:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Http\\Client\\Pool;\nuse Illuminate\\Support\\Facades\\Http;\n\n$responses = Http::pool(fn (Pool $pool) => [\n    $pool->as('first')->get('http://localhost/first'),\n    $pool->as('second')->get('http://localhost/second'),\n    $pool->as('third')->get('http://localhost/third'),\n]);\n\nreturn $responses['first']->ok();\n"}]}]
77:["$","p",null,{"children":["請求池的最大並發數可以透過向 ",["$","code",null,{"children":"pool"}]," 方法提供 ",["$","code",null,{"children":"concurrency"}]," 參數來控制。此值決定了在處理請求池時可以同時進行的最大 HTTP 請求數量："]}]
78:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$responses = Http::pool(fn (Pool $pool) => [\n    // ...\n], concurrency: 5);\n"}]}]
79:["$","a",null,{"name":"customizing-concurrent-requests"}]
7a:["$","h4",null,{"id":"自定義並發請求","children":["$","a",null,{"href":"#自定義並發請求","children":"自定義並發請求"}]}]
7b:["$","p",null,{"children":[["$","code",null,{"children":"pool"}]," 方法不能與其他 HTTP client 方法（如 ",["$","code",null,{"children":"withHeaders"}]," 或 ",["$","code",null,{"children":"middleware"}]," 方法）鏈接。如果你想將自定義標頭或 middleware 應用於池中的請求，你應該在池中的每個請求上配置這些選項："]}]
7c:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Http\\Client\\Pool;\nuse Illuminate\\Support\\Facades\\Http;\n\n$headers = [\n    'X-Example' => 'example',\n];\n\n$responses = Http::pool(fn (Pool $pool) => [\n    $pool->withHeaders($headers)->get('http://laravel.test/test'),\n    $pool->withHeaders($headers)->get('http://laravel.test/test'),\n    $pool->withHeaders($headers)->get('http://laravel.test/test'),\n]);\n"}]}]
7d:["$","a",null,{"name":"request-batching"}]
7e:["$","h3",null,{"id":"請求批次處理","children":["$","a",null,{"href":"#請求批次處理","children":"請求批次處理"}]}]
7f:["$","p",null,{"children":["在 Laravel 中處理並發請求的另一種方法是使用 ",["$","code",null,{"children":"batch"}]," 方法。與 ",["$","code",null,{"children":"pool"}]," 方法一樣，它接受一個閉包，該閉包接收一個 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\Batch"}]," 實例，允許你輕鬆地將請求添加到請求池中以進行調度，但它也允許你定義完成回呼："]}]
80:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Http\\Client\\Batch;\nuse Illuminate\\Http\\Client\\ConnectionException;\nuse Illuminate\\Http\\Client\\RequestException;\nuse Illuminate\\Http\\Client\\Response;\nuse Illuminate\\Support\\Facades\\Http;\n\n$responses = Http::batch(fn (Batch $batch) => [\n    $batch->get('http://localhost/first'),\n    $batch->get('http://localhost/second'),\n    $batch->get('http://localhost/third'),\n])->before(function (Batch $batch) {\n    // The batch has been created but no requests have been initialized...\n})->progress(function (Batch $batch, int|string $key, Response $response) {\n    // An individual request has completed successfully...\n})->then(function (Batch $batch, array $results) {\n    // All requests completed successfully...\n})->catch(function (Batch $batch, int|string $key, Response|RequestException|ConnectionException $response) {\n    // First batch request failure detected...\n})->finally(function (Batch $batch, array $results) {\n    // The batch has finished executing...\n})->send();\n"}]}]
81:["$","p",null,{"children":["與 ",["$","code",null,{"children":"pool"}]," 方法一樣，你可以使用 ",["$","code",null,{"children":"as"}]," 方法為你的請求命名："]}]
82:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$responses = Http::batch(fn (Batch $batch) => [\n    $batch->as('first')->get('http://localhost/first'),\n    $batch->as('second')->get('http://localhost/second'),\n    $batch->as('third')->get('http://localhost/third'),\n])->send();\n"}]}]
83:["$","p",null,{"children":["在呼叫 ",["$","code",null,{"children":"send"}]," 方法啟動 ",["$","code",null,{"children":"batch"}]," 後，你不能向其添加新請求。嘗試這樣做將導致拋出 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\BatchInProgressException"}]," 異常。"]}]
84:["$","p",null,{"children":["請求批次處理的最大並發數可以透過 ",["$","code",null,{"children":"concurrency"}]," 方法控制。此值決定了在處理請求批次處理時可以同時進行的最大 HTTP 請求數量："]}]
85:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$responses = Http::batch(fn (Batch $batch) => [\n    // ...\n])->concurrency(5)->send();\n"}]}]
86:["$","a",null,{"name":"inspecting-batches"}]
87:["$","h4",null,{"id":"檢查批次處理","children":["$","a",null,{"href":"#檢查批次處理","children":"檢查批次處理"}]}]
88:["$","p",null,{"children":["提供給批次處理完成回呼的 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\Batch"}]," 實例具有各種屬性和方法，可協助你與給定的請求批次處理進行互動和檢查："]}]
89:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"// The number of requests assigned to the batch...\n$batch->totalRequests;\n \n// The number of requests that have not been processed yet...\n$batch->pendingRequests;\n \n// The number of requests that have failed...\n$batch->failedRequests;\n\n// The number of requests that have been processed thus far...\n$batch->processedRequests();\n\n// Indicates if the batch has finished executing...\n$batch->finished();\n\n// Indicates if the batch has request failures...\n$batch->hasFailures();\n"}]}]
8a:["$","a",null,{"name":"deferring-batches"}]
8b:["$","h4",null,{"id":"延遲批次處理","children":["$","a",null,{"href":"#延遲批次處理","children":"延遲批次處理"}]}]
8c:["$","p",null,{"children":["當呼叫 ",["$","code",null,{"children":"defer"}]," 方法時，請求批次處理不會立即執行。相反，Laravel 將在當前應用程式請求的 HTTP 回應發送給使用者後執行批次處理，讓你的應用程式感覺快速且反應靈敏："]}]
8d:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Http\\Client\\Batch;\nuse Illuminate\\Support\\Facades\\Http;\n\n$responses = Http::batch(fn (Batch $batch) => [\n    $batch->get('http://localhost/first'),\n    $batch->get('http://localhost/second'),\n    $batch->get('http://localhost/third'),\n])->then(function (Batch $batch, array $results) {\n    // All requests completed successfully...\n})->defer();\n"}]}]
8e:["$","a",null,{"name":"macros"}]
8f:["$","h2",null,{"id":"巨集","children":["$","a",null,{"href":"#巨集","children":"巨集"}]}]
90:["$","p",null,{"children":["Laravel HTTP client 允許你定義「巨集 (macros)」，這可以作為一種流暢、表達性強的機制，在與應用程式中的服務互動時配置常見的請求路徑和標頭。要開始使用，你可以在應用程式的 ",["$","code",null,{"children":"App\\Providers\\AppServiceProvider"}]," 類別的 ",["$","code",null,{"children":"boot"}]," 方法中定義巨集："]}]
91:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Support\\Facades\\Http;\n\n/**\n * Bootstrap any application services.\n */\npublic function boot(): void\n{\n    Http::macro('github', function () {\n        return Http::withHeaders([\n            'X-Example' => 'example',\n        ])->baseUrl('https://github.com');\n    });\n}\n"}]}]
92:["$","p",null,{"children":"配置好巨集後，你可以從應用程式的任何位置調用它，以建立具有指定配置的待處理請求："}]
93:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$response = Http::github()->get('/');\n"}]}]
94:["$","a",null,{"name":"testing"}]
95:["$","h2",null,{"id":"測試","children":["$","a",null,{"href":"#測試","children":"測試"}]}]
96:["$","p",null,{"children":["許多 Laravel 服務提供功能來幫助你輕鬆且表達性地編寫測試，Laravel 的 HTTP client 也不例外。",["$","code",null,{"children":"Http"}]," facade 的 ",["$","code",null,{"children":"fake"}]," 方法允許你指示 HTTP client 在發出請求時返回 stubbed / dummy 回應。"]}]
97:["$","a",null,{"name":"faking-responses"}]
98:["$","h3",null,{"id":"偽造回應","children":["$","a",null,{"href":"#偽造回應","children":"偽造回應"}]}]
99:["$","p",null,{"children":["例如，要指示 HTTP client 為每個請求返回空的 ",["$","code",null,{"children":"200"}]," 狀態碼回應，你可以不帶參數呼叫 ",["$","code",null,{"children":"fake"}]," 方法："]}]
9a:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Support\\Facades\\Http;\n\nHttp::fake();\n\n$response = Http::post(/* ... */);\n"}]}]
9b:["$","a",null,{"name":"faking-specific-urls"}]
9c:["$","h4",null,{"id":"偽造特定-url","children":["$","a",null,{"href":"#偽造特定-url","children":"偽造特定 URL"}]}]
9d:["$","p",null,{"children":["或者，你可以將一個陣列傳遞給 ",["$","code",null,{"children":"fake"}]," 方法。陣列的鍵應該代表你希望偽造的 URL 模式及其關聯的回應。",["$","code",null,{"children":"*"}]," 字元可用作萬用字元。你可以使用 ",["$","code",null,{"children":"Http"}]," facade 的 ",["$","code",null,{"children":"response"}]," 方法為這些端點建構 stub / fake 回應："]}]
9e:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Http::fake([\n    // Stub a JSON response for GitHub endpoints...\n    'github.com/*' => Http::response(['foo' => 'bar'], 200, $headers),\n\n    // Stub a string response for Google endpoints...\n    'google.com/*' => Http::response('Hello World', 200, $headers),\n]);\n"}]}]
9f:["$","p",null,{"children":["任何向未被偽造的 URL 發出的請求都將實際執行。如果你想指定一個 fallback URL 模式來 stub 所有未匹配的 URL，你可以使用單個 ",["$","code",null,{"children":"*"}]," 字元："]}]
a0:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Http::fake([\n    // Stub a JSON response for GitHub endpoints...\n    'github.com/*' => Http::response(['foo' => 'bar'], 200, ['Headers']),\n\n    // Stub a string response for all other endpoints...\n    '*' => Http::response('Hello World', 200, ['Headers']),\n]);\n"}]}]
a1:["$","p",null,{"children":"為了方便起見，可以透過提供字串、陣列或整數作為回應來生成簡單的字串、JSON 和空回應："}]
a2:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Http::fake([\n    'google.com/*' => 'Hello World',\n    'github.com/*' => ['foo' => 'bar'],\n    'chatgpt.com/*' => 200,\n]);\n"}]}]
a3:["$","a",null,{"name":"faking-connection-exceptions"}]
a4:["$","h4",null,{"id":"偽造異常","children":["$","a",null,{"href":"#偽造異常","children":"偽造異常"}]}]
a5:["$","p",null,{"children":["有時你可能需要測試你的應用程式在 HTTP client 嘗試發出請求時遇到 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\ConnectionException"}]," 的行為。你可以使用 ",["$","code",null,{"children":"failedConnection"}]," 方法指示 HTTP client 拋出連線異常："]}]
a6:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Http::fake([\n    'github.com/*' => Http::failedConnection(),\n]);\n"}]}]
a7:["$","p",null,{"children":["要測試你的應用程式在拋出 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\RequestException"}]," 時的行為，你可以使用 ",["$","code",null,{"children":"failedRequest"}]," 方法："]}]
a8:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Http::fake([\n    'github.com/*' => Http::failedRequest(['code' => 'not_found'], 404),\n]);\n"}]}]
a9:["$","a",null,{"name":"faking-response-sequences"}]
aa:["$","h4",null,{"id":"偽造回應序列","children":["$","a",null,{"href":"#偽造回應序列","children":"偽造回應序列"}]}]
ab:["$","p",null,{"children":["有時你可能需要指定單個 URL 應按特定順序返回一系列偽造回應。你可以使用 ",["$","code",null,{"children":"Http::sequence"}]," 方法來建構回應："]}]
ac:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Http::fake([\n    // Stub a series of responses for GitHub endpoints...\n    'github.com/*' => Http::sequence()\n        ->push('Hello World', 200)\n        ->push(['foo' => 'bar'], 200)\n        ->pushStatus(404),\n]);\n"}]}]
ad:["$","p",null,{"children":["當回應序列中的所有回應都被消耗後，任何進一步的請求都將導致回應序列拋出異常。如果你想指定當序列為空時應返回的預設回應，可以使用 ",["$","code",null,{"children":"whenEmpty"}]," 方法："]}]
ae:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Http::fake([\n    // Stub a series of responses for GitHub endpoints...\n    'github.com/*' => Http::sequence()\n        ->push('Hello World', 200)\n        ->push(['foo' => 'bar'], 200)\n        ->whenEmpty(Http::response()),\n]);\n"}]}]
af:["$","p",null,{"children":["如果你想偽造一系列回應，但不需要指定應偽造的特定 URL 模式，可以使用 ",["$","code",null,{"children":"Http::fakeSequence"}]," 方法："]}]
b0:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Http::fakeSequence()\n    ->push('Hello World', 200)\n    ->whenEmpty(Http::response());\n"}]}]
b1:["$","a",null,{"name":"fake-callback"}]
b2:["$","h4",null,{"id":"fake-callback","children":["$","a",null,{"href":"#fake-callback","children":"Fake Callback"}]}]
b3:["$","p",null,{"children":["如果你需要更複雜的邏輯來確定為某些端點返回什麼回應，你可以將一個閉包傳遞給 ",["$","code",null,{"children":"fake"}]," 方法。此閉包將接收一個 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\Request"}]," 實例，並應返回一個回應實例。在你的閉包中，你可以執行任何必要的邏輯來確定要返回什麼類型的回應："]}]
b4:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Http\\Client\\Request;\n\nHttp::fake(function (Request $request) {\n    return Http::response('Hello World', 200);\n});\n"}]}]
b5:["$","a",null,{"name":"inspecting-requests"}]
b6:["$","h3",null,{"id":"檢查請求","children":["$","a",null,{"href":"#檢查請求","children":"檢查請求"}]}]
b7:["$","p",null,{"children":["在偽造回應時，你可能偶爾希望檢查客戶端收到的請求，以確保你的應用程式發送了正確的資料或標頭。你可以在呼叫 ",["$","code",null,{"children":"Http::fake"}]," 之後呼叫 ",["$","code",null,{"children":"Http::assertSent"}]," 方法來實現這一點。"]}]
b8:["$","p",null,{"children":[["$","code",null,{"children":"assertSent"}]," 方法接受一個閉包，該閉包將接收一個 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\Request"}]," 實例，並應返回一個布林值，指示請求是否符合你的期望。為了使測試通過，必須至少發出一個符合給定期望的請求："]}]
b9:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Http\\Client\\Request;\nuse Illuminate\\Support\\Facades\\Http;\n\nHttp::fake();\n\nHttp::withHeaders([\n    'X-First' => 'foo',\n])->post('http://example.com/users', [\n    'name' => 'Taylor',\n    'role' => 'Developer',\n]);\n\nHttp::assertSent(function (Request $request) {\n    return $request->hasHeader('X-First', 'foo') &&\n           $request->url() == 'http://example.com/users' &&\n           $request['name'] == 'Taylor' &&\n           $request['role'] == 'Developer';\n});\n"}]}]
ba:["$","p",null,{"children":["如果需要，你可以使用 ",["$","code",null,{"children":"assertNotSent"}]," 方法斷言未發送特定請求："]}]
bb:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Http\\Client\\Request;\nuse Illuminate\\Support\\Facades\\Http;\n\nHttp::fake();\n\nHttp::post('http://example.com/users', [\n    'name' => 'Taylor',\n    'role' => 'Developer',\n]);\n\nHttp::assertNotSent(function (Request $request) {\n    return $request->url() === 'http://example.com/posts';\n});\n"}]}]
bc:["$","p",null,{"children":["你可以使用 ",["$","code",null,{"children":"assertSentCount"}]," 方法斷言在測試期間「發送」了多少個請求："]}]
bd:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Http::fake();\n\nHttp::assertSentCount(5);\n"}]}]
be:["$","p",null,{"children":["或者，你可以使用 ",["$","code",null,{"children":"assertNothingSent"}]," 方法斷言在測試期間沒有發送任何請求："]}]
bf:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Http::fake();\n\nHttp::assertNothingSent();\n"}]}]
c0:["$","a",null,{"name":"recording-requests-and-responses"}]
c1:["$","h4",null,{"id":"記錄請求--回應","children":["$","a",null,{"href":"#記錄請求--回應","children":"記錄請求 / 回應"}]}]
c2:["$","p",null,{"children":["你可以使用 ",["$","code",null,{"children":"recorded"}]," 方法收集所有請求及其相應的回應。",["$","code",null,{"children":"recorded"}]," 方法返回一個包含 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\Request"}]," 和 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\Response"}]," 實例的陣列集合："]}]
c3:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Http::fake([\n    'https://laravel.com' => Http::response(status: 500),\n    'https://nova.laravel.com/' => Http::response(),\n]);\n\nHttp::get('https://laravel.com');\nHttp::get('https://nova.laravel.com/');\n\n$recorded = Http::recorded();\n\n[$request, $response] = $recorded[0];\n"}]}]
c4:["$","p",null,{"children":["此外，",["$","code",null,{"children":"recorded"}]," 方法接受一個閉包，該閉包將接收 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\Request"}]," 和 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\Response"}]," 實例，並可用於根據你的期望過濾請求 / 回應對："]}]
c5:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Http\\Client\\Request;\nuse Illuminate\\Http\\Client\\Response;\n\nHttp::fake([\n    'https://laravel.com' => Http::response(status: 500),\n    'https://nova.laravel.com/' => Http::response(),\n]);\n\nHttp::get('https://laravel.com');\nHttp::get('https://nova.laravel.com/');\n\n$recorded = Http::recorded(function (Request $request, Response $response) {\n    return $request->url() !== 'https://laravel.com' &&\n           $response->successful();\n});\n"}]}]
c6:["$","a",null,{"name":"preventing-stray-requests"}]
c7:["$","h3",null,{"id":"防止意外請求","children":["$","a",null,{"href":"#防止意外請求","children":"防止意外請求"}]}]
c8:["$","p",null,{"children":["如果你想確保在整個單個測試或完整測試套件中透過 HTTP client 發送的所有請求都已被偽造，你可以呼叫 ",["$","code",null,{"children":"preventStrayRequests"}]," 方法。呼叫此方法後，任何沒有相應偽造回應的請求都將拋出異常，而不是發出實際的 HTTP 請求："]}]
c9:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Support\\Facades\\Http;\n\nHttp::preventStrayRequests();\n\nHttp::fake([\n    'github.com/*' => Http::response('ok'),\n]);\n\n// An \"ok\" response is returned...\nHttp::get('https://github.com/laravel/framework');\n\n// An exception is thrown...\nHttp::get('https://laravel.com');\n"}]}]
ca:["$","p",null,{"children":["有時，你可能希望防止大多數意外請求，但仍允許執行特定請求。要實現這一點，你可以將 URL 模式陣列傳遞給 ",["$","code",null,{"children":"allowStrayRequests"}]," 方法。任何匹配給定模式之一的請求都將被允許，而所有其他請求將繼續拋出異常："]}]
cb:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Support\\Facades\\Http;\n\nHttp::preventStrayRequests();\n\nHttp::allowStrayRequests([\n    'http://127.0.0.1:5000/*',\n]);\n\n// This request is executed...\nHttp::get('http://127.0.0.1:5000/generate');\n\n// An exception is thrown...\nHttp::get('https://laravel.com');\n"}]}]
cc:["$","a",null,{"name":"events"}]
cd:["$","h2",null,{"id":"事件","children":["$","a",null,{"href":"#事件","children":"事件"}]}]
ce:["$","p",null,{"children":["Laravel 在發送 HTTP 請求的過程中會觸發三個事件。",["$","code",null,{"children":"RequestSending"}]," 事件在發送請求之前觸發，而 ",["$","code",null,{"children":"ResponseReceived"}]," 事件在收到給定請求的回應後觸發。如果未收到給定請求的回應，則會觸發 ",["$","code",null,{"children":"ConnectionFailed"}]," 事件。"]}]
cf:["$","p",null,{"children":[["$","code",null,{"children":"RequestSending"}]," 和 ",["$","code",null,{"children":"ConnectionFailed"}]," 事件都包含一個公開的 ",["$","code",null,{"children":"$$request"}]," 屬性，你可以使用它來檢查 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\Request"}]," 實例。同樣地，",["$","code",null,{"children":"ResponseReceived"}]," 事件包含一個 ",["$","code",null,{"children":"$$request"}]," 屬性以及一個 ",["$","code",null,{"children":"$$response"}]," 屬性，可用於檢查 ",["$","code",null,{"children":"Illuminate\\Http\\Client\\Response"}]," 實例。你可以在應用程式中為這些事件建立 ",["$","a",null,{"href":"/docs/events","children":"event listeners"}],"："]}]
d0:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"use Illuminate\\Http\\Client\\Events\\RequestSending;\n\nclass LogRequest\n{\n    /**\n     * Handle the event.\n     */\n    public function handle(RequestSending $event): void\n    {\n        // $event->request ...\n    }\n}\n"}]}]
d1:["$","$Ld2",null,{"children":["$","$d3",null,{"name":"Next.MetadataOutlet","children":"$@d4"}]}]
d4:null
