1:"$Sreact.fragment"
43:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/247eb132b7f7b574.js"],"OutletBoundary"]
44:"$Sreact.suspense"
0:{"buildId":"2DrqUONp3UGGEsii_P-1z","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"container mx-auto py-10","children":["$","div",null,{"className":"mx-auto max-w-3xl","children":[["$","div",null,{"className":"mb-8","children":[["$","h1",null,{"className":"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl","children":"Testing"}],["$","p",null,{"className":"text-xl text-muted-foreground mt-2","children":"Laravel 內建支援使用 PHPUnit 進行測試"}]]}],["$","article",null,{"className":"prose prose-slate dark:prose-invert max-w-none","children":[["$","h1",null,{"id":"testing-getting-started","children":["$","a",null,{"href":"#testing-getting-started","children":"Testing: Getting Started"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#introduction","children":"Introduction"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#environment","children":"Environment"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#creating-tests","children":"Creating Tests"}]}],"\n",["$","li",null,{"children":[["$","a",null,{"href":"#running-tests","children":"Running Tests"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#running-tests-in-parallel","children":"Running Tests in Parallel"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#reporting-test-coverage","children":"Reporting Test Coverage"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#profiling-tests","children":"Profiling Tests"}]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#configuration-caching","children":"Configuration Caching"}]}],"\n"]}],"\n",["$","a",null,{"name":"introduction"}],"\n",["$","h2",null,{"id":"簡介","children":["$","a",null,{"href":"#簡介","children":"簡介"}]}],"\n",["$","p",null,{"children":["Laravel is built with testing in mind. In fact, support for testing with ",["$","a",null,{"href":"https://pestphp.com","children":"Pest"}]," and ",["$","a",null,{"href":"https://phpunit.de","children":"PHPUnit"}]," is included out of the box and a ",["$","code",null,{"children":"phpunit.xml"}]," file is already set up for your application. The framework also ships with convenient helper methods that allow you to expressively test your applications."]}],"\n",["$","p",null,{"children":["By default, your application's ",["$","code",null,{"children":"tests"}]," directory contains two directories: ",["$","code",null,{"children":"Feature"}]," and ",["$","code",null,{"children":"Unit"}],". Unit tests are tests that focus on a very small, isolated portion of your code. In fact, most unit tests probably focus on a single method. Tests within your \"Unit\" test directory do not boot your Laravel application and therefore are unable to access your application's database or other framework services."]}],"\n",["$","p",null,{"children":["Feature tests may test a larger portion of your code, including how several objects interact with each other or even a full HTTP request to a JSON endpoint. ",["$","strong",null,{"children":"Generally, most of your tests should be feature tests. These types of tests provide the most confidence that your system as a whole is functioning as intended."}]]}],"\n",["$","p",null,{"children":["An ",["$","code",null,{"children":"ExampleTest.php"}]," file is provided in both the ",["$","code",null,{"children":"Feature"}]," and ",["$","code",null,{"children":"Unit"}]," test directories. After installing a new Laravel application, execute the ",["$","code",null,{"children":"vendor/bin/pest"}],", ",["$","code",null,{"children":"vendor/bin/phpunit"}],", or ",["$","code",null,{"children":"php artisan test"}]," commands to run your tests."]}],"\n",["$","a",null,{"name":"environment"}],"\n",["$","h2",null,{"id":"environment","children":["$","a",null,{"href":"#environment","children":"Environment"}]}],"\n",["$","p",null,{"children":["When running tests, Laravel will automatically set the ",["$","a",null,{"href":"/docs/%7B'12.x'%7D/configuration#environment-configuration","children":"configuration environment"}]," to ",["$","code",null,{"children":"testing"}]," because of the environment variables defined in the ",["$","code",null,{"children":"phpunit.xml"}]," file. Laravel also automatically configures the session and cache to the ","$L2"," driver so that no session or cache data will be persisted while testing."]}],"\n","$L3","\n","$L4","\n","$L5","\n","$L6","\n","$L7","\n","$L8","\n","$L9","\n","$La","\n","$Lb","\n","$Lc","\n","$Ld","\n","$Le","\n","$Lf","\n","$L10","\n","$L11","\n","$L12","\n","$L13","\n","$L14","\n","$L15","\n","$L16","\n","$L17","\n","$L18","\n","$L19","\n","$L1a","\n","$L1b","\n","$L1c","\n","$L1d","\n","$L1e","\n","$L1f","\n","$L20","\n","$L21","\n","$L22","\n","$L23","\n","$L24","\n","$L25","\n","$L26","\n","$L27","\n","$L28","\n","$L29","\n","$L2a","\n","$L2b","\n","$L2c","\n","$L2d","\n","$L2e","\n","$L2f","\n","$L30","\n","$L31","\n","$L32","\n","$L33","\n","$L34","\n","$L35","\n","$L36","\n","$L37","\n","$L38","\n","$L39","\n","$L3a","\n","$L3b","\n","$L3c","\n","$L3d","\n","$L3e","\n","$L3f","\n","$L40","\n","$L41"]}]]}]}],null,"$L42"]}],"loading":null,"isPartial":false}
2:["$","code",null,{"children":"array"}]
3:["$","p",null,{"children":["You are free to define other testing environment configuration values as necessary. The ",["$","code",null,{"children":"testing"}]," environment variables may be configured in your application's ",["$","code",null,{"children":"phpunit.xml"}]," file, but make sure to clear your configuration cache using the ",["$","code",null,{"children":"config:clear"}]," Artisan command before running your tests!"]}]
4:["$","a",null,{"name":"the-env-testing-environment-file"}]
5:["$","h4",null,{"id":"the-envtesting-environment-file","children":["$","a",null,{"href":"#the-envtesting-environment-file","children":["The ",["$","code",null,{"children":".env.testing"}]," Environment File"]}]}]
6:["$","p",null,{"children":["In addition, you may create a ",["$","code",null,{"children":".env.testing"}]," file in the root of your project. This file will be used instead of the ",["$","code",null,{"children":".env"}]," file when running Pest and PHPUnit tests or executing Artisan commands with the ",["$","code",null,{"children":"--env=testing"}]," option."]}]
7:["$","a",null,{"name":"creating-tests"}]
8:["$","h2",null,{"id":"creating-tests","children":["$","a",null,{"href":"#creating-tests","children":"Creating Tests"}]}]
9:["$","p",null,{"children":["To create a new test case, use the ",["$","code",null,{"children":"make:test"}]," Artisan command. By default, tests will be placed in the ",["$","code",null,{"children":"tests/Feature"}]," directory:"]}]
a:["$","pre",null,{"children":["$","code",null,{"className":"language-shell","children":"php artisan make:test UserTest\n"}]}]
b:["$","p",null,{"children":["If you would like to create a test within the ",["$","code",null,{"children":"tests/Unit"}]," directory, you may use the ",["$","code",null,{"children":"--unit"}]," option when executing the ",["$","code",null,{"children":"make:test"}]," command:"]}]
c:["$","pre",null,{"children":["$","code",null,{"className":"language-shell","children":"php artisan make:test UserTest --unit\n"}]}]
d:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!NOTE]\nTest stubs may be customized using ",["$","a",null,{"href":"/docs/%7B'12.x'%7D/artisan#stub-customization","children":"stub publishing"}],"."]}],"\n"]}]
e:["$","p",null,{"children":["Once the test has been generated, you may define test as you normally would using Pest or PHPUnit. To run your tests, execute the ",["$","code",null,{"children":"vendor/bin/pest"}],", ",["$","code",null,{"children":"vendor/bin/phpunit"}],", or ",["$","code",null,{"children":"php artisan test"}]," command from your terminal:"]}]
f:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\ntest('basic', function () {\n    expect(true)->toBeTrue();\n});\n"}]}]
10:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace Tests\\Unit;\n\nuse PHPUnit\\Framework\\TestCase;\n\nclass ExampleTest extends TestCase\n{\n    /**\n     * A basic test example.\n     */\n    public function test_basic_test(): void\n    {\n        $this->assertTrue(true);\n    }\n}\n"}]}]
11:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!WARNING]\nIf you define your own ",["$","code",null,{"children":"setUp"}]," / ",["$","code",null,{"children":"tearDown"}]," methods within a test class, be sure to call the respective ",["$","code",null,{"children":"parent::setUp()"}]," / ",["$","code",null,{"children":"parent::tearDown()"}]," methods on the parent class. Typically, you should invoke ",["$","code",null,{"children":"parent::setUp()"}]," at the start of your own ",["$","code",null,{"children":"setUp"}]," method, and ",["$","code",null,{"children":"parent::tearDown()"}]," at the end of your ",["$","code",null,{"children":"tearDown"}]," method."]}],"\n"]}]
12:["$","a",null,{"name":"running-tests"}]
13:["$","h2",null,{"id":"running-tests","children":["$","a",null,{"href":"#running-tests","children":"Running Tests"}]}]
14:["$","p",null,{"children":["As mentioned previously, once you've written tests, you may run them using ",["$","code",null,{"children":"pest"}]," or ",["$","code",null,{"children":"phpunit"}],":"]}]
15:["$","pre",null,{"children":["$","code",null,{"className":"language-shell","children":"./vendor/bin/pest\n"}]}]
16:["$","pre",null,{"children":["$","code",null,{"className":"language-shell","children":"./vendor/bin/phpunit\n"}]}]
17:["$","p",null,{"children":["In addition to the ",["$","code",null,{"children":"pest"}]," or ",["$","code",null,{"children":"phpunit"}]," commands, you may use the ",["$","code",null,{"children":"test"}]," Artisan command to run your tests. The Artisan test runner provides verbose test reports in order to ease development and debugging:"]}]
18:["$","pre",null,{"children":["$","code",null,{"className":"language-shell","children":"php artisan test\n"}]}]
19:["$","p",null,{"children":["Any arguments that can be passed to the ",["$","code",null,{"children":"pest"}]," or ",["$","code",null,{"children":"phpunit"}]," commands may also be passed to the Artisan ",["$","code",null,{"children":"test"}]," command:"]}]
1a:["$","pre",null,{"children":["$","code",null,{"className":"language-shell","children":"php artisan test --testsuite=Feature --stop-on-failure\n"}]}]
1b:["$","a",null,{"name":"running-tests-in-parallel"}]
1c:["$","h3",null,{"id":"running-tests-in-parallel","children":["$","a",null,{"href":"#running-tests-in-parallel","children":"Running Tests in Parallel"}]}]
1d:["$","p",null,{"children":["By default, Laravel and Pest / PHPUnit execute your tests sequentially within a single process. However, you may greatly reduce the amount of time it takes to run your tests by running tests simultaneously across multiple processes. To get started, you should install the ",["$","code",null,{"children":"brianium/paratest"}]," Composer package as a \"dev\" dependency. Then, include the ",["$","code",null,{"children":"--parallel"}]," option when executing the ",["$","code",null,{"children":"test"}]," Artisan command:"]}]
1e:["$","pre",null,{"children":["$","code",null,{"className":"language-shell","children":"composer require brianium/paratest --dev\n\nphp artisan test --parallel\n"}]}]
1f:["$","p",null,{"children":["By default, Laravel will create as many processes as there are available CPU cores on your machine. However, you may adjust the number of processes using the ",["$","code",null,{"children":"--processes"}]," option:"]}]
20:["$","pre",null,{"children":["$","code",null,{"className":"language-shell","children":"php artisan test --parallel --processes=4\n"}]}]
21:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!WARNING]\nWhen running tests in parallel, some Pest / PHPUnit options (such as ",["$","code",null,{"children":"--do-not-cache-result"}],") may not be available."]}],"\n"]}]
22:["$","a",null,{"name":"parallel-testing-and-databases"}]
23:["$","h4",null,{"id":"parallel-testing-and-databases","children":["$","a",null,{"href":"#parallel-testing-and-databases","children":"Parallel Testing and Databases"}]}]
24:["$","p",null,{"children":["As long as you have configured a primary database connection, Laravel automatically handles creating and migrating a test database for each parallel process that is running your tests. The test databases will be suffixed with a process token which is unique per process. For example, if you have two parallel test processes, Laravel will create and use ",["$","code",null,{"children":"your_db_test_1"}]," and ",["$","code",null,{"children":"your_db_test_2"}]," test databases."]}]
25:["$","p",null,{"children":["By default, test databases persist between calls to the ",["$","code",null,{"children":"test"}]," Artisan command so that they can be used again by subsequent ",["$","code",null,{"children":"test"}]," invocations. However, you may re-create them using the ",["$","code",null,{"children":"--recreate-databases"}]," option:"]}]
26:["$","pre",null,{"children":["$","code",null,{"className":"language-shell","children":"php artisan test --parallel --recreate-databases\n"}]}]
27:["$","a",null,{"name":"parallel-testing-hooks"}]
28:["$","h4",null,{"id":"parallel-testing-hooks","children":["$","a",null,{"href":"#parallel-testing-hooks","children":"Parallel Testing Hooks"}]}]
29:["$","p",null,{"children":"Occasionally, you may need to prepare certain resources used by your application's tests so they may be safely used by multiple test processes."}]
2a:["$","p",null,{"children":["Using the ",["$","code",null,{"children":"ParallelTesting"}]," facade, you may specify code to be executed on the ",["$","code",null,{"children":"setUp"}]," and ",["$","code",null,{"children":"tearDown"}]," of a process or test case. The given closures receive the ",["$","code",null,{"children":"$$token"}]," and ",["$","code",null,{"children":"$$testCase"}]," variables that contain the process token and the current test case, respectively:"]}]
2b:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace App\\Providers;\n\nuse Illuminate\\Support\\Facades\\Artisan;\nuse Illuminate\\Support\\Facades\\ParallelTesting;\nuse Illuminate\\Support\\ServiceProvider;\nuse PHPUnit\\Framework\\TestCase;\n\nclass AppServiceProvider extends ServiceProvider\n{\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        ParallelTesting::setUpProcess(function (int $token) {\n            // ...\n        });\n\n        ParallelTesting::setUpTestCase(function (int $token, TestCase $testCase) {\n            // ...\n        });\n\n        // Executed when a test database is created...\n        ParallelTesting::setUpTestDatabase(function (string $database, int $token) {\n            Artisan::call('db:seed');\n        });\n\n        ParallelTesting::tearDownTestCase(function (int $token, TestCase $testCase) {\n            // ...\n        });\n\n        ParallelTesting::tearDownProcess(function (int $token) {\n            // ...\n        });\n    }\n}\n"}]}]
2c:["$","a",null,{"name":"accessing-the-parallel-testing-token"}]
2d:["$","h4",null,{"id":"accessing-the-parallel-testing-token","children":["$","a",null,{"href":"#accessing-the-parallel-testing-token","children":"Accessing the Parallel Testing Token"}]}]
2e:["$","p",null,{"children":["If you would like to access the current parallel process \"token\" from any other location in your application's test code, you may use the ",["$","code",null,{"children":"token"}]," method. This token is a unique, string identifier for an individual test process and may be used to segment resources across parallel test processes. For example, Laravel automatically appends this token to the end of the test databases created by each parallel testing process:"]}]
2f:["$","p",null,{"children":"$$token = ParallelTesting::token();"}]
30:["$","a",null,{"name":"reporting-test-coverage"}]
31:["$","h3",null,{"id":"reporting-test-coverage","children":["$","a",null,{"href":"#reporting-test-coverage","children":"Reporting Test Coverage"}]}]
32:["$","blockquote",null,{"children":["\n",["$","p",null,{"children":["[!WARNING]\nThis feature requires ",["$","a",null,{"href":"https://xdebug.org","children":"Xdebug"}]," or ",["$","a",null,{"href":"https://pecl.php.net/package/pcov","children":"PCOV"}],"."]}],"\n"]}]
33:["$","p",null,{"children":["When running your application tests, you may want to determine whether your test cases are actually covering the application code and how much application code is used when running your tests. To accomplish this, you may provide the ",["$","code",null,{"children":"--coverage"}]," option when invoking the ",["$","code",null,{"children":"test"}]," command:"]}]
34:["$","pre",null,{"children":["$","code",null,{"className":"language-shell","children":"php artisan test --coverage\n"}]}]
35:["$","a",null,{"name":"enforcing-a-minimum-coverage-threshold"}]
36:["$","h4",null,{"id":"enforcing-a-minimum-coverage-threshold","children":["$","a",null,{"href":"#enforcing-a-minimum-coverage-threshold","children":"Enforcing a Minimum Coverage Threshold"}]}]
37:["$","p",null,{"children":["You may use the ",["$","code",null,{"children":"--min"}]," option to define a minimum test coverage threshold for your application. The test suite will fail if this threshold is not met:"]}]
38:["$","pre",null,{"children":["$","code",null,{"className":"language-shell","children":"php artisan test --coverage --min=80.3\n"}]}]
39:["$","a",null,{"name":"profiling-tests"}]
3a:["$","h3",null,{"id":"profiling-tests","children":["$","a",null,{"href":"#profiling-tests","children":"Profiling Tests"}]}]
3b:["$","p",null,{"children":["The Artisan test runner also includes a convenient mechanism for listing your application's slowest tests. Invoke the ",["$","code",null,{"children":"test"}]," command with the ",["$","code",null,{"children":"--profile"}]," option to be presented with a list of your ten slowest tests, allowing you to easily investigate which tests can be improved to speed up your test suite:"]}]
3c:["$","pre",null,{"children":["$","code",null,{"className":"language-shell","children":"php artisan test --profile\n"}]}]
3d:["$","a",null,{"name":"configuration-caching"}]
3e:["$","h2",null,{"id":"設定-caching","children":["$","a",null,{"href":"#設定-caching","children":"設定 Caching"}]}]
3f:["$","p",null,{"children":["When running tests, Laravel boots the application for each individual test method.  Without a cached configuration file, each configuration file in your application must be loaded at the start of a test. To build the configuration once and re-use it for all tests in a single run, you may use the ",["$","code",null,{"children":"Illuminate\\Foundation\\Testing\\WithCachedConfig"}]," trait:"]}]
40:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nuse Illuminate\\Foundation\\Testing\\WithCachedConfig;\n\npest()->use(WithCachedConfig::class);\n\n// ...\n"}]}]
41:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace Tests\\Feature;\n\nuse Illuminate\\Foundation\\Testing\\WithCachedConfig;\nuse Tests\\TestCase;\n\nclass ConfigTest extends TestCase\n{\n    use WithCachedConfig;\n\n    // ...\n}\n"}]}]
42:["$","$L43",null,{"children":["$","$44",null,{"name":"Next.MetadataOutlet","children":"$@45"}]}]
45:null
