<!DOCTYPE html><!--0lISzds8vnU9N34ubzJcA--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/bc6e94e20a39014e.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/cbd55ab9639e1e66.js"/><script src="/_next/static/chunks/87a939617be2fa8c.js" async=""></script><script src="/_next/static/chunks/8368f298651cbd89.js" async=""></script><script src="/_next/static/chunks/6740f161f60c6ab5.js" async=""></script><script src="/_next/static/chunks/turbopack-929fc2ce3ca903db.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/247eb132b7f7b574.js" async=""></script><script src="/_next/static/chunks/796e69ae18b2784c.js" async=""></script><script src="/_next/static/chunks/2b257daea29fbb42.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased"><div hidden=""><!--$--><!--/$--></div><div class="flex min-h-screen bg-background"><div class="w-64 border-r bg-background h-screen sticky top-0 hidden md:block"><div class="p-6 font-bold text-xl border-b flex items-center gap-2"><span class="text-red-600">Laravel</span> Docs（中文）</div><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-65px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="p-4 space-y-2"><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>前言</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">發行說明</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>入門</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/installation"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">安裝</button></a><a class="block" href="/docs/configuration"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">配置</button></a><a class="block" href="/docs/structure"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">目錄結構</button></a><a class="block" href="/docs/lifecycle"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">生命週期</button></a><a class="block" href="/docs/frontend"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">前端</button></a><a class="block" href="/docs/starter-kits"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">啟動套件</button></a><a class="block" href="/docs/deployment"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">部署</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>架構</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>基礎功能</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>深入探討</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>安全性</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>資料庫</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>Eloquent ORM</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>測試</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>其他</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>官方套件</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div class="border-t pt-4 space-y-2"><a class="block" href="/docs/api"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">API 文件</button></a><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">更新日誌</button></a></div></div></div></div></div></div><main class="flex-1 relative"><div class="container mx-auto py-10"><div class="mx-auto max-w-3xl"><div class="mb-8"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Redis</h1><p class="text-xl text-muted-foreground mt-2">Redis 是一個開源的進階鍵值儲存系統</p></div><article class="prose prose-slate dark:prose-invert max-w-none"><h1 id="redis"><a href="#redis">Redis</a></h1>
<ul>
<li><a href="#introduction">簡介 (Introduction)</a></li>
<li><a href="#configuration">設定 (Configuration)</a>
<ul>
<li><a href="#clusters">叢集 (Clusters)</a></li>
<li><a href="#predis">Predis</a></li>
<li><a href="#phpredis">PhpRedis</a></li>
</ul>
</li>
<li><a href="#interacting-with-redis">與 Redis 互動 (Interacting With Redis)</a>
<ul>
<li><a href="#transactions">事務 (Transactions)</a></li>
<li><a href="#pipelining-commands">管線指令 (Pipelining Commands)</a></li>
</ul>
</li>
<li><a href="#pubsub">發布 / 訂閱 (Pub / Sub)</a></li>
</ul>
<a name="introduction"></a>
<h2 id="簡介-introduction"><a href="#簡介-introduction">簡介 (Introduction)</a></h2>
<p><a href="https://redis.io">Redis</a> 是一個開源的進階鍵值儲存系統。它通常被稱為資料結構伺服器，因為鍵可以包含<a href="https://redis.io/docs/latest/develop/data-types/strings/">字串</a>、<a href="https://redis.io/docs/latest/develop/data-types/hashes/">雜湊</a>、<a href="https://redis.io/docs/latest/develop/data-types/lists/">列表</a>、<a href="https://redis.io/docs/latest/develop/data-types/sets/">集合</a>和<a href="https://redis.io/docs/latest/develop/data-types/sorted-sets/">有序集合</a>。</p>
<p>在 Laravel 中使用 Redis 之前，我們建議你透過 PECL 安裝並使用 <a href="https://github.com/phpredis/phpredis">PhpRedis</a> PHP 擴充套件。與「使用者空間」PHP 套件相比，此擴充套件的安裝更加複雜，但對於大量使用 Redis 的應用程式可能會帶來更好的效能。如果你使用 <a href="/docs/sail">Laravel Sail</a>，這個擴充套件已經安裝在你的應用程式 Docker 容器中。</p>
<p>如果你無法安裝 PhpRedis 擴充套件，可以透過 Composer 安裝 <code>predis/predis</code> 套件。Predis 是一個完全用 PHP 編寫的 Redis 客戶端，不需要任何額外的擴充套件：</p>
<pre><code class="language-shell">composer require predis/predis
</code></pre>
<a name="configuration"></a>
<h2 id="設定-configuration"><a href="#設定-configuration">設定 (Configuration)</a></h2>
<p>你可以透過 <code>config/database.php</code> 設定檔來設定應用程式的 Redis 設定。在此檔案中，你會看到一個 <code>redis</code> 陣列，其中包含應用程式使用的 Redis 伺服器：</p>
<pre><code class="language-php">&#x27;redis&#x27; =&gt; [

    &#x27;client&#x27; =&gt; env(&#x27;REDIS_CLIENT&#x27;, &#x27;phpredis&#x27;),

    &#x27;options&#x27; =&gt; [
        &#x27;cluster&#x27; =&gt; env(&#x27;REDIS_CLUSTER&#x27;, &#x27;redis&#x27;),
        &#x27;prefix&#x27; =&gt; env(&#x27;REDIS_PREFIX&#x27;, Str::slug(env(&#x27;APP_NAME&#x27;, &#x27;laravel&#x27;), &#x27;_&#x27;).&#x27;_database_&#x27;),
    ],

    &#x27;default&#x27; =&gt; [
        &#x27;url&#x27; =&gt; env(&#x27;REDIS_URL&#x27;),
        &#x27;host&#x27; =&gt; env(&#x27;REDIS_HOST&#x27;, &#x27;127.0.0.1&#x27;),
        &#x27;username&#x27; =&gt; env(&#x27;REDIS_USERNAME&#x27;),
        &#x27;password&#x27; =&gt; env(&#x27;REDIS_PASSWORD&#x27;),
        &#x27;port&#x27; =&gt; env(&#x27;REDIS_PORT&#x27;, &#x27;6379&#x27;),
        &#x27;database&#x27; =&gt; env(&#x27;REDIS_DB&#x27;, &#x27;0&#x27;),
    ],

    &#x27;cache&#x27; =&gt; [
        &#x27;url&#x27; =&gt; env(&#x27;REDIS_URL&#x27;),
        &#x27;host&#x27; =&gt; env(&#x27;REDIS_HOST&#x27;, &#x27;127.0.0.1&#x27;),
        &#x27;username&#x27; =&gt; env(&#x27;REDIS_USERNAME&#x27;),
        &#x27;password&#x27; =&gt; env(&#x27;REDIS_PASSWORD&#x27;),
        &#x27;port&#x27; =&gt; env(&#x27;REDIS_PORT&#x27;, &#x27;6379&#x27;),
        &#x27;database&#x27; =&gt; env(&#x27;REDIS_CACHE_DB&#x27;, &#x27;1&#x27;),
    ],

],
</code></pre>
<p>設定檔中定義的每個 Redis 伺服器都必須有名稱、主機和連接埠，除非你定義了單一 URL 來代表 Redis 連線：</p>
<pre><code class="language-php">&#x27;redis&#x27; =&gt; [

    &#x27;client&#x27; =&gt; env(&#x27;REDIS_CLIENT&#x27;, &#x27;phpredis&#x27;),

    &#x27;options&#x27; =&gt; [
        &#x27;cluster&#x27; =&gt; env(&#x27;REDIS_CLUSTER&#x27;, &#x27;redis&#x27;),
        &#x27;prefix&#x27; =&gt; env(&#x27;REDIS_PREFIX&#x27;, Str::slug(env(&#x27;APP_NAME&#x27;, &#x27;laravel&#x27;), &#x27;_&#x27;).&#x27;_database_&#x27;),
    ],

    &#x27;default&#x27; =&gt; [
        &#x27;url&#x27; =&gt; &#x27;tcp://127.0.0.1:6379?database=0&#x27;,
    ],

    &#x27;cache&#x27; =&gt; [
        &#x27;url&#x27; =&gt; &#x27;tls://user:password@127.0.0.1:6380?database=1&#x27;,
    ],

],
</code></pre>
<a name="configuring-the-connection-scheme"></a>
<h4 id="設定連線協定-configuring-the-connection-scheme"><a href="#設定連線協定-configuring-the-connection-scheme">設定連線協定 (Configuring the Connection Scheme)</a></h4>
<p>預設情況下，Redis 客戶端在連接到 Redis 伺服器時將使用 <code>tcp</code> 協定；但是，你可以透過在 Redis 伺服器的設定陣列中指定 <code>scheme</code> 設定選項來使用 TLS / SSL 加密：</p>
<pre><code class="language-php">&#x27;default&#x27; =&gt; [
    &#x27;scheme&#x27; =&gt; &#x27;tls&#x27;,
    &#x27;url&#x27; =&gt; env(&#x27;REDIS_URL&#x27;),
    &#x27;host&#x27; =&gt; env(&#x27;REDIS_HOST&#x27;, &#x27;127.0.0.1&#x27;),
    &#x27;username&#x27; =&gt; env(&#x27;REDIS_USERNAME&#x27;),
    &#x27;password&#x27; =&gt; env(&#x27;REDIS_PASSWORD&#x27;),
    &#x27;port&#x27; =&gt; env(&#x27;REDIS_PORT&#x27;, &#x27;6379&#x27;),
    &#x27;database&#x27; =&gt; env(&#x27;REDIS_DB&#x27;, &#x27;0&#x27;),
],
</code></pre>
<a name="clusters"></a>
<h3 id="叢集-clusters"><a href="#叢集-clusters">叢集 (Clusters)</a></h3>
<p>如果你的應用程式使用 Redis 伺服器叢集，你應該在 Redis 設定的 <code>clusters</code> 鍵中定義這些叢集。此設定鍵預設不存在，因此你需要在應用程式的 <code>config/database.php</code> 設定檔中建立它：</p>
<pre><code class="language-php">&#x27;redis&#x27; =&gt; [

    &#x27;client&#x27; =&gt; env(&#x27;REDIS_CLIENT&#x27;, &#x27;phpredis&#x27;),

    &#x27;options&#x27; =&gt; [
        &#x27;cluster&#x27; =&gt; env(&#x27;REDIS_CLUSTER&#x27;, &#x27;redis&#x27;),
        &#x27;prefix&#x27; =&gt; env(&#x27;REDIS_PREFIX&#x27;, Str::slug(env(&#x27;APP_NAME&#x27;, &#x27;laravel&#x27;), &#x27;_&#x27;).&#x27;_database_&#x27;),
    ],

    &#x27;clusters&#x27; =&gt; [
        &#x27;default&#x27; =&gt; [
            [
                &#x27;url&#x27; =&gt; env(&#x27;REDIS_URL&#x27;),
                &#x27;host&#x27; =&gt; env(&#x27;REDIS_HOST&#x27;, &#x27;127.0.0.1&#x27;),
                &#x27;username&#x27; =&gt; env(&#x27;REDIS_USERNAME&#x27;),
                &#x27;password&#x27; =&gt; env(&#x27;REDIS_PASSWORD&#x27;),
                &#x27;port&#x27; =&gt; env(&#x27;REDIS_PORT&#x27;, &#x27;6379&#x27;),
                &#x27;database&#x27; =&gt; env(&#x27;REDIS_DB&#x27;, &#x27;0&#x27;),
            ],
        ],
    ],

    // ...
],
</code></pre>
<p>預設情況下，Laravel 將使用原生 Redis 叢集，因為 <code>options.cluster</code> 設定值設為 <code>redis</code>。Redis 叢集是一個很好的預設選項，因為它可以優雅地處理故障轉移。</p>
<p>Laravel 在使用 Predis 時也支援客戶端分片。然而，客戶端分片不處理故障轉移；因此，它主要適用於從另一個主要資料儲存區可用的暫時快取資料。</p>
<p>如果你想使用客戶端分片而不是原生 Redis 叢集，可以在應用程式的 <code>config/database.php</code> 設定檔中移除 <code>options.cluster</code> 設定值：</p>
<pre><code class="language-php">&#x27;redis&#x27; =&gt; [

    &#x27;client&#x27; =&gt; env(&#x27;REDIS_CLIENT&#x27;, &#x27;phpredis&#x27;),

    &#x27;clusters&#x27; =&gt; [
        // ...
    ],

    // ...
],
</code></pre>
<a name="predis"></a>
<h3 id="predis"><a href="#predis">Predis</a></h3>
<p>如果你想讓應用程式透過 Predis 套件與 Redis 互動，應該確保 <code>REDIS_CLIENT</code> 環境變數的值是 <code>predis</code>：</p>
<pre><code class="language-php">&#x27;redis&#x27; =&gt; [

    &#x27;client&#x27; =&gt; env(&#x27;REDIS_CLIENT&#x27;, &#x27;predis&#x27;),

    // ...
],
</code></pre>
<p>除了預設的設定選項外，Predis 還支援可為每個 Redis 伺服器定義的額外<a href="https://github.com/nrk/predis/wiki/Connection-Parameters">連線參數</a>。若要使用這些額外的設定選項，請將它們新增到應用程式 <code>config/database.php</code> 設定檔中的 Redis 伺服器設定中：</p>
<pre><code class="language-php">&#x27;default&#x27; =&gt; [
    &#x27;url&#x27; =&gt; env(&#x27;REDIS_URL&#x27;),
    &#x27;host&#x27; =&gt; env(&#x27;REDIS_HOST&#x27;, &#x27;127.0.0.1&#x27;),
    &#x27;username&#x27; =&gt; env(&#x27;REDIS_USERNAME&#x27;),
    &#x27;password&#x27; =&gt; env(&#x27;REDIS_PASSWORD&#x27;),
    &#x27;port&#x27; =&gt; env(&#x27;REDIS_PORT&#x27;, &#x27;6379&#x27;),
    &#x27;database&#x27; =&gt; env(&#x27;REDIS_DB&#x27;, &#x27;0&#x27;),
    &#x27;read_write_timeout&#x27; =&gt; 60,
],
</code></pre>
<a name="phpredis"></a>
<h3 id="phpredis"><a href="#phpredis">PhpRedis</a></h3>
<p>預設情況下，Laravel 將使用 PhpRedis 擴充套件與 Redis 通訊。Laravel 用於與 Redis 通訊的客戶端由 <code>redis.client</code> 設定選項的值決定，該值通常反映 <code>REDIS_CLIENT</code> 環境變數的值：</p>
<pre><code class="language-php">&#x27;redis&#x27; =&gt; [

    &#x27;client&#x27; =&gt; env(&#x27;REDIS_CLIENT&#x27;, &#x27;phpredis&#x27;),

    // ...
],
</code></pre>
<p>除了預設的設定選項外，PhpRedis 還支援以下額外的連線參數：<code>name</code>、<code>persistent</code>、<code>persistent_id</code>、<code>prefix</code>、<code>read_timeout</code>、<code>retry_interval</code>、<code>max_retries</code>、<code>backoff_algorithm</code>、<code>backoff_base</code>、<code>backoff_cap</code>、<code>timeout</code> 和 <code>context</code>。你可以將這些選項中的任何一個新增到 <code>config/database.php</code> 設定檔中的 Redis 伺服器設定中：</p>
<pre><code class="language-php">&#x27;default&#x27; =&gt; [
    &#x27;url&#x27; =&gt; env(&#x27;REDIS_URL&#x27;),
    &#x27;host&#x27; =&gt; env(&#x27;REDIS_HOST&#x27;, &#x27;127.0.0.1&#x27;),
    &#x27;username&#x27; =&gt; env(&#x27;REDIS_USERNAME&#x27;),
    &#x27;password&#x27; =&gt; env(&#x27;REDIS_PASSWORD&#x27;),
    &#x27;port&#x27; =&gt; env(&#x27;REDIS_PORT&#x27;, &#x27;6379&#x27;),
    &#x27;database&#x27; =&gt; env(&#x27;REDIS_DB&#x27;, &#x27;0&#x27;),
    &#x27;read_timeout&#x27; =&gt; 60,
    &#x27;context&#x27; =&gt; [
        // &#x27;auth&#x27; =&gt; [&#x27;username&#x27;, &#x27;secret&#x27;],
        // &#x27;stream&#x27; =&gt; [&#x27;verify_peer&#x27; =&gt; false],
    ],
],
</code></pre>
<a name="retry-and-backoff-configuration"></a>
<h4 id="重試與退避設定-retry-and-backoff-configuration"><a href="#重試與退避設定-retry-and-backoff-configuration">重試與退避設定 (Retry and Backoff Configuration)</a></h4>
<p><code>retry_interval</code>、<code>max_retries</code>、<code>backoff_algorithm</code>、<code>backoff_base</code> 和 <code>backoff_cap</code> 選項可用於設定 PhpRedis 客戶端應如何嘗試重新連接到 Redis 伺服器。支援以下退避演算法：<code>default</code>、<code>decorrelated_jitter</code>、<code>equal_jitter</code>、<code>exponential</code>、<code>uniform</code> 和 <code>constant</code>：</p>
<pre><code class="language-php">&#x27;default&#x27; =&gt; [
    &#x27;url&#x27; =&gt; env(&#x27;REDIS_URL&#x27;),
    &#x27;host&#x27; =&gt; env(&#x27;REDIS_HOST&#x27;, &#x27;127.0.0.1&#x27;),
    &#x27;username&#x27; =&gt; env(&#x27;REDIS_USERNAME&#x27;),
    &#x27;password&#x27; =&gt; env(&#x27;REDIS_PASSWORD&#x27;),
    &#x27;port&#x27; =&gt; env(&#x27;REDIS_PORT&#x27;, &#x27;6379&#x27;),
    &#x27;database&#x27; =&gt; env(&#x27;REDIS_DB&#x27;, &#x27;0&#x27;),
    &#x27;max_retries&#x27; =&gt; env(&#x27;REDIS_MAX_RETRIES&#x27;, 3),
    &#x27;backoff_algorithm&#x27; =&gt; env(&#x27;REDIS_BACKOFF_ALGORITHM&#x27;, &#x27;decorrelated_jitter&#x27;),
    &#x27;backoff_base&#x27; =&gt; env(&#x27;REDIS_BACKOFF_BASE&#x27;, 100),
    &#x27;backoff_cap&#x27; =&gt; env(&#x27;REDIS_BACKOFF_CAP&#x27;, 1000),
],
</code></pre>
<a name="unix-socket-connections"></a>
<h4 id="unix-socket-連線-unix-socket-connections"><a href="#unix-socket-連線-unix-socket-connections">Unix Socket 連線 (Unix Socket Connections)</a></h4>
<p>Redis 連線也可以設定為使用 Unix Socket 而不是 TCP。這可以透過消除 TCP 開銷來提高連接到與應用程式位於同一伺服器上的 Redis 實例的效能。若要設定 Redis 使用 Unix Socket，請將 <code>REDIS_HOST</code> 環境變數設為 Redis Socket 的路徑，並將 <code>REDIS_PORT</code> 環境變數設為 <code>0</code>：</p>
<pre><code class="language-env">REDIS_HOST=/run/redis/redis.sock
REDIS_PORT=0
</code></pre>
<a name="phpredis-serialization"></a>
<h4 id="phpredis-序列化與壓縮-phpredis-serialization-and-compression"><a href="#phpredis-序列化與壓縮-phpredis-serialization-and-compression">PhpRedis 序列化與壓縮 (PhpRedis Serialization and Compression)</a></h4>
<p>PhpRedis 擴充套件也可以設定為使用各種序列化器和壓縮演算法。這些演算法可以透過 Redis 設定的 <code>options</code> 陣列進行設定：</p>
<pre><code class="language-php">&#x27;redis&#x27; =&gt; [

    &#x27;client&#x27; =&gt; env(&#x27;REDIS_CLIENT&#x27;, &#x27;phpredis&#x27;),

    &#x27;options&#x27; =&gt; [
        &#x27;cluster&#x27; =&gt; env(&#x27;REDIS_CLUSTER&#x27;, &#x27;redis&#x27;),
        &#x27;prefix&#x27; =&gt; env(&#x27;REDIS_PREFIX&#x27;, Str::slug(env(&#x27;APP_NAME&#x27;, &#x27;laravel&#x27;), &#x27;_&#x27;).&#x27;_database_&#x27;),
        &#x27;serializer&#x27; =&gt; Redis::SERIALIZER_MSGPACK,
        &#x27;compression&#x27; =&gt; Redis::COMPRESSION_LZ4,
    ],

    // ...
],
</code></pre>
<p>目前支援的序列化器包括：<code>Redis::SERIALIZER_NONE</code>（預設）、<code>Redis::SERIALIZER_PHP</code>、<code>Redis::SERIALIZER_JSON</code>、<code>Redis::SERIALIZER_IGBINARY</code> 和 <code>Redis::SERIALIZER_MSGPACK</code>。</p>
<p>支援的壓縮演算法包括：<code>Redis::COMPRESSION_NONE</code>（預設）、<code>Redis::COMPRESSION_LZF</code>、<code>Redis::COMPRESSION_ZSTD</code> 和 <code>Redis::COMPRESSION_LZ4</code>。</p>
<a name="interacting-with-redis"></a>
<h2 id="與-redis-互動-interacting-with-redis"><a href="#與-redis-互動-interacting-with-redis">與 Redis 互動 (Interacting With Redis)</a></h2>
<p>你可以透過呼叫 <code>Redis</code> <a href="/docs/facades">Facade</a> 上的各種方法來與 Redis 互動。<code>Redis</code> Facade 支援動態方法，這意味著你可以在 Facade 上呼叫任何 <a href="https://redis.io/commands">Redis 指令</a>，該指令將直接傳遞給 Redis。在此範例中，我們將透過在 <code>Redis</code> Facade 上呼叫 <code>get</code> 方法來呼叫 Redis <code>GET</code> 指令：</p>
<pre><code class="language-php">&lt;?php

namespace App\Http\Controllers;

use Illuminate\Support\Facades\Redis;
use Illuminate\View\View;

class UserController extends Controller
{
    /**
     * 顯示給定使用者的個人檔案。
     */
    public function show(string $id): View
    {
        return view(&#x27;user.profile&#x27;, [
            &#x27;user&#x27; =&gt; Redis::get(&#x27;user:profile:&#x27;.$id)
        ]);
    }
}
</code></pre>
<p>如上所述，你可以在 <code>Redis</code> Facade 上呼叫任何 Redis 指令。Laravel 使用魔術方法將指令傳遞給 Redis 伺服器。如果 Redis 指令需要引數，你應該將這些引數傳遞給 Facade 的對應方法：</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Redis;

Redis::set(&#x27;name&#x27;, &#x27;Taylor&#x27;);

$values = Redis::lrange(&#x27;names&#x27;, 5, 10);
</code></pre>
<p>或者，你可以使用 <code>Redis</code> Facade 的 <code>command</code> 方法將指令傳遞給伺服器，該方法接受指令名稱作為第一個引數，並接受一個值陣列作為第二個引數：</p>
<pre><code class="language-php">$values = Redis::command(&#x27;lrange&#x27;, [&#x27;name&#x27;, 5, 10]);
</code></pre>
<a name="using-multiple-redis-connections"></a>
<h4 id="使用多個-redis-連線-using-multiple-redis-connections"><a href="#使用多個-redis-連線-using-multiple-redis-connections">使用多個 Redis 連線 (Using Multiple Redis Connections)</a></h4>
<p>你的應用程式的 <code>config/database.php</code> 設定檔允許你定義多個 Redis 連線/伺服器。你可以使用 <code>Redis</code> Facade 的 <code>connection</code> 方法取得特定 Redis 連線的連線：</p>
<pre><code class="language-php">$redis = Redis::connection(&#x27;connection-name&#x27;);
</code></pre>
<p>若要取得預設 Redis 連線的實例，你可以不帶任何額外引數呼叫 <code>connection</code> 方法：</p>
<pre><code class="language-php">$redis = Redis::connection();
</code></pre>
<a name="transactions"></a>
<h3 id="事務-transactions"><a href="#事務-transactions">事務 (Transactions)</a></h3>
<p><code>Redis</code> Facade 的 <code>transaction</code> 方法為 Redis 的原生 <code>MULTI</code> 和 <code>EXEC</code> 指令提供了一個方便的包裝。<code>transaction</code> 方法接受一個閉包作為其唯一引數。此閉包將接收一個 Redis 連線實例，並可以向此實例發送任何它想要的指令。閉包內發送的所有 Redis 指令將在單一原子事務中執行：</p>
<pre><code class="language-php">use Redis;
use Illuminate\Support\Facades;

Facades\Redis::transaction(function (Redis $redis) {
    $redis-&gt;incr(&#x27;user_visits&#x27;, 1);
    $redis-&gt;incr(&#x27;total_visits&#x27;, 1);
});
</code></pre>
<blockquote>
<p>[!WARNING]
在定義 Redis 事務時，你可能無法從 Redis 連線中取得任何值。請記住，你的事務是作為單一原子操作執行的，並且該操作直到整個閉包完成執行其指令後才會執行。</p>
</blockquote>
<h4 id="lua-腳本-lua-scripts"><a href="#lua-腳本-lua-scripts">Lua 腳本 (Lua Scripts)</a></h4>
<p><code>eval</code> 方法提供了另一種在單一原子操作中執行多個 Redis 指令的方法。然而，<code>eval</code> 方法的好處是能夠在該操作期間與 Redis 鍵值互動並檢查它們。Redis 腳本是用 <a href="https://www.lua.org">Lua 程式語言</a> 編寫的。</p>
<p><code>eval</code> 方法一開始可能看起來有點可怕，但我們將透過一個基本範例來打破僵局。<code>eval</code> 方法需要幾個引數。首先，你應該將 Lua 腳本（作為字串）傳遞給方法。其次，你應該傳遞腳本互動的鍵數量（作為整數）。第三，你應該傳遞這些鍵的名稱。最後，你可以傳遞你需要在腳本中存取的任何其他額外引數。</p>
<p>在此範例中，我們將遞增一個計數器，檢查其新值，如果第一個計數器的值大於五，則遞增第二個計數器。最後，我們將傳回第一個計數器的值：</p>
<pre><code class="language-php">$value = Redis::eval(&lt;&lt;&lt;&#x27;LUA&#x27;
    local counter = redis.call(&quot;incr&quot;, KEYS[1])

    if counter &gt; 5 then
        redis.call(&quot;incr&quot;, KEYS[2])
    end

    return counter
LUA, 2, &#x27;first-counter&#x27;, &#x27;second-counter&#x27;);
</code></pre>
<blockquote>
<p>[!WARNING]
請參閱 <a href="https://redis.io/commands/eval">Redis 文件</a> 以取得有關 Redis 腳本的更多資訊。</p>
</blockquote>
<a name="pipelining-commands"></a>
<h3 id="管線指令-pipelining-commands"><a href="#管線指令-pipelining-commands">管線指令 (Pipelining Commands)</a></h3>
<p>有時你可能需要執行數十個 Redis 指令。與其為每個指令對 Redis 伺服器進行網路傳輸，你可以使用 <code>pipeline</code> 方法。<code>pipeline</code> 方法接受一個引數：一個接收 Redis 實例的閉包。你可以向此 Redis 實例發送所有指令，它們將同時發送到 Redis 伺服器以減少對伺服器的網路傳輸。指令仍將按照發送的順序執行：</p>
<pre><code class="language-php">use Redis;
use Illuminate\Support\Facades;

Facades\Redis::pipeline(function (Redis $pipe) {
    for ($i = 0; $i &lt; 1000; $i++) {
        $pipe-&gt;set(&quot;key:$i&quot;, $i);
    }
});
</code></pre>
<a name="pubsub"></a>
<h2 id="發布--訂閱-pub--sub"><a href="#發布--訂閱-pub--sub">發布 / 訂閱 (Pub / Sub)</a></h2>
<p>Laravel 為 Redis 的 <code>publish</code> 和 <code>subscribe</code> 指令提供了一個方便的介面。這些 Redis 指令允許你在給定的「頻道」上監聽訊息。你可以從另一個應用程式發布訊息到頻道，甚至使用另一種程式語言，從而實現應用程式和程序之間的輕鬆通訊。</p>
<p>首先，讓我們使用 <code>subscribe</code> 方法設定一個頻道監聽器。由於呼叫 <code>subscribe</code> 方法會開始一個長時間執行的程序，我們將此方法呼叫放在一個 <a href="/docs/artisan">Artisan 指令</a> 中：</p>
<pre><code class="language-php">&lt;?php

namespace App\Console\Commands;

use Illuminate\Console\Command;
use Illuminate\Support\Facades\Redis;

class RedisSubscribe extends Command
{
    /**
     * 控制台指令的名稱和簽章。
     *
     * @var string
     */
    protected $signature = &#x27;redis:subscribe&#x27;;

    /**
     * 控制台指令的描述。
     *
     * @var string
     */
    protected $description = &#x27;訂閱 Redis 頻道&#x27;;

    /**
     * 執行控制台指令。
     */
    public function handle(): void
    {
        Redis::subscribe([&#x27;test-channel&#x27;], function (string $message) {
            echo $message;
        });
    }
}
</code></pre>
<p>現在我們可以使用 <code>publish</code> 方法向頻道發布訊息：</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Redis;

Route::get(&#x27;/publish&#x27;, function () {
    // ...

    Redis::publish(&#x27;test-channel&#x27;, json_encode([
        &#x27;name&#x27; =&gt; &#x27;Adam Wathan&#x27;
    ]));
});
</code></pre>
<a name="wildcard-subscriptions"></a>
<h4 id="萬用字元訂閱-wildcard-subscriptions"><a href="#萬用字元訂閱-wildcard-subscriptions">萬用字元訂閱 (Wildcard Subscriptions)</a></h4>
<p>使用 <code>psubscribe</code> 方法，你可以訂閱萬用字元頻道，這對於捕獲所有頻道上的所有訊息可能很有用。頻道名稱將作為第二個引數傳遞給提供的閉包：</p>
<pre><code class="language-php">Redis::psubscribe([&#x27;*&#x27;], function (string $message, string $channel) {
    echo $message;
});

Redis::psubscribe([&#x27;users.*&#x27;], function (string $message, string $channel) {
    echo $message;
});
</code></pre></article></div></div><!--$--><!--/$--></main></div><script src="/_next/static/chunks/cbd55ab9639e1e66.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n4:I[93649,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/2b257daea29fbb42.js\"],\"DocsSidebar\"]\n6:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"ViewportBoundary\"]\nb:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"MetadataBoundary\"]\nd:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/bc6e94e20a39014e.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"0lISzds8vnU9N34ubzJcA\",\"c\":[\"\",\"docs\",\"redis\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"redis\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/bc6e94e20a39014e.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/796e69ae18b2784c.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/2b257daea29fbb42.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"div\",null,{\"className\":\"flex min-h-screen bg-background\",\"children\":[[\"$\",\"$L4\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 relative\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"className\":\"container mx-auto py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-3xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl\",\"children\":\"Redis\"}],[\"$\",\"p\",null,{\"className\":\"text-xl text-muted-foreground mt-2\",\"children\":\"Redis 是一個開源的進階鍵值儲存系統\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"redis\",\"children\":[\"$\",\"a\",null,{\"href\":\"#redis\",\"children\":\"Redis\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#introduction\",\"children\":\"簡介 (Introduction)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#configuration\",\"children\":\"設定 (Configuration)\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#clusters\",\"children\":\"叢集 (Clusters)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#predis\",\"children\":\"Predis\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#phpredis\",\"children\":\"PhpRedis\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#interacting-with-redis\",\"children\":\"與 Redis 互動 (Interacting With Redis)\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#transactions\",\"children\":\"事務 (Transactions)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#pipelining-commands\",\"children\":\"管線指令 (Pipelining Commands)\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#pubsub\",\"children\":\"發布 / 訂閱 (Pub / Sub)\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"introduction\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"簡介-introduction\",\"children\":[\"$\",\"a\",null,{\"href\":\"#簡介-introduction\",\"children\":\"簡介 (Introduction)\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"https://redis.io\",\"children\":\"Redis\"}],\" 是一個開源的進階鍵值儲存系統。它通常被稱為資料結構伺服器，因為鍵可以包含\",[\"$\",\"a\",null,{\"href\":\"https://redis.io/docs/latest/develop/data-types/strings/\",\"children\":\"字串\"}],\"、\",[\"$\",\"a\",null,{\"href\":\"https://redis.io/docs/latest/develop/data-types/hashes/\",\"children\":\"雜湊\"}],\"、\",[\"$\",\"a\",null,{\"href\":\"https://redis.io/docs/latest/develop/data-types/lists/\",\"children\":\"列表\"}],\"、\",[\"$\",\"a\",null,{\"href\":\"https://redis.io/docs/latest/develop/data-types/sets/\",\"children\":\"集合\"}],\"和\",[\"$\",\"a\",null,{\"href\":\"https://redis.io/docs/latest/develop/data-types/sorted-sets/\",\"children\":\"有序集合\"}],\"。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"在 Laravel 中使用 Redis 之前，我們建議你透過 PECL 安裝並使用 \",[\"$\",\"a\",null,{\"href\":\"https://github.com/phpredis/phpredis\",\"children\":\"PhpRedis\"}],\" PHP 擴充套件。與「使用者空間」PHP 套件相比，此擴充套件的安裝更加複雜，但對於大量使用 Redis 的應用程式可能會帶來更好的效能。如果你使用 \",[\"$\",\"a\",null,{\"href\":\"/docs/sail\",\"children\":\"Laravel Sail\"}],\"，這個擴充套件已經安裝在你的應用程式 Docker 容器中。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"如果你無法安裝 PhpRedis 擴充套件，可以透過 Composer 安裝 \",[\"$\",\"code\",null,{\"children\":\"predis/predis\"}],\" 套件。Predis 是一個完全用 PHP 編寫的 Redis 客戶端，不需要任何額外的擴充套件：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"composer require predis/predis\\n\"}]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"configuration\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"設定-configuration\",\"children\":[\"$\",\"a\",null,{\"href\":\"#設定-configuration\",\"children\":\"設定 (Configuration)\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"你可以透過 \",[\"$\",\"code\",null,{\"children\":\"config/database.php\"}],\" 設定檔來設定應用程式的 Redis 設定。在此檔案中，你會看到一個 \",[\"$\",\"code\",null,{\"children\":\"redis\"}],\" 陣列，其中包含應用程式使用的 Redis 伺服器：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'redis' =\u003e [\\n\\n    'client' =\u003e env('REDIS_CLIENT', 'phpredis'),\\n\\n    'options' =\u003e [\\n        'cluster' =\u003e env('REDIS_CLUSTER', 'redis'),\\n        'prefix' =\u003e env('REDIS_PREFIX', Str::slug(env('APP_NAME', 'laravel'), '_').'_database_'),\\n    ],\\n\\n    'default' =\u003e [\\n        'url' =\u003e env('REDIS_URL'),\\n        'host' =\u003e env('REDIS_HOST', '127.0.0.1'),\\n        'username' =\u003e env('REDIS_USERNAME'),\\n        'password' =\u003e env('REDIS_PASSWORD'),\\n        'port' =\u003e env('REDIS_PORT', '6379'),\\n        'database' =\u003e env('REDIS_DB', '0'),\\n    ],\\n\\n    'cache' =\u003e [\\n        'url' =\u003e env('REDIS_URL'),\\n        'host' =\u003e env('REDIS_HOST', '127.0.0.1'),\\n        'username' =\u003e env('REDIS_USERNAME'),\\n        'password' =\u003e env('REDIS_PASSWORD'),\\n        'port' =\u003e env('REDIS_PORT', '6379'),\\n        'database' =\u003e env('REDIS_CACHE_DB', '1'),\\n    ],\\n\\n],\\n\"}]}],\"\\n\",\"$Le\",\"\\n\",\"$Lf\",\"\\n\",\"$L10\",\"\\n\",\"$L11\",\"\\n\",\"$L12\",\"\\n\",\"$L13\",\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\",\"\\n\",\"$L55\",\"\\n\",\"$L56\",\"\\n\",\"$L57\",\"\\n\",\"$L58\",\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\",\"\\n\",\"$L5c\",\"\\n\",\"$L5d\"]}]]}]}]\n"])</script><script>self.__next_f.push([1,"e:[\"$\",\"p\",null,{\"children\":\"設定檔中定義的每個 Redis 伺服器都必須有名稱、主機和連接埠，除非你定義了單一 URL 來代表 Redis 連線：\"}]\nf:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'redis' =\u003e [\\n\\n    'client' =\u003e env('REDIS_CLIENT', 'phpredis'),\\n\\n    'options' =\u003e [\\n        'cluster' =\u003e env('REDIS_CLUSTER', 'redis'),\\n        'prefix' =\u003e env('REDIS_PREFIX', Str::slug(env('APP_NAME', 'laravel'), '_').'_database_'),\\n    ],\\n\\n    'default' =\u003e [\\n        'url' =\u003e 'tcp://127.0.0.1:6379?database=0',\\n    ],\\n\\n    'cache' =\u003e [\\n        'url' =\u003e 'tls://user:password@127.0.0.1:6380?database=1',\\n    ],\\n\\n],\\n\"}]}]\n10:[\"$\",\"a\",null,{\"name\":\"configuring-the-connection-scheme\"}]\n11:[\"$\",\"h4\",null,{\"id\":\"設定連線協定-configuring-the-connection-scheme\",\"children\":[\"$\",\"a\",null,{\"href\":\"#設定連線協定-configuring-the-connection-scheme\",\"children\":\"設定連線協定 (Configuring the Connection Scheme)\"}]}]\n12:[\"$\",\"p\",null,{\"children\":[\"預設情況下，Redis 客戶端在連接到 Redis 伺服器時將使用 \",[\"$\",\"code\",null,{\"children\":\"tcp\"}],\" 協定；但是，你可以透過在 Redis 伺服器的設定陣列中指定 \",[\"$\",\"code\",null,{\"children\":\"scheme\"}],\" 設定選項來使用 TLS / SSL 加密：\"]}]\n13:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'default' =\u003e [\\n    'scheme' =\u003e 'tls',\\n    'url' =\u003e env('REDIS_URL'),\\n    'host' =\u003e env('REDIS_HOST', '127.0.0.1'),\\n    'username' =\u003e env('REDIS_USERNAME'),\\n    'password' =\u003e env('REDIS_PASSWORD'),\\n    'port' =\u003e env('REDIS_PORT', '6379'),\\n    'database' =\u003e env('REDIS_DB', '0'),\\n],\\n\"}]}]\n14:[\"$\",\"a\",null,{\"name\":\"clusters\"}]\n15:[\"$\",\"h3\",null,{\"id\":\"叢集-clusters\",\"children\":[\"$\",\"a\",null,{\"href\":\"#叢集-clusters\",\"children\":\"叢集 (Clusters)\"}]}]\n16:[\"$\",\"p\",null,{\"children\":[\"如果你的應用程式使用 Redis 伺服器叢集，你應該在 Redis 設定的 \",[\"$\",\"code\",null,{\"children\":\"clusters\"}],\" 鍵中定義這些叢集。此設定鍵預設不存在，因此你需要在應用程式的 \",[\"$\",\"code\",null,{\"children\":\"config/database.php\"}],\" 設定檔中建立它：\"]}]\n17:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'redis' =\u003e [\\n\\n    'client' =\u003e env('REDIS_CLIENT', 'phpredis'),\\n\\n    'options' =\u003e [\\n        'cluster' =\u003e env('REDIS_CLUSTER', 'redis'),\\n        'prefix' =\u003e env('REDIS_PREFIX', Str::slug(env('APP_NAME', 'laravel'), '_').'_database_'),\\n    ],\\n\\n    'clusters' =\u003e [\\n        'default' =\u003e [\\n            [\\n                'url' =\u003e env('REDIS_URL'),\\n                'host' =\u003e env('REDIS_HOST', '127.0.0.1'),\\n                'username' =\u003e env('REDIS_USERNAME'),\\n                'password' =\u003e env('REDIS_PASSWORD'),\\n                'port' =\u003e env('REDIS_PORT', '6379'),\\n                'database' =\u003e env('REDIS_DB', '0'),\\n            ],\\n        ],\\n    ],\\n\\n    // ...\\n],\\n\"}]}]\n18:[\"$\",\"p\",null,{\"children\":[\"預設情況下，Laravel 將使用原生 Redis 叢集，因為 \",[\"$\",\"code\",null,{\"children\":\"options.cluster\"}],\" 設定值設為 \",[\"$\",\"code\",null,{\"children\":\"redis\"}],\"。Redis 叢集是一個很好的預設選項，因為它可以優雅地處理故障轉移。\"]}]\n19:[\"$\",\"p\",null,{\"children\":\"Laravel 在使用 Predis 時也支援客戶端分片。然而，客戶端分片不處理故障轉移；因此，它主要適用於從另一個主要資料儲存區可用的暫時快取資料。\"}]\n1a:[\"$\",\"p\",null,{\"children\":[\"如果你想使用客戶端分片而不是原生 Redis 叢集，可以在應用程式的 \",[\"$\",\"code\",null,{\"children\":\"config/database.php\"}],\" 設定檔中移除 \",[\"$\",\"code\",null,{\"children\":\"options.cluster\"}],\" 設定值：\"]}]\n1b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'redis' =\u003e [\\n\\n    'client' =\u003e env('REDIS_CLIENT', 'phpredis'),\\n\\n    'clusters' =\u003e [\\n        // ...\\n    ],\\n\\n    // ...\\n],\\n\"}]}]\n1c:[\"$\",\"a\",null,{\"name\":\"predis\"}]\n1d:[\"$\",\"h3\",null,{\"id\":\"predis\",\"children\":[\"$\",\"a\",null,{\""])</script><script>self.__next_f.push([1,"href\":\"#predis\",\"children\":\"Predis\"}]}]\n1e:[\"$\",\"p\",null,{\"children\":[\"如果你想讓應用程式透過 Predis 套件與 Redis 互動，應該確保 \",[\"$\",\"code\",null,{\"children\":\"REDIS_CLIENT\"}],\" 環境變數的值是 \",[\"$\",\"code\",null,{\"children\":\"predis\"}],\"：\"]}]\n1f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'redis' =\u003e [\\n\\n    'client' =\u003e env('REDIS_CLIENT', 'predis'),\\n\\n    // ...\\n],\\n\"}]}]\n20:[\"$\",\"p\",null,{\"children\":[\"除了預設的設定選項外，Predis 還支援可為每個 Redis 伺服器定義的額外\",[\"$\",\"a\",null,{\"href\":\"https://github.com/nrk/predis/wiki/Connection-Parameters\",\"children\":\"連線參數\"}],\"。若要使用這些額外的設定選項，請將它們新增到應用程式 \",[\"$\",\"code\",null,{\"children\":\"config/database.php\"}],\" 設定檔中的 Redis 伺服器設定中：\"]}]\n21:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'default' =\u003e [\\n    'url' =\u003e env('REDIS_URL'),\\n    'host' =\u003e env('REDIS_HOST', '127.0.0.1'),\\n    'username' =\u003e env('REDIS_USERNAME'),\\n    'password' =\u003e env('REDIS_PASSWORD'),\\n    'port' =\u003e env('REDIS_PORT', '6379'),\\n    'database' =\u003e env('REDIS_DB', '0'),\\n    'read_write_timeout' =\u003e 60,\\n],\\n\"}]}]\n22:[\"$\",\"a\",null,{\"name\":\"phpredis\"}]\n23:[\"$\",\"h3\",null,{\"id\":\"phpredis\",\"children\":[\"$\",\"a\",null,{\"href\":\"#phpredis\",\"children\":\"PhpRedis\"}]}]\n24:[\"$\",\"p\",null,{\"children\":[\"預設情況下，Laravel 將使用 PhpRedis 擴充套件與 Redis 通訊。Laravel 用於與 Redis 通訊的客戶端由 \",[\"$\",\"code\",null,{\"children\":\"redis.client\"}],\" 設定選項的值決定，該值通常反映 \",[\"$\",\"code\",null,{\"children\":\"REDIS_CLIENT\"}],\" 環境變數的值：\"]}]\n25:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'redis' =\u003e [\\n\\n    'client' =\u003e env('REDIS_CLIENT', 'phpredis'),\\n\\n    // ...\\n],\\n\"}]}]\n26:[\"$\",\"p\",null,{\"children\":[\"除了預設的設定選項外，PhpRedis 還支援以下額外的連線參數：\",[\"$\",\"code\",null,{\"children\":\"name\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"persistent\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"persistent_id\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"prefix\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"read_timeout\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"retry_interval\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"max_retries\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"backoff_algorithm\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"backoff_base\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"backoff_cap\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"timeout\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"context\"}],\"。你可以將這些選項中的任何一個新增到 \",[\"$\",\"code\",null,{\"children\":\"config/database.php\"}],\" 設定檔中的 Redis 伺服器設定中：\"]}]\n27:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'default' =\u003e [\\n    'url' =\u003e env('REDIS_URL'),\\n    'host' =\u003e env('REDIS_HOST', '127.0.0.1'),\\n    'username' =\u003e env('REDIS_USERNAME'),\\n    'password' =\u003e env('REDIS_PASSWORD'),\\n    'port' =\u003e env('REDIS_PORT', '6379'),\\n    'database' =\u003e env('REDIS_DB', '0'),\\n    'read_timeout' =\u003e 60,\\n    'context' =\u003e [\\n        // 'auth' =\u003e ['username', 'secret'],\\n        // 'stream' =\u003e ['verify_peer' =\u003e false],\\n    ],\\n],\\n\"}]}]\n28:[\"$\",\"a\",null,{\"name\":\"retry-and-backoff-configuration\"}]\n29:[\"$\",\"h4\",null,{\"id\":\"重試與退避設定-retry-and-backoff-configuration\",\"children\":[\"$\",\"a\",null,{\"href\":\"#重試與退避設定-retry-and-backoff-configuration\",\"children\":\"重試與退避設定 (Retry and Backoff Configuration)\"}]}]\n2a:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"retry_interval\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"max_retries\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"backoff_algorithm\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"backoff_base\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"backoff_cap\"}],\" 選項可用於設定 PhpRedis 客戶端應如何嘗試重新連接到 Redis 伺服器。支援以下退避演算法：\",[\"$\",\"code\",null,{\"children\":\"default\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"decorre"])</script><script>self.__next_f.push([1,"lated_jitter\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"equal_jitter\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"exponential\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"uniform\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"constant\"}],\"：\"]}]\n2b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'default' =\u003e [\\n    'url' =\u003e env('REDIS_URL'),\\n    'host' =\u003e env('REDIS_HOST', '127.0.0.1'),\\n    'username' =\u003e env('REDIS_USERNAME'),\\n    'password' =\u003e env('REDIS_PASSWORD'),\\n    'port' =\u003e env('REDIS_PORT', '6379'),\\n    'database' =\u003e env('REDIS_DB', '0'),\\n    'max_retries' =\u003e env('REDIS_MAX_RETRIES', 3),\\n    'backoff_algorithm' =\u003e env('REDIS_BACKOFF_ALGORITHM', 'decorrelated_jitter'),\\n    'backoff_base' =\u003e env('REDIS_BACKOFF_BASE', 100),\\n    'backoff_cap' =\u003e env('REDIS_BACKOFF_CAP', 1000),\\n],\\n\"}]}]\n2c:[\"$\",\"a\",null,{\"name\":\"unix-socket-connections\"}]\n2d:[\"$\",\"h4\",null,{\"id\":\"unix-socket-連線-unix-socket-connections\",\"children\":[\"$\",\"a\",null,{\"href\":\"#unix-socket-連線-unix-socket-connections\",\"children\":\"Unix Socket 連線 (Unix Socket Connections)\"}]}]\n2e:[\"$\",\"p\",null,{\"children\":[\"Redis 連線也可以設定為使用 Unix Socket 而不是 TCP。這可以透過消除 TCP 開銷來提高連接到與應用程式位於同一伺服器上的 Redis 實例的效能。若要設定 Redis 使用 Unix Socket，請將 \",[\"$\",\"code\",null,{\"children\":\"REDIS_HOST\"}],\" 環境變數設為 Redis Socket 的路徑，並將 \",[\"$\",\"code\",null,{\"children\":\"REDIS_PORT\"}],\" 環境變數設為 \",[\"$\",\"code\",null,{\"children\":\"0\"}],\"：\"]}]\n2f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-env\",\"children\":\"REDIS_HOST=/run/redis/redis.sock\\nREDIS_PORT=0\\n\"}]}]\n30:[\"$\",\"a\",null,{\"name\":\"phpredis-serialization\"}]\n31:[\"$\",\"h4\",null,{\"id\":\"phpredis-序列化與壓縮-phpredis-serialization-and-compression\",\"children\":[\"$\",\"a\",null,{\"href\":\"#phpredis-序列化與壓縮-phpredis-serialization-and-compression\",\"children\":\"PhpRedis 序列化與壓縮 (PhpRedis Serialization and Compression)\"}]}]\n32:[\"$\",\"p\",null,{\"children\":[\"PhpRedis 擴充套件也可以設定為使用各種序列化器和壓縮演算法。這些演算法可以透過 Redis 設定的 \",[\"$\",\"code\",null,{\"children\":\"options\"}],\" 陣列進行設定：\"]}]\n33:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'redis' =\u003e [\\n\\n    'client' =\u003e env('REDIS_CLIENT', 'phpredis'),\\n\\n    'options' =\u003e [\\n        'cluster' =\u003e env('REDIS_CLUSTER', 'redis'),\\n        'prefix' =\u003e env('REDIS_PREFIX', Str::slug(env('APP_NAME', 'laravel'), '_').'_database_'),\\n        'serializer' =\u003e Redis::SERIALIZER_MSGPACK,\\n        'compression' =\u003e Redis::COMPRESSION_LZ4,\\n    ],\\n\\n    // ...\\n],\\n\"}]}]\n34:[\"$\",\"p\",null,{\"children\":[\"目前支援的序列化器包括：\",[\"$\",\"code\",null,{\"children\":\"Redis::SERIALIZER_NONE\"}],\"（預設）、\",[\"$\",\"code\",null,{\"children\":\"Redis::SERIALIZER_PHP\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"Redis::SERIALIZER_JSON\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"Redis::SERIALIZER_IGBINARY\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"Redis::SERIALIZER_MSGPACK\"}],\"。\"]}]\n35:[\"$\",\"p\",null,{\"children\":[\"支援的壓縮演算法包括：\",[\"$\",\"code\",null,{\"children\":\"Redis::COMPRESSION_NONE\"}],\"（預設）、\",[\"$\",\"code\",null,{\"children\":\"Redis::COMPRESSION_LZF\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"Redis::COMPRESSION_ZSTD\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"Redis::COMPRESSION_LZ4\"}],\"。\"]}]\n36:[\"$\",\"a\",null,{\"name\":\"interacting-with-redis\"}]\n37:[\"$\",\"h2\",null,{\"id\":\"與-redis-互動-interacting-with-redis\",\"children\":[\"$\",\"a\",null,{\"href\":\"#與-redis-互動-interacting-with-redis\",\"children\":\"與 Redis 互動 (Interacting With Redis)\"}]}]\n38:[\"$\",\"p\",null,{\"children\":[\"你可以透過呼叫 \",[\"$\",\"code\",null,{\"children\":\"Redis\"}],\" \",[\"$\",\"a\",null,{\"href\":\"/docs/facades\",\"children\":\"Facade\"}],\" 上的各種方法來與 Redis 互動。\",[\"$\",\"code\",null,{\"children\":\"Redis\"}],\" Facade 支援動態方法，這意味著你可以在 Facade 上呼叫任何 \",[\"$\",\"a\",null,{\"href\":\"https://redis.io/commands\",\"child"])</script><script>self.__next_f.push([1,"ren\":\"Redis 指令\"}],\"，該指令將直接傳遞給 Redis。在此範例中，我們將透過在 \",[\"$\",\"code\",null,{\"children\":\"Redis\"}],\" Facade 上呼叫 \",[\"$\",\"code\",null,{\"children\":\"get\"}],\" 方法來呼叫 Redis \",[\"$\",\"code\",null,{\"children\":\"GET\"}],\" 指令：\"]}]\n39:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Http\\\\Controllers;\\n\\nuse Illuminate\\\\Support\\\\Facades\\\\Redis;\\nuse Illuminate\\\\View\\\\View;\\n\\nclass UserController extends Controller\\n{\\n    /**\\n     * 顯示給定使用者的個人檔案。\\n     */\\n    public function show(string $id): View\\n    {\\n        return view('user.profile', [\\n            'user' =\u003e Redis::get('user:profile:'.$id)\\n        ]);\\n    }\\n}\\n\"}]}]\n3a:[\"$\",\"p\",null,{\"children\":[\"如上所述，你可以在 \",[\"$\",\"code\",null,{\"children\":\"Redis\"}],\" Facade 上呼叫任何 Redis 指令。Laravel 使用魔術方法將指令傳遞給 Redis 伺服器。如果 Redis 指令需要引數，你應該將這些引數傳遞給 Facade 的對應方法：\"]}]\n3b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Redis;\\n\\nRedis::set('name', 'Taylor');\\n\\n$values = Redis::lrange('names', 5, 10);\\n\"}]}]\n3c:[\"$\",\"p\",null,{\"children\":[\"或者，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"Redis\"}],\" Facade 的 \",[\"$\",\"code\",null,{\"children\":\"command\"}],\" 方法將指令傳遞給伺服器，該方法接受指令名稱作為第一個引數，並接受一個值陣列作為第二個引數：\"]}]\n3d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$values = Redis::command('lrange', ['name', 5, 10]);\\n\"}]}]\n3e:[\"$\",\"a\",null,{\"name\":\"using-multiple-redis-connections\"}]\n3f:[\"$\",\"h4\",null,{\"id\":\"使用多個-redis-連線-using-multiple-redis-connections\",\"children\":[\"$\",\"a\",null,{\"href\":\"#使用多個-redis-連線-using-multiple-redis-connections\",\"children\":\"使用多個 Redis 連線 (Using Multiple Redis Connections)\"}]}]\n40:[\"$\",\"p\",null,{\"children\":[\"你的應用程式的 \",[\"$\",\"code\",null,{\"children\":\"config/database.php\"}],\" 設定檔允許你定義多個 Redis 連線/伺服器。你可以使用 \",[\"$\",\"code\",null,{\"children\":\"Redis\"}],\" Facade 的 \",[\"$\",\"code\",null,{\"children\":\"connection\"}],\" 方法取得特定 Redis 連線的連線：\"]}]\n41:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$redis = Redis::connection('connection-name');\\n\"}]}]\n42:[\"$\",\"p\",null,{\"children\":[\"若要取得預設 Redis 連線的實例，你可以不帶任何額外引數呼叫 \",[\"$\",\"code\",null,{\"children\":\"connection\"}],\" 方法：\"]}]\n43:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$redis = Redis::connection();\\n\"}]}]\n44:[\"$\",\"a\",null,{\"name\":\"transactions\"}]\n45:[\"$\",\"h3\",null,{\"id\":\"事務-transactions\",\"children\":[\"$\",\"a\",null,{\"href\":\"#事務-transactions\",\"children\":\"事務 (Transactions)\"}]}]\n46:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Redis\"}],\" Facade 的 \",[\"$\",\"code\",null,{\"children\":\"transaction\"}],\" 方法為 Redis 的原生 \",[\"$\",\"code\",null,{\"children\":\"MULTI\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"EXEC\"}],\" 指令提供了一個方便的包裝。\",[\"$\",\"code\",null,{\"children\":\"transaction\"}],\" 方法接受一個閉包作為其唯一引數。此閉包將接收一個 Redis 連線實例，並可以向此實例發送任何它想要的指令。閉包內發送的所有 Redis 指令將在單一原子事務中執行：\"]}]\n47:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Redis;\\nuse Illuminate\\\\Support\\\\Facades;\\n\\nFacades\\\\Redis::transaction(function (Redis $redis) {\\n    $redis-\u003eincr('user_visits', 1);\\n    $redis-\u003eincr('total_visits', 1);\\n});\\n\"}]}]\n48:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"[!WARNING]\\n在定義 Redis 事務時，你可能無法從 Redis 連線中取得任何值。請記住，你的事務是作為單一原子操作執行的，並且該操作直到整"])</script><script>self.__next_f.push([1,"個閉包完成執行其指令後才會執行。\"}],\"\\n\"]}]\n49:[\"$\",\"h4\",null,{\"id\":\"lua-腳本-lua-scripts\",\"children\":[\"$\",\"a\",null,{\"href\":\"#lua-腳本-lua-scripts\",\"children\":\"Lua 腳本 (Lua Scripts)\"}]}]\n4a:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"eval\"}],\" 方法提供了另一種在單一原子操作中執行多個 Redis 指令的方法。然而，\",[\"$\",\"code\",null,{\"children\":\"eval\"}],\" 方法的好處是能夠在該操作期間與 Redis 鍵值互動並檢查它們。Redis 腳本是用 \",[\"$\",\"a\",null,{\"href\":\"https://www.lua.org\",\"children\":\"Lua 程式語言\"}],\" 編寫的。\"]}]\n4b:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"eval\"}],\" 方法一開始可能看起來有點可怕，但我們將透過一個基本範例來打破僵局。\",[\"$\",\"code\",null,{\"children\":\"eval\"}],\" 方法需要幾個引數。首先，你應該將 Lua 腳本（作為字串）傳遞給方法。其次，你應該傳遞腳本互動的鍵數量（作為整數）。第三，你應該傳遞這些鍵的名稱。最後，你可以傳遞你需要在腳本中存取的任何其他額外引數。\"]}]\n4c:[\"$\",\"p\",null,{\"children\":\"在此範例中，我們將遞增一個計數器，檢查其新值，如果第一個計數器的值大於五，則遞增第二個計數器。最後，我們將傳回第一個計數器的值：\"}]\n4d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$value = Redis::eval(\u003c\u003c\u003c'LUA'\\n    local counter = redis.call(\\\"incr\\\", KEYS[1])\\n\\n    if counter \u003e 5 then\\n        redis.call(\\\"incr\\\", KEYS[2])\\n    end\\n\\n    return counter\\nLUA, 2, 'first-counter', 'second-counter');\\n\"}]}]\n4e:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\n請參閱 \",[\"$\",\"a\",null,{\"href\":\"https://redis.io/commands/eval\",\"children\":\"Redis 文件\"}],\" 以取得有關 Redis 腳本的更多資訊。\"]}],\"\\n\"]}]\n4f:[\"$\",\"a\",null,{\"name\":\"pipelining-commands\"}]\n50:[\"$\",\"h3\",null,{\"id\":\"管線指令-pipelining-commands\",\"children\":[\"$\",\"a\",null,{\"href\":\"#管線指令-pipelining-commands\",\"children\":\"管線指令 (Pipelining Commands)\"}]}]\n51:[\"$\",\"p\",null,{\"children\":[\"有時你可能需要執行數十個 Redis 指令。與其為每個指令對 Redis 伺服器進行網路傳輸，你可以使用 \",[\"$\",\"code\",null,{\"children\":\"pipeline\"}],\" 方法。\",[\"$\",\"code\",null,{\"children\":\"pipeline\"}],\" 方法接受一個引數：一個接收 Redis 實例的閉包。你可以向此 Redis 實例發送所有指令，它們將同時發送到 Redis 伺服器以減少對伺服器的網路傳輸。指令仍將按照發送的順序執行：\"]}]\n52:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Redis;\\nuse Illuminate\\\\Support\\\\Facades;\\n\\nFacades\\\\Redis::pipeline(function (Redis $pipe) {\\n    for ($i = 0; $i \u003c 1000; $i++) {\\n        $pipe-\u003eset(\\\"key:$i\\\", $i);\\n    }\\n});\\n\"}]}]\n53:[\"$\",\"a\",null,{\"name\":\"pubsub\"}]\n54:[\"$\",\"h2\",null,{\"id\":\"發布--訂閱-pub--sub\",\"children\":[\"$\",\"a\",null,{\"href\":\"#發布--訂閱-pub--sub\",\"children\":\"發布 / 訂閱 (Pub / Sub)\"}]}]\n55:[\"$\",\"p\",null,{\"children\":[\"Laravel 為 Redis 的 \",[\"$\",\"code\",null,{\"children\":\"publish\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"subscribe\"}],\" 指令提供了一個方便的介面。這些 Redis 指令允許你在給定的「頻道」上監聽訊息。你可以從另一個應用程式發布訊息到頻道，甚至使用另一種程式語言，從而實現應用程式和程序之間的輕鬆通訊。\"]}]\n56:[\"$\",\"p\",null,{\"children\":[\"首先，讓我們使用 \",[\"$\",\"code\",null,{\"children\":\"subscribe\"}],\" 方法設定一個頻道監聽器。由於呼叫 \",[\"$\",\"code\",null,{\"children\":\"subscribe\"}],\" 方法會開始一個長時間執行的程序，我們將此方法呼叫放在一個 \",[\"$\",\"a\",null,{\"href\":\"/docs/artisan\",\"children\":\"Artisan 指令\"}],\" 中：\"]}]\n57:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Console\\\\Commands;\\n\\nuse Illuminate\\\\Console\\\\Command;\\nuse Illuminate\\\\Support\\\\Facades\\\\Redis;\\n"])</script><script>self.__next_f.push([1,"\\nclass RedisSubscribe extends Command\\n{\\n    /**\\n     * 控制台指令的名稱和簽章。\\n     *\\n     * @var string\\n     */\\n    protected $signature = 'redis:subscribe';\\n\\n    /**\\n     * 控制台指令的描述。\\n     *\\n     * @var string\\n     */\\n    protected $description = '訂閱 Redis 頻道';\\n\\n    /**\\n     * 執行控制台指令。\\n     */\\n    public function handle(): void\\n    {\\n        Redis::subscribe(['test-channel'], function (string $message) {\\n            echo $message;\\n        });\\n    }\\n}\\n\"}]}]\n58:[\"$\",\"p\",null,{\"children\":[\"現在我們可以使用 \",[\"$\",\"code\",null,{\"children\":\"publish\"}],\" 方法向頻道發布訊息：\"]}]\n59:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Redis;\\n\\nRoute::get('/publish', function () {\\n    // ...\\n\\n    Redis::publish('test-channel', json_encode([\\n        'name' =\u003e 'Adam Wathan'\\n    ]));\\n});\\n\"}]}]\n5a:[\"$\",\"a\",null,{\"name\":\"wildcard-subscriptions\"}]\n5b:[\"$\",\"h4\",null,{\"id\":\"萬用字元訂閱-wildcard-subscriptions\",\"children\":[\"$\",\"a\",null,{\"href\":\"#萬用字元訂閱-wildcard-subscriptions\",\"children\":\"萬用字元訂閱 (Wildcard Subscriptions)\"}]}]\n5c:[\"$\",\"p\",null,{\"children\":[\"使用 \",[\"$\",\"code\",null,{\"children\":\"psubscribe\"}],\" 方法，你可以訂閱萬用字元頻道，這對於捕獲所有頻道上的所有訊息可能很有用。頻道名稱將作為第二個引數傳遞給提供的閉包：\"]}]\n5d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Redis::psubscribe(['*'], function (string $message, string $channel) {\\n    echo $message;\\n});\\n\\nRedis::psubscribe(['users.*'], function (string $message, string $channel) {\\n    echo $message;\\n});\\n\"}]}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"5e:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$L5e\",\"3\",{}]]\n8:null\n"])</script></body></html>