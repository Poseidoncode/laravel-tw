<!DOCTYPE html><!--2DrqUONp3UGGEsii_P_1z--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/f56971fdd088d69d.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/cbd55ab9639e1e66.js"/><script src="/_next/static/chunks/87a939617be2fa8c.js" async=""></script><script src="/_next/static/chunks/8368f298651cbd89.js" async=""></script><script src="/_next/static/chunks/6740f161f60c6ab5.js" async=""></script><script src="/_next/static/chunks/turbopack-929fc2ce3ca903db.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/247eb132b7f7b574.js" async=""></script><script src="/_next/static/chunks/796e69ae18b2784c.js" async=""></script><script src="/_next/static/chunks/5f549f56d9b805d8.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased"><div hidden=""><!--$--><!--/$--></div><div class="flex min-h-screen bg-background"><div class="w-64 border-r bg-background h-screen sticky top-0 hidden md:block"><div class="p-6 font-bold text-xl border-b flex items-center gap-2"><span class="text-red-600">Laravel</span> Docs CN</div><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-65px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="p-4 space-y-6"><div><h4 class="mb-2 px-4 text-sm font-semibold text-muted-foreground">前言</h4><div class="space-y-1"><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap text-sm transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal">發行說明</button></a></div></div><div><h4 class="mb-2 px-4 text-sm font-semibold text-muted-foreground">入門</h4><div class="space-y-1"><a class="block" href="/docs/installation"><button data-slot="button" class="inline-flex items-center whitespace-nowrap text-sm transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal">安裝</button></a><a class="block" href="/docs/configuration"><button data-slot="button" class="inline-flex items-center whitespace-nowrap text-sm transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal">配置</button></a></div></div></div></div></div></div></div><main class="flex-1 relative"><div class="container mx-auto py-10"><div class="mx-auto max-w-3xl"><div class="mb-8"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Session</h1><p class="text-xl text-muted-foreground mt-2">Laravel 透過統一的 API 支援多種 session 後端</p></div><article class="prose prose-slate dark:prose-invert max-w-none"><h1 id="http-session"><a href="#http-session">HTTP Session</a></h1>
<ul>
<li><a href="#introduction">Introduction</a>
<ul>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#driver-prerequisites">Driver Prerequisites</a></li>
</ul>
</li>
<li><a href="#interacting-with-the-session">Interacting With the Session</a>
<ul>
<li><a href="#retrieving-data">Retrieving Data</a></li>
<li><a href="#storing-data">Storing Data</a></li>
<li><a href="#flash-data">Flash Data</a></li>
<li><a href="#deleting-data">Deleting Data</a></li>
<li><a href="#regenerating-the-session-id">Regenerating the Session ID</a></li>
</ul>
</li>
<li><a href="#session-cache">Session Cache</a></li>
<li><a href="#session-blocking">Session Blocking</a></li>
<li><a href="#adding-custom-session-drivers">Adding Custom Session Drivers</a>
<ul>
<li><a href="#implementing-the-driver">Implementing the Driver</a></li>
<li><a href="#registering-the-driver">Registering the Driver</a></li>
</ul>
</li>
</ul>
<a name="introduction"></a>
<h2 id="簡介"><a href="#簡介">簡介</a></h2>
<p>Since HTTP driven applications are stateless, sessions provide a way to store information about the user across multiple requests. That user information is typically placed in a persistent store / backend that can be accessed from subsequent requests.</p>
<p>Laravel ships with a variety of session backends that are accessed through an expressive, unified API. Support for popular backends such as <a href="https://memcached.org">Memcached</a>, <a href="https://redis.io">Redis</a>, and databases is included.</p>
<a name="configuration"></a>
<h3 id="設定"><a href="#設定">設定</a></h3>
<p>Your application&#x27;s session configuration file is stored at <code>config/session.php</code>. Be sure to review the options available to you in this file. By default, Laravel is configured to use the <code>database</code> session driver.</p>
<p>The session <code>driver</code> configuration option defines where session data will be stored for each request. Laravel includes a variety of drivers:</p>
<div class="content-list" markdown="1"><ul>
<li><code>file</code> - sessions are stored in <code>storage/framework/sessions</code>.</li>
<li><code>cookie</code> - sessions are stored in secure, encrypted cookies.</li>
<li><code>database</code> - sessions are stored in a relational database.</li>
<li><code>memcached</code> / <code>redis</code> - sessions are stored in one of these fast, cache-based stores.</li>
<li><code>dynamodb</code> - sessions are stored in AWS DynamoDB.</li>
<li><code>array</code> - sessions are stored in a PHP array and will not be persisted.</li>
</ul></div>
<blockquote>
<p>[!NOTE]
The array driver is primarily used during <a href="/docs/%7B&#x27;12.x&#x27;%7D/testing">testing</a> and prevents the data stored in the session from being persisted.</p>
</blockquote>
<a name="driver-prerequisites"></a>
<h3 id="driver-prerequisites"><a href="#driver-prerequisites">Driver Prerequisites</a></h3>
<a name="database"></a>
<h4 id="database"><a href="#database">Database</a></h4>
<p>When using the <code>database</code> session driver, you will need to ensure that you have a database table to contain the session data. Typically, this is included in Laravel&#x27;s default <code>0001_01_01_000000_create_users_table.php</code> <a href="/docs/%7B&#x27;12.x&#x27;%7D/migrations">database migration</a>; however, if for any reason you do not have a <code>sessions</code> table, you may use the <code>make:session-table</code> Artisan command to generate this migration:</p>
<pre><code class="language-shell">php artisan make:session-table

php artisan migrate
</code></pre>
<a name="redis"></a>
<h4 id="redis"><a href="#redis">Redis</a></h4>
<p>Before using Redis sessions with Laravel, you will need to either install the PhpRedis PHP extension via PECL or install the <code>predis/predis</code> package (~1.0) via Composer. For more information on configuring Redis, consult Laravel&#x27;s <a href="/docs/%7B&#x27;12.x&#x27;%7D/redis#configuration">Redis documentation</a>.</p>
<blockquote>
<p>[!NOTE]
The <code>SESSION_CONNECTION</code> environment variable, or the <code>connection</code> option in the <code>session.php</code> configuration file, may be used to specify which Redis connection is used for session storage.</p>
</blockquote>
<a name="interacting-with-the-session"></a>
<h2 id="interacting-with-the-session"><a href="#interacting-with-the-session">Interacting With the Session</a></h2>
<a name="retrieving-data"></a>
<h3 id="retrieving-data"><a href="#retrieving-data">Retrieving Data</a></h3>
<p>There are two primary ways of working with session data in Laravel: the global <code>session</code> helper and via a <code>Request</code> instance. First, let&#x27;s look at accessing the session via a <code>Request</code> instance, which can be type-hinted on a route closure or controller method. Remember, controller method dependencies are automatically injected via the Laravel <a href="/docs/%7B&#x27;12.x&#x27;%7D/container">service container</a>:</p>
<pre><code class="language-php">&lt;?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use Illuminate\View\View;

class UserController extends Controller
{
    /**
     * Show the profile for the given user.
     */
    public function show(Request $request, string $id): View
    {
        $value = $request-&gt;session()-&gt;get(&#x27;key&#x27;);

        // ...

        $user = $this-&gt;users-&gt;find($id);

        return view(&#x27;user.profile&#x27;, [&#x27;user&#x27; =&gt; $user]);
    }
}
</code></pre>
<p>When you retrieve an item from the session, you may also pass a default value as the second argument to the <code>get</code> method. This default value will be returned if the specified key does not exist in the session. If you pass a closure as the default value to the <code>get</code> method and the requested key does not exist, the closure will be executed and its result returned:</p>
<pre><code class="language-php">$value = $request-&gt;session()-&gt;get(&#x27;key&#x27;, &#x27;default&#x27;);

$value = $request-&gt;session()-&gt;get(&#x27;key&#x27;, function () {
    return &#x27;default&#x27;;
});
</code></pre>
<a name="the-global-session-helper"></a>
<h4 id="the-global-session-helper"><a href="#the-global-session-helper">The Global Session Helper</a></h4>
<p>You may also use the global <code>session</code> PHP function to retrieve and store data in the session. When the <code>session</code> helper is called with a single, string argument, it will return the value of that session key. When the helper is called with an array of key / value pairs, those values will be stored in the session:</p>
<pre><code class="language-php">Route::get(&#x27;/home&#x27;, function () {
    // Retrieve a piece of data from the session...
    $value = session(&#x27;key&#x27;);

    // Specifying a default value...
    $value = session(&#x27;key&#x27;, &#x27;default&#x27;);

    // Store a piece of data in the session...
    session([&#x27;key&#x27; =&gt; &#x27;value&#x27;]);
});
</code></pre>
<blockquote>
<p>[!NOTE]
There is little practical difference between using the session via an HTTP request instance versus using the global <code>session</code> helper. Both methods are <a href="/docs/%7B&#x27;12.x&#x27;%7D/testing">testable</a> via the <code>assertSessionHas</code> method which is available in all of your test cases.</p>
</blockquote>
<a name="retrieving-all-session-data"></a>
<h4 id="retrieving-all-session-data"><a href="#retrieving-all-session-data">Retrieving All Session Data</a></h4>
<p>If you would like to retrieve all the data in the session, you may use the <code>all</code> method:</p>
<pre><code class="language-php">$data = $request-&gt;session()-&gt;all();
</code></pre>
<a name="retrieving-a-portion-of-the-session-data"></a>
<h4 id="retrieving-a-portion-of-the-session-data"><a href="#retrieving-a-portion-of-the-session-data">Retrieving a Portion of the Session Data</a></h4>
<p>The <code>only</code> and <code>except</code> methods may be used to retrieve a subset of the session data:</p>
<pre><code class="language-php">$data = $request-&gt;session()-&gt;only([&#x27;username&#x27;, &#x27;email&#x27;]);

$data = $request-&gt;session()-&gt;except([&#x27;username&#x27;, &#x27;email&#x27;]);
</code></pre>
<a name="determining-if-an-item-exists-in-the-session"></a>
<h4 id="determining-if-an-item-exists-in-the-session"><a href="#determining-if-an-item-exists-in-the-session">Determining if an Item Exists in the Session</a></h4>
<p>To determine if an item is present in the session, you may use the <code>has</code> method. The <code>has</code> method returns <code>true</code> if the item is present and is not <code>null</code>:</p>
<pre><code class="language-php">if ($request-&gt;session()-&gt;has(&#x27;users&#x27;)) {
    // ...
}
</code></pre>
<p>To determine if an item is present in the session, even if its value is <code>null</code>, you may use the <code>exists</code> method:</p>
<pre><code class="language-php">if ($request-&gt;session()-&gt;exists(&#x27;users&#x27;)) {
    // ...
}
</code></pre>
<p>To determine if an item is not present in the session, you may use the <code>missing</code> method. The <code>missing</code> method returns <code>true</code> if the item is not present:</p>
<pre><code class="language-php">if ($request-&gt;session()-&gt;missing(&#x27;users&#x27;)) {
    // ...
}
</code></pre>
<a name="storing-data"></a>
<h3 id="storing-data"><a href="#storing-data">Storing Data</a></h3>
<p>To store data in the session, you will typically use the request instance&#x27;s <code>put</code> method or the global <code>session</code> helper:</p>
<pre><code class="language-php">// Via a request instance...
$request-&gt;session()-&gt;put(&#x27;key&#x27;, &#x27;value&#x27;);

// Via the global &quot;session&quot; helper...
session([&#x27;key&#x27; =&gt; &#x27;value&#x27;]);
</code></pre>
<a name="pushing-to-array-session-values"></a>
<h4 id="pushing-to-array-session-values"><a href="#pushing-to-array-session-values">Pushing to Array Session Values</a></h4>
<p>The <code>push</code> method may be used to push a new value onto a session value that is an array. For example, if the <code>user.teams</code> key contains an array of team names, you may push a new value onto the array like so:</p>
<pre><code class="language-php">$request-&gt;session()-&gt;push(&#x27;user.teams&#x27;, &#x27;developers&#x27;);
</code></pre>
<a name="retrieving-deleting-an-item"></a>
<h4 id="retrieving-and-deleting-an-item"><a href="#retrieving-and-deleting-an-item">Retrieving and Deleting an Item</a></h4>
<p>The <code>pull</code> method will retrieve and delete an item from the session in a single statement:</p>
<pre><code class="language-php">$value = $request-&gt;session()-&gt;pull(&#x27;key&#x27;, &#x27;default&#x27;);
</code></pre>
<a name="incrementing-and-decrementing-session-values"></a>
<h4 id="incrementing-and-decrementing-session-values"><a href="#incrementing-and-decrementing-session-values">Incrementing and Decrementing Session Values</a></h4>
<p>If your session data contains an integer you wish to increment or decrement, you may use the <code>increment</code> and <code>decrement</code> methods:</p>
<pre><code class="language-php">$request-&gt;session()-&gt;increment(&#x27;count&#x27;);

$request-&gt;session()-&gt;increment(&#x27;count&#x27;, $incrementBy = 2);

$request-&gt;session()-&gt;decrement(&#x27;count&#x27;);

$request-&gt;session()-&gt;decrement(&#x27;count&#x27;, $decrementBy = 2);
</code></pre>
<a name="flash-data"></a>
<h3 id="flash-data"><a href="#flash-data">Flash Data</a></h3>
<p>Sometimes you may wish to store items in the session for the next request. You may do so using the <code>flash</code> method. Data stored in the session using this method will be available immediately and during the subsequent HTTP request. After the subsequent HTTP request, the flashed data will be deleted. Flash data is primarily useful for short-lived status messages:</p>
<pre><code class="language-php">$request-&gt;session()-&gt;flash(&#x27;status&#x27;, &#x27;Task was successful!&#x27;);
</code></pre>
<p>If you need to persist your flash data for several requests, you may use the <code>reflash</code> method, which will keep all of the flash data for an additional request. If you only need to keep specific flash data, you may use the <code>keep</code> method:</p>
<pre><code class="language-php">$request-&gt;session()-&gt;reflash();

$request-&gt;session()-&gt;keep([&#x27;username&#x27;, &#x27;email&#x27;]);
</code></pre>
<p>To persist your flash data only for the current request, you may use the <code>now</code> method:</p>
<pre><code class="language-php">$request-&gt;session()-&gt;now(&#x27;status&#x27;, &#x27;Task was successful!&#x27;);
</code></pre>
<a name="deleting-data"></a>
<h3 id="deleting-data"><a href="#deleting-data">Deleting Data</a></h3>
<p>The <code>forget</code> method will remove a piece of data from the session. If you would like to remove all data from the session, you may use the <code>flush</code> method:</p>
<pre><code class="language-php">// Forget a single key...
$request-&gt;session()-&gt;forget(&#x27;name&#x27;);

// Forget multiple keys...
$request-&gt;session()-&gt;forget([&#x27;name&#x27;, &#x27;status&#x27;]);

$request-&gt;session()-&gt;flush();
</code></pre>
<a name="regenerating-the-session-id"></a>
<h3 id="regenerating-the-session-id"><a href="#regenerating-the-session-id">Regenerating the Session ID</a></h3>
<p>Regenerating the session ID is often done in order to prevent malicious users from exploiting a <a href="https://owasp.org/www-community/attacks/Session_fixation">session fixation</a> attack on your application.</p>
<p>Laravel automatically regenerates the session ID during authentication if you are using one of the Laravel <a href="/docs/%7B&#x27;12.x&#x27;%7D/starter-kits">application starter kits</a> or <a href="/docs/%7B&#x27;12.x&#x27;%7D/fortify">Laravel Fortify</a>; however, if you need to manually regenerate the session ID, you may use the <code>regenerate</code> method:</p>
<pre><code class="language-php">$request-&gt;session()-&gt;regenerate();
</code></pre>
<p>If you need to regenerate the session ID and remove all data from the session in a single statement, you may use the <code>invalidate</code> method:</p>
<pre><code class="language-php">$request-&gt;session()-&gt;invalidate();
</code></pre>
<a name="session-cache"></a>
<h2 id="session-cache"><a href="#session-cache">Session Cache</a></h2>
<p>Laravel&#x27;s session cache provides a convenient way to cache data that is scoped to an individual user session. Unlike the global application cache, session cache data is automatically isolated per session and is cleaned up when the session expires or is destroyed. The session cache supports all the familiar <a href="/docs/%7B&#x27;12.x&#x27;%7D/cache">Laravel cache methods</a> like <code>get</code>, <code>put</code>, <code>remember</code>, <code>forget</code>, and more, but scoped to the current session.</p>
<p>The session cache is perfect for storing temporary, user-specific data that you want to persist across multiple requests within the same session, but don&#x27;t need to store permanently. This includes things like form data, temporary calculations, API responses, or any other ephemeral data that should be tied to a specific user&#x27;s session.</p>
<p>You can access the session cache through the <code>cache</code> method on the session:</p>
<pre><code class="language-php">$discount = $request-&gt;session()-&gt;cache()-&gt;get(&#x27;discount&#x27;);

$request-&gt;session()-&gt;cache()-&gt;put(
    &#x27;discount&#x27;, 10, now()-&gt;addMinutes(5)
);
</code></pre>
<p>For more information on Laravel&#x27;s cache methods, consult the <a href="/docs/%7B&#x27;12.x&#x27;%7D/cache">cache documentation</a>.</p>
<a name="session-blocking"></a>
<h2 id="session-blocking"><a href="#session-blocking">Session Blocking</a></h2>
<blockquote>
<p>[!WARNING]
To utilize session blocking, your application must be using a cache driver that supports <a href="/docs/%7B&#x27;12.x&#x27;%7D/cache#atomic-locks">atomic locks</a>. Currently, those cache drivers include the <code>memcached</code>, <code>dynamodb</code>, <code>redis</code>, <code>mongodb</code> (included in the official <code>mongodb/laravel-mongodb</code> package), <code>database</code>, <code>file</code>, and <code>array</code> drivers. In addition, you may not use the <code>cookie</code> session driver.</p>
</blockquote>
<p>By default, Laravel allows requests using the same session to execute concurrently. So, for example, if you use a JavaScript HTTP library to make two HTTP requests to your application, they will both execute at the same time. For many applications, this is not a problem; however, session data loss can occur in a small subset of applications that make concurrent requests to two different application endpoints which both write data to the session.</p>
<p>To mitigate this, Laravel provides functionality that allows you to limit concurrent requests for a given session. To get started, you may simply chain the <code>block</code> method onto your route definition. In this example, an incoming request to the <code>/profile</code> endpoint would acquire a session lock. While this lock is being held, any incoming requests to the <code>/profile</code> or <code>/order</code> endpoints which share the same session ID will wait for the first request to finish executing before continuing their execution:</p>
<pre><code class="language-php">Route::post(&#x27;/profile&#x27;, function () {
    // ...
})-&gt;block($lockSeconds = 10, $waitSeconds = 10);

Route::post(&#x27;/order&#x27;, function () {
    // ...
})-&gt;block($lockSeconds = 10, $waitSeconds = 10);
</code></pre>
<p>The <code>block</code> method accepts two optional arguments. The first argument accepted by the <code>block</code> method is the maximum number of seconds the session lock should be held for before it is released. Of course, if the request finishes executing before this time the lock will be released earlier.</p>
<p>The second argument accepted by the <code>block</code> method is the number of seconds a request should wait while attempting to obtain a session lock. An <code>Illuminate\Contracts\Cache\LockTimeoutException</code> will be thrown if the request is unable to obtain a session lock within the given number of seconds.</p>
<p>If neither of these arguments is passed, the lock will be obtained for a maximum of 10 seconds and requests will wait a maximum of 10 seconds while attempting to obtain a lock:</p>
<pre><code class="language-php">Route::post(&#x27;/profile&#x27;, function () {
    // ...
})-&gt;block();
</code></pre>
<a name="adding-custom-session-drivers"></a>
<h2 id="adding-custom-session-drivers"><a href="#adding-custom-session-drivers">Adding Custom Session Drivers</a></h2>
<a name="implementing-the-driver"></a>
<h3 id="implementing-the-driver"><a href="#implementing-the-driver">Implementing the Driver</a></h3>
<p>If none of the existing session drivers fit your application&#x27;s needs, Laravel makes it possible to write your own session handler. Your custom session driver should implement PHP&#x27;s built-in <code>SessionHandlerInterface</code>. This interface contains just a few simple methods. A stubbed MongoDB implementation looks like the following:</p>
<pre><code class="language-php">&lt;?php

namespace App\Extensions;

class MongoSessionHandler implements \SessionHandlerInterface
{
    public function open($savePath, $sessionName) {}
    public function close() {}
    public function read($sessionId) {}
    public function write($sessionId, $data) {}
    public function destroy($sessionId) {}
    public function gc($lifetime) {}
}
</code></pre>
<p>Since Laravel does not include a default directory to house your extensions. You are free to place them anywhere you like. In this example, we have created an <code>Extensions</code> directory to house the <code>MongoSessionHandler</code>.</p>
<p>Since the purpose of these methods is not readily understandable, here is an overview of the purpose of each method:</p>
<div class="content-list" markdown="1"><ul>
<li>The <code>open</code> method would typically be used in file based session store systems. Since Laravel ships with a <code>file</code> session driver, you will rarely need to put anything in this method. You can simply leave this method empty.</li>
<li>The <code>close</code> method, like the <code>open</code> method, can also usually be disregarded. For most drivers, it is not needed.</li>
<li>The <code>read</code> method should return the string version of the session data associated with the given <code>$sessionId</code>. There is no need to do any serialization or other encoding when retrieving or storing session data in your driver, as Laravel will perform the serialization for you.</li>
<li>The <code>write</code> method should write the given <code>$data</code> string associated with the <code>$sessionId</code> to some persistent storage system, such as MongoDB or another storage system of your choice. Again, you should not perform any serialization - Laravel will have already handled that for you.</li>
<li>The <code>destroy</code> method should remove the data associated with the <code>$sessionId</code> from persistent storage.</li>
<li>The <code>gc</code> method should destroy all session data that is older than the given <code>$lifetime</code>, which is a UNIX timestamp. For self-expiring systems like Memcached and Redis, this method may be left empty.</li>
</ul></div>
<a name="registering-the-driver"></a>
<h3 id="registering-the-driver"><a href="#registering-the-driver">Registering the Driver</a></h3>
<p>Once your driver has been implemented, you are ready to register it with Laravel. To add additional drivers to Laravel&#x27;s session backend, you may use the <code>extend</code> method provided by the <code>Session</code> <a href="/docs/%7B&#x27;12.x&#x27;%7D/facades">facade</a>. You should call the <code>extend</code> method from the <code>boot</code> method of a <a href="/docs/%7B&#x27;12.x&#x27;%7D/providers">service provider</a>. You may do this from the existing <code>App\Providers\AppServiceProvider</code> or create an entirely new provider:</p>
<pre><code class="language-php">&lt;?php

namespace App\Providers;

use App\Extensions\MongoSessionHandler;
use Illuminate\Contracts\Foundation\Application;
use Illuminate\Support\Facades\Session;
use Illuminate\Support\ServiceProvider;

class SessionServiceProvider extends ServiceProvider
{
    /**
     * Register any application services.
     */
    public function register(): void
    {
        // ...
    }

    /**
     * Bootstrap any application services.
     */
    public function boot(): void
    {
        Session::extend(&#x27;mongo&#x27;, function (Application $app) {
            // Return an implementation of SessionHandlerInterface...
            return new MongoSessionHandler;
        });
    }
}
</code></pre>
<p>Once the session driver has been registered, you may specify the <code>mongo</code> driver as your application&#x27;s session driver using the <code>SESSION_DRIVER</code> environment variable or within the application&#x27;s <code>config/session.php</code> configuration file.</p></article></div></div><!--$--><!--/$--></main></div><script src="/_next/static/chunks/cbd55ab9639e1e66.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n4:I[71435,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/5f549f56d9b805d8.js\"],\"ScrollArea\"]\n5:I[22016,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/5f549f56d9b805d8.js\"],\"\"]\nb:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/f56971fdd088d69d.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"2DrqUONp3UGGEsii_P-1z\",\"c\":[\"\",\"docs\",\"session\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"session\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/f56971fdd088d69d.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/796e69ae18b2784c.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/5f549f56d9b805d8.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"div\",null,{\"className\":\"flex min-h-screen bg-background\",\"children\":[[\"$\",\"div\",null,{\"className\":\"w-64 border-r bg-background h-screen sticky top-0 hidden md:block\",\"children\":[[\"$\",\"div\",null,{\"className\":\"p-6 font-bold text-xl border-b flex items-center gap-2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"text-red-600\",\"children\":\"Laravel\"}],\" Docs CN\"]}],[\"$\",\"$L4\",null,{\"className\":\"h-[calc(100vh-65px)]\",\"children\":[\"$\",\"div\",null,{\"className\":\"p-4 space-y-6\",\"children\":[[\"$\",\"div\",\"前言\",{\"children\":[[\"$\",\"h4\",null,{\"className\":\"mb-2 px-4 text-sm font-semibold text-muted-foreground\",\"children\":\"前言\"}],[\"$\",\"div\",null,{\"className\":\"space-y-1\",\"children\":[[\"$\",\"$L5\",\"/docs/releases\",{\"href\":\"/docs/releases\",\"className\":\"block\",\"children\":[\"$\",\"button\",null,{\"data-slot\":\"button\",\"className\":\"inline-flex items-center whitespace-nowrap text-sm transition-all disabled:pointer-events-none disabled:opacity-50 [\u0026_svg]:pointer-events-none [\u0026_svg:not([class*='size-'])]:size-4 shrink-0 [\u0026_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[\u003esvg]:px-2.5 w-full justify-start font-normal\",\"children\":\"發行說明\"}]}]]}]]}],[\"$\",\"div\",\"入門\",{\"children\":[[\"$\",\"h4\",null,{\"className\":\"mb-2 px-4 text-sm font-semibold text-muted-foreground\",\"children\":\"入門\"}],[\"$\",\"div\",null,{\"className\":\"space-y-1\",\"children\":[[\"$\",\"$L5\",\"/docs/installation\",{\"href\":\"/docs/installation\",\"className\":\"block\",\"children\":[\"$\",\"button\",null,{\"data-slot\":\"button\",\"className\":\"inline-flex items-center whitespace-nowrap text-sm transition-all disabled:pointer-events-none disabled:opacity-50 [\u0026_svg]:pointer-events-none [\u0026_svg:not([class*='size-'])]:size-4 shrink-0 [\u0026_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[\u003esvg]:px-2.5 w-full justify-start font-normal\",\"children\":\"安裝\"}]}],\"$L6\"]}]]}]]}]}]]}],\"$L7\"]}]]}],{\"children\":[\"$L8\",{\"children\":[\"$L9\",{},null,false,false]},null,false,false]},null,false,false]},null,false,false],\"$La\",false]],\"m\":\"$undefined\",\"G\":[\"$b\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"d:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"OutletBoundary\"]\ne:\"$Sreact.suspense\"\n10:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"ViewportBoundary\"]\n12:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"MetadataBoundary\"]\n6:[\"$\",\"$L5\",\"/docs/configuration\",{\"href\":\"/docs/configuration\",\"className\":\"block\",\"children\":[\"$\",\"button\",null,{\"data-slot\":\"button\",\"className\":\"inline-flex items-center whitespace-nowrap text-sm transition-all disabled:pointer-events-none disabled:opacity-50 [\u0026_svg]:pointer-events-none [\u0026_svg:not([class*='size-'])]:size-4 shrink-0 [\u0026_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[\u003esvg]:px-2.5 w-full justify-start font-normal\",\"children\":\"配置\"}]}]\n7:[\"$\",\"main\",null,{\"className\":\"flex-1 relative\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]\n8:[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]\n9:[\"$\",\"$1\",\"c\",{\"children\":[\"$Lc\",null,[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"$e\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@f\"}]}]]}]\na:[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L10\",null,{\"children\":\"$@11\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$L12\",null,{\"children\":[\"$\",\"$e\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@13\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}]\n"])</script><script>self.__next_f.push([1,"c:[\"$\",\"div\",null,{\"className\":\"container mx-auto py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-3xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl\",\"children\":\"Session\"}],[\"$\",\"p\",null,{\"className\":\"text-xl text-muted-foreground mt-2\",\"children\":\"Laravel 透過統一的 API 支援多種 session 後端\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"http-session\",\"children\":[\"$\",\"a\",null,{\"href\":\"#http-session\",\"children\":\"HTTP Session\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#introduction\",\"children\":\"Introduction\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#configuration\",\"children\":\"Configuration\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#driver-prerequisites\",\"children\":\"Driver Prerequisites\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#interacting-with-the-session\",\"children\":\"Interacting With the Session\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#retrieving-data\",\"children\":\"Retrieving Data\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#storing-data\",\"children\":\"Storing Data\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#flash-data\",\"children\":\"Flash Data\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#deleting-data\",\"children\":\"Deleting Data\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#regenerating-the-session-id\",\"children\":\"Regenerating the Session ID\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#session-cache\",\"children\":\"Session Cache\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#session-blocking\",\"children\":\"Session Blocking\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#adding-custom-session-drivers\",\"children\":\"Adding Custom Session Drivers\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#implementing-the-driver\",\"children\":\"Implementing the Driver\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#registering-the-driver\",\"children\":\"Registering the Driver\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"introduction\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"簡介\",\"children\":[\"$\",\"a\",null,{\"href\":\"#簡介\",\"children\":\"簡介\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Since HTTP driven applications are stateless, sessions provide a way to store information about the user across multiple requests. That user information is typically placed in a persistent store / backend that can be accessed from subsequent requests.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Laravel ships with a variety of session backends that are accessed through an expressive, unified API. Support for popular backends such as \",[\"$\",\"a\",null,{\"href\":\"https://memcached.org\",\"children\":\"Memcached\"}],\", \",[\"$\",\"a\",null,{\"href\":\"https://redis.io\",\"children\":\"Redis\"}],\", and databases is included.\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"configuration\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"設定\",\"children\":[\"$\",\"a\",null,{\"href\":\"#設定\",\"children\":\"設定\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Your application's session configuration file is stored at \",[\"$\",\"code\",null,{\"children\":\"config/session.php\"}],\". Be sure to review the options available to you in this file. By default, Laravel is configured to use the \",[\"$\",\"code\",null,{\"children\":\"database\"}],\" session driver.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"The session \",[\"$\",\"code\",null,{\"children\":\"driver\"}],\" configuration option defines where session data will be stored for each request. Laravel includes a variety of drivers:\"]}],\"\\n\",[\"$\",\"div\",null,{\"class\":\"content-list\",\"markdown\":\"1\",\"children\":[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"file\"}],\" - sessions are stored in \",[\"$\",\"code\",null,{\"children\":\"storage/framework/sessions\"}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"cookie\"}],\" - sessions are stored in secure, encrypted cookies.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"database\"}],\" - sessions are stored in a relational database.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"memcached\"}],\" / \",[\"$\",\"code\",null,{\"children\":\"redis\"}],\" - sessions are stored in one of these fast, cache-based stores.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"dynamodb\"}],\" - sessions are stored in AWS DynamoDB.\"]}],\"\\n\",\"$L14\",\"\\n\"]}]}],\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\",\"\\n\",\"$L55\",\"\\n\",\"$L56\",\"\\n\",\"$L57\",\"\\n\",\"$L58\",\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\",\"\\n\",\"$L5c\",\"\\n\",\"$L5d\",\"\\n\",\"$L5e\",\"\\n\",\"$L5f\",\"\\n\",\"$L60\",\"\\n\",\"$L61\",\"\\n\",\"$L62\",\"\\n\",\"$L63\",\"\\n\",\"$L64\",\"\\n\",\"$L65\",\"\\n\",\"$L66\",\"\\n\",\"$L67\",\"\\n\",\"$L68\",\"\\n\",\"$L69\",\"\\n\",\"$L6a\",\"\\n\",\"$L6b\",\"\\n\",\"$L6c\",\"\\n\",\"$L6d\",\"\\n\",\"$L6e\",\"\\n\",\"$L6f\",\"\\n\",\"$L70\",\"\\n\",\"$L71\",\"\\n\",\"$L72\",\"\\n\",\"$L73\",\"\\n\",\"$L74\",\"\\n\",\"$L75\",\"\\n\",\"$L76\",\"\\n\",\"$L77\",\"\\n\",\"$L78\",\"\\n\",\"$L79\",\"\\n\",\"$L7a\",\"\\n\",\"$L7b\",\"\\n\",\"$L7c\",\"\\n\",\"$L7d\",\"\\n\",\"$L7e\"]}]]}]}]\n"])</script><script>self.__next_f.push([1,"14:[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"array\"}],\" - sessions are stored in a PHP array and will not be persisted.\"]}]\n15:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\nThe array driver is primarily used during \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/testing\",\"children\":\"testing\"}],\" and prevents the data stored in the session from being persisted.\"]}],\"\\n\"]}]\n16:[\"$\",\"a\",null,{\"name\":\"driver-prerequisites\"}]\n17:[\"$\",\"h3\",null,{\"id\":\"driver-prerequisites\",\"children\":[\"$\",\"a\",null,{\"href\":\"#driver-prerequisites\",\"children\":\"Driver Prerequisites\"}]}]\n18:[\"$\",\"a\",null,{\"name\":\"database\"}]\n19:[\"$\",\"h4\",null,{\"id\":\"database\",\"children\":[\"$\",\"a\",null,{\"href\":\"#database\",\"children\":\"Database\"}]}]\n1a:[\"$\",\"p\",null,{\"children\":[\"When using the \",[\"$\",\"code\",null,{\"children\":\"database\"}],\" session driver, you will need to ensure that you have a database table to contain the session data. Typically, this is included in Laravel's default \",[\"$\",\"code\",null,{\"children\":\"0001_01_01_000000_create_users_table.php\"}],\" \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/migrations\",\"children\":\"database migration\"}],\"; however, if for any reason you do not have a \",[\"$\",\"code\",null,{\"children\":\"sessions\"}],\" table, you may use the \",[\"$\",\"code\",null,{\"children\":\"make:session-table\"}],\" Artisan command to generate this migration:\"]}]\n1b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan make:session-table\\n\\nphp artisan migrate\\n\"}]}]\n1c:[\"$\",\"a\",null,{\"name\":\"redis\"}]\n1d:[\"$\",\"h4\",null,{\"id\":\"redis\",\"children\":[\"$\",\"a\",null,{\"href\":\"#redis\",\"children\":\"Redis\"}]}]\n1e:[\"$\",\"p\",null,{\"children\":[\"Before using Redis sessions with Laravel, you will need to either install the PhpRedis PHP extension via PECL or install the \",[\"$\",\"code\",null,{\"children\":\"predis/predis\"}],\" package (~1.0) via Composer. For more information on configuring Redis, consult Laravel's \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/redis#configuration\",\"children\":\"Redis documentation\"}],\".\"]}]\n1f:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\nThe \",[\"$\",\"code\",null,{\"children\":\"SESSION_CONNECTION\"}],\" environment variable, or the \",[\"$\",\"code\",null,{\"children\":\"connection\"}],\" option in the \",[\"$\",\"code\",null,{\"children\":\"session.php\"}],\" configuration file, may be used to specify which Redis connection is used for session storage.\"]}],\"\\n\"]}]\n20:[\"$\",\"a\",null,{\"name\":\"interacting-with-the-session\"}]\n21:[\"$\",\"h2\",null,{\"id\":\"interacting-with-the-session\",\"children\":[\"$\",\"a\",null,{\"href\":\"#interacting-with-the-session\",\"children\":\"Interacting With the Session\"}]}]\n22:[\"$\",\"a\",null,{\"name\":\"retrieving-data\"}]\n23:[\"$\",\"h3\",null,{\"id\":\"retrieving-data\",\"children\":[\"$\",\"a\",null,{\"href\":\"#retrieving-data\",\"children\":\"Retrieving Data\"}]}]\n24:[\"$\",\"p\",null,{\"children\":[\"There are two primary ways of working with session data in Laravel: the global \",[\"$\",\"code\",null,{\"children\":\"session\"}],\" helper and via a \",[\"$\",\"code\",null,{\"children\":\"Request\"}],\" instance. First, let's look at accessing the session via a \",[\"$\",\"code\",null,{\"children\":\"Request\"}],\" instance, which can be type-hinted on a route closure or controller method. Remember, controller method dependencies are automatically injected via the Laravel \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/container\",\"children\":\"service container\"}],\":\"]}]\n25:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Http\\\\Controllers;\\n\\nuse Illuminate\\\\Http\\\\Request;\\nuse Illuminate\\\\View\\\\View;\\n\\nclass UserController extends Controller\\n{\\n    /**\\n     * Show the profile for the given user.\\n     */\\n    public function show(Request $request, string $id): View\\n    {\\n        $value = $request-\u003esession()-\u003eget('key');\\n\\n        // ...\\n\\n        $user = $this-\u003eusers-\u003efind($id);\\n\\n        return view('user.profile', ['user' =\u003e $user]);\\n    }\\n}\\n\"}]}]\n26:[\"$\",\"p\",null,{\"children\":[\"When you retrieve an item from the session, you may also pass a default "])</script><script>self.__next_f.push([1,"value as the second argument to the \",[\"$\",\"code\",null,{\"children\":\"get\"}],\" method. This default value will be returned if the specified key does not exist in the session. If you pass a closure as the default value to the \",[\"$\",\"code\",null,{\"children\":\"get\"}],\" method and the requested key does not exist, the closure will be executed and its result returned:\"]}]\n27:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$value = $request-\u003esession()-\u003eget('key', 'default');\\n\\n$value = $request-\u003esession()-\u003eget('key', function () {\\n    return 'default';\\n});\\n\"}]}]\n28:[\"$\",\"a\",null,{\"name\":\"the-global-session-helper\"}]\n29:[\"$\",\"h4\",null,{\"id\":\"the-global-session-helper\",\"children\":[\"$\",\"a\",null,{\"href\":\"#the-global-session-helper\",\"children\":\"The Global Session Helper\"}]}]\n2a:[\"$\",\"p\",null,{\"children\":[\"You may also use the global \",[\"$\",\"code\",null,{\"children\":\"session\"}],\" PHP function to retrieve and store data in the session. When the \",[\"$\",\"code\",null,{\"children\":\"session\"}],\" helper is called with a single, string argument, it will return the value of that session key. When the helper is called with an array of key / value pairs, those values will be stored in the session:\"]}]\n2b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::get('/home', function () {\\n    // Retrieve a piece of data from the session...\\n    $value = session('key');\\n\\n    // Specifying a default value...\\n    $value = session('key', 'default');\\n\\n    // Store a piece of data in the session...\\n    session(['key' =\u003e 'value']);\\n});\\n\"}]}]\n2c:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\nThere is little practical difference between using the session via an HTTP request instance versus using the global \",[\"$\",\"code\",null,{\"children\":\"session\"}],\" helper. Both methods are \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/testing\",\"children\":\"testable\"}],\" via the \",[\"$\",\"code\",null,{\"children\":\"assertSessionHas\"}],\" method which is available in all of your test cases.\"]}],\"\\n\"]}]\n2d:[\"$\",\"a\",null,{\"name\":\"retrieving-all-session-data\"}]\n2e:[\"$\",\"h4\",null,{\"id\":\"retrieving-all-session-data\",\"children\":[\"$\",\"a\",null,{\"href\":\"#retrieving-all-session-data\",\"children\":\"Retrieving All Session Data\"}]}]\n2f:[\"$\",\"p\",null,{\"children\":[\"If you would like to retrieve all the data in the session, you may use the \",[\"$\",\"code\",null,{\"children\":\"all\"}],\" method:\"]}]\n30:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$data = $request-\u003esession()-\u003eall();\\n\"}]}]\n31:[\"$\",\"a\",null,{\"name\":\"retrieving-a-portion-of-the-session-data\"}]\n32:[\"$\",\"h4\",null,{\"id\":\"retrieving-a-portion-of-the-session-data\",\"children\":[\"$\",\"a\",null,{\"href\":\"#retrieving-a-portion-of-the-session-data\",\"children\":\"Retrieving a Portion of the Session Data\"}]}]\n33:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"only\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"except\"}],\" methods may be used to retrieve a subset of the session data:\"]}]\n34:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$data = $request-\u003esession()-\u003eonly(['username', 'email']);\\n\\n$data = $request-\u003esession()-\u003eexcept(['username', 'email']);\\n\"}]}]\n35:[\"$\",\"a\",null,{\"name\":\"determining-if-an-item-exists-in-the-session\"}]\n36:[\"$\",\"h4\",null,{\"id\":\"determining-if-an-item-exists-in-the-session\",\"children\":[\"$\",\"a\",null,{\"href\":\"#determining-if-an-item-exists-in-the-session\",\"children\":\"Determining if an Item Exists in the Session\"}]}]\n37:[\"$\",\"p\",null,{\"children\":[\"To determine if an item is present in the session, you may use the \",[\"$\",\"code\",null,{\"children\":\"has\"}],\" method. The \",[\"$\",\"code\",null,{\"children\":\"has\"}],\" method returns \",[\"$\",\"code\",null,{\"children\":\"true\"}],\" if the item is present and is not \",[\"$\",\"code\",null,{\"children\":\"null\"}],\":\"]}]\n38:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"if ($request-\u003esession()-\u003ehas('users')) {\\n    // ...\\n}\\n\"}]}]\n39:[\"$\",\"p\",null,{\"children\":[\"To determine if a"])</script><script>self.__next_f.push([1,"n item is present in the session, even if its value is \",[\"$\",\"code\",null,{\"children\":\"null\"}],\", you may use the \",[\"$\",\"code\",null,{\"children\":\"exists\"}],\" method:\"]}]\n3a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"if ($request-\u003esession()-\u003eexists('users')) {\\n    // ...\\n}\\n\"}]}]\n3b:[\"$\",\"p\",null,{\"children\":[\"To determine if an item is not present in the session, you may use the \",[\"$\",\"code\",null,{\"children\":\"missing\"}],\" method. The \",[\"$\",\"code\",null,{\"children\":\"missing\"}],\" method returns \",[\"$\",\"code\",null,{\"children\":\"true\"}],\" if the item is not present:\"]}]\n3c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"if ($request-\u003esession()-\u003emissing('users')) {\\n    // ...\\n}\\n\"}]}]\n3d:[\"$\",\"a\",null,{\"name\":\"storing-data\"}]\n3e:[\"$\",\"h3\",null,{\"id\":\"storing-data\",\"children\":[\"$\",\"a\",null,{\"href\":\"#storing-data\",\"children\":\"Storing Data\"}]}]\n3f:[\"$\",\"p\",null,{\"children\":[\"To store data in the session, you will typically use the request instance's \",[\"$\",\"code\",null,{\"children\":\"put\"}],\" method or the global \",[\"$\",\"code\",null,{\"children\":\"session\"}],\" helper:\"]}]\n40:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"// Via a request instance...\\n$request-\u003esession()-\u003eput('key', 'value');\\n\\n// Via the global \\\"session\\\" helper...\\nsession(['key' =\u003e 'value']);\\n\"}]}]\n41:[\"$\",\"a\",null,{\"name\":\"pushing-to-array-session-values\"}]\n42:[\"$\",\"h4\",null,{\"id\":\"pushing-to-array-session-values\",\"children\":[\"$\",\"a\",null,{\"href\":\"#pushing-to-array-session-values\",\"children\":\"Pushing to Array Session Values\"}]}]\n43:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"push\"}],\" method may be used to push a new value onto a session value that is an array. For example, if the \",[\"$\",\"code\",null,{\"children\":\"user.teams\"}],\" key contains an array of team names, you may push a new value onto the array like so:\"]}]\n44:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$request-\u003esession()-\u003epush('user.teams', 'developers');\\n\"}]}]\n45:[\"$\",\"a\",null,{\"name\":\"retrieving-deleting-an-item\"}]\n46:[\"$\",\"h4\",null,{\"id\":\"retrieving-and-deleting-an-item\",\"children\":[\"$\",\"a\",null,{\"href\":\"#retrieving-and-deleting-an-item\",\"children\":\"Retrieving and Deleting an Item\"}]}]\n47:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"pull\"}],\" method will retrieve and delete an item from the session in a single statement:\"]}]\n48:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$value = $request-\u003esession()-\u003epull('key', 'default');\\n\"}]}]\n49:[\"$\",\"a\",null,{\"name\":\"incrementing-and-decrementing-session-values\"}]\n4a:[\"$\",\"h4\",null,{\"id\":\"incrementing-and-decrementing-session-values\",\"children\":[\"$\",\"a\",null,{\"href\":\"#incrementing-and-decrementing-session-values\",\"children\":\"Incrementing and Decrementing Session Values\"}]}]\n4b:[\"$\",\"p\",null,{\"children\":[\"If your session data contains an integer you wish to increment or decrement, you may use the \",[\"$\",\"code\",null,{\"children\":\"increment\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"decrement\"}],\" methods:\"]}]\n4c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$request-\u003esession()-\u003eincrement('count');\\n\\n$request-\u003esession()-\u003eincrement('count', $incrementBy = 2);\\n\\n$request-\u003esession()-\u003edecrement('count');\\n\\n$request-\u003esession()-\u003edecrement('count', $decrementBy = 2);\\n\"}]}]\n4d:[\"$\",\"a\",null,{\"name\":\"flash-data\"}]\n4e:[\"$\",\"h3\",null,{\"id\":\"flash-data\",\"children\":[\"$\",\"a\",null,{\"href\":\"#flash-data\",\"children\":\"Flash Data\"}]}]\n4f:[\"$\",\"p\",null,{\"children\":[\"Sometimes you may wish to store items in the session for the next request. You may do so using the \",[\"$\",\"code\",null,{\"children\":\"flash\"}],\" method. Data stored in the session using this method will be available immediately and during the subsequent HTTP request. After the subsequent HTTP request, the flashed data will be deleted. Flash data is primarily useful for short-lived status messages:\"]}]\n50:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\""])</script><script>self.__next_f.push([1,",null,{\"className\":\"language-php\",\"children\":\"$$request-\u003esession()-\u003eflash('status', 'Task was successful!');\\n\"}]}]\n51:[\"$\",\"p\",null,{\"children\":[\"If you need to persist your flash data for several requests, you may use the \",[\"$\",\"code\",null,{\"children\":\"reflash\"}],\" method, which will keep all of the flash data for an additional request. If you only need to keep specific flash data, you may use the \",[\"$\",\"code\",null,{\"children\":\"keep\"}],\" method:\"]}]\n52:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$request-\u003esession()-\u003ereflash();\\n\\n$request-\u003esession()-\u003ekeep(['username', 'email']);\\n\"}]}]\n53:[\"$\",\"p\",null,{\"children\":[\"To persist your flash data only for the current request, you may use the \",[\"$\",\"code\",null,{\"children\":\"now\"}],\" method:\"]}]\n54:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$request-\u003esession()-\u003enow('status', 'Task was successful!');\\n\"}]}]\n55:[\"$\",\"a\",null,{\"name\":\"deleting-data\"}]\n56:[\"$\",\"h3\",null,{\"id\":\"deleting-data\",\"children\":[\"$\",\"a\",null,{\"href\":\"#deleting-data\",\"children\":\"Deleting Data\"}]}]\n57:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"forget\"}],\" method will remove a piece of data from the session. If you would like to remove all data from the session, you may use the \",[\"$\",\"code\",null,{\"children\":\"flush\"}],\" method:\"]}]\n58:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"// Forget a single key...\\n$request-\u003esession()-\u003eforget('name');\\n\\n// Forget multiple keys...\\n$request-\u003esession()-\u003eforget(['name', 'status']);\\n\\n$request-\u003esession()-\u003eflush();\\n\"}]}]\n59:[\"$\",\"a\",null,{\"name\":\"regenerating-the-session-id\"}]\n5a:[\"$\",\"h3\",null,{\"id\":\"regenerating-the-session-id\",\"children\":[\"$\",\"a\",null,{\"href\":\"#regenerating-the-session-id\",\"children\":\"Regenerating the Session ID\"}]}]\n5b:[\"$\",\"p\",null,{\"children\":[\"Regenerating the session ID is often done in order to prevent malicious users from exploiting a \",[\"$\",\"a\",null,{\"href\":\"https://owasp.org/www-community/attacks/Session_fixation\",\"children\":\"session fixation\"}],\" attack on your application.\"]}]\n5c:[\"$\",\"p\",null,{\"children\":[\"Laravel automatically regenerates the session ID during authentication if you are using one of the Laravel \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/starter-kits\",\"children\":\"application starter kits\"}],\" or \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/fortify\",\"children\":\"Laravel Fortify\"}],\"; however, if you need to manually regenerate the session ID, you may use the \",[\"$\",\"code\",null,{\"children\":\"regenerate\"}],\" method:\"]}]\n5d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$request-\u003esession()-\u003eregenerate();\\n\"}]}]\n5e:[\"$\",\"p\",null,{\"children\":[\"If you need to regenerate the session ID and remove all data from the session in a single statement, you may use the \",[\"$\",\"code\",null,{\"children\":\"invalidate\"}],\" method:\"]}]\n5f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$request-\u003esession()-\u003einvalidate();\\n\"}]}]\n60:[\"$\",\"a\",null,{\"name\":\"session-cache\"}]\n61:[\"$\",\"h2\",null,{\"id\":\"session-cache\",\"children\":[\"$\",\"a\",null,{\"href\":\"#session-cache\",\"children\":\"Session Cache\"}]}]\n62:[\"$\",\"p\",null,{\"children\":[\"Laravel's session cache provides a convenient way to cache data that is scoped to an individual user session. Unlike the global application cache, session cache data is automatically isolated per session and is cleaned up when the session expires or is destroyed. The session cache supports all the familiar \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/cache\",\"children\":\"Laravel cache methods\"}],\" like \",[\"$\",\"code\",null,{\"children\":\"get\"}],\", \",[\"$\",\"code\",null,{\"children\":\"put\"}],\", \",[\"$\",\"code\",null,{\"children\":\"remember\"}],\", \",[\"$\",\"code\",null,{\"children\":\"forget\"}],\", and more, but scoped to the current session.\"]}]\n63:[\"$\",\"p\",null,{\"children\":\"The session cache is perfect for storing temporary, user-specific data that you want to persist across multiple requests within the same session, but don't need to sto"])</script><script>self.__next_f.push([1,"re permanently. This includes things like form data, temporary calculations, API responses, or any other ephemeral data that should be tied to a specific user's session.\"}]\n64:[\"$\",\"p\",null,{\"children\":[\"You can access the session cache through the \",[\"$\",\"code\",null,{\"children\":\"cache\"}],\" method on the session:\"]}]\n65:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$discount = $request-\u003esession()-\u003ecache()-\u003eget('discount');\\n\\n$request-\u003esession()-\u003ecache()-\u003eput(\\n    'discount', 10, now()-\u003eaddMinutes(5)\\n);\\n\"}]}]\n66:[\"$\",\"p\",null,{\"children\":[\"For more information on Laravel's cache methods, consult the \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/cache\",\"children\":\"cache documentation\"}],\".\"]}]\n67:[\"$\",\"a\",null,{\"name\":\"session-blocking\"}]\n68:[\"$\",\"h2\",null,{\"id\":\"session-blocking\",\"children\":[\"$\",\"a\",null,{\"href\":\"#session-blocking\",\"children\":\"Session Blocking\"}]}]\n69:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\nTo utilize session blocking, your application must be using a cache driver that supports \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/cache#atomic-locks\",\"children\":\"atomic locks\"}],\". Currently, those cache drivers include the \",[\"$\",\"code\",null,{\"children\":\"memcached\"}],\", \",[\"$\",\"code\",null,{\"children\":\"dynamodb\"}],\", \",[\"$\",\"code\",null,{\"children\":\"redis\"}],\", \",[\"$\",\"code\",null,{\"children\":\"mongodb\"}],\" (included in the official \",[\"$\",\"code\",null,{\"children\":\"mongodb/laravel-mongodb\"}],\" package), \",[\"$\",\"code\",null,{\"children\":\"database\"}],\", \",[\"$\",\"code\",null,{\"children\":\"file\"}],\", and \",[\"$\",\"code\",null,{\"children\":\"array\"}],\" drivers. In addition, you may not use the \",[\"$\",\"code\",null,{\"children\":\"cookie\"}],\" session driver.\"]}],\"\\n\"]}]\n6a:[\"$\",\"p\",null,{\"children\":\"By default, Laravel allows requests using the same session to execute concurrently. So, for example, if you use a JavaScript HTTP library to make two HTTP requests to your application, they will both execute at the same time. For many applications, this is not a problem; however, session data loss can occur in a small subset of applications that make concurrent requests to two different application endpoints which both write data to the session.\"}]\n6b:[\"$\",\"p\",null,{\"children\":[\"To mitigate this, Laravel provides functionality that allows you to limit concurrent requests for a given session. To get started, you may simply chain the \",[\"$\",\"code\",null,{\"children\":\"block\"}],\" method onto your route definition. In this example, an incoming request to the \",[\"$\",\"code\",null,{\"children\":\"/profile\"}],\" endpoint would acquire a session lock. While this lock is being held, any incoming requests to the \",[\"$\",\"code\",null,{\"children\":\"/profile\"}],\" or \",[\"$\",\"code\",null,{\"children\":\"/order\"}],\" endpoints which share the same session ID will wait for the first request to finish executing before continuing their execution:\"]}]\n6c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::post('/profile', function () {\\n    // ...\\n})-\u003eblock($lockSeconds = 10, $waitSeconds = 10);\\n\\nRoute::post('/order', function () {\\n    // ...\\n})-\u003eblock($lockSeconds = 10, $waitSeconds = 10);\\n\"}]}]\n6d:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"block\"}],\" method accepts two optional arguments. The first argument accepted by the \",[\"$\",\"code\",null,{\"children\":\"block\"}],\" method is the maximum number of seconds the session lock should be held for before it is released. Of course, if the request finishes executing before this time the lock will be released earlier.\"]}]\n6e:[\"$\",\"p\",null,{\"children\":[\"The second argument accepted by the \",[\"$\",\"code\",null,{\"children\":\"block\"}],\" method is the number of seconds a request should wait while attempting to obtain a session lock. An \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Contracts\\\\Cache\\\\LockTimeoutException\"}],\" will be thrown if the request is unable to obtain a session lock within the given number of seconds.\"]}]\n6f:[\"$\",\"p\",null,{\"children\":\"If neither of these arguments is passed, the lo"])</script><script>self.__next_f.push([1,"ck will be obtained for a maximum of 10 seconds and requests will wait a maximum of 10 seconds while attempting to obtain a lock:\"}]\n70:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::post('/profile', function () {\\n    // ...\\n})-\u003eblock();\\n\"}]}]\n71:[\"$\",\"a\",null,{\"name\":\"adding-custom-session-drivers\"}]\n72:[\"$\",\"h2\",null,{\"id\":\"adding-custom-session-drivers\",\"children\":[\"$\",\"a\",null,{\"href\":\"#adding-custom-session-drivers\",\"children\":\"Adding Custom Session Drivers\"}]}]\n73:[\"$\",\"a\",null,{\"name\":\"implementing-the-driver\"}]\n74:[\"$\",\"h3\",null,{\"id\":\"implementing-the-driver\",\"children\":[\"$\",\"a\",null,{\"href\":\"#implementing-the-driver\",\"children\":\"Implementing the Driver\"}]}]\n75:[\"$\",\"p\",null,{\"children\":[\"If none of the existing session drivers fit your application's needs, Laravel makes it possible to write your own session handler. Your custom session driver should implement PHP's built-in \",[\"$\",\"code\",null,{\"children\":\"SessionHandlerInterface\"}],\". This interface contains just a few simple methods. A stubbed MongoDB implementation looks like the following:\"]}]\n76:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Extensions;\\n\\nclass MongoSessionHandler implements \\\\SessionHandlerInterface\\n{\\n    public function open($savePath, $sessionName) {}\\n    public function close() {}\\n    public function read($sessionId) {}\\n    public function write($sessionId, $data) {}\\n    public function destroy($sessionId) {}\\n    public function gc($lifetime) {}\\n}\\n\"}]}]\n77:[\"$\",\"p\",null,{\"children\":[\"Since Laravel does not include a default directory to house your extensions. You are free to place them anywhere you like. In this example, we have created an \",[\"$\",\"code\",null,{\"children\":\"Extensions\"}],\" directory to house the \",[\"$\",\"code\",null,{\"children\":\"MongoSessionHandler\"}],\".\"]}]\n78:[\"$\",\"p\",null,{\"children\":\"Since the purpose of these methods is not readily understandable, here is an overview of the purpose of each method:\"}]\n"])</script><script>self.__next_f.push([1,"79:[\"$\",\"div\",null,{\"class\":\"content-list\",\"markdown\":\"1\",\"children\":[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"open\"}],\" method would typically be used in file based session store systems. Since Laravel ships with a \",[\"$\",\"code\",null,{\"children\":\"file\"}],\" session driver, you will rarely need to put anything in this method. You can simply leave this method empty.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"close\"}],\" method, like the \",[\"$\",\"code\",null,{\"children\":\"open\"}],\" method, can also usually be disregarded. For most drivers, it is not needed.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"read\"}],\" method should return the string version of the session data associated with the given \",[\"$\",\"code\",null,{\"children\":\"$$sessionId\"}],\". There is no need to do any serialization or other encoding when retrieving or storing session data in your driver, as Laravel will perform the serialization for you.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"write\"}],\" method should write the given \",[\"$\",\"code\",null,{\"children\":\"$$data\"}],\" string associated with the \",[\"$\",\"code\",null,{\"children\":\"$$sessionId\"}],\" to some persistent storage system, such as MongoDB or another storage system of your choice. Again, you should not perform any serialization - Laravel will have already handled that for you.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"destroy\"}],\" method should remove the data associated with the \",[\"$\",\"code\",null,{\"children\":\"$$sessionId\"}],\" from persistent storage.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"gc\"}],\" method should destroy all session data that is older than the given \",[\"$\",\"code\",null,{\"children\":\"$$lifetime\"}],\", which is a UNIX timestamp. For self-expiring systems like Memcached and Redis, this method may be left empty.\"]}],\"\\n\"]}]}]\n"])</script><script>self.__next_f.push([1,"7a:[\"$\",\"a\",null,{\"name\":\"registering-the-driver\"}]\n7b:[\"$\",\"h3\",null,{\"id\":\"registering-the-driver\",\"children\":[\"$\",\"a\",null,{\"href\":\"#registering-the-driver\",\"children\":\"Registering the Driver\"}]}]\n7c:[\"$\",\"p\",null,{\"children\":[\"Once your driver has been implemented, you are ready to register it with Laravel. To add additional drivers to Laravel's session backend, you may use the \",[\"$\",\"code\",null,{\"children\":\"extend\"}],\" method provided by the \",[\"$\",\"code\",null,{\"children\":\"Session\"}],\" \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/facades\",\"children\":\"facade\"}],\". You should call the \",[\"$\",\"code\",null,{\"children\":\"extend\"}],\" method from the \",[\"$\",\"code\",null,{\"children\":\"boot\"}],\" method of a \",[\"$\",\"a\",null,{\"href\":\"/docs/%7B'12.x'%7D/providers\",\"children\":\"service provider\"}],\". You may do this from the existing \",[\"$\",\"code\",null,{\"children\":\"App\\\\Providers\\\\AppServiceProvider\"}],\" or create an entirely new provider:\"]}]\n7d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Providers;\\n\\nuse App\\\\Extensions\\\\MongoSessionHandler;\\nuse Illuminate\\\\Contracts\\\\Foundation\\\\Application;\\nuse Illuminate\\\\Support\\\\Facades\\\\Session;\\nuse Illuminate\\\\Support\\\\ServiceProvider;\\n\\nclass SessionServiceProvider extends ServiceProvider\\n{\\n    /**\\n     * Register any application services.\\n     */\\n    public function register(): void\\n    {\\n        // ...\\n    }\\n\\n    /**\\n     * Bootstrap any application services.\\n     */\\n    public function boot(): void\\n    {\\n        Session::extend('mongo', function (Application $app) {\\n            // Return an implementation of SessionHandlerInterface...\\n            return new MongoSessionHandler;\\n        });\\n    }\\n}\\n\"}]}]\n7e:[\"$\",\"p\",null,{\"children\":[\"Once the session driver has been registered, you may specify the \",[\"$\",\"code\",null,{\"children\":\"mongo\"}],\" driver as your application's session driver using the \",[\"$\",\"code\",null,{\"children\":\"SESSION_DRIVER\"}],\" environment variable or within the application's \",[\"$\",\"code\",null,{\"children\":\"config/session.php\"}],\" configuration file.\"]}]\n"])</script><script>self.__next_f.push([1,"11:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"7f:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"IconMark\"]\n13:[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$L7f\",\"3\",{}]]\nf:null\n"])</script></body></html>