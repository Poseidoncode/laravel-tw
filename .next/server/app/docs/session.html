<!DOCTYPE html><!--kE5s4wNidqhVn8fA906WC--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/bc6e94e20a39014e.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/cbd55ab9639e1e66.js"/><script src="/_next/static/chunks/87a939617be2fa8c.js" async=""></script><script src="/_next/static/chunks/8368f298651cbd89.js" async=""></script><script src="/_next/static/chunks/6740f161f60c6ab5.js" async=""></script><script src="/_next/static/chunks/turbopack-929fc2ce3ca903db.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/247eb132b7f7b574.js" async=""></script><script src="/_next/static/chunks/796e69ae18b2784c.js" async=""></script><script src="/_next/static/chunks/2b257daea29fbb42.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased"><div hidden=""><!--$--><!--/$--></div><div class="flex min-h-screen bg-background"><div class="w-64 border-r bg-background h-screen sticky top-0 hidden md:block"><div class="p-6 font-bold text-xl border-b flex items-center gap-2"><span class="text-red-600">Laravel</span> Docs（中文）</div><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-65px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="p-4 space-y-2"><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>前言</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">發行說明</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>入門</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/installation"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">安裝</button></a><a class="block" href="/docs/configuration"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">配置</button></a><a class="block" href="/docs/structure"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">目錄結構</button></a><a class="block" href="/docs/lifecycle"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">生命週期</button></a><a class="block" href="/docs/frontend"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">前端</button></a><a class="block" href="/docs/starter-kits"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">啟動套件</button></a><a class="block" href="/docs/deployment"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">部署</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>架構</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>基礎功能</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>深入探討</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>安全性</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>資料庫</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>Eloquent ORM</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>測試</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>其他</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>官方套件</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div class="border-t pt-4 space-y-2"><a class="block" href="/docs/api"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">API 文件</button></a><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">更新日誌</button></a></div></div></div></div></div></div><main class="flex-1 relative"><div class="container mx-auto py-10"><div class="mx-auto max-w-3xl"><div class="mb-8"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Session</h1><p class="text-xl text-muted-foreground mt-2">Laravel 透過統一的 API 支援多種 Session 後端</p></div><article class="prose prose-slate dark:prose-invert max-w-none"><h1 id="http-session"><a href="#http-session">HTTP Session</a></h1>
<ul>
<li><a href="#introduction">簡介</a>
<ul>
<li><a href="#configuration">設定</a></li>
<li><a href="#driver-prerequisites">驅動程式先決條件</a></li>
</ul>
</li>
<li><a href="#interacting-with-the-session">與 Session 互動</a>
<ul>
<li><a href="#retrieving-data">取得資料</a></li>
<li><a href="#storing-data">儲存資料</a></li>
<li><a href="#flash-data">快閃資料</a></li>
<li><a href="#deleting-data">刪除資料</a></li>
<li><a href="#regenerating-the-session-id">重新產生 Session ID</a></li>
</ul>
</li>
<li><a href="#session-cache">Session 快取</a></li>
<li><a href="#session-blocking">Session 阻塞</a></li>
<li><a href="#adding-custom-session-drivers">新增自訂 Session 驅動程式</a>
<ul>
<li><a href="#implementing-the-driver">實作驅動程式</a></li>
<li><a href="#registering-the-driver">註冊驅動程式</a></li>
</ul>
</li>
</ul>
<a name="introduction"></a>
<h2 id="簡介"><a href="#簡介">簡介</a></h2>
<p>由於 HTTP 驅動的應用程式是無狀態的，Session 提供了一種在多個請求之間儲存使用者資訊的方式。該使用者資訊通常會放置在可從後續請求存取的持久性儲存 / 後端中。</p>
<p>Laravel 內建了多種 Session 後端，可透過富有表現力的統一 API 進行存取。支援流行的後端，如 <a href="https://memcached.org">Memcached</a>、<a href="https://redis.io">Redis</a> 和資料庫。</p>
<a name="configuration"></a>
<h3 id="設定"><a href="#設定">設定</a></h3>
<p>您的應用程式的 Session 設定檔儲存在 <code>config/session.php</code>。請務必查看此檔案中可用的選項。預設情況下，Laravel 設定為使用 <code>database</code> Session 驅動程式。</p>
<p>Session <code>driver</code> 設定選項定義了每個請求的 Session 資料將儲存在何處。Laravel 包含多種驅動程式：</p>
<div class="content-list" markdown="1"><ul>
<li><code>file</code> - Session 儲存在 <code>storage/framework/sessions</code>。</li>
<li><code>cookie</code> - Session 儲存在安全、加密的 Cookie 中。</li>
<li><code>database</code> - Session 儲存在關聯式資料庫中。</li>
<li><code>memcached</code> / <code>redis</code> - Session 儲存在這些快速、基於快取的儲存中。</li>
<li><code>dynamodb</code> - Session 儲存在 AWS DynamoDB 中。</li>
<li><code>array</code> - Session 儲存在 PHP 陣列中，不會被持久化。</li>
</ul></div>
<blockquote>
<p>[!NOTE]
array 驅動程式主要在 <a href="/docs/testing">測試</a> 期間使用，可防止儲存在 Session 中的資料被持久化。</p>
</blockquote>
<a name="driver-prerequisites"></a>
<h3 id="驅動程式先決條件"><a href="#驅動程式先決條件">驅動程式先決條件</a></h3>
<a name="database"></a>
<h4 id="資料庫"><a href="#資料庫">資料庫</a></h4>
<p>使用 <code>database</code> Session 驅動程式時，您需要確保有一個資料庫資料表來包含 Session 資料。通常，這包含在 Laravel 的預設 <code>0001_01_01_000000_create_users_table.php</code> <a href="/docs/migrations">資料庫 Migration</a> 中；但是，如果您因為任何原因沒有 <code>sessions</code> 資料表，您可以使用 <code>make:session-table</code> Artisan 指令來產生此 Migration：</p>
<pre><code class="language-shell">php artisan make:session-table

php artisan migrate
</code></pre>
<a name="redis"></a>
<h4 id="redis"><a href="#redis">Redis</a></h4>
<p>在 Laravel 中使用 Redis Session 之前，您需要透過 PECL 安裝 PhpRedis PHP 擴充功能，或透過 Composer 安裝 <code>predis/predis</code> 套件 (~1.0)。有關設定 Redis 的更多資訊，請參閱 Laravel 的 <a href="/docs/redis#configuration">Redis 文件</a>。</p>
<blockquote>
<p>[!NOTE]
<code>SESSION_CONNECTION</code> 環境變數或 <code>session.php</code> 設定檔中的 <code>connection</code> 選項可用於指定哪個 Redis 連線用於 Session 儲存。</p>
</blockquote>
<a name="interacting-with-the-session"></a>
<h2 id="與-session-互動"><a href="#與-session-互動">與 Session 互動</a></h2>
<a name="retrieving-data"></a>
<h3 id="取得資料"><a href="#取得資料">取得資料</a></h3>
<p>在 Laravel 中有兩種主要的方式來處理 Session 資料：全域 <code>session</code> 輔助函式和透過 <code>Request</code> 實例。首先，讓我們看看透過 <code>Request</code> 實例存取 Session，它可以在路由 Closure 或 Controller 方法上進行型別提示。請記住，Controller 方法的依賴項會透過 Laravel <a href="/docs/container">Service Container</a> 自動注入：</p>
<pre><code class="language-php">&lt;?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use Illuminate\View\View;

class UserController extends Controller
{
    /**
     * Show the profile for the given user.
     */
    public function show(Request $request, string $id): View
    {
        $value = $request-&gt;session()-&gt;get(&#x27;key&#x27;);

        // ...

        $user = $this-&gt;users-&gt;find($id);

        return view(&#x27;user.profile&#x27;, [&#x27;user&#x27; =&gt; $user]);
    }
}
</code></pre>
<p>當您從 Session 取得項目時，您也可以將預設值作為第二個參數傳遞給 <code>get</code> 方法。如果指定的鍵在 Session 中不存在，將返回此預設值。如果您將 Closure 作為預設值傳遞給 <code>get</code> 方法，且請求的鍵不存在，則會執行該 Closure 並返回其結果：</p>
<pre><code class="language-php">$value = $request-&gt;session()-&gt;get(&#x27;key&#x27;, &#x27;default&#x27;);

$value = $request-&gt;session()-&gt;get(&#x27;key&#x27;, function () {
    return &#x27;default&#x27;;
});
</code></pre>
<a name="the-global-session-helper"></a>
<h4 id="全域-session-輔助函式"><a href="#全域-session-輔助函式">全域 Session 輔助函式</a></h4>
<p>您也可以使用全域 <code>session</code> PHP 函式來取得和儲存 Session 中的資料。當使用單一字串參數呼叫 <code>session</code> 輔助函式時，它將返回該 Session 鍵的值。當使用鍵 / 值對陣列呼叫輔助函式時，這些值將儲存在 Session 中：</p>
<pre><code class="language-php">Route::get(&#x27;/home&#x27;, function () {
    // Retrieve a piece of data from the session...
    $value = session(&#x27;key&#x27;);

    // Specifying a default value...
    $value = session(&#x27;key&#x27;, &#x27;default&#x27;);

    // Store a piece of data in the session...
    session([&#x27;key&#x27; =&gt; &#x27;value&#x27;]);
});
</code></pre>
<blockquote>
<p>[!NOTE]
透過 HTTP 請求實例使用 Session 與使用全域 <code>session</code> 輔助函式之間幾乎沒有實際差異。這兩種方法都可以透過所有測試案例中都可用的 <code>assertSessionHas</code> 方法進行 <a href="/docs/testing">測試</a>。</p>
</blockquote>
<a name="retrieving-all-session-data"></a>
<h4 id="取得所有-session-資料"><a href="#取得所有-session-資料">取得所有 Session 資料</a></h4>
<p>如果您想取得 Session 中的所有資料，您可以使用 <code>all</code> 方法：</p>
<pre><code class="language-php">$data = $request-&gt;session()-&gt;all();
</code></pre>
<a name="retrieving-a-portion-of-the-session-data"></a>
<h4 id="取得部分-session-資料"><a href="#取得部分-session-資料">取得部分 Session 資料</a></h4>
<p><code>only</code> 和 <code>except</code> 方法可用於取得 Session 資料的子集：</p>
<pre><code class="language-php">$data = $request-&gt;session()-&gt;only([&#x27;username&#x27;, &#x27;email&#x27;]);

$data = $request-&gt;session()-&gt;except([&#x27;username&#x27;, &#x27;email&#x27;]);
</code></pre>
<a name="determining-if-an-item-exists-in-the-session"></a>
<h4 id="判斷項目是否存在於-session-中"><a href="#判斷項目是否存在於-session-中">判斷項目是否存在於 Session 中</a></h4>
<p>要判斷項目是否存在於 Session 中，您可以使用 <code>has</code> 方法。如果項目存在且不為 <code>null</code>，<code>has</code> 方法返回 <code>true</code>：</p>
<pre><code class="language-php">if ($request-&gt;session()-&gt;has(&#x27;users&#x27;)) {
    // ...
}
</code></pre>
<p>要判斷項目是否存在於 Session 中，即使其值為 <code>null</code>，您可以使用 <code>exists</code> 方法：</p>
<pre><code class="language-php">if ($request-&gt;session()-&gt;exists(&#x27;users&#x27;)) {
    // ...
}
</code></pre>
<p>要判斷項目是否不存在於 Session 中，您可以使用 <code>missing</code> 方法。如果項目不存在，<code>missing</code> 方法返回 <code>true</code>：</p>
<pre><code class="language-php">if ($request-&gt;session()-&gt;missing(&#x27;users&#x27;)) {
    // ...
}
</code></pre>
<a name="storing-data"></a>
<h3 id="儲存資料"><a href="#儲存資料">儲存資料</a></h3>
<p>要在 Session 中儲存資料，您通常會使用請求實例的 <code>put</code> 方法或全域 <code>session</code> 輔助函式：</p>
<pre><code class="language-php">// Via a request instance...
$request-&gt;session()-&gt;put(&#x27;key&#x27;, &#x27;value&#x27;);

// Via the global &quot;session&quot; helper...
session([&#x27;key&#x27; =&gt; &#x27;value&#x27;]);
</code></pre>
<a name="pushing-to-array-session-values"></a>
<h4 id="推送到陣列-session-值"><a href="#推送到陣列-session-值">推送到陣列 Session 值</a></h4>
<p><code>push</code> 方法可用於將新值推送到作為陣列的 Session 值。例如，如果 <code>user.teams</code> 鍵包含團隊名稱的陣列，您可以像這樣將新值推送到陣列中：</p>
<pre><code class="language-php">$request-&gt;session()-&gt;push(&#x27;user.teams&#x27;, &#x27;developers&#x27;);
</code></pre>
<a name="retrieving-deleting-an-item"></a>
<h4 id="取得並刪除項目"><a href="#取得並刪除項目">取得並刪除項目</a></h4>
<p><code>pull</code> 方法將在單一語句中從 Session 取得並刪除項目：</p>
<pre><code class="language-php">$value = $request-&gt;session()-&gt;pull(&#x27;key&#x27;, &#x27;default&#x27;);
</code></pre>
<a name="incrementing-and-decrementing-session-values"></a>
<h4 id="遞增和遞減-session-值"><a href="#遞增和遞減-session-值">遞增和遞減 Session 值</a></h4>
<p>如果您的 Session 資料包含您希望遞增或遞減的整數，您可以使用 <code>increment</code> 和 <code>decrement</code> 方法：</p>
<pre><code class="language-php">$request-&gt;session()-&gt;increment(&#x27;count&#x27;);

$request-&gt;session()-&gt;increment(&#x27;count&#x27;, $incrementBy = 2);

$request-&gt;session()-&gt;decrement(&#x27;count&#x27;);

$request-&gt;session()-&gt;decrement(&#x27;count&#x27;, $decrementBy = 2);
</code></pre>
<a name="flash-data"></a>
<h3 id="快閃資料"><a href="#快閃資料">快閃資料</a></h3>
<p>有時您可能希望在 Session 中為下一個請求儲存項目。您可以使用 <code>flash</code> 方法來實現。使用此方法儲存在 Session 中的資料將立即可用，並在後續的 HTTP 請求期間可用。在後續的 HTTP 請求之後，快閃資料將被刪除。快閃資料主要用於短期的狀態訊息：</p>
<pre><code class="language-php">$request-&gt;session()-&gt;flash(&#x27;status&#x27;, &#x27;Task was successful!&#x27;);
</code></pre>
<p>如果您需要為多個請求保留快閃資料，您可以使用 <code>reflash</code> 方法，這將為額外的請求保留所有快閃資料。如果您只需要保留特定的快閃資料，您可以使用 <code>keep</code> 方法：</p>
<pre><code class="language-php">$request-&gt;session()-&gt;reflash();

$request-&gt;session()-&gt;keep([&#x27;username&#x27;, &#x27;email&#x27;]);
</code></pre>
<p>要僅為當前請求保留您的快閃資料，您可以使用 <code>now</code> 方法：</p>
<pre><code class="language-php">$request-&gt;session()-&gt;now(&#x27;status&#x27;, &#x27;Task was successful!&#x27;);
</code></pre>
<a name="deleting-data"></a>
<h3 id="刪除資料"><a href="#刪除資料">刪除資料</a></h3>
<p><code>forget</code> 方法將從 Session 中移除一段資料。如果您想從 Session 中移除所有資料，您可以使用 <code>flush</code> 方法：</p>
<pre><code class="language-php">// Forget a single key...
$request-&gt;session()-&gt;forget(&#x27;name&#x27;);

// Forget multiple keys...
$request-&gt;session()-&gt;forget([&#x27;name&#x27;, &#x27;status&#x27;]);

$request-&gt;session()-&gt;flush();
</code></pre>
<a name="regenerating-the-session-id"></a>
<h3 id="重新產生-session-id"><a href="#重新產生-session-id">重新產生 Session ID</a></h3>
<p>重新產生 Session ID 通常是為了防止惡意使用者利用 <a href="https://owasp.org/www-community/attacks/Session_fixation">Session 固定</a> 攻擊您的應用程式。</p>
<p>如果您使用 Laravel <a href="/docs/starter-kits">應用程式 Starter Kits</a> 或 <a href="/docs/fortify">Laravel Fortify</a>，Laravel 會在驗證期間自動重新產生 Session ID；但是，如果您需要手動重新產生 Session ID，您可以使用 <code>regenerate</code> 方法：</p>
<pre><code class="language-php">$request-&gt;session()-&gt;regenerate();
</code></pre>
<p>如果您需要在單一語句中重新產生 Session ID 並從 Session 中移除所有資料，您可以使用 <code>invalidate</code> 方法：</p>
<pre><code class="language-php">$request-&gt;session()-&gt;invalidate();
</code></pre>
<a name="session-cache"></a>
<h2 id="session-快取"><a href="#session-快取">Session 快取</a></h2>
<p>Laravel 的 Session 快取提供了一種方便的方式來快取限定於個別使用者 Session 的資料。與全域應用程式快取不同，Session 快取資料會自動按 Session 隔離，並在 Session 過期或銷毀時清理。Session 快取支援所有熟悉的 <a href="/docs/cache">Laravel 快取方法</a>，如 <code>get</code>、<code>put</code>、<code>remember</code>、<code>forget</code> 等，但範圍限定於當前 Session。</p>
<p>Session 快取非常適合儲存您希望在同一 Session 內的多個請求之間持久保存，但不需要永久儲存的臨時、使用者特定資料。這包括表單資料、臨時計算、API 回應或任何其他應該與特定使用者 Session 綁定的短暫資料。</p>
<p>您可以透過 Session 上的 <code>cache</code> 方法存取 Session 快取：</p>
<pre><code class="language-php">$discount = $request-&gt;session()-&gt;cache()-&gt;get(&#x27;discount&#x27;);

$request-&gt;session()-&gt;cache()-&gt;put(
    &#x27;discount&#x27;, 10, now()-&gt;addMinutes(5)
);
</code></pre>
<p>有關 Laravel 快取方法的更多資訊，請參閱 <a href="/docs/cache">快取文件</a>。</p>
<a name="session-blocking"></a>
<h2 id="session-阻塞"><a href="#session-阻塞">Session 阻塞</a></h2>
<blockquote>
<p>[!WARNING]
要使用 Session 阻塞，您的應用程式必須使用支援 <a href="/docs/cache#atomic-locks">原子鎖</a> 的快取驅動程式。目前，這些快取驅動程式包括 <code>memcached</code>、<code>dynamodb</code>、<code>redis</code>、<code>mongodb</code>（包含在官方 <code>mongodb/laravel-mongodb</code> 套件中）、<code>database</code>、<code>file</code> 和 <code>array</code> 驅動程式。此外，您不能使用 <code>cookie</code> Session 驅動程式。</p>
</blockquote>
<p>預設情況下，Laravel 允許使用相同 Session 的請求同時執行。因此，例如，如果您使用 JavaScript HTTP 函式庫向應用程式發出兩個 HTTP 請求，它們將同時執行。對於許多應用程式來說，這不是問題；但是，在少數向兩個不同的應用程式端點發出並發請求且都寫入 Session 資料的應用程式中，可能會發生 Session 資料遺失。</p>
<p>為了緩解這種情況，Laravel 提供了允許您限制給定 Session 的並發請求的功能。首先，您只需將 <code>block</code> 方法鏈接到路由定義上。在此範例中，對 <code>/profile</code> 端點的傳入請求將獲取 Session 鎖。當此鎖被持有時，任何對共用相同 Session ID 的 <code>/profile</code> 或 <code>/order</code> 端點的傳入請求將等待第一個請求完成執行後再繼續執行：</p>
<pre><code class="language-php">Route::post(&#x27;/profile&#x27;, function () {
    // ...
})-&gt;block($lockSeconds = 10, $waitSeconds = 10);

Route::post(&#x27;/order&#x27;, function () {
    // ...
})-&gt;block($lockSeconds = 10, $waitSeconds = 10);
</code></pre>
<p><code>block</code> 方法接受兩個可選參數。<code>block</code> 方法接受的第一個參數是 Session 鎖應該持有的最大秒數，然後才會被釋放。當然，如果請求在此時間之前完成執行，鎖將會更早釋放。</p>
<p><code>block</code> 方法接受的第二個參數是請求在嘗試獲取 Session 鎖時應該等待的秒數。如果請求無法在給定的秒數內獲取 Session 鎖，將拋出 <code>Illuminate\Contracts\Cache\LockTimeoutException</code>。</p>
<p>如果這兩個參數都沒有傳遞，鎖將被獲取最多 10 秒，請求將在嘗試獲取鎖時最多等待 10 秒：</p>
<pre><code class="language-php">Route::post(&#x27;/profile&#x27;, function () {
    // ...
})-&gt;block();
</code></pre>
<a name="adding-custom-session-drivers"></a>
<h2 id="新增自訂-session-驅動程式"><a href="#新增自訂-session-驅動程式">新增自訂 Session 驅動程式</a></h2>
<a name="implementing-the-driver"></a>
<h3 id="實作驅動程式"><a href="#實作驅動程式">實作驅動程式</a></h3>
<p>如果現有的 Session 驅動程式都不符合您的應用程式需求，Laravel 使您可以編寫自己的 Session 處理程式。您的自訂 Session 驅動程式應實作 PHP 內建的 <code>SessionHandlerInterface</code>。此介面僅包含幾個簡單的方法。一個存根的 MongoDB 實作看起來像這樣：</p>
<pre><code class="language-php">&lt;?php

namespace App\Extensions;

class MongoSessionHandler implements \SessionHandlerInterface
{
    public function open($savePath, $sessionName) {}
    public function close() {}
    public function read($sessionId) {}
    public function write($sessionId, $data) {}
    public function destroy($sessionId) {}
    public function gc($lifetime) {}
}
</code></pre>
<p>由於 Laravel 不包含用於容納擴充功能的預設目錄，您可以自由地將它們放置在任何您喜歡的地方。在此範例中，我們建立了一個 <code>Extensions</code> 目錄來容納 <code>MongoSessionHandler</code>。</p>
<p>由於這些方法的目的不容易理解，以下是每個方法目的的概述：</p>
<div class="content-list" markdown="1"><ul>
<li><code>open</code> 方法通常用於基於檔案的 Session 儲存系統。由於 Laravel 附帶了 <code>file</code> Session 驅動程式，您很少需要在此方法中放置任何內容。您可以簡單地將此方法留空。</li>
<li><code>close</code> 方法，與 <code>open</code> 方法一樣，通常也可以忽略。對於大多數驅動程式，它不是必需的。</li>
<li><code>read</code> 方法應返回與給定 <code>$sessionId</code> 關聯的 Session 資料的字串版本。在驅動程式中取得或儲存 Session 資料時，無需進行任何序列化或其他編碼，因為 Laravel 將為您執行序列化。</li>
<li><code>write</code> 方法應將與 <code>$sessionId</code> 關聯的給定 <code>$data</code> 字串寫入某些持久性儲存系統，例如 MongoDB 或您選擇的其他儲存系統。同樣，您不應執行任何序列化 - Laravel 將已經為您處理了。</li>
<li><code>destroy</code> 方法應從持久性儲存中移除與 <code>$sessionId</code> 關聯的資料。</li>
<li><code>gc</code> 方法應銷毀所有比給定 <code>$lifetime</code>（這是一個 UNIX 時間戳記）舊的 Session 資料。對於像 Memcached 和 Redis 這樣的自行過期系統，此方法可以留空。</li>
</ul></div>
<a name="registering-the-driver"></a>
<h3 id="註冊驅動程式"><a href="#註冊驅動程式">註冊驅動程式</a></h3>
<p>一旦您的驅動程式實作完成，您就可以將其註冊到 Laravel。要向 Laravel 的 Session 後端新增額外的驅動程式，您可以使用 <code>Session</code> <a href="/docs/facades">Facade</a> 提供的 <code>extend</code> 方法。您應該從 <a href="/docs/providers">Service Provider</a> 的 <code>boot</code> 方法呼叫 <code>extend</code> 方法。您可以從現有的 <code>App\Providers\AppServiceProvider</code> 執行此操作，或建立一個全新的 Provider：</p>
<pre><code class="language-php">&lt;?php

namespace App\Providers;

use App\Extensions\MongoSessionHandler;
use Illuminate\Contracts\Foundation\Application;
use Illuminate\Support\Facades\Session;
use Illuminate\Support\ServiceProvider;

class SessionServiceProvider extends ServiceProvider
{
    /**
     * Register any application services.
     */
    public function register(): void
    {
        // ...
    }

    /**
     * Bootstrap any application services.
     */
    public function boot(): void
    {
        Session::extend(&#x27;mongo&#x27;, function (Application $app) {
            // Return an implementation of SessionHandlerInterface...
            return new MongoSessionHandler;
        });
    }
}
</code></pre>
<p>一旦 Session 驅動程式註冊完成，您可以使用 <code>SESSION_DRIVER</code> 環境變數或在應用程式的 <code>config/session.php</code> 設定檔中將 <code>mongo</code> 驅動程式指定為應用程式的 Session 驅動程式。</p></article></div></div><!--$--><!--/$--></main></div><script src="/_next/static/chunks/cbd55ab9639e1e66.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n4:I[93649,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/2b257daea29fbb42.js\"],\"DocsSidebar\"]\n6:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"ViewportBoundary\"]\nb:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"MetadataBoundary\"]\nd:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/bc6e94e20a39014e.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"kE5s4wNidqhVn8fA906WC\",\"c\":[\"\",\"docs\",\"session\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"session\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/bc6e94e20a39014e.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/796e69ae18b2784c.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/2b257daea29fbb42.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"div\",null,{\"className\":\"flex min-h-screen bg-background\",\"children\":[[\"$\",\"$L4\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 relative\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"className\":\"container mx-auto py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-3xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl\",\"children\":\"Session\"}],[\"$\",\"p\",null,{\"className\":\"text-xl text-muted-foreground mt-2\",\"children\":\"Laravel 透過統一的 API 支援多種 Session 後端\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"http-session\",\"children\":[\"$\",\"a\",null,{\"href\":\"#http-session\",\"children\":\"HTTP Session\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#introduction\",\"children\":\"簡介\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#configuration\",\"children\":\"設定\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#driver-prerequisites\",\"children\":\"驅動程式先決條件\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#interacting-with-the-session\",\"children\":\"與 Session 互動\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#retrieving-data\",\"children\":\"取得資料\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#storing-data\",\"children\":\"儲存資料\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#flash-data\",\"children\":\"快閃資料\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#deleting-data\",\"children\":\"刪除資料\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#regenerating-the-session-id\",\"children\":\"重新產生 Session ID\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#session-cache\",\"children\":\"Session 快取\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#session-blocking\",\"children\":\"Session 阻塞\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#adding-custom-session-drivers\",\"children\":\"新增自訂 Session 驅動程式\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#implementing-the-driver\",\"children\":\"實作驅動程式\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#registering-the-driver\",\"children\":\"註冊驅動程式\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"introduction\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"簡介\",\"children\":[\"$\",\"a\",null,{\"href\":\"#簡介\",\"children\":\"簡介\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"由於 HTTP 驅動的應用程式是無狀態的，Session 提供了一種在多個請求之間儲存使用者資訊的方式。該使用者資訊通常會放置在可從後續請求存取的持久性儲存 / 後端中。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Laravel 內建了多種 Session 後端，可透過富有表現力的統一 API 進行存取。支援流行的後端，如 \",[\"$\",\"a\",null,{\"href\":\"https://memcached.org\",\"children\":\"Memcached\"}],\"、\",[\"$\",\"a\",null,{\"href\":\"https://redis.io\",\"children\":\"Redis\"}],\" 和資料庫。\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"configuration\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"設定\",\"children\":[\"$\",\"a\",null,{\"href\":\"#設定\",\"children\":\"設定\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"您的應用程式的 Session 設定檔儲存在 \",[\"$\",\"code\",null,{\"children\":\"config/session.php\"}],\"。請務必查看此檔案中可用的選項。預設情況下，Laravel 設定為使用 \",[\"$\",\"code\",null,{\"children\":\"database\"}],\" Session 驅動程式。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Session \",[\"$\",\"code\",null,{\"children\":\"driver\"}],\" 設定選項定義了每個請求的 Session 資料將儲存在何處。Laravel 包含多種驅動程式：\"]}],\"\\n\",[\"$\",\"div\",null,{\"className\":\"content-list\",\"markdown\":\"1\",\"children\":[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"file\"}],\" - Session 儲存在 \",[\"$\",\"code\",null,{\"children\":\"storage/framework/sessions\"}],\"。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"cookie\"}],\" - Session 儲存在安全、加密的 Cookie 中。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"database\"}],\" - Session 儲存在關聯式資料庫中。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"memcached\"}],\" / \",[\"$\",\"code\",null,{\"children\":\"redis\"}],\" - Session 儲存在這些快速、基於快取的儲存中。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"dynamodb\"}],\" - Session 儲存在 AWS DynamoDB 中。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"array\"}],\" - Session 儲存在 PHP 陣列中，不會被持久化。\"]}],\"\\n\"]}]}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\narray 驅動程式主要在 \",[\"$\",\"a\",null,{\"href\":\"/docs/testing\",\"children\":\"測試\"}],\" 期間使用，可防止儲存在 Session 中的資料被持久化。\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"driver-prerequisites\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"驅動程式先決條件\",\"children\":[\"$\",\"a\",null,{\"href\":\"#驅動程式先決條件\",\"children\":\"驅動程式先決條件\"}]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"database\"}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"資料庫\",\"children\":[\"$\",\"a\",null,{\"href\":\"#資料庫\",\"children\":\"資料庫\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"使用 \",[\"$\",\"code\",null,{\"children\":\"database\"}],\" Session 驅動程式時，您需要確保有一個資料庫資料表來包含 Session 資料。通常，這包含在 Laravel 的預設 \",[\"$\",\"code\",null,{\"children\":\"0001_01_01_000000_create_users_table.php\"}],\" \",[\"$\",\"a\",null,{\"href\":\"/docs/migrations\",\"children\":\"資料庫 Migration\"}],\" 中；但是，如果您因為任何原因沒有 \",[\"$\",\"code\",null,{\"children\":\"sessions\"}],\" 資料表，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"make:session-table\"}],\" Artisan 指令來產生此 Migration：\"]}],\"\\n\",\"$Le\",\"\\n\",\"$Lf\",\"\\n\",\"$L10\",\"\\n\",\"$L11\",\"\\n\",\"$L12\",\"\\n\",\"$L13\",\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\",\"\\n\",\"$L55\",\"\\n\",\"$L56\",\"\\n\",\"$L57\",\"\\n\",\"$L58\",\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\",\"\\n\",\"$L5c\",\"\\n\",\"$L5d\",\"\\n\",\"$L5e\",\"\\n\",\"$L5f\",\"\\n\",\"$L60\",\"\\n\",\"$L61\",\"\\n\",\"$L62\",\"\\n\",\"$L63\",\"\\n\",\"$L64\",\"\\n\",\"$L65\",\"\\n\",\"$L66\",\"\\n\",\"$L67\",\"\\n\",\"$L68\",\"\\n\",\"$L69\",\"\\n\",\"$L6a\",\"\\n\",\"$L6b\",\"\\n\",\"$L6c\",\"\\n\",\"$L6d\",\"\\n\",\"$L6e\",\"\\n\",\"$L6f\",\"\\n\",\"$L70\",\"\\n\",\"$L71\"]}]]}]}]\n"])</script><script>self.__next_f.push([1,"e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan make:session-table\\n\\nphp artisan migrate\\n\"}]}]\nf:[\"$\",\"a\",null,{\"name\":\"redis\"}]\n10:[\"$\",\"h4\",null,{\"id\":\"redis\",\"children\":[\"$\",\"a\",null,{\"href\":\"#redis\",\"children\":\"Redis\"}]}]\n11:[\"$\",\"p\",null,{\"children\":[\"在 Laravel 中使用 Redis Session 之前，您需要透過 PECL 安裝 PhpRedis PHP 擴充功能，或透過 Composer 安裝 \",[\"$\",\"code\",null,{\"children\":\"predis/predis\"}],\" 套件 (~1.0)。有關設定 Redis 的更多資訊，請參閱 Laravel 的 \",[\"$\",\"a\",null,{\"href\":\"/docs/redis#configuration\",\"children\":\"Redis 文件\"}],\"。\"]}]\n12:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\n\",[\"$\",\"code\",null,{\"children\":\"SESSION_CONNECTION\"}],\" 環境變數或 \",[\"$\",\"code\",null,{\"children\":\"session.php\"}],\" 設定檔中的 \",[\"$\",\"code\",null,{\"children\":\"connection\"}],\" 選項可用於指定哪個 Redis 連線用於 Session 儲存。\"]}],\"\\n\"]}]\n13:[\"$\",\"a\",null,{\"name\":\"interacting-with-the-session\"}]\n14:[\"$\",\"h2\",null,{\"id\":\"與-session-互動\",\"children\":[\"$\",\"a\",null,{\"href\":\"#與-session-互動\",\"children\":\"與 Session 互動\"}]}]\n15:[\"$\",\"a\",null,{\"name\":\"retrieving-data\"}]\n16:[\"$\",\"h3\",null,{\"id\":\"取得資料\",\"children\":[\"$\",\"a\",null,{\"href\":\"#取得資料\",\"children\":\"取得資料\"}]}]\n17:[\"$\",\"p\",null,{\"children\":[\"在 Laravel 中有兩種主要的方式來處理 Session 資料：全域 \",[\"$\",\"code\",null,{\"children\":\"session\"}],\" 輔助函式和透過 \",[\"$\",\"code\",null,{\"children\":\"Request\"}],\" 實例。首先，讓我們看看透過 \",[\"$\",\"code\",null,{\"children\":\"Request\"}],\" 實例存取 Session，它可以在路由 Closure 或 Controller 方法上進行型別提示。請記住，Controller 方法的依賴項會透過 Laravel \",[\"$\",\"a\",null,{\"href\":\"/docs/container\",\"children\":\"Service Container\"}],\" 自動注入：\"]}]\n18:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Http\\\\Controllers;\\n\\nuse Illuminate\\\\Http\\\\Request;\\nuse Illuminate\\\\View\\\\View;\\n\\nclass UserController extends Controller\\n{\\n    /**\\n     * Show the profile for the given user.\\n     */\\n    public function show(Request $request, string $id): View\\n    {\\n        $value = $request-\u003esession()-\u003eget('key');\\n\\n        // ...\\n\\n        $user = $this-\u003eusers-\u003efind($id);\\n\\n        return view('user.profile', ['user' =\u003e $user]);\\n    }\\n}\\n\"}]}]\n19:[\"$\",\"p\",null,{\"children\":[\"當您從 Session 取得項目時，您也可以將預設值作為第二個參數傳遞給 \",[\"$\",\"code\",null,{\"children\":\"get\"}],\" 方法。如果指定的鍵在 Session 中不存在，將返回此預設值。如果您將 Closure 作為預設值傳遞給 \",[\"$\",\"code\",null,{\"children\":\"get\"}],\" 方法，且請求的鍵不存在，則會執行該 Closure 並返回其結果：\"]}]\n1a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$value = $request-\u003esession()-\u003eget('key', 'default');\\n\\n$value = $request-\u003esession()-\u003eget('key', function () {\\n    return 'default';\\n});\\n\"}]}]\n1b:[\"$\",\"a\",null,{\"name\":\"the-global-session-helper\"}]\n1c:[\"$\",\"h4\",null,{\"id\":\"全域-session-輔助函式\",\"children\":[\"$\",\"a\",null,{\"href\":\"#全域-session-輔助函式\",\"children\":\"全域 Session 輔助函式\"}]}]\n1d:[\"$\",\"p\",null,{\"children\":[\"您也可以使用全域 \",[\"$\",\"code\",null,{\"children\":\"session\"}],\" PHP 函式來取得和儲存 Session 中的資料。當使用單一字串參數呼叫 \",[\"$\",\"code\",null,{\"children\":\"session\"}],\" 輔助函式時，它將返回該 Session 鍵的值。當使用鍵 / 值對陣列呼叫輔助函式時，這些值將儲存在 Session 中：\"]}]\n1e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::get('/home', function () {\\n    // Retrieve a piece of data from the session...\\n    $value = session('key');\\n\\n    // Specifying a default value...\\n    $value = session('key', 'default');\\n\\n    // Store a piece of data in the session...\\n    session(['key' =\u003e 'value']);\\n});\\n\"}]}]\n1f"])</script><script>self.__next_f.push([1,":[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!NOTE]\\n透過 HTTP 請求實例使用 Session 與使用全域 \",[\"$\",\"code\",null,{\"children\":\"session\"}],\" 輔助函式之間幾乎沒有實際差異。這兩種方法都可以透過所有測試案例中都可用的 \",[\"$\",\"code\",null,{\"children\":\"assertSessionHas\"}],\" 方法進行 \",[\"$\",\"a\",null,{\"href\":\"/docs/testing\",\"children\":\"測試\"}],\"。\"]}],\"\\n\"]}]\n20:[\"$\",\"a\",null,{\"name\":\"retrieving-all-session-data\"}]\n21:[\"$\",\"h4\",null,{\"id\":\"取得所有-session-資料\",\"children\":[\"$\",\"a\",null,{\"href\":\"#取得所有-session-資料\",\"children\":\"取得所有 Session 資料\"}]}]\n22:[\"$\",\"p\",null,{\"children\":[\"如果您想取得 Session 中的所有資料，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"all\"}],\" 方法：\"]}]\n23:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$data = $request-\u003esession()-\u003eall();\\n\"}]}]\n24:[\"$\",\"a\",null,{\"name\":\"retrieving-a-portion-of-the-session-data\"}]\n25:[\"$\",\"h4\",null,{\"id\":\"取得部分-session-資料\",\"children\":[\"$\",\"a\",null,{\"href\":\"#取得部分-session-資料\",\"children\":\"取得部分 Session 資料\"}]}]\n26:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"only\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"except\"}],\" 方法可用於取得 Session 資料的子集：\"]}]\n27:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$data = $request-\u003esession()-\u003eonly(['username', 'email']);\\n\\n$data = $request-\u003esession()-\u003eexcept(['username', 'email']);\\n\"}]}]\n28:[\"$\",\"a\",null,{\"name\":\"determining-if-an-item-exists-in-the-session\"}]\n29:[\"$\",\"h4\",null,{\"id\":\"判斷項目是否存在於-session-中\",\"children\":[\"$\",\"a\",null,{\"href\":\"#判斷項目是否存在於-session-中\",\"children\":\"判斷項目是否存在於 Session 中\"}]}]\n2a:[\"$\",\"p\",null,{\"children\":[\"要判斷項目是否存在於 Session 中，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"has\"}],\" 方法。如果項目存在且不為 \",[\"$\",\"code\",null,{\"children\":\"null\"}],\"，\",[\"$\",\"code\",null,{\"children\":\"has\"}],\" 方法返回 \",[\"$\",\"code\",null,{\"children\":\"true\"}],\"：\"]}]\n2b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"if ($request-\u003esession()-\u003ehas('users')) {\\n    // ...\\n}\\n\"}]}]\n2c:[\"$\",\"p\",null,{\"children\":[\"要判斷項目是否存在於 Session 中，即使其值為 \",[\"$\",\"code\",null,{\"children\":\"null\"}],\"，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"exists\"}],\" 方法：\"]}]\n2d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"if ($request-\u003esession()-\u003eexists('users')) {\\n    // ...\\n}\\n\"}]}]\n2e:[\"$\",\"p\",null,{\"children\":[\"要判斷項目是否不存在於 Session 中，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"missing\"}],\" 方法。如果項目不存在，\",[\"$\",\"code\",null,{\"children\":\"missing\"}],\" 方法返回 \",[\"$\",\"code\",null,{\"children\":\"true\"}],\"：\"]}]\n2f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"if ($request-\u003esession()-\u003emissing('users')) {\\n    // ...\\n}\\n\"}]}]\n30:[\"$\",\"a\",null,{\"name\":\"storing-data\"}]\n31:[\"$\",\"h3\",null,{\"id\":\"儲存資料\",\"children\":[\"$\",\"a\",null,{\"href\":\"#儲存資料\",\"children\":\"儲存資料\"}]}]\n32:[\"$\",\"p\",null,{\"children\":[\"要在 Session 中儲存資料，您通常會使用請求實例的 \",[\"$\",\"code\",null,{\"children\":\"put\"}],\" 方法或全域 \",[\"$\",\"code\",null,{\"children\":\"session\"}],\" 輔助函式：\"]}]\n33:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"// Via a request instance...\\n$request-\u003esession()-\u003eput('key', 'value');\\n\\n// Via the global \\\"session\\\" helper...\\nsession(['key' =\u003e 'value']);\\n\"}]}]\n34:[\"$\",\"a\",null,{\"name\":\"pushing-to-array-session-values\"}]\n35:[\"$\",\"h4\",null,{\"id\":\"推送到陣列-session-值\",\"children\":[\"$\",\"a\",null,{\"href\":\"#推送到陣列-session-值\",\"children\":\"推送到陣列 Session 值\"}]}]\n36:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"push\"}],\" 方法可用於將新值推送到作為陣列的 Session 值。例如，如果 \",[\"$\""])</script><script>self.__next_f.push([1,",\"code\",null,{\"children\":\"user.teams\"}],\" 鍵包含團隊名稱的陣列，您可以像這樣將新值推送到陣列中：\"]}]\n37:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$request-\u003esession()-\u003epush('user.teams', 'developers');\\n\"}]}]\n38:[\"$\",\"a\",null,{\"name\":\"retrieving-deleting-an-item\"}]\n39:[\"$\",\"h4\",null,{\"id\":\"取得並刪除項目\",\"children\":[\"$\",\"a\",null,{\"href\":\"#取得並刪除項目\",\"children\":\"取得並刪除項目\"}]}]\n3a:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"pull\"}],\" 方法將在單一語句中從 Session 取得並刪除項目：\"]}]\n3b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$value = $request-\u003esession()-\u003epull('key', 'default');\\n\"}]}]\n3c:[\"$\",\"a\",null,{\"name\":\"incrementing-and-decrementing-session-values\"}]\n3d:[\"$\",\"h4\",null,{\"id\":\"遞增和遞減-session-值\",\"children\":[\"$\",\"a\",null,{\"href\":\"#遞增和遞減-session-值\",\"children\":\"遞增和遞減 Session 值\"}]}]\n3e:[\"$\",\"p\",null,{\"children\":[\"如果您的 Session 資料包含您希望遞增或遞減的整數，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"increment\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"decrement\"}],\" 方法：\"]}]\n3f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$request-\u003esession()-\u003eincrement('count');\\n\\n$request-\u003esession()-\u003eincrement('count', $incrementBy = 2);\\n\\n$request-\u003esession()-\u003edecrement('count');\\n\\n$request-\u003esession()-\u003edecrement('count', $decrementBy = 2);\\n\"}]}]\n40:[\"$\",\"a\",null,{\"name\":\"flash-data\"}]\n41:[\"$\",\"h3\",null,{\"id\":\"快閃資料\",\"children\":[\"$\",\"a\",null,{\"href\":\"#快閃資料\",\"children\":\"快閃資料\"}]}]\n42:[\"$\",\"p\",null,{\"children\":[\"有時您可能希望在 Session 中為下一個請求儲存項目。您可以使用 \",[\"$\",\"code\",null,{\"children\":\"flash\"}],\" 方法來實現。使用此方法儲存在 Session 中的資料將立即可用，並在後續的 HTTP 請求期間可用。在後續的 HTTP 請求之後，快閃資料將被刪除。快閃資料主要用於短期的狀態訊息：\"]}]\n43:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$request-\u003esession()-\u003eflash('status', 'Task was successful!');\\n\"}]}]\n44:[\"$\",\"p\",null,{\"children\":[\"如果您需要為多個請求保留快閃資料，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"reflash\"}],\" 方法，這將為額外的請求保留所有快閃資料。如果您只需要保留特定的快閃資料，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"keep\"}],\" 方法：\"]}]\n45:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$request-\u003esession()-\u003ereflash();\\n\\n$request-\u003esession()-\u003ekeep(['username', 'email']);\\n\"}]}]\n46:[\"$\",\"p\",null,{\"children\":[\"要僅為當前請求保留您的快閃資料，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"now\"}],\" 方法：\"]}]\n47:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$request-\u003esession()-\u003enow('status', 'Task was successful!');\\n\"}]}]\n48:[\"$\",\"a\",null,{\"name\":\"deleting-data\"}]\n49:[\"$\",\"h3\",null,{\"id\":\"刪除資料\",\"children\":[\"$\",\"a\",null,{\"href\":\"#刪除資料\",\"children\":\"刪除資料\"}]}]\n4a:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"forget\"}],\" 方法將從 Session 中移除一段資料。如果您想從 Session 中移除所有資料，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"flush\"}],\" 方法：\"]}]\n4b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"// Forget a single key...\\n$request-\u003esession()-\u003eforget('name');\\n\\n// Forget multiple keys...\\n$request-\u003esession()-\u003eforget(['name', 'status']);\\n\\n$request-\u003esession()-\u003eflush();\\n\"}]}]\n4c:[\"$\",\"a\",null,{\"name\":\"regenerating-the-session-id\"}]\n4d:[\"$\",\"h3\",null,{\"id\":\"重新產生-session-id\",\"children\":[\"$\",\"a\",null,{\"href\":\"#重新產生-session-id\",\"children\":\"重新產生 Session ID\"}]}]\n4e:[\"$\",\"p\",null,{\"children\":[\"重新產生 Session ID 通常是為了防止惡意使用者利用 \",[\"$\",\"a\",null,{\"href\":\"https://owasp.org/www-community/at"])</script><script>self.__next_f.push([1,"tacks/Session_fixation\",\"children\":\"Session 固定\"}],\" 攻擊您的應用程式。\"]}]\n4f:[\"$\",\"p\",null,{\"children\":[\"如果您使用 Laravel \",[\"$\",\"a\",null,{\"href\":\"/docs/starter-kits\",\"children\":\"應用程式 Starter Kits\"}],\" 或 \",[\"$\",\"a\",null,{\"href\":\"/docs/fortify\",\"children\":\"Laravel Fortify\"}],\"，Laravel 會在驗證期間自動重新產生 Session ID；但是，如果您需要手動重新產生 Session ID，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"regenerate\"}],\" 方法：\"]}]\n50:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$request-\u003esession()-\u003eregenerate();\\n\"}]}]\n51:[\"$\",\"p\",null,{\"children\":[\"如果您需要在單一語句中重新產生 Session ID 並從 Session 中移除所有資料，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"invalidate\"}],\" 方法：\"]}]\n52:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$request-\u003esession()-\u003einvalidate();\\n\"}]}]\n53:[\"$\",\"a\",null,{\"name\":\"session-cache\"}]\n54:[\"$\",\"h2\",null,{\"id\":\"session-快取\",\"children\":[\"$\",\"a\",null,{\"href\":\"#session-快取\",\"children\":\"Session 快取\"}]}]\n55:[\"$\",\"p\",null,{\"children\":[\"Laravel 的 Session 快取提供了一種方便的方式來快取限定於個別使用者 Session 的資料。與全域應用程式快取不同，Session 快取資料會自動按 Session 隔離，並在 Session 過期或銷毀時清理。Session 快取支援所有熟悉的 \",[\"$\",\"a\",null,{\"href\":\"/docs/cache\",\"children\":\"Laravel 快取方法\"}],\"，如 \",[\"$\",\"code\",null,{\"children\":\"get\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"put\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"remember\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"forget\"}],\" 等，但範圍限定於當前 Session。\"]}]\n56:[\"$\",\"p\",null,{\"children\":\"Session 快取非常適合儲存您希望在同一 Session 內的多個請求之間持久保存，但不需要永久儲存的臨時、使用者特定資料。這包括表單資料、臨時計算、API 回應或任何其他應該與特定使用者 Session 綁定的短暫資料。\"}]\n57:[\"$\",\"p\",null,{\"children\":[\"您可以透過 Session 上的 \",[\"$\",\"code\",null,{\"children\":\"cache\"}],\" 方法存取 Session 快取：\"]}]\n58:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$discount = $request-\u003esession()-\u003ecache()-\u003eget('discount');\\n\\n$request-\u003esession()-\u003ecache()-\u003eput(\\n    'discount', 10, now()-\u003eaddMinutes(5)\\n);\\n\"}]}]\n59:[\"$\",\"p\",null,{\"children\":[\"有關 Laravel 快取方法的更多資訊，請參閱 \",[\"$\",\"a\",null,{\"href\":\"/docs/cache\",\"children\":\"快取文件\"}],\"。\"]}]\n5a:[\"$\",\"a\",null,{\"name\":\"session-blocking\"}]\n5b:[\"$\",\"h2\",null,{\"id\":\"session-阻塞\",\"children\":[\"$\",\"a\",null,{\"href\":\"#session-阻塞\",\"children\":\"Session 阻塞\"}]}]\n5c:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\n要使用 Session 阻塞，您的應用程式必須使用支援 \",[\"$\",\"a\",null,{\"href\":\"/docs/cache#atomic-locks\",\"children\":\"原子鎖\"}],\" 的快取驅動程式。目前，這些快取驅動程式包括 \",[\"$\",\"code\",null,{\"children\":\"memcached\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"dynamodb\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"redis\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"mongodb\"}],\"（包含在官方 \",[\"$\",\"code\",null,{\"children\":\"mongodb/laravel-mongodb\"}],\" 套件中）、\",[\"$\",\"code\",null,{\"children\":\"database\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"file\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"array\"}],\" 驅動程式。此外，您不能使用 \",[\"$\",\"code\",null,{\"children\":\"cookie\"}],\" Session 驅動程式。\"]}],\"\\n\"]}]\n5d:[\"$\",\"p\",null,{\"children\":\"預設情況下，Laravel 允許使用相同 Session 的請求同時執行。因此，例如，如果您使用 JavaScript HTTP 函式庫向應用程式發出兩個 HTTP 請求，它們將同時執行。對於許多應用程式來說，這不是問題；但是，在少數向兩個不同的應用程式端點發出並發請求且都寫入 Session 資料的應用程式中，可能會發生 Session 資料遺失。\"}]\n5e:[\"$\",\"p\",null,{\"children\":[\"為了緩解這種情"])</script><script>self.__next_f.push([1,"況，Laravel 提供了允許您限制給定 Session 的並發請求的功能。首先，您只需將 \",[\"$\",\"code\",null,{\"children\":\"block\"}],\" 方法鏈接到路由定義上。在此範例中，對 \",[\"$\",\"code\",null,{\"children\":\"/profile\"}],\" 端點的傳入請求將獲取 Session 鎖。當此鎖被持有時，任何對共用相同 Session ID 的 \",[\"$\",\"code\",null,{\"children\":\"/profile\"}],\" 或 \",[\"$\",\"code\",null,{\"children\":\"/order\"}],\" 端點的傳入請求將等待第一個請求完成執行後再繼續執行：\"]}]\n5f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::post('/profile', function () {\\n    // ...\\n})-\u003eblock($lockSeconds = 10, $waitSeconds = 10);\\n\\nRoute::post('/order', function () {\\n    // ...\\n})-\u003eblock($lockSeconds = 10, $waitSeconds = 10);\\n\"}]}]\n60:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"block\"}],\" 方法接受兩個可選參數。\",[\"$\",\"code\",null,{\"children\":\"block\"}],\" 方法接受的第一個參數是 Session 鎖應該持有的最大秒數，然後才會被釋放。當然，如果請求在此時間之前完成執行，鎖將會更早釋放。\"]}]\n61:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"block\"}],\" 方法接受的第二個參數是請求在嘗試獲取 Session 鎖時應該等待的秒數。如果請求無法在給定的秒數內獲取 Session 鎖，將拋出 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Contracts\\\\Cache\\\\LockTimeoutException\"}],\"。\"]}]\n62:[\"$\",\"p\",null,{\"children\":\"如果這兩個參數都沒有傳遞，鎖將被獲取最多 10 秒，請求將在嘗試獲取鎖時最多等待 10 秒：\"}]\n63:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Route::post('/profile', function () {\\n    // ...\\n})-\u003eblock();\\n\"}]}]\n64:[\"$\",\"a\",null,{\"name\":\"adding-custom-session-drivers\"}]\n65:[\"$\",\"h2\",null,{\"id\":\"新增自訂-session-驅動程式\",\"children\":[\"$\",\"a\",null,{\"href\":\"#新增自訂-session-驅動程式\",\"children\":\"新增自訂 Session 驅動程式\"}]}]\n66:[\"$\",\"a\",null,{\"name\":\"implementing-the-driver\"}]\n67:[\"$\",\"h3\",null,{\"id\":\"實作驅動程式\",\"children\":[\"$\",\"a\",null,{\"href\":\"#實作驅動程式\",\"children\":\"實作驅動程式\"}]}]\n68:[\"$\",\"p\",null,{\"children\":[\"如果現有的 Session 驅動程式都不符合您的應用程式需求，Laravel 使您可以編寫自己的 Session 處理程式。您的自訂 Session 驅動程式應實作 PHP 內建的 \",[\"$\",\"code\",null,{\"children\":\"SessionHandlerInterface\"}],\"。此介面僅包含幾個簡單的方法。一個存根的 MongoDB 實作看起來像這樣：\"]}]\n69:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Extensions;\\n\\nclass MongoSessionHandler implements \\\\SessionHandlerInterface\\n{\\n    public function open($savePath, $sessionName) {}\\n    public function close() {}\\n    public function read($sessionId) {}\\n    public function write($sessionId, $data) {}\\n    public function destroy($sessionId) {}\\n    public function gc($lifetime) {}\\n}\\n\"}]}]\n6a:[\"$\",\"p\",null,{\"children\":[\"由於 Laravel 不包含用於容納擴充功能的預設目錄，您可以自由地將它們放置在任何您喜歡的地方。在此範例中，我們建立了一個 \",[\"$\",\"code\",null,{\"children\":\"Extensions\"}],\" 目錄來容納 \",[\"$\",\"code\",null,{\"children\":\"MongoSessionHandler\"}],\"。\"]}]\n6b:[\"$\",\"p\",null,{\"children\":\"由於這些方法的目的不容易理解，以下是每個方法目的的概述：\"}]\n6c:[\"$\",\"div\",null,{\"className\":\"content-list\",\"markdown\":\"1\",\"children\":[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"open\"}],\" 方法通常用於基於檔案的 Session 儲存系統。由於 Laravel 附帶了 \",[\"$\",\"code\",null,{\"children\":\"file\"}],\" Session 驅動程式，您很少需要在此方法中放置任何內容。您可以簡單地將此方法留空。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"close\"}],\" 方法，與 \",[\"$\",\"code\",null,{\"children\":\"open\"}],\" 方法一樣，通常也可以忽"])</script><script>self.__next_f.push([1,"略。對於大多數驅動程式，它不是必需的。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"read\"}],\" 方法應返回與給定 \",[\"$\",\"code\",null,{\"children\":\"$$sessionId\"}],\" 關聯的 Session 資料的字串版本。在驅動程式中取得或儲存 Session 資料時，無需進行任何序列化或其他編碼，因為 Laravel 將為您執行序列化。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"write\"}],\" 方法應將與 \",[\"$\",\"code\",null,{\"children\":\"$$sessionId\"}],\" 關聯的給定 \",[\"$\",\"code\",null,{\"children\":\"$$data\"}],\" 字串寫入某些持久性儲存系統，例如 MongoDB 或您選擇的其他儲存系統。同樣，您不應執行任何序列化 - Laravel 將已經為您處理了。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"destroy\"}],\" 方法應從持久性儲存中移除與 \",[\"$\",\"code\",null,{\"children\":\"$$sessionId\"}],\" 關聯的資料。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"gc\"}],\" 方法應銷毀所有比給定 \",[\"$\",\"code\",null,{\"children\":\"$$lifetime\"}],\"（這是一個 UNIX 時間戳記）舊的 Session 資料。對於像 Memcached 和 Redis 這樣的自行過期系統，此方法可以留空。\"]}],\"\\n\"]}]}]\n6d:[\"$\",\"a\",null,{\"name\":\"registering-the-driver\"}]\n6e:[\"$\",\"h3\",null,{\"id\":\"註冊驅動程式\",\"children\":[\"$\",\"a\",null,{\"href\":\"#註冊驅動程式\",\"children\":\"註冊驅動程式\"}]}]\n6f:[\"$\",\"p\",null,{\"children\":[\"一旦您的驅動程式實作完成，您就可以將其註冊到 Laravel。要向 Laravel 的 Session 後端新增額外的驅動程式，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"Session\"}],\" \",[\"$\",\"a\",null,{\"href\":\"/docs/facades\",\"children\":\"Facade\"}],\" 提供的 \",[\"$\",\"code\",null,{\"children\":\"extend\"}],\" 方法。您應該從 \",[\"$\",\"a\",null,{\"href\":\"/docs/providers\",\"children\":\"Service Provider\"}],\" 的 \",[\"$\",\"code\",null,{\"children\":\"boot\"}],\" 方法呼叫 \",[\"$\",\"code\",null,{\"children\":\"extend\"}],\" 方法。您可以從現有的 \",[\"$\",\"code\",null,{\"children\":\"App\\\\Providers\\\\AppServiceProvider\"}],\" 執行此操作，或建立一個全新的 Provider：\"]}]\n70:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Providers;\\n\\nuse App\\\\Extensions\\\\MongoSessionHandler;\\nuse Illuminate\\\\Contracts\\\\Foundation\\\\Application;\\nuse Illuminate\\\\Support\\\\Facades\\\\Session;\\nuse Illuminate\\\\Support\\\\ServiceProvider;\\n\\nclass SessionServiceProvider extends ServiceProvider\\n{\\n    /**\\n     * Register any application services.\\n     */\\n    public function register(): void\\n    {\\n        // ...\\n    }\\n\\n    /**\\n     * Bootstrap any application services.\\n     */\\n    public function boot(): void\\n    {\\n        Session::extend('mongo', function (Application $app) {\\n            // Return an implementation of SessionHandlerInterface...\\n            return new MongoSessionHandler;\\n        });\\n    }\\n}\\n\"}]}]\n71:[\"$\",\"p\",null,{\"children\":[\"一旦 Session 驅動程式註冊完成，您可以使用 \",[\"$\",\"code\",null,{\"children\":\"SESSION_DRIVER\"}],\" 環境變數或在應用程式的 \",[\"$\",\"code\",null,{\"children\":\"config/session.php\"}],\" 設定檔中將 \",[\"$\",\"code\",null,{\"children\":\"mongo\"}],\" 驅動程式指定為應用程式的 Session 驅動程式。\"]}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"72:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$L72\",\"3\",{}]]\n8:null\n"])</script></body></html>