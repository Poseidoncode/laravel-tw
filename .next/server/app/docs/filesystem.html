<!DOCTYPE html><!--kE5s4wNidqhVn8fA906WC--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/bc6e94e20a39014e.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/cbd55ab9639e1e66.js"/><script src="/_next/static/chunks/87a939617be2fa8c.js" async=""></script><script src="/_next/static/chunks/8368f298651cbd89.js" async=""></script><script src="/_next/static/chunks/6740f161f60c6ab5.js" async=""></script><script src="/_next/static/chunks/turbopack-929fc2ce3ca903db.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/247eb132b7f7b574.js" async=""></script><script src="/_next/static/chunks/796e69ae18b2784c.js" async=""></script><script src="/_next/static/chunks/2b257daea29fbb42.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased"><div hidden=""><!--$--><!--/$--></div><div class="flex min-h-screen bg-background"><div class="w-64 border-r bg-background h-screen sticky top-0 hidden md:block"><div class="p-6 font-bold text-xl border-b flex items-center gap-2"><span class="text-red-600">Laravel</span> Docs（中文）</div><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-65px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="p-4 space-y-2"><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>前言</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">發行說明</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>入門</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/installation"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">安裝</button></a><a class="block" href="/docs/configuration"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">配置</button></a><a class="block" href="/docs/structure"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">目錄結構</button></a><a class="block" href="/docs/lifecycle"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">生命週期</button></a><a class="block" href="/docs/frontend"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">前端</button></a><a class="block" href="/docs/starter-kits"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">啟動套件</button></a><a class="block" href="/docs/deployment"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">部署</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>架構</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>基礎功能</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>深入探討</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>安全性</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>資料庫</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>Eloquent ORM</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>測試</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>其他</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>官方套件</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div class="border-t pt-4 space-y-2"><a class="block" href="/docs/api"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">API 文件</button></a><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">更新日誌</button></a></div></div></div></div></div></div><main class="flex-1 relative"><div class="container mx-auto py-10"><div class="mx-auto max-w-3xl"><div class="mb-8"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">File Storage</h1><p class="text-xl text-muted-foreground mt-2">Laravel 提供強大的檔案系統抽象</p></div><article class="prose prose-slate dark:prose-invert max-w-none"><h1 id="file-storage"><a href="#file-storage">File Storage</a></h1>
<ul>
<li><a href="#introduction">簡介 (Introduction)</a></li>
<li><a href="#configuration">設定 (Configuration)</a>
<ul>
<li><a href="#the-local-driver">Local 驅動程式 (The Local Driver)</a></li>
<li><a href="#the-public-disk">Public 磁碟 (The Public Disk)</a></li>
<li><a href="#driver-prerequisites">驅動程式先決條件 (Driver Prerequisites)</a></li>
<li><a href="#scoped-and-read-only-filesystems">作用域和唯讀檔案系統 (Scoped and Read-Only Filesystems)</a></li>
<li><a href="#amazon-s3-compatible-filesystems">Amazon S3 相容檔案系統 (Amazon S3 Compatible Filesystems)</a></li>
</ul>
</li>
<li><a href="#obtaining-disk-instances">取得磁碟實例 (Obtaining Disk Instances)</a>
<ul>
<li><a href="#on-demand-disks">隨選磁碟 (On-Demand Disks)</a></li>
</ul>
</li>
<li><a href="#retrieving-files">檢索檔案 (Retrieving Files)</a>
<ul>
<li><a href="#downloading-files">下載檔案 (Downloading Files)</a></li>
<li><a href="#file-urls">檔案 URL (File URLs)</a></li>
<li><a href="#temporary-urls">臨時 URL (Temporary URLs)</a></li>
<li><a href="#file-metadata">檔案元資料 (File Metadata)</a></li>
</ul>
</li>
<li><a href="#storing-files">儲存檔案 (Storing Files)</a>
<ul>
<li><a href="#prepending-appending-to-files">在檔案前面和後面新增內容 (Prepending and Appending To Files)</a></li>
<li><a href="#copying-moving-files">複製和移動檔案 (Copying and Moving Files)</a></li>
<li><a href="#automatic-streaming">自動串流 (Automatic Streaming)</a></li>
<li><a href="#file-uploads">檔案上傳 (File Uploads)</a></li>
<li><a href="#file-visibility">檔案可見性 (File Visibility)</a></li>
</ul>
</li>
<li><a href="#deleting-files">刪除檔案 (Deleting Files)</a></li>
<li><a href="#directories">目錄 (Directories)</a></li>
<li><a href="#testing">測試 (Testing)</a></li>
<li><a href="#custom-filesystems">自訂檔案系統 (Custom Filesystems)</a></li>
</ul>
<a name="introduction"></a>
<h2 id="簡介"><a href="#簡介">簡介</a></h2>
<p>Laravel 提供了強大的檔案系統抽象,感謝 Frank de Jonge 的出色 <a href="https://github.com/thephpleague/flysystem">Flysystem</a> PHP 套件。Laravel Flysystem 整合提供了簡單的驅動程式來處理本地檔案系統、SFTP 和 Amazon S3。更好的是,在本地開發機器和生產伺服器之間切換這些儲存選項非常簡單,因為每個系統的 API 保持一致。</p>
<a name="configuration"></a>
<h2 id="設定"><a href="#設定">設定</a></h2>
<p>Laravel 的檔案系統設定檔位於 <code>config/filesystems.php</code>。在此檔案中,你可以設定所有檔案系統「磁碟」。每個磁碟代表一個特定的儲存驅動程式和儲存位置。設定檔中包含了每個支援的驅動程式的範例設定,因此你可以修改設定以反映你的儲存喜好和憑證。</p>
<p><code>local</code> 驅動程式與儲存在執行 Laravel 應用程式的伺服器上的檔案互動,而 <code>sftp</code> 儲存驅動程式用於基於 SSH 鍵的 FTP。<code>s3</code> 驅動程式用於寫入 Amazon 的 S3 雲端儲存服務。</p>
<blockquote>
<p>[!NOTE]
你可以設定任意數量的磁碟,甚至可以有多個使用相同驅動程式的磁碟。</p>
</blockquote>
<a name="the-local-driver"></a>
<h3 id="local-驅動程式"><a href="#local-驅動程式">Local 驅動程式</a></h3>
<p>當使用 <code>local</code> 驅動程式時,所有檔案操作都是相對於你的 <code>filesystems</code> 設定檔中定義的 <code>root</code> 目錄。預設情況下,此值設定為 <code>storage/app/private</code> 目錄。因此,以下方法將寫入 <code>storage/app/private/example.txt</code>:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Storage;

Storage::disk(&#x27;local&#x27;)-&gt;put(&#x27;example.txt&#x27;, &#x27;Contents&#x27;);
</code></pre>
<a name="the-public-disk"></a>
<h3 id="public-磁碟"><a href="#public-磁碟">Public 磁碟</a></h3>
<p>應用程式的 <code>filesystems</code> 設定檔中包含的 <code>public</code> 磁碟用於將公開可存取的檔案。預設情況下,<code>public</code> 磁碟使用 <code>local</code> 驅動程式並將其檔案儲存在 <code>storage/app/public</code> 中。</p>
<p>如果你的 <code>public</code> 磁碟使用 <code>local</code> 驅動程式並且你想讓這些檔案從 Web 可存取,你應該從來源目錄 <code>storage/app/public</code> 到目標目錄 <code>public/storage</code> 建立一個符號連結:</p>
<p>要建立符號連結,你可以使用 <code>storage:link</code> Artisan 指令:</p>
<pre><code class="language-shell">php artisan storage:link
</code></pre>
<p>一旦檔案被儲存並建立了符號連結,你可以使用 <code>asset</code> 輔助函式建立檔案的 URL:</p>
<pre><code class="language-php">echo asset(&#x27;storage/file.txt&#x27;);
</code></pre>
<p>你可以在 <code>filesystems</code> 設定檔中設定額外的符號連結。當你執行 <code>storage:link</code> 指令時,每個設定的連結都將被建立:</p>
<pre><code class="language-php">&#x27;links&#x27; =&gt; [
    public_path(&#x27;storage&#x27;) =&gt; storage_path(&#x27;app/public&#x27;),
    public_path(&#x27;images&#x27;) =&gt; storage_path(&#x27;app/images&#x27;),
],
</code></pre>
<p><code>storage:unlink</code> 指令可用於銀毀你設定的符號連結:</p>
<pre><code class="language-shell">php artisan storage:unlink
</code></pre>
<a name="driver-prerequisites"></a>
<h3 id="驅動程式先決條件"><a href="#驅動程式先決條件">驅動程式先決條件</a></h3>
<a name="s3-driver-configuration"></a>
<h4 id="s3-驅動程式設定"><a href="#s3-驅動程式設定">S3 驅動程式設定</a></h4>
<p>在使用 S3 驅動程式之前,你需要透過 Composer 套件管理器安裝 Flysystem S3 套件:</p>
<pre><code class="language-shell">composer require league/flysystem-aws-s3-v3 &quot;^3.0&quot; --with-all-dependencies
</code></pre>
<p>S3 磁碟設定陣列位於你的 <code>config/filesystems.php</code> 設定檔中。通常,你應該使用以下環境變數來設定你的 S3 資訊和憑證,這些環境變數由 <code>config/filesystems.php</code> 設定檔引用:</p>
<pre><code class="language-ini">AWS_ACCESS_KEY_ID=&lt;your-key-id&gt;
AWS_SECRET_ACCESS_KEY=&lt;your-secret-access-key&gt;
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=&lt;your-bucket-name&gt;
AWS_USE_PATH_STYLE_ENDPOINT=false
</code></pre>
<p>為了方便起見,這些環境變數與 AWS CLI 使用的命名慣例相匹配。</p>
<a name="ftp-driver-configuration"></a>
<h4 id="ftp-驅動程式設定"><a href="#ftp-驅動程式設定">FTP 驅動程式設定</a></h4>
<p>在使用 FTP 驅動程式之前,你需要透過 Composer 套件管理器安裝 Flysystem FTP 套件:</p>
<pre><code class="language-shell">composer require league/flysystem-ftp &quot;^3.0&quot;
</code></pre>
<p>Laravel 的 Flysystem 整合與 FTP 配合得很好;但是,框架的預設 <code>config/filesystems.php</code> 設定檔中不包含範例設定。如果你需要設定 FTP 檔案系統,你可以使用以下設定範例:</p>
<pre><code class="language-php">&#x27;ftp&#x27; =&gt; [
    &#x27;driver&#x27; =&gt; &#x27;ftp&#x27;,
    &#x27;host&#x27; =&gt; env(&#x27;FTP_HOST&#x27;),
    &#x27;username&#x27; =&gt; env(&#x27;FTP_USERNAME&#x27;),
    &#x27;password&#x27; =&gt; env(&#x27;FTP_PASSWORD&#x27;),

    // Optional FTP Settings...
    // &#x27;port&#x27; =&gt; env(&#x27;FTP_PORT&#x27;, 21),
    // &#x27;root&#x27; =&gt; env(&#x27;FTP_ROOT&#x27;),
    // &#x27;passive&#x27; =&gt; true,
    // &#x27;ssl&#x27; =&gt; true,
    // &#x27;timeout&#x27; =&gt; 30,
],
</code></pre>
<a name="sftp-driver-configuration"></a>
<h4 id="sftp-驅動程式設定"><a href="#sftp-驅動程式設定">SFTP 驅動程式設定</a></h4>
<p>在使用 SFTP 驅動程式之前,你需要透過 Composer 套件管理器安裝 Flysystem SFTP 套件:</p>
<pre><code class="language-shell">composer require league/flysystem-sftp-v3 &quot;^3.0&quot;
</code></pre>
<p>Laravel 的 Flysystem 整合與 SFTP 配合得很好;但是,框架的預設 <code>config/filesystems.php</code> 設定檔中不包含範例設定。如果你需要設定 SFTP 檔案系統,你可以使用以下設定範例:</p>
<pre><code class="language-php">&#x27;sftp&#x27; =&gt; [
    &#x27;driver&#x27; =&gt; &#x27;sftp&#x27;,
    &#x27;host&#x27; =&gt; env(&#x27;SFTP_HOST&#x27;),

    // Settings for basic authentication...
    &#x27;username&#x27; =&gt; env(&#x27;SFTP_USERNAME&#x27;),
    &#x27;password&#x27; =&gt; env(&#x27;SFTP_PASSWORD&#x27;),

    // Settings for SSH key-based authentication with encryption password...
    &#x27;privateKey&#x27; =&gt; env(&#x27;SFTP_PRIVATE_KEY&#x27;),
    &#x27;passphrase&#x27; =&gt; env(&#x27;SFTP_PASSPHRASE&#x27;),

    // Settings for file / directory permissions...
    &#x27;visibility&#x27; =&gt; &#x27;private&#x27;, // `private` = 0600, `public` = 0644
    &#x27;directory_visibility&#x27; =&gt; &#x27;private&#x27;, // `private` = 0700, `public` = 0755

    // Optional SFTP Settings...
    // &#x27;hostFingerprint&#x27; =&gt; env(&#x27;SFTP_HOST_FINGERPRINT&#x27;),
    // &#x27;maxTries&#x27; =&gt; 4,
    // &#x27;passphrase&#x27; =&gt; env(&#x27;SFTP_PASSPHRASE&#x27;),
    // &#x27;port&#x27; =&gt; env(&#x27;SFTP_PORT&#x27;, 22),
    // &#x27;root&#x27; =&gt; env(&#x27;SFTP_ROOT&#x27;, &#x27;&#x27;),
    // &#x27;timeout&#x27; =&gt; 30,
    // &#x27;useAgent&#x27; =&gt; true,
],
</code></pre>
<a name="scoped-and-read-only-filesystems"></a>
<h3 id="作用域和唯讀檔案系統"><a href="#作用域和唯讀檔案系統">作用域和唯讀檔案系統</a></h3>
<p>作用域磁碟允許你定義一個檔案系統,其中所有路徑都會自動以給定的路徑前綴為前綴。在建立作用域檔案系統磁碟之前,你需要透過 Composer 套件管理器安裝額外的 Flysystem 套件:</p>
<pre><code class="language-shell">composer require league/flysystem-path-prefixing &quot;^3.0&quot;
</code></pre>
<p>你可以透過定義使用 <code>scoped</code> 驅動程式的磁碟來建立任何現有檔案系統磁碟的路徑作用域實例。例如,你可以建立一個磁碟,將你現有的 <code>s3</code> 磁碟的作用域限定到特定的路徑前綴,然後使用作用域磁碟的每個檔案操作都將使用指定的前綴:</p>
<pre><code class="language-php">&#x27;s3-videos&#x27; =&gt; [
    &#x27;driver&#x27; =&gt; &#x27;scoped&#x27;,
    &#x27;disk&#x27; =&gt; &#x27;s3&#x27;,
    &#x27;prefix&#x27; =&gt; &#x27;path/to/videos&#x27;,
],
</code></pre>
<p>「唯讀」磁碟允許你建立不允許寫入操作的檔案系統磁碟。在使用 <code>read-only</code> 設定選項之前,你需要透過 Composer 套件管理器安裝額外的 Flysystem 套件:</p>
<pre><code class="language-shell">composer require league/flysystem-read-only &quot;^3.0&quot;
</code></pre>
<p>接下來,你可以在一個或多個磁碟的設定陣列中包含 <code>read-only</code> 設定選項:</p>
<pre><code class="language-php">&#x27;s3-videos&#x27; =&gt; [
    &#x27;driver&#x27; =&gt; &#x27;s3&#x27;,
    // ...
    &#x27;read-only&#x27; =&gt; true,
],
</code></pre>
<a name="amazon-s3-compatible-filesystems"></a>
<h3 id="amazon-s3-相容檔案系統"><a href="#amazon-s3-相容檔案系統">Amazon S3 相容檔案系統</a></h3>
<p>預設情況下,你的應用程式的 <code>filesystems</code> 設定檔包含 <code>s3</code> 磁碟的磁碟設定。除了使用此磁碟與 <a href="https://aws.amazon.com/s3/">Amazon S3</a> 互動外,你還可以使用它與任何 S3 相容檔案儲存服務互動,例如 <a href="https://github.com/minio/minio">MinIO</a>、<a href="https://www.digitalocean.com/products/spaces/">DigitalOcean Spaces</a>、<a href="https://www.vultr.com/products/object-storage/">Vultr Object Storage</a>、<a href="https://www.cloudflare.com/developer-platform/products/r2/">Cloudflare R2</a> 或 <a href="https://www.hetzner.com/storage/object-storage/">Hetzner Cloud Storage</a>。</p>
<p>通常,在更新磁碟的憑證以匹配你計劃使用的服務的憑證後,你只需要更新 <code>endpoint</code> 設定選項的值。此選項的值通常透過 <code>AWS_ENDPOINT</code> 環境變數定義:</p>
<pre><code class="language-php">&#x27;endpoint&#x27; =&gt; env(&#x27;AWS_ENDPOINT&#x27;, &#x27;https://minio:9000&#x27;),
</code></pre>
<a name="minio"></a>
<h4 id="minio"><a href="#minio">MinIO</a></h4>
<p>為了讓 Laravel 的 Flysystem 整合在使用 MinIO 時產生正確的 URL,你應該定義 <code>AWS_URL</code> 環境變數,使其與你的應用程式的本地 URL 相匹配,並在 URL 路徑中包含儲存桶名稱:</p>
<pre><code class="language-ini">AWS_URL=http://localhost:9000/local
</code></pre>
<blockquote>
<p>[!WARNING]
當使用 MinIO 時,如果 <code>endpoint</code> 無法被客戶端存取,透過 <code>temporaryUrl</code> 方法產生臨時儲存 URL 可能無法工作。</p>
</blockquote>
<a name="obtaining-disk-instances"></a>
<h2 id="取得磁碟實例"><a href="#取得磁碟實例">取得磁碟實例</a></h2>
<p><code>Storage</code> facade 可用於與你的任何設定磁碟互動。例如,你可以在 facade 上使用 <code>put</code> 方法將頭像儲存到預設磁碟。如果你在 <code>Storage</code> facade 上呼叫方法而不先呼叫 <code>disk</code> 方法,該方法將自動傳遞給預設磁碟:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Storage;

Storage::put(&#x27;avatars/1&#x27;, $content);
</code></pre>
<p>如果你的應用程式與多個磁碟互動,你可以在 <code>Storage</code> facade 上使用 <code>disk</code> 方法來處理特定磁碟上的檔案:</p>
<pre><code class="language-php">Storage::disk(&#x27;s3&#x27;)-&gt;put(&#x27;avatars/1&#x27;, $content);
</code></pre>
<a name="on-demand-disks"></a>
<h3 id="隨選磁碟"><a href="#隨選磁碟">隨選磁碟</a></h3>
<p>有時你可能希望在執行時期使用給定的設定建立磁碟,而不需要該設定實際存在於你的應用程式的 <code>filesystems</code> 設定檔中。要完成此操作,你可以將設定陣列傳遞給 <code>Storage</code> facade 的 <code>build</code> 方法:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Storage;

$disk = Storage::build([
    &#x27;driver&#x27; =&gt; &#x27;local&#x27;,
    &#x27;root&#x27; =&gt; &#x27;/path/to/root&#x27;,
]);

$disk-&gt;put(&#x27;image.jpg&#x27;, $content);
</code></pre>
<a name="retrieving-files"></a>
<h2 id="檢索檔案"><a href="#檢索檔案">檢索檔案</a></h2>
<p><code>get</code> 方法可用於檢索檔案的內容。該方法將返回檔案的原始字串內容。請記住,所有檔案路徑都應相對於磁碟的「根」位置指定:</p>
<pre><code class="language-php">$contents = Storage::get(&#x27;file.jpg&#x27;);
</code></pre>
<p>如果你檢索的檔案包含 JSON,你可以使用 <code>json</code> 方法來檢索檔案並解碼其內容:</p>
<pre><code class="language-php">$orders = Storage::json(&#x27;orders.json&#x27;);
</code></pre>
<p><code>exists</code> 方法可用於確定磁碟上是否存在檔案:</p>
<pre><code class="language-php">if (Storage::disk(&#x27;s3&#x27;)-&gt;exists(&#x27;file.jpg&#x27;)) {
    // ...
}
</code></pre>
<p><code>missing</code> 方法可用於確定磁碟中是否缺少檔案:</p>
<pre><code class="language-php">if (Storage::disk(&#x27;s3&#x27;)-&gt;missing(&#x27;file.jpg&#x27;)) {
    // ...
}
</code></pre>
<a name="downloading-files"></a>
<h3 id="下載檔案"><a href="#下載檔案">下載檔案</a></h3>
<p><code>download</code> 方法可用於產生強制使用者瀏覽器下載給定路徑檔案的回應。<code>download</code> 方法接受檔案名稱作為方法的第二個參數,這將決定下載檔案的使用者看到的檔案名稱。最後,你可以將 HTTP 標頭陣列作為方法的第三個參數傳遞:</p>
<pre><code class="language-php">return Storage::download(&#x27;file.jpg&#x27;);

return Storage::download(&#x27;file.jpg&#x27;, $name, $headers);
</code></pre>
<a name="file-urls"></a>
<h3 id="檔案-url"><a href="#檔案-url">檔案 URL</a></h3>
<p>你可以使用 <code>url</code> 方法來取得給定檔案的 URL。如果你使用 <code>local</code> 驅動程式,這通常只會在給定路徑前面加上 <code>/storage</code> 並返回檔案的相對 URL。如果你使用 <code>s3</code> 驅動程式,將返回完全限定的遠端 URL:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Storage;

$url = Storage::url(&#x27;file.jpg&#x27;);
</code></pre>
<p>使用 <code>local</code> 驅動程式時,所有應該公開可存取的檔案都應該放在 <code>storage/app/public</code> 目錄中。此外,你應該在 <code>public/storage</code> <a href="#the-public-disk">建立符號連結</a>,指向 <code>storage/app/public</code> 目錄。</p>
<blockquote>
<p>[!WARNING]
使用 <code>local</code> 驅動程式時,<code>url</code> 的返回值不是 URL 編碼的。因此,我們建議始終使用會建立有效 URL 的名稱來儲存檔案。</p>
</blockquote>
<a name="url-host-customization"></a>
<h4 id="url-主機自訂"><a href="#url-主機自訂">URL 主機自訂</a></h4>
<p>如果你想修改使用 <code>Storage</code> facade 產生的 URL 的主機,你可以在磁碟的設定陣列中新增或更改 <code>url</code> 選項:</p>
<pre><code class="language-php">&#x27;public&#x27; =&gt; [
    &#x27;driver&#x27; =&gt; &#x27;local&#x27;,
    &#x27;root&#x27; =&gt; storage_path(&#x27;app/public&#x27;),
    &#x27;url&#x27; =&gt; env(&#x27;APP_URL&#x27;).&#x27;/storage&#x27;,
    &#x27;visibility&#x27; =&gt; &#x27;public&#x27;,
    &#x27;throw&#x27; =&gt; false,
],
</code></pre>
<a name="temporary-urls"></a>
<h3 id="臨時-url"><a href="#臨時-url">臨時 URL</a></h3>
<p>使用 <code>temporaryUrl</code> 方法,你可以為使用 <code>local</code> 和 <code>s3</code> 驅動程式儲存的檔案建立臨時 URL。此方法接受路徑和 <code>DateTime</code> 實例,指定 URL 應該何時過期:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Storage;

$url = Storage::temporaryUrl(
    &#x27;file.jpg&#x27;, now()-&gt;addMinutes(5)
);
</code></pre>
<a name="enabling-local-temporary-urls"></a>
<h4 id="啟用本地臨時-url"><a href="#啟用本地臨時-url">啟用本地臨時 URL</a></h4>
<p>如果你在 <code>local</code> 驅動程式引入臨時 URL 支援之前就開始開發應用程式,你可能需要啟用本地臨時 URL。要這樣做,請在 <code>config/filesystems.php</code> 設定檔中將 <code>serve</code> 選項新增到你的 <code>local</code> 磁碟的設定陣列:</p>
<pre><code class="language-php">&#x27;local&#x27; =&gt; [
    &#x27;driver&#x27; =&gt; &#x27;local&#x27;,
    &#x27;root&#x27; =&gt; storage_path(&#x27;app/private&#x27;),
    &#x27;serve&#x27; =&gt; true, // [tl! add]
    &#x27;throw&#x27; =&gt; false,
],
</code></pre>
<a name="s3-request-parameters"></a>
<h4 id="s3-請求參數"><a href="#s3-請求參數">S3 請求參數</a></h4>
<p>如果你需要指定額外的 <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectGET.html#RESTObjectGET-requests">S3 請求參數</a>,你可以將請求參數陣列作為第三個參數傳遞給 <code>temporaryUrl</code> 方法:</p>
<pre><code class="language-php">$url = Storage::temporaryUrl(
    &#x27;file.jpg&#x27;,
    now()-&gt;addMinutes(5),
    [
        &#x27;ResponseContentType&#x27; =&gt; &#x27;application/octet-stream&#x27;,
        &#x27;ResponseContentDisposition&#x27; =&gt; &#x27;attachment; filename=file2.jpg&#x27;,
    ]
);
</code></pre>
<a name="customizing-temporary-urls"></a>
<h4 id="自訂臨時-url"><a href="#自訂臨時-url">自訂臨時 URL</a></h4>
<p>如果你需要自訂特定儲存磁碟的臨時 URL 的建立方式,你可以使用 <code>buildTemporaryUrlsUsing</code> 方法。例如,如果你有一個控制器允許你下載透過通常不支援臨時 URL 的磁碟儲存的檔案,這可能很有用。通常,此方法應該從服務提供者的 <code>boot</code> 方法中呼叫:</p>
<pre><code class="language-php">&lt;?php

namespace App\Providers;

use DateTime;
use Illuminate\Support\Facades\Storage;
use Illuminate\Support\Facades\URL;
use Illuminate\Support\ServiceProvider;

class AppServiceProvider extends ServiceProvider
{
    /**
     * Bootstrap any application services.
     */
    public function boot(): void
    {
        Storage::disk(&#x27;local&#x27;)-&gt;buildTemporaryUrlsUsing(
            function (string $path, DateTime $expiration, array $options) {
                return URL::temporarySignedRoute(
                    &#x27;files.download&#x27;,
                    $expiration,
                    array_merge($options, [&#x27;path&#x27; =&gt; $path])
                );
            }
        );
    }
}
</code></pre>
<a name="temporary-upload-urls"></a>
<h4 id="臨時上傳-url"><a href="#臨時上傳-url">臨時上傳 URL</a></h4>
<blockquote>
<p>[!WARNING]
產生臨時上傳 URL 的能力僅由 <code>s3</code> 驅動程式支援。</p>
</blockquote>
<p>如果你需要產生一個可用於從客戶端應用程式直接上傳檔案的臨時 URL,你可以使用 <code>temporaryUploadUrl</code> 方法。此方法接受路徑和 <code>DateTime</code> 實例,指定 URL 應該何時過期。<code>temporaryUploadUrl</code> 方法返回一個關聯陣列,可以解構為上傳 URL 和應與上傳請求一起包含的標頭:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Storage;

[&#x27;url&#x27; =&gt; $url, &#x27;headers&#x27; =&gt; $headers] = Storage::temporaryUploadUrl(
    &#x27;file.jpg&#x27;, now()-&gt;addMinutes(5)
);
</code></pre>
<p>此方法主要用於無伺服器環境,需要客戶端應用程式直接上傳檔案到雲端儲存系統(如 Amazon S3)。</p>
<a name="file-metadata"></a>
<h3 id="檔案元資料"><a href="#檔案元資料">檔案元資料</a></h3>
<p>除了讀取和寫入檔案外,Laravel 還可以提供有關檔案本身的資訊。例如,<code>size</code> 方法可用於取得檔案的大小(以位元組為單位):</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Storage;

$size = Storage::size(&#x27;file.jpg&#x27;);
</code></pre>
<p><code>lastModified</code> 方法返回檔案上次修改時間的 UNIX 時間戳:</p>
<pre><code class="language-php">$time = Storage::lastModified(&#x27;file.jpg&#x27;);
</code></pre>
<p>可以透過 <code>mimeType</code> 方法取得給定檔案的 MIME 類型:</p>
<pre><code class="language-php">$mime = Storage::mimeType(&#x27;file.jpg&#x27;);
</code></pre>
<a name="file-paths"></a>
<h4 id="檔案路徑"><a href="#檔案路徑">檔案路徑</a></h4>
<p>你可以使用 <code>path</code> 方法來取得給定檔案的路徑。如果你使用 <code>local</code> 驅動程式,這將返回檔案的絕對路徑。如果你使用 <code>s3</code> 驅動程式,此方法將返回 S3 儲存桶中檔案的相對路徑:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Storage;

$path = Storage::path(&#x27;file.jpg&#x27;);
</code></pre>
<a name="storing-files"></a>
<h2 id="儲存檔案"><a href="#儲存檔案">儲存檔案</a></h2>
<p><code>put</code> 方法可用於將檔案內容儲存到磁碟。你也可以將 PHP <code>resource</code> 傳遞給 <code>put</code> 方法,它將使用 Flysystem 的底層串流支援。請記住,所有檔案路徑都應相對於為磁碟設定的「根」位置指定:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Storage;

Storage::put(&#x27;file.jpg&#x27;, $contents);

Storage::put(&#x27;file.jpg&#x27;, $resource);
</code></pre>
<a name="failed-writes"></a>
<h4 id="寫入失敗"><a href="#寫入失敗">寫入失敗</a></h4>
<p>如果 <code>put</code> 方法(或其他「寫入」操作)無法將檔案寫入磁碟,將返回 <code>false</code>:</p>
<pre><code class="language-php">if (! Storage::put(&#x27;file.jpg&#x27;, $contents)) {
    // The file could not be written to disk...
}
</code></pre>
<p>如果你願意,你可以在檔案系統磁碟的設定陣列中定義 <code>throw</code> 選項。當此選項定義為 <code>true</code> 時,「寫入」方法(如 <code>put</code>)將在寫入操作失敗時拋出 <code>League\Flysystem\UnableToWriteFile</code> 實例:</p>
<pre><code class="language-php">&#x27;public&#x27; =&gt; [
    &#x27;driver&#x27; =&gt; &#x27;local&#x27;,
    // ...
    &#x27;throw&#x27; =&gt; true,
],
</code></pre>
<a name="prepending-appending-to-files"></a>
<h3 id="在檔案前面和後面新增內容"><a href="#在檔案前面和後面新增內容">在檔案前面和後面新增內容</a></h3>
<p><code>prepend</code> 和 <code>append</code> 方法允許你寫入檔案的開頭或結尾:</p>
<pre><code class="language-php">Storage::prepend(&#x27;file.log&#x27;, &#x27;Prepended Text&#x27;);

Storage::append(&#x27;file.log&#x27;, &#x27;Appended Text&#x27;);
</code></pre>
<a name="copying-moving-files"></a>
<h3 id="複製和移動檔案"><a href="#複製和移動檔案">複製和移動檔案</a></h3>
<p><code>copy</code> 方法可用於將現有檔案複製到磁碟上的新位置,而 <code>move</code> 方法可用於重新命名或將現有檔案移動到新位置:</p>
<pre><code class="language-php">Storage::copy(&#x27;old/file.jpg&#x27;, &#x27;new/file.jpg&#x27;);

Storage::move(&#x27;old/file.jpg&#x27;, &#x27;new/file.jpg&#x27;);
</code></pre>
<a name="automatic-streaming"></a>
<h3 id="自動串流"><a href="#自動串流">自動串流</a></h3>
<p>將檔案串流到儲存可顯著減少記憶體使用。如果你希望 Laravel 自動管理將給定檔案串流到你的儲存位置,你可以使用 <code>putFile</code> 或 <code>putFileAs</code> 方法。此方法接受 <code>Illuminate\Http\File</code> 或 <code>Illuminate\Http\UploadedFile</code> 實例,並將自動將檔案串流到你所需的位置:</p>
<pre><code class="language-php">use Illuminate\Http\File;
use Illuminate\Support\Facades\Storage;

// Automatically generate a unique ID for filename...
$path = Storage::putFile(&#x27;photos&#x27;, new File(&#x27;/path/to/photo&#x27;));

// Manually specify a filename...
$path = Storage::putFileAs(&#x27;photos&#x27;, new File(&#x27;/path/to/photo&#x27;), &#x27;photo.jpg&#x27;);
</code></pre>
<p>關於 <code>putFile</code> 方法有幾個重要的事項要注意。請注意,我們只指定了目錄名稱,而不是檔案名稱。預設情況下,<code>putFile</code> 方法將產生一個唯一 ID 作為檔案名稱。檔案的擴展名將透過檢查檔案的 MIME 類型來確定。檔案的路徑將由 <code>putFile</code> 方法返回,因此你可以將路徑(包括產生的檔案名稱)儲存在資料庫中。</p>
<p><code>putFile</code> 和 <code>putFileAs</code> 方法也接受一個參數來指定儲存檔案的「可見性」。如果你將檔案儲存在雲端磁碟(如 Amazon S3)上,並希望檔案透過產生的 URL 公開可存取,這特別有用:</p>
<pre><code class="language-php">Storage::putFile(&#x27;photos&#x27;, new File(&#x27;/path/to/photo&#x27;), &#x27;public&#x27;);
</code></pre>
<a name="file-uploads"></a>
<h3 id="file-uploads"><a href="#file-uploads">File Uploads</a></h3>
<p>In web applications, one of the most common use-cases for storing files is storing user uploaded files such as photos and documents. Laravel makes it very easy to store uploaded files using the <code>store</code> method on an uploaded file instance. Call the <code>store</code> method with the path at which you wish to store the uploaded file:</p>
<pre><code class="language-php">&lt;?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;

class UserAvatarController extends Controller
{
    /**
     * Update the avatar for the user.
     */
    public function update(Request $request): string
    {
        $path = $request-&gt;file(&#x27;avatar&#x27;)-&gt;store(&#x27;avatars&#x27;);

        return $path;
    }
}
</code></pre>
<p>There are a few important things to note about this example. Note that we only specified a directory name, not a filename. By default, the <code>store</code> method will generate a unique ID to serve as the filename. The file&#x27;s extension will be determined by examining the file&#x27;s MIME type. The path to the file will be returned by the <code>store</code> method so you can store the path, including the generated filename, in your database.</p>
<p>You may also call the <code>putFile</code> method on the <code>Storage</code> facade to perform the same file storage operation as the example above:</p>
<pre><code class="language-php">$path = Storage::putFile(&#x27;avatars&#x27;, $request-&gt;file(&#x27;avatar&#x27;));
</code></pre>
<a name="specifying-a-file-name"></a>
<h4 id="specifying-a-file-name"><a href="#specifying-a-file-name">Specifying a File Name</a></h4>
<p>If you do not want a filename to be automatically assigned to your stored file, you may use the <code>storeAs</code> method, which receives the path, the filename, and the (optional) disk as its arguments:</p>
<pre><code class="language-php">$path = $request-&gt;file(&#x27;avatar&#x27;)-&gt;storeAs(
    &#x27;avatars&#x27;, $request-&gt;user()-&gt;id
);
</code></pre>
<p>You may also use the <code>putFileAs</code> method on the <code>Storage</code> facade, which will perform the same file storage operation as the example above:</p>
<pre><code class="language-php">$path = Storage::putFileAs(
    &#x27;avatars&#x27;, $request-&gt;file(&#x27;avatar&#x27;), $request-&gt;user()-&gt;id
);
</code></pre>
<blockquote>
<p>[!WARNING]
Unprintable and invalid unicode characters will automatically be removed from file paths. Therefore, you may wish to sanitize your file paths before passing them to Laravel&#x27;s file storage methods. File paths are normalized using the <code>League\Flysystem\WhitespacePathNormalizer::normalizePath</code> method.</p>
</blockquote>
<a name="specifying-a-disk"></a>
<h4 id="specifying-a-disk"><a href="#specifying-a-disk">Specifying a Disk</a></h4>
<p>By default, this uploaded file&#x27;s <code>store</code> method will use your default disk. If you would like to specify another disk, pass the disk name as the second argument to the <code>store</code> method:</p>
<pre><code class="language-php">$path = $request-&gt;file(&#x27;avatar&#x27;)-&gt;store(
    &#x27;avatars/&#x27;.$request-&gt;user()-&gt;id, &#x27;s3&#x27;
);
</code></pre>
<p>If you are using the <code>storeAs</code> method, you may pass the disk name as the third argument to the method:</p>
<pre><code class="language-php">$path = $request-&gt;file(&#x27;avatar&#x27;)-&gt;storeAs(
    &#x27;avatars&#x27;,
    $request-&gt;user()-&gt;id,
    &#x27;s3&#x27;
);
</code></pre>
<a name="other-uploaded-file-information"></a>
<h4 id="other-uploaded-file-information"><a href="#other-uploaded-file-information">Other Uploaded File Information</a></h4>
<p>If you would like to get the original name and extension of the uploaded file, you may do so using the <code>getClientOriginalName</code> and <code>getClientOriginalExtension</code> methods:</p>
<pre><code class="language-php">$file = $request-&gt;file(&#x27;avatar&#x27;);

$name = $file-&gt;getClientOriginalName();
$extension = $file-&gt;getClientOriginalExtension();
</code></pre>
<p>However, keep in mind that the <code>getClientOriginalName</code> and <code>getClientOriginalExtension</code> methods are considered unsafe, as the file name and extension may be tampered with by a malicious user. For this reason, you should typically prefer the <code>hashName</code> and <code>extension</code> methods to get a name and an extension for the given file upload:</p>
<pre><code class="language-php">$file = $request-&gt;file(&#x27;avatar&#x27;);

$name = $file-&gt;hashName(); // Generate a unique, random name...
$extension = $file-&gt;extension(); // Determine the file&#x27;s extension based on the file&#x27;s MIME type...
</code></pre>
<a name="file-visibility"></a>
<h3 id="檔案可見性"><a href="#檔案可見性">檔案可見性</a></h3>
<p>在 Laravel 的 Flysystem 整合中,「可見性」是跨多個平台的檔案權限的抽象。檔案可以被宣告為 <code>public</code> 或 <code>private</code>。當檔案被宣告為 <code>public</code> 時,你表示該檔案通常應該對其他人可存取。例如,當使用 S3 驅動程式時,你可以檢索 <code>public</code> 檔案的 URL。</p>
<p>你可以在透過 <code>put</code> 方法寫入檔案時設定可見性:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Storage;

Storage::put(&#x27;file.jpg&#x27;, $contents, &#x27;public&#x27;);
</code></pre>
<p>如果檔案已經被儲存,可以透過 <code>getVisibility</code> 和 <code>setVisibility</code> 方法檢索和設定其可見性:</p>
<pre><code class="language-php">$visibility = Storage::getVisibility(&#x27;file.jpg&#x27;);

Storage::setVisibility(&#x27;file.jpg&#x27;, &#x27;public&#x27;);
</code></pre>
<p>當與上傳檔案互動時,你可以使用 <code>storePublicly</code> 和 <code>storePubliclyAs</code> 方法以 <code>public</code> 可見性儲存上傳的檔案:</p>
<pre><code class="language-php">$path = $request-&gt;file(&#x27;avatar&#x27;)-&gt;storePublicly(&#x27;avatars&#x27;, &#x27;s3&#x27;);

$path = $request-&gt;file(&#x27;avatar&#x27;)-&gt;storePubliclyAs(
    &#x27;avatars&#x27;,
    $request-&gt;user()-&gt;id,
    &#x27;s3&#x27;
);
</code></pre>
<a name="local-files-and-visibility"></a>
<h4 id="本地檔案和可見性"><a href="#本地檔案和可見性">本地檔案和可見性</a></h4>
<p>當使用 <code>local</code> 驅動程式時,<code>public</code> <a href="#file-visibility">可見性</a>轉換為目錄的 <code>0755</code> 權限和檔案的 <code>0644</code> 權限。你可以在應用程式的 <code>filesystems</code> 設定檔中修改權限映射:</p>
<pre><code class="language-php">&#x27;local&#x27; =&gt; [
    &#x27;driver&#x27; =&gt; &#x27;local&#x27;,
    &#x27;root&#x27; =&gt; storage_path(&#x27;app&#x27;),
    &#x27;permissions&#x27; =&gt; [
        &#x27;file&#x27; =&gt; [
            &#x27;public&#x27; =&gt; 0644,
            &#x27;private&#x27; =&gt; 0600,
        ],
        &#x27;dir&#x27; =&gt; [
            &#x27;public&#x27; =&gt; 0755,
            &#x27;private&#x27; =&gt; 0700,
        ],
    ],
    &#x27;throw&#x27; =&gt; false,
],
</code></pre>
<a name="deleting-files"></a>
<h2 id="刪除檔案"><a href="#刪除檔案">刪除檔案</a></h2>
<p><code>delete</code> 方法接受單個檔案名稱或要刪除的檔案陣列:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Storage;

Storage::delete(&#x27;file.jpg&#x27;);

Storage::delete([&#x27;file.jpg&#x27;, &#x27;file2.jpg&#x27;]);
</code></pre>
<p>如果必要,你可以指定應從中刪除檔案的磁碟:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Storage;

Storage::disk(&#x27;s3&#x27;)-&gt;delete(&#x27;path/file.jpg&#x27;);
</code></pre>
<a name="directories"></a>
<h2 id="目錄"><a href="#目錄">目錄</a></h2>
<a name="get-all-files-within-a-directory"></a>
<h4 id="取得目錄中的所有檔案"><a href="#取得目錄中的所有檔案">取得目錄中的所有檔案</a></h4>
<p><code>files</code> 方法返回給定目錄中所有檔案的陣列。如果你想檢索給定目錄中的所有檔案(包括子目錄),你可以使用 <code>allFiles</code> 方法:</p>
<pre><code class="language-php">use Illuminate\Support\Facades\Storage;

$files = Storage::files($directory);

$files = Storage::allFiles($directory);
</code></pre>
<a name="get-all-directories-within-a-directory"></a>
<h4 id="取得目錄中的所有子目錄"><a href="#取得目錄中的所有子目錄">取得目錄中的所有子目錄</a></h4>
<p><code>directories</code> 方法返回給定目錄中所有目錄的陣列。如果你想檢索給定目錄中的所有目錄(包括子目錄),你可以使用 <code>allDirectories</code> 方法:</p>
<pre><code class="language-php">$directories = Storage::directories($directory);

$directories = Storage::allDirectories($directory);
</code></pre>
<a name="create-a-directory"></a>
<h4 id="建立目錄"><a href="#建立目錄">建立目錄</a></h4>
<p><code>makeDirectory</code> 方法將建立給定的目錄,包括任何需要的子目錄:</p>
<pre><code class="language-php">Storage::makeDirectory($directory);
</code></pre>
<a name="delete-a-directory"></a>
<h4 id="刪除目錄"><a href="#刪除目錄">刪除目錄</a></h4>
<p>最後,<code>deleteDirectory</code> 方法可用於刪除目錄及其所有檔案:</p>
<pre><code class="language-php">Storage::deleteDirectory($directory);
</code></pre>
<a name="testing"></a>
<h2 id="測試"><a href="#測試">測試</a></h2>
<p><code>Storage</code> facade 的 <code>fake</code> 方法允許你輕鬆產生一個僽磁碟,結合 <code>Illuminate\Http\UploadedFile</code> 類別的檔案產生工具,大大簡化了檔案上傳的測試。例如:</p>
<pre><code class="language-php">&lt;?php

use Illuminate\Http\UploadedFile;
use Illuminate\Support\Facades\Storage;

test(&#x27;albums can be uploaded&#x27;, function () {
    Storage::fake(&#x27;photos&#x27;);

    $response = $this-&gt;json(&#x27;POST&#x27;, &#x27;/photos&#x27;, [
        UploadedFile::fake()-&gt;image(&#x27;photo1.jpg&#x27;),
        UploadedFile::fake()-&gt;image(&#x27;photo2.jpg&#x27;)
    ]);

    // Assert one or more files were stored...
    Storage::disk(&#x27;photos&#x27;)-&gt;assertExists(&#x27;photo1.jpg&#x27;);
    Storage::disk(&#x27;photos&#x27;)-&gt;assertExists([&#x27;photo1.jpg&#x27;, &#x27;photo2.jpg&#x27;]);

    // Assert one or more files were not stored...
    Storage::disk(&#x27;photos&#x27;)-&gt;assertMissing(&#x27;missing.jpg&#x27;);
    Storage::disk(&#x27;photos&#x27;)-&gt;assertMissing([&#x27;missing.jpg&#x27;, &#x27;non-existing.jpg&#x27;]);

    // Assert that the number of files in a given directory matches the expected count...
    Storage::disk(&#x27;photos&#x27;)-&gt;assertCount(&#x27;/wallpapers&#x27;, 2);

    // Assert that a given directory is empty...
    Storage::disk(&#x27;photos&#x27;)-&gt;assertDirectoryEmpty(&#x27;/wallpapers&#x27;);
});
</code></pre>
<pre><code class="language-php">&lt;?php

namespace Tests\Feature;

use Illuminate\Http\UploadedFile;
use Illuminate\Support\Facades\Storage;
use Tests\TestCase;

class ExampleTest extends TestCase
{
    public function test_albums_can_be_uploaded(): void
    {
        Storage::fake(&#x27;photos&#x27;);

        $response = $this-&gt;json(&#x27;POST&#x27;, &#x27;/photos&#x27;, [
            UploadedFile::fake()-&gt;image(&#x27;photo1.jpg&#x27;),
            UploadedFile::fake()-&gt;image(&#x27;photo2.jpg&#x27;)
        ]);

        // Assert one or more files were stored...
        Storage::disk(&#x27;photos&#x27;)-&gt;assertExists(&#x27;photo1.jpg&#x27;);
        Storage::disk(&#x27;photos&#x27;)-&gt;assertExists([&#x27;photo1.jpg&#x27;, &#x27;photo2.jpg&#x27;]);

        // Assert one or more files were not stored...
        Storage::disk(&#x27;photos&#x27;)-&gt;assertMissing(&#x27;missing.jpg&#x27;);
        Storage::disk(&#x27;photos&#x27;)-&gt;assertMissing([&#x27;missing.jpg&#x27;, &#x27;non-existing.jpg&#x27;]);

        // Assert that the number of files in a given directory matches the expected count...
        Storage::disk(&#x27;photos&#x27;)-&gt;assertCount(&#x27;/wallpapers&#x27;, 2);

        // Assert that a given directory is empty...
        Storage::disk(&#x27;photos&#x27;)-&gt;assertDirectoryEmpty(&#x27;/wallpapers&#x27;);
    }
}
</code></pre>
<p>預設情況下,<code>fake</code> 方法將刪除其臨時目錄中的所有檔案。如果你想保留這些檔案,你可以使用「persistentFake」方法。有關測試檔案上傳的更多資訊,你可以查閱 <a href="/docs/http-tests#testing-file-uploads">HTTP 測試文件中有關檔案上傳的資訊</a>。</p>
<blockquote>
<p>[!WARNING]
<code>image</code> 方法需要 <a href="https://www.php.net/manual/en/book.image.php">GD 擴展</a>。</p>
</blockquote>
<a name="custom-filesystems"></a>
<h2 id="自訂檔案系統"><a href="#自訂檔案系統">自訂檔案系統</a></h2>
<p>Laravel 的 Flysystem 整合提供了幾個開箱即用的「驅動程式」支援;但是,Flysystem 不僅限於這些,它還有許多其他儲存系統的適配器。如果你想在 Laravel 應用程式中使用這些額外的適配器之一,你可以建立自訂驅動程式。</p>
<p>為了定義自訂檔案系統,你需要一個 Flysystem 適配器。讓我們將社群維護的 Dropbox 適配器新增到我們的專案:</p>
<pre><code class="language-shell">composer require spatie/flysystem-dropbox
</code></pre>
<p>接下來,你可以在應用程式的其中一個<a href="/docs/providers">服務提供者</a>的 <code>boot</code> 方法中註冊驅動程式。要完成此操作,你應該使用 <code>Storage</code> facade 的 <code>extend</code> 方法:</p>
<pre><code class="language-php">&lt;?php

namespace App\Providers;

use Illuminate\Contracts\Foundation\Application;
use Illuminate\Filesystem\FilesystemAdapter;
use Illuminate\Support\Facades\Storage;
use Illuminate\Support\ServiceProvider;
use League\Flysystem\Filesystem;
use Spatie\Dropbox\Client as DropboxClient;
use Spatie\FlysystemDropbox\DropboxAdapter;

class AppServiceProvider extends ServiceProvider
{
    /**
     * Register any application services.
     */
    public function register(): void
    {
        // ...
    }

    /**
     * Bootstrap any application services.
     */
    public function boot(): void
    {
        Storage::extend(&#x27;dropbox&#x27;, function (Application $app, array $config) {
            $adapter = new DropboxAdapter(new DropboxClient(
                $config[&#x27;authorization_token&#x27;]
            ));

            return new FilesystemAdapter(
                new Filesystem($adapter, $config),
                $adapter,
                $config
            );
        });
    }
}
</code></pre>
<p><code>extend</code> 方法的第一個參數是驅動程式的名稱,第二個是接收 <code>$app</code> 和 <code>$config</code> 變數的閉包。閉包必須返回 <code>Illuminate\Filesystem\FilesystemAdapter</code> 的實例。<code>$config</code> 變數包含在 <code>config/filesystems.php</code> 中為指定磁碟定義的值。</p>
<p>一旦你建立並註冊了擴展的服務提供者,你就可以在 <code>config/filesystems.php</code> 設定檔中使用 <code>dropbox</code> 驅動程式。</p></article></div></div><!--$--><!--/$--></main></div><script src="/_next/static/chunks/cbd55ab9639e1e66.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n4:I[93649,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/2b257daea29fbb42.js\"],\"DocsSidebar\"]\n6:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"ViewportBoundary\"]\nb:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"MetadataBoundary\"]\nd:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/bc6e94e20a39014e.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"kE5s4wNidqhVn8fA906WC\",\"c\":[\"\",\"docs\",\"filesystem\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"filesystem\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/bc6e94e20a39014e.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/796e69ae18b2784c.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/2b257daea29fbb42.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"div\",null,{\"className\":\"flex min-h-screen bg-background\",\"children\":[[\"$\",\"$L4\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 relative\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"className\":\"container mx-auto py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-3xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl\",\"children\":\"File Storage\"}],[\"$\",\"p\",null,{\"className\":\"text-xl text-muted-foreground mt-2\",\"children\":\"Laravel 提供強大的檔案系統抽象\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"file-storage\",\"children\":[\"$\",\"a\",null,{\"href\":\"#file-storage\",\"children\":\"File Storage\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#introduction\",\"children\":\"簡介 (Introduction)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#configuration\",\"children\":\"設定 (Configuration)\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#the-local-driver\",\"children\":\"Local 驅動程式 (The Local Driver)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#the-public-disk\",\"children\":\"Public 磁碟 (The Public Disk)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#driver-prerequisites\",\"children\":\"驅動程式先決條件 (Driver Prerequisites)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#scoped-and-read-only-filesystems\",\"children\":\"作用域和唯讀檔案系統 (Scoped and Read-Only Filesystems)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#amazon-s3-compatible-filesystems\",\"children\":\"Amazon S3 相容檔案系統 (Amazon S3 Compatible Filesystems)\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#obtaining-disk-instances\",\"children\":\"取得磁碟實例 (Obtaining Disk Instances)\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#on-demand-disks\",\"children\":\"隨選磁碟 (On-Demand Disks)\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#retrieving-files\",\"children\":\"檢索檔案 (Retrieving Files)\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#downloading-files\",\"children\":\"下載檔案 (Downloading Files)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#file-urls\",\"children\":\"檔案 URL (File URLs)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#temporary-urls\",\"children\":\"臨時 URL (Temporary URLs)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#file-metadata\",\"children\":\"檔案元資料 (File Metadata)\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#storing-files\",\"children\":\"儲存檔案 (Storing Files)\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#prepending-appending-to-files\",\"children\":\"在檔案前面和後面新增內容 (Prepending and Appending To Files)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#copying-moving-files\",\"children\":\"複製和移動檔案 (Copying and Moving Files)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#automatic-streaming\",\"children\":\"自動串流 (Automatic Streaming)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#file-uploads\",\"children\":\"檔案上傳 (File Uploads)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#file-visibility\",\"children\":\"檔案可見性 (File Visibility)\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#deleting-files\",\"children\":\"刪除檔案 (Deleting Files)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#directories\",\"children\":\"目錄 (Directories)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#testing\",\"children\":\"測試 (Testing)\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#custom-filesystems\",\"children\":\"自訂檔案系統 (Custom Filesystems)\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"introduction\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"簡介\",\"children\":[\"$\",\"a\",null,{\"href\":\"#簡介\",\"children\":\"簡介\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Laravel 提供了強大的檔案系統抽象,感謝 Frank de Jonge 的出色 \",[\"$\",\"a\",null,{\"href\":\"https://github.com/thephpleague/flysystem\",\"children\":\"Flysystem\"}],\" PHP 套件。Laravel Flysystem 整合提供了簡單的驅動程式來處理本地檔案系統、SFTP 和 Amazon S3。更好的是,在本地開發機器和生產伺服器之間切換這些儲存選項非常簡單,因為每個系統的 API 保持一致。\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"configuration\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"設定\",\"children\":[\"$\",\"a\",null,{\"href\":\"#設定\",\"children\":\"設定\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Laravel 的檔案系統設定檔位於 \",[\"$\",\"code\",null,{\"children\":\"config/filesystems.php\"}],\"。在此檔案中,你可以設定所有檔案系統「磁碟」。每個磁碟代表一個特定的儲存驅動程式和儲存位置。設定檔中包含了每個支援的驅動程式的範例設定,因此你可以修改設定以反映你的儲存喜好和憑證。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"local\"}],\" 驅動程式與儲存在執行 Laravel 應用程式的伺服器上的檔案互動,而 \",[\"$\",\"code\",null,{\"children\":\"sftp\"}],\" 儲存驅動程式用於基於 SSH 鍵的 FTP。\",[\"$\",\"code\",null,{\"children\":\"s3\"}],\" 驅動程式用於寫入 Amazon 的 S3 雲端儲存服務。\"]}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"[!NOTE]\\n你可以設定任意數量的磁碟,甚至可以有多個使用相同驅動程式的磁碟。\"}],\"\\n\"]}],\"\\n\",\"$Le\",\"\\n\",\"$Lf\",\"\\n\",\"$L10\",\"\\n\",\"$L11\",\"\\n\",\"$L12\",\"\\n\",\"$L13\",\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\",\"\\n\",\"$L55\",\"\\n\",\"$L56\",\"\\n\",\"$L57\",\"\\n\",\"$L58\",\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\",\"\\n\",\"$L5c\",\"\\n\",\"$L5d\",\"\\n\",\"$L5e\",\"\\n\",\"$L5f\",\"\\n\",\"$L60\",\"\\n\",\"$L61\",\"\\n\",\"$L62\",\"\\n\",\"$L63\",\"\\n\",\"$L64\",\"\\n\",\"$L65\",\"\\n\",\"$L66\",\"\\n\",\"$L67\",\"\\n\",\"$L68\",\"\\n\",\"$L69\",\"\\n\",\"$L6a\",\"\\n\",\"$L6b\",\"\\n\",\"$L6c\",\"\\n\",\"$L6d\",\"\\n\",\"$L6e\",\"\\n\",\"$L6f\",\"\\n\",\"$L70\",\"\\n\",\"$L71\",\"\\n\",\"$L72\",\"\\n\",\"$L73\",\"\\n\",\"$L74\",\"\\n\",\"$L75\",\"\\n\",\"$L76\",\"\\n\",\"$L77\",\"\\n\",\"$L78\",\"\\n\",\"$L79\",\"\\n\",\"$L7a\",\"\\n\",\"$L7b\",\"\\n\",\"$L7c\",\"\\n\",\"$L7d\",\"\\n\",\"$L7e\",\"\\n\",\"$L7f\",\"\\n\",\"$L80\",\"\\n\",\"$L81\",\"\\n\",\"$L82\",\"\\n\",\"$L83\",\"\\n\",\"$L84\",\"\\n\",\"$L85\",\"\\n\",\"$L86\",\"\\n\",\"$L87\",\"\\n\",\"$L88\",\"\\n\",\"$L89\",\"\\n\",\"$L8a\",\"\\n\",\"$L8b\",\"\\n\",\"$L8c\",\"\\n\",\"$L8d\",\"\\n\",\"$L8e\",\"\\n\",\"$L8f\",\"\\n\",\"$L90\",\"\\n\",\"$L91\",\"\\n\",\"$L92\",\"\\n\",\"$L93\",\"\\n\",\"$L94\",\"\\n\",\"$L95\",\"\\n\",\"$L96\",\"\\n\",\"$L97\",\"\\n\",\"$L98\",\"\\n\",\"$L99\",\"\\n\",\"$L9a\",\"\\n\",\"$L9b\",\"\\n\",\"$L9c\",\"\\n\",\"$L9d\",\"\\n\",\"$L9e\",\"\\n\",\"$L9f\",\"\\n\",\"$La0\",\"\\n\",\"$La1\",\"\\n\",\"$La2\",\"\\n\",\"$La3\",\"\\n\",\"$La4\",\"\\n\",\"$La5\",\"\\n\",\"$La6\",\"\\n\",\"$La7\",\"\\n\",\"$La8\",\"\\n\",\"$La9\",\"\\n\",\"$Laa\",\"\\n\",\"$Lab\",\"\\n\",\"$Lac\",\"\\n\",\"$Lad\",\"\\n\",\"$Lae\",\"\\n\",\"$Laf\",\"\\n\",\"$Lb0\",\"\\n\",\"$Lb1\",\"\\n\",\"$Lb2\",\"\\n\",\"$Lb3\",\"\\n\",\"$Lb4\",\"\\n\",\"$Lb5\",\"\\n\",\"$Lb6\",\"\\n\",\"$Lb7\",\"\\n\",\"$Lb8\",\"\\n\",\"$Lb9\",\"\\n\",\"$Lba\",\"\\n\",\"$Lbb\",\"\\n\",\"$Lbc\",\"\\n\",\"$Lbd\",\"\\n\",\"$Lbe\",\"\\n\",\"$Lbf\",\"\\n\",\"$Lc0\",\"\\n\",\"$Lc1\",\"\\n\",\"$Lc2\",\"\\n\",\"$Lc3\",\"\\n\",\"$Lc4\",\"\\n\",\"$Lc5\",\"\\n\",\"$Lc6\",\"\\n\",\"$Lc7\",\"\\n\",\"$Lc8\",\"\\n\",\"$Lc9\",\"\\n\",\"$Lca\",\"\\n\",\"$Lcb\",\"\\n\",\"$Lcc\",\"\\n\",\"$Lcd\",\"\\n\",\"$Lce\",\"\\n\",\"$Lcf\",\"\\n\",\"$Ld0\",\"\\n\",\"$Ld1\",\"\\n\",\"$Ld2\",\"\\n\",\"$Ld3\",\"\\n\",\"$Ld4\",\"\\n\",\"$Ld5\",\"\\n\",\"$Ld6\",\"\\n\",\"$Ld7\",\"\\n\",\"$Ld8\",\"\\n\",\"$Ld9\",\"\\n\",\"$Lda\",\"\\n\",\"$Ldb\",\"\\n\",\"$Ldc\",\"\\n\",\"$Ldd\",\"\\n\",\"$Lde\",\"\\n\",\"$Ldf\",\"\\n\",\"$Le0\",\"\\n\",\"$Le1\",\"\\n\",\"$Le2\",\"\\n\",\"$Le3\",\"\\n\",\"$Le4\",\"\\n\",\"$Le5\",\"\\n\",\"$Le6\",\"\\n\",\"$Le7\",\"\\n\",\"$Le8\",\"\\n\",\"$Le9\",\"\\n\",\"$Lea\",\"\\n\",\"$Leb\",\"\\n\",\"$Lec\",\"\\n\",\"$Led\",\"\\n\",\"$Lee\",\"\\n\",\"$Lef\",\"\\n\",\"$Lf0\",\"\\n\",\"$Lf1\",\"\\n\",\"$Lf2\"]}]]}]}]\n"])</script><script>self.__next_f.push([1,"e:[\"$\",\"a\",null,{\"name\":\"the-local-driver\"}]\nf:[\"$\",\"h3\",null,{\"id\":\"local-驅動程式\",\"children\":[\"$\",\"a\",null,{\"href\":\"#local-驅動程式\",\"children\":\"Local 驅動程式\"}]}]\n10:[\"$\",\"p\",null,{\"children\":[\"當使用 \",[\"$\",\"code\",null,{\"children\":\"local\"}],\" 驅動程式時,所有檔案操作都是相對於你的 \",[\"$\",\"code\",null,{\"children\":\"filesystems\"}],\" 設定檔中定義的 \",[\"$\",\"code\",null,{\"children\":\"root\"}],\" 目錄。預設情況下,此值設定為 \",[\"$\",\"code\",null,{\"children\":\"storage/app/private\"}],\" 目錄。因此,以下方法將寫入 \",[\"$\",\"code\",null,{\"children\":\"storage/app/private/example.txt\"}],\":\"]}]\n11:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Storage;\\n\\nStorage::disk('local')-\u003eput('example.txt', 'Contents');\\n\"}]}]\n12:[\"$\",\"a\",null,{\"name\":\"the-public-disk\"}]\n13:[\"$\",\"h3\",null,{\"id\":\"public-磁碟\",\"children\":[\"$\",\"a\",null,{\"href\":\"#public-磁碟\",\"children\":\"Public 磁碟\"}]}]\n14:[\"$\",\"p\",null,{\"children\":[\"應用程式的 \",[\"$\",\"code\",null,{\"children\":\"filesystems\"}],\" 設定檔中包含的 \",[\"$\",\"code\",null,{\"children\":\"public\"}],\" 磁碟用於將公開可存取的檔案。預設情況下,\",[\"$\",\"code\",null,{\"children\":\"public\"}],\" 磁碟使用 \",[\"$\",\"code\",null,{\"children\":\"local\"}],\" 驅動程式並將其檔案儲存在 \",[\"$\",\"code\",null,{\"children\":\"storage/app/public\"}],\" 中。\"]}]\n15:[\"$\",\"p\",null,{\"children\":[\"如果你的 \",[\"$\",\"code\",null,{\"children\":\"public\"}],\" 磁碟使用 \",[\"$\",\"code\",null,{\"children\":\"local\"}],\" 驅動程式並且你想讓這些檔案從 Web 可存取,你應該從來源目錄 \",[\"$\",\"code\",null,{\"children\":\"storage/app/public\"}],\" 到目標目錄 \",[\"$\",\"code\",null,{\"children\":\"public/storage\"}],\" 建立一個符號連結:\"]}]\n16:[\"$\",\"p\",null,{\"children\":[\"要建立符號連結,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"storage:link\"}],\" Artisan 指令:\"]}]\n17:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan storage:link\\n\"}]}]\n18:[\"$\",\"p\",null,{\"children\":[\"一旦檔案被儲存並建立了符號連結,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"asset\"}],\" 輔助函式建立檔案的 URL:\"]}]\n19:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"echo asset('storage/file.txt');\\n\"}]}]\n1a:[\"$\",\"p\",null,{\"children\":[\"你可以在 \",[\"$\",\"code\",null,{\"children\":\"filesystems\"}],\" 設定檔中設定額外的符號連結。當你執行 \",[\"$\",\"code\",null,{\"children\":\"storage:link\"}],\" 指令時,每個設定的連結都將被建立:\"]}]\n1b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'links' =\u003e [\\n    public_path('storage') =\u003e storage_path('app/public'),\\n    public_path('images') =\u003e storage_path('app/images'),\\n],\\n\"}]}]\n1c:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"storage:unlink\"}],\" 指令可用於銀毀你設定的符號連結:\"]}]\n1d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"php artisan storage:unlink\\n\"}]}]\n1e:[\"$\",\"a\",null,{\"name\":\"driver-prerequisites\"}]\n1f:[\"$\",\"h3\",null,{\"id\":\"驅動程式先決條件\",\"children\":[\"$\",\"a\",null,{\"href\":\"#驅動程式先決條件\",\"children\":\"驅動程式先決條件\"}]}]\n20:[\"$\",\"a\",null,{\"name\":\"s3-driver-configuration\"}]\n21:[\"$\",\"h4\",null,{\"id\":\"s3-驅動程式設定\",\"children\":[\"$\",\"a\",null,{\"href\":\"#s3-驅動程式設定\",\"children\":\"S3 驅動程式設定\"}]}]\n22:[\"$\",\"p\",null,{\"children\":\"在使用 S3 驅動程式之前,你需要透過 Composer 套件管理器安裝 Flysystem S3 套件:\"}]\n23:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"composer require league/flysystem-aws-s3-v3 \\\"^3.0\\\" --with-all-dependencies\\n\"}]}]\n24:[\"$\",\"p\",null,{\"children\":[\"S3 磁碟設定陣列位於你的 \",[\"$\",\"code\",null,{\"children\":\"config/filesystems.php\"}],\" 設定檔中。通常,你應該使用以下環境變數來設定你的 S3 資訊和憑證,這些環境變數由 \",[\"$\",\"code\",null,{\"children\":\"config/filesy"])</script><script>self.__next_f.push([1,"stems.php\"}],\" 設定檔引用:\"]}]\n25:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-ini\",\"children\":\"AWS_ACCESS_KEY_ID=\u003cyour-key-id\u003e\\nAWS_SECRET_ACCESS_KEY=\u003cyour-secret-access-key\u003e\\nAWS_DEFAULT_REGION=us-east-1\\nAWS_BUCKET=\u003cyour-bucket-name\u003e\\nAWS_USE_PATH_STYLE_ENDPOINT=false\\n\"}]}]\n26:[\"$\",\"p\",null,{\"children\":\"為了方便起見,這些環境變數與 AWS CLI 使用的命名慣例相匹配。\"}]\n27:[\"$\",\"a\",null,{\"name\":\"ftp-driver-configuration\"}]\n28:[\"$\",\"h4\",null,{\"id\":\"ftp-驅動程式設定\",\"children\":[\"$\",\"a\",null,{\"href\":\"#ftp-驅動程式設定\",\"children\":\"FTP 驅動程式設定\"}]}]\n29:[\"$\",\"p\",null,{\"children\":\"在使用 FTP 驅動程式之前,你需要透過 Composer 套件管理器安裝 Flysystem FTP 套件:\"}]\n2a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"composer require league/flysystem-ftp \\\"^3.0\\\"\\n\"}]}]\n2b:[\"$\",\"p\",null,{\"children\":[\"Laravel 的 Flysystem 整合與 FTP 配合得很好;但是,框架的預設 \",[\"$\",\"code\",null,{\"children\":\"config/filesystems.php\"}],\" 設定檔中不包含範例設定。如果你需要設定 FTP 檔案系統,你可以使用以下設定範例:\"]}]\n2c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'ftp' =\u003e [\\n    'driver' =\u003e 'ftp',\\n    'host' =\u003e env('FTP_HOST'),\\n    'username' =\u003e env('FTP_USERNAME'),\\n    'password' =\u003e env('FTP_PASSWORD'),\\n\\n    // Optional FTP Settings...\\n    // 'port' =\u003e env('FTP_PORT', 21),\\n    // 'root' =\u003e env('FTP_ROOT'),\\n    // 'passive' =\u003e true,\\n    // 'ssl' =\u003e true,\\n    // 'timeout' =\u003e 30,\\n],\\n\"}]}]\n2d:[\"$\",\"a\",null,{\"name\":\"sftp-driver-configuration\"}]\n2e:[\"$\",\"h4\",null,{\"id\":\"sftp-驅動程式設定\",\"children\":[\"$\",\"a\",null,{\"href\":\"#sftp-驅動程式設定\",\"children\":\"SFTP 驅動程式設定\"}]}]\n2f:[\"$\",\"p\",null,{\"children\":\"在使用 SFTP 驅動程式之前,你需要透過 Composer 套件管理器安裝 Flysystem SFTP 套件:\"}]\n30:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"composer require league/flysystem-sftp-v3 \\\"^3.0\\\"\\n\"}]}]\n31:[\"$\",\"p\",null,{\"children\":[\"Laravel 的 Flysystem 整合與 SFTP 配合得很好;但是,框架的預設 \",[\"$\",\"code\",null,{\"children\":\"config/filesystems.php\"}],\" 設定檔中不包含範例設定。如果你需要設定 SFTP 檔案系統,你可以使用以下設定範例:\"]}]\n32:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'sftp' =\u003e [\\n    'driver' =\u003e 'sftp',\\n    'host' =\u003e env('SFTP_HOST'),\\n\\n    // Settings for basic authentication...\\n    'username' =\u003e env('SFTP_USERNAME'),\\n    'password' =\u003e env('SFTP_PASSWORD'),\\n\\n    // Settings for SSH key-based authentication with encryption password...\\n    'privateKey' =\u003e env('SFTP_PRIVATE_KEY'),\\n    'passphrase' =\u003e env('SFTP_PASSPHRASE'),\\n\\n    // Settings for file / directory permissions...\\n    'visibility' =\u003e 'private', // `private` = 0600, `public` = 0644\\n    'directory_visibility' =\u003e 'private', // `private` = 0700, `public` = 0755\\n\\n    // Optional SFTP Settings...\\n    // 'hostFingerprint' =\u003e env('SFTP_HOST_FINGERPRINT'),\\n    // 'maxTries' =\u003e 4,\\n    // 'passphrase' =\u003e env('SFTP_PASSPHRASE'),\\n    // 'port' =\u003e env('SFTP_PORT', 22),\\n    // 'root' =\u003e env('SFTP_ROOT', ''),\\n    // 'timeout' =\u003e 30,\\n    // 'useAgent' =\u003e true,\\n],\\n\"}]}]\n33:[\"$\",\"a\",null,{\"name\":\"scoped-and-read-only-filesystems\"}]\n34:[\"$\",\"h3\",null,{\"id\":\"作用域和唯讀檔案系統\",\"children\":[\"$\",\"a\",null,{\"href\":\"#作用域和唯讀檔案系統\",\"children\":\"作用域和唯讀檔案系統\"}]}]\n35:[\"$\",\"p\",null,{\"children\":\"作用域磁碟允許你定義一個檔案系統,其中所有路徑都會自動以給定的路徑前綴為前綴。在建立作用域檔案系統磁碟之前,你需要透過 Composer 套件管理器安裝額外的 Flysystem 套件:\"}]\n36:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"composer require league/flysystem-path-prefixing \\\"^3.0\\\"\\n\"}]}]\n37:[\"$\",\"p\",null,{\"children\":[\"你可以透過定義使用 \",[\"$\",\"code\",null,{\"ch"])</script><script>self.__next_f.push([1,"ildren\":\"scoped\"}],\" 驅動程式的磁碟來建立任何現有檔案系統磁碟的路徑作用域實例。例如,你可以建立一個磁碟,將你現有的 \",[\"$\",\"code\",null,{\"children\":\"s3\"}],\" 磁碟的作用域限定到特定的路徑前綴,然後使用作用域磁碟的每個檔案操作都將使用指定的前綴:\"]}]\n38:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'s3-videos' =\u003e [\\n    'driver' =\u003e 'scoped',\\n    'disk' =\u003e 's3',\\n    'prefix' =\u003e 'path/to/videos',\\n],\\n\"}]}]\n39:[\"$\",\"p\",null,{\"children\":[\"「唯讀」磁碟允許你建立不允許寫入操作的檔案系統磁碟。在使用 \",[\"$\",\"code\",null,{\"children\":\"read-only\"}],\" 設定選項之前,你需要透過 Composer 套件管理器安裝額外的 Flysystem 套件:\"]}]\n3a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"composer require league/flysystem-read-only \\\"^3.0\\\"\\n\"}]}]\n3b:[\"$\",\"p\",null,{\"children\":[\"接下來,你可以在一個或多個磁碟的設定陣列中包含 \",[\"$\",\"code\",null,{\"children\":\"read-only\"}],\" 設定選項:\"]}]\n3c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'s3-videos' =\u003e [\\n    'driver' =\u003e 's3',\\n    // ...\\n    'read-only' =\u003e true,\\n],\\n\"}]}]\n3d:[\"$\",\"a\",null,{\"name\":\"amazon-s3-compatible-filesystems\"}]\n3e:[\"$\",\"h3\",null,{\"id\":\"amazon-s3-相容檔案系統\",\"children\":[\"$\",\"a\",null,{\"href\":\"#amazon-s3-相容檔案系統\",\"children\":\"Amazon S3 相容檔案系統\"}]}]\n3f:[\"$\",\"p\",null,{\"children\":[\"預設情況下,你的應用程式的 \",[\"$\",\"code\",null,{\"children\":\"filesystems\"}],\" 設定檔包含 \",[\"$\",\"code\",null,{\"children\":\"s3\"}],\" 磁碟的磁碟設定。除了使用此磁碟與 \",[\"$\",\"a\",null,{\"href\":\"https://aws.amazon.com/s3/\",\"children\":\"Amazon S3\"}],\" 互動外,你還可以使用它與任何 S3 相容檔案儲存服務互動,例如 \",[\"$\",\"a\",null,{\"href\":\"https://github.com/minio/minio\",\"children\":\"MinIO\"}],\"、\",[\"$\",\"a\",null,{\"href\":\"https://www.digitalocean.com/products/spaces/\",\"children\":\"DigitalOcean Spaces\"}],\"、\",[\"$\",\"a\",null,{\"href\":\"https://www.vultr.com/products/object-storage/\",\"children\":\"Vultr Object Storage\"}],\"、\",[\"$\",\"a\",null,{\"href\":\"https://www.cloudflare.com/developer-platform/products/r2/\",\"children\":\"Cloudflare R2\"}],\" 或 \",[\"$\",\"a\",null,{\"href\":\"https://www.hetzner.com/storage/object-storage/\",\"children\":\"Hetzner Cloud Storage\"}],\"。\"]}]\n40:[\"$\",\"p\",null,{\"children\":[\"通常,在更新磁碟的憑證以匹配你計劃使用的服務的憑證後,你只需要更新 \",[\"$\",\"code\",null,{\"children\":\"endpoint\"}],\" 設定選項的值。此選項的值通常透過 \",[\"$\",\"code\",null,{\"children\":\"AWS_ENDPOINT\"}],\" 環境變數定義:\"]}]\n41:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'endpoint' =\u003e env('AWS_ENDPOINT', 'https://minio:9000'),\\n\"}]}]\n42:[\"$\",\"a\",null,{\"name\":\"minio\"}]\n43:[\"$\",\"h4\",null,{\"id\":\"minio\",\"children\":[\"$\",\"a\",null,{\"href\":\"#minio\",\"children\":\"MinIO\"}]}]\n44:[\"$\",\"p\",null,{\"children\":[\"為了讓 Laravel 的 Flysystem 整合在使用 MinIO 時產生正確的 URL,你應該定義 \",[\"$\",\"code\",null,{\"children\":\"AWS_URL\"}],\" 環境變數,使其與你的應用程式的本地 URL 相匹配,並在 URL 路徑中包含儲存桶名稱:\"]}]\n45:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-ini\",\"children\":\"AWS_URL=http://localhost:9000/local\\n\"}]}]\n46:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\n當使用 MinIO 時,如果 \",[\"$\",\"code\",null,{\"children\":\"endpoint\"}],\" 無法被客戶端存取,透過 \",[\"$\",\"code\",null,{\"children\":\"temporaryUrl\"}],\" 方法產生臨時儲存 URL 可能無法工作。\"]}],\"\\n\"]}]\n47:[\"$\",\"a\",null,{\"name\":\"obtaining-disk-instances\"}]\n48:[\"$\",\"h2\",null,{\"id\":\"取得磁碟實例\",\"children\":[\"$\",\"a\",null,{\"href\":\"#取得磁碟實例\",\"children\":\"取得磁碟實例\"}]}]\n49:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Storage\"}],\" facade 可用於與你的任何設定磁碟互動。例如,你可以在 facade 上使用 \",[\"$\",\"co"])</script><script>self.__next_f.push([1,"de\",null,{\"children\":\"put\"}],\" 方法將頭像儲存到預設磁碟。如果你在 \",[\"$\",\"code\",null,{\"children\":\"Storage\"}],\" facade 上呼叫方法而不先呼叫 \",[\"$\",\"code\",null,{\"children\":\"disk\"}],\" 方法,該方法將自動傳遞給預設磁碟:\"]}]\n4a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Storage;\\n\\nStorage::put('avatars/1', $content);\\n\"}]}]\n4b:[\"$\",\"p\",null,{\"children\":[\"如果你的應用程式與多個磁碟互動,你可以在 \",[\"$\",\"code\",null,{\"children\":\"Storage\"}],\" facade 上使用 \",[\"$\",\"code\",null,{\"children\":\"disk\"}],\" 方法來處理特定磁碟上的檔案:\"]}]\n4c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Storage::disk('s3')-\u003eput('avatars/1', $content);\\n\"}]}]\n4d:[\"$\",\"a\",null,{\"name\":\"on-demand-disks\"}]\n4e:[\"$\",\"h3\",null,{\"id\":\"隨選磁碟\",\"children\":[\"$\",\"a\",null,{\"href\":\"#隨選磁碟\",\"children\":\"隨選磁碟\"}]}]\n4f:[\"$\",\"p\",null,{\"children\":[\"有時你可能希望在執行時期使用給定的設定建立磁碟,而不需要該設定實際存在於你的應用程式的 \",[\"$\",\"code\",null,{\"children\":\"filesystems\"}],\" 設定檔中。要完成此操作,你可以將設定陣列傳遞給 \",[\"$\",\"code\",null,{\"children\":\"Storage\"}],\" facade 的 \",[\"$\",\"code\",null,{\"children\":\"build\"}],\" 方法:\"]}]\n50:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Storage;\\n\\n$disk = Storage::build([\\n    'driver' =\u003e 'local',\\n    'root' =\u003e '/path/to/root',\\n]);\\n\\n$disk-\u003eput('image.jpg', $content);\\n\"}]}]\n51:[\"$\",\"a\",null,{\"name\":\"retrieving-files\"}]\n52:[\"$\",\"h2\",null,{\"id\":\"檢索檔案\",\"children\":[\"$\",\"a\",null,{\"href\":\"#檢索檔案\",\"children\":\"檢索檔案\"}]}]\n53:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"get\"}],\" 方法可用於檢索檔案的內容。該方法將返回檔案的原始字串內容。請記住,所有檔案路徑都應相對於磁碟的「根」位置指定:\"]}]\n54:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$contents = Storage::get('file.jpg');\\n\"}]}]\n55:[\"$\",\"p\",null,{\"children\":[\"如果你檢索的檔案包含 JSON,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"json\"}],\" 方法來檢索檔案並解碼其內容:\"]}]\n56:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$orders = Storage::json('orders.json');\\n\"}]}]\n57:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"exists\"}],\" 方法可用於確定磁碟上是否存在檔案:\"]}]\n58:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"if (Storage::disk('s3')-\u003eexists('file.jpg')) {\\n    // ...\\n}\\n\"}]}]\n59:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"missing\"}],\" 方法可用於確定磁碟中是否缺少檔案:\"]}]\n5a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"if (Storage::disk('s3')-\u003emissing('file.jpg')) {\\n    // ...\\n}\\n\"}]}]\n5b:[\"$\",\"a\",null,{\"name\":\"downloading-files\"}]\n5c:[\"$\",\"h3\",null,{\"id\":\"下載檔案\",\"children\":[\"$\",\"a\",null,{\"href\":\"#下載檔案\",\"children\":\"下載檔案\"}]}]\n5d:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"download\"}],\" 方法可用於產生強制使用者瀏覽器下載給定路徑檔案的回應。\",[\"$\",\"code\",null,{\"children\":\"download\"}],\" 方法接受檔案名稱作為方法的第二個參數,這將決定下載檔案的使用者看到的檔案名稱。最後,你可以將 HTTP 標頭陣列作為方法的第三個參數傳遞:\"]}]\n5e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"return Storage::download('file.jpg');\\n\\nreturn Storage::download('file.jpg', $name, $headers);\\n\"}]}]\n5f:[\"$\",\"a\",null,{\"name\":\"file-urls\"}]\n60:[\"$\",\"h3\",null,{\"id\":\"檔案-url\",\"children\":[\"$\",\"a\",null,{\"href\":\"#檔案-url\",\"children\":\"檔案 URL\"}]}]\n61:[\"$\",\"p\",null,{\"children\":[\"你可以使用 \",[\"$\",\"code\",null,{\"children\":\"url\"}],\" 方法來取得給定檔案的 URL。如果你使用 \",[\"$\",\""])</script><script>self.__next_f.push([1,"code\",null,{\"children\":\"local\"}],\" 驅動程式,這通常只會在給定路徑前面加上 \",[\"$\",\"code\",null,{\"children\":\"/storage\"}],\" 並返回檔案的相對 URL。如果你使用 \",[\"$\",\"code\",null,{\"children\":\"s3\"}],\" 驅動程式,將返回完全限定的遠端 URL:\"]}]\n62:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Storage;\\n\\n$url = Storage::url('file.jpg');\\n\"}]}]\n63:[\"$\",\"p\",null,{\"children\":[\"使用 \",[\"$\",\"code\",null,{\"children\":\"local\"}],\" 驅動程式時,所有應該公開可存取的檔案都應該放在 \",[\"$\",\"code\",null,{\"children\":\"storage/app/public\"}],\" 目錄中。此外,你應該在 \",[\"$\",\"code\",null,{\"children\":\"public/storage\"}],\" \",[\"$\",\"a\",null,{\"href\":\"#the-public-disk\",\"children\":\"建立符號連結\"}],\",指向 \",[\"$\",\"code\",null,{\"children\":\"storage/app/public\"}],\" 目錄。\"]}]\n64:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\n使用 \",[\"$\",\"code\",null,{\"children\":\"local\"}],\" 驅動程式時,\",[\"$\",\"code\",null,{\"children\":\"url\"}],\" 的返回值不是 URL 編碼的。因此,我們建議始終使用會建立有效 URL 的名稱來儲存檔案。\"]}],\"\\n\"]}]\n65:[\"$\",\"a\",null,{\"name\":\"url-host-customization\"}]\n66:[\"$\",\"h4\",null,{\"id\":\"url-主機自訂\",\"children\":[\"$\",\"a\",null,{\"href\":\"#url-主機自訂\",\"children\":\"URL 主機自訂\"}]}]\n67:[\"$\",\"p\",null,{\"children\":[\"如果你想修改使用 \",[\"$\",\"code\",null,{\"children\":\"Storage\"}],\" facade 產生的 URL 的主機,你可以在磁碟的設定陣列中新增或更改 \",[\"$\",\"code\",null,{\"children\":\"url\"}],\" 選項:\"]}]\n68:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'public' =\u003e [\\n    'driver' =\u003e 'local',\\n    'root' =\u003e storage_path('app/public'),\\n    'url' =\u003e env('APP_URL').'/storage',\\n    'visibility' =\u003e 'public',\\n    'throw' =\u003e false,\\n],\\n\"}]}]\n69:[\"$\",\"a\",null,{\"name\":\"temporary-urls\"}]\n6a:[\"$\",\"h3\",null,{\"id\":\"臨時-url\",\"children\":[\"$\",\"a\",null,{\"href\":\"#臨時-url\",\"children\":\"臨時 URL\"}]}]\n6b:[\"$\",\"p\",null,{\"children\":[\"使用 \",[\"$\",\"code\",null,{\"children\":\"temporaryUrl\"}],\" 方法,你可以為使用 \",[\"$\",\"code\",null,{\"children\":\"local\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"s3\"}],\" 驅動程式儲存的檔案建立臨時 URL。此方法接受路徑和 \",[\"$\",\"code\",null,{\"children\":\"DateTime\"}],\" 實例,指定 URL 應該何時過期:\"]}]\n6c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Storage;\\n\\n$url = Storage::temporaryUrl(\\n    'file.jpg', now()-\u003eaddMinutes(5)\\n);\\n\"}]}]\n6d:[\"$\",\"a\",null,{\"name\":\"enabling-local-temporary-urls\"}]\n6e:[\"$\",\"h4\",null,{\"id\":\"啟用本地臨時-url\",\"children\":[\"$\",\"a\",null,{\"href\":\"#啟用本地臨時-url\",\"children\":\"啟用本地臨時 URL\"}]}]\n6f:[\"$\",\"p\",null,{\"children\":[\"如果你在 \",[\"$\",\"code\",null,{\"children\":\"local\"}],\" 驅動程式引入臨時 URL 支援之前就開始開發應用程式,你可能需要啟用本地臨時 URL。要這樣做,請在 \",[\"$\",\"code\",null,{\"children\":\"config/filesystems.php\"}],\" 設定檔中將 \",[\"$\",\"code\",null,{\"children\":\"serve\"}],\" 選項新增到你的 \",[\"$\",\"code\",null,{\"children\":\"local\"}],\" 磁碟的設定陣列:\"]}]\n70:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'local' =\u003e [\\n    'driver' =\u003e 'local',\\n    'root' =\u003e storage_path('app/private'),\\n    'serve' =\u003e true, // [tl! add]\\n    'throw' =\u003e false,\\n],\\n\"}]}]\n71:[\"$\",\"a\",null,{\"name\":\"s3-request-parameters\"}]\n72:[\"$\",\"h4\",null,{\"id\":\"s3-請求參數\",\"children\":[\"$\",\"a\",null,{\"href\":\"#s3-請求參數\",\"children\":\"S3 請求參數\"}]}]\n73:[\"$\",\"p\",null,{\"children\":[\"如果你需要指定額外的 \",[\"$\",\"a\",null,{\"href\":\"https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectGET.html#RESTObjectGET-requests\",\"children\":\"S3 請求參數\"}],\",你可以將請求參數陣列作為第三個參數傳遞給 \",[\"$\",\"code\",null,{\"children\":\"temporaryUrl\"}],\" 方法:\"]}]\n74:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-p"])</script><script>self.__next_f.push([1,"hp\",\"children\":\"$$url = Storage::temporaryUrl(\\n    'file.jpg',\\n    now()-\u003eaddMinutes(5),\\n    [\\n        'ResponseContentType' =\u003e 'application/octet-stream',\\n        'ResponseContentDisposition' =\u003e 'attachment; filename=file2.jpg',\\n    ]\\n);\\n\"}]}]\n75:[\"$\",\"a\",null,{\"name\":\"customizing-temporary-urls\"}]\n76:[\"$\",\"h4\",null,{\"id\":\"自訂臨時-url\",\"children\":[\"$\",\"a\",null,{\"href\":\"#自訂臨時-url\",\"children\":\"自訂臨時 URL\"}]}]\n77:[\"$\",\"p\",null,{\"children\":[\"如果你需要自訂特定儲存磁碟的臨時 URL 的建立方式,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"buildTemporaryUrlsUsing\"}],\" 方法。例如,如果你有一個控制器允許你下載透過通常不支援臨時 URL 的磁碟儲存的檔案,這可能很有用。通常,此方法應該從服務提供者的 \",[\"$\",\"code\",null,{\"children\":\"boot\"}],\" 方法中呼叫:\"]}]\n78:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Providers;\\n\\nuse DateTime;\\nuse Illuminate\\\\Support\\\\Facades\\\\Storage;\\nuse Illuminate\\\\Support\\\\Facades\\\\URL;\\nuse Illuminate\\\\Support\\\\ServiceProvider;\\n\\nclass AppServiceProvider extends ServiceProvider\\n{\\n    /**\\n     * Bootstrap any application services.\\n     */\\n    public function boot(): void\\n    {\\n        Storage::disk('local')-\u003ebuildTemporaryUrlsUsing(\\n            function (string $path, DateTime $expiration, array $options) {\\n                return URL::temporarySignedRoute(\\n                    'files.download',\\n                    $expiration,\\n                    array_merge($options, ['path' =\u003e $path])\\n                );\\n            }\\n        );\\n    }\\n}\\n\"}]}]\n79:[\"$\",\"a\",null,{\"name\":\"temporary-upload-urls\"}]\n7a:[\"$\",\"h4\",null,{\"id\":\"臨時上傳-url\",\"children\":[\"$\",\"a\",null,{\"href\":\"#臨時上傳-url\",\"children\":\"臨時上傳 URL\"}]}]\n7b:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\n產生臨時上傳 URL 的能力僅由 \",[\"$\",\"code\",null,{\"children\":\"s3\"}],\" 驅動程式支援。\"]}],\"\\n\"]}]\n7c:[\"$\",\"p\",null,{\"children\":[\"如果你需要產生一個可用於從客戶端應用程式直接上傳檔案的臨時 URL,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"temporaryUploadUrl\"}],\" 方法。此方法接受路徑和 \",[\"$\",\"code\",null,{\"children\":\"DateTime\"}],\" 實例,指定 URL 應該何時過期。\",[\"$\",\"code\",null,{\"children\":\"temporaryUploadUrl\"}],\" 方法返回一個關聯陣列,可以解構為上傳 URL 和應與上傳請求一起包含的標頭:\"]}]\n7d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Storage;\\n\\n['url' =\u003e $url, 'headers' =\u003e $headers] = Storage::temporaryUploadUrl(\\n    'file.jpg', now()-\u003eaddMinutes(5)\\n);\\n\"}]}]\n7e:[\"$\",\"p\",null,{\"children\":\"此方法主要用於無伺服器環境,需要客戶端應用程式直接上傳檔案到雲端儲存系統(如 Amazon S3)。\"}]\n7f:[\"$\",\"a\",null,{\"name\":\"file-metadata\"}]\n80:[\"$\",\"h3\",null,{\"id\":\"檔案元資料\",\"children\":[\"$\",\"a\",null,{\"href\":\"#檔案元資料\",\"children\":\"檔案元資料\"}]}]\n81:[\"$\",\"p\",null,{\"children\":[\"除了讀取和寫入檔案外,Laravel 還可以提供有關檔案本身的資訊。例如,\",[\"$\",\"code\",null,{\"children\":\"size\"}],\" 方法可用於取得檔案的大小(以位元組為單位):\"]}]\n82:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Storage;\\n\\n$size = Storage::size('file.jpg');\\n\"}]}]\n83:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"lastModified\"}],\" 方法返回檔案上次修改時間的 UNIX 時間戳:\"]}]\n84:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$time = Storage::lastModified('file.jpg');\\n\"}]}]\n85:[\"$\",\"p\",null,{\"children\":[\"可以透過 \",[\"$\",\"code\",null,{\"children\":\"mimeType\"}],\" 方法取得給定檔案的 MIME 類型:\"]}]\n86:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$mime = Storage::mimeType('file.jpg');\\n\"}]}]\n87:[\"$\",\"a\",null,{\"name\":\"file-paths\"}]\n8"])</script><script>self.__next_f.push([1,"8:[\"$\",\"h4\",null,{\"id\":\"檔案路徑\",\"children\":[\"$\",\"a\",null,{\"href\":\"#檔案路徑\",\"children\":\"檔案路徑\"}]}]\n89:[\"$\",\"p\",null,{\"children\":[\"你可以使用 \",[\"$\",\"code\",null,{\"children\":\"path\"}],\" 方法來取得給定檔案的路徑。如果你使用 \",[\"$\",\"code\",null,{\"children\":\"local\"}],\" 驅動程式,這將返回檔案的絕對路徑。如果你使用 \",[\"$\",\"code\",null,{\"children\":\"s3\"}],\" 驅動程式,此方法將返回 S3 儲存桶中檔案的相對路徑:\"]}]\n8a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Storage;\\n\\n$path = Storage::path('file.jpg');\\n\"}]}]\n8b:[\"$\",\"a\",null,{\"name\":\"storing-files\"}]\n8c:[\"$\",\"h2\",null,{\"id\":\"儲存檔案\",\"children\":[\"$\",\"a\",null,{\"href\":\"#儲存檔案\",\"children\":\"儲存檔案\"}]}]\n8d:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"put\"}],\" 方法可用於將檔案內容儲存到磁碟。你也可以將 PHP \",[\"$\",\"code\",null,{\"children\":\"resource\"}],\" 傳遞給 \",[\"$\",\"code\",null,{\"children\":\"put\"}],\" 方法,它將使用 Flysystem 的底層串流支援。請記住,所有檔案路徑都應相對於為磁碟設定的「根」位置指定:\"]}]\n8e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Storage;\\n\\nStorage::put('file.jpg', $contents);\\n\\nStorage::put('file.jpg', $resource);\\n\"}]}]\n8f:[\"$\",\"a\",null,{\"name\":\"failed-writes\"}]\n90:[\"$\",\"h4\",null,{\"id\":\"寫入失敗\",\"children\":[\"$\",\"a\",null,{\"href\":\"#寫入失敗\",\"children\":\"寫入失敗\"}]}]\n91:[\"$\",\"p\",null,{\"children\":[\"如果 \",[\"$\",\"code\",null,{\"children\":\"put\"}],\" 方法(或其他「寫入」操作)無法將檔案寫入磁碟,將返回 \",[\"$\",\"code\",null,{\"children\":\"false\"}],\":\"]}]\n92:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"if (! Storage::put('file.jpg', $contents)) {\\n    // The file could not be written to disk...\\n}\\n\"}]}]\n93:[\"$\",\"p\",null,{\"children\":[\"如果你願意,你可以在檔案系統磁碟的設定陣列中定義 \",[\"$\",\"code\",null,{\"children\":\"throw\"}],\" 選項。當此選項定義為 \",[\"$\",\"code\",null,{\"children\":\"true\"}],\" 時,「寫入」方法(如 \",[\"$\",\"code\",null,{\"children\":\"put\"}],\")將在寫入操作失敗時拋出 \",[\"$\",\"code\",null,{\"children\":\"League\\\\Flysystem\\\\UnableToWriteFile\"}],\" 實例:\"]}]\n94:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'public' =\u003e [\\n    'driver' =\u003e 'local',\\n    // ...\\n    'throw' =\u003e true,\\n],\\n\"}]}]\n95:[\"$\",\"a\",null,{\"name\":\"prepending-appending-to-files\"}]\n96:[\"$\",\"h3\",null,{\"id\":\"在檔案前面和後面新增內容\",\"children\":[\"$\",\"a\",null,{\"href\":\"#在檔案前面和後面新增內容\",\"children\":\"在檔案前面和後面新增內容\"}]}]\n97:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"prepend\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"append\"}],\" 方法允許你寫入檔案的開頭或結尾:\"]}]\n98:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Storage::prepend('file.log', 'Prepended Text');\\n\\nStorage::append('file.log', 'Appended Text');\\n\"}]}]\n99:[\"$\",\"a\",null,{\"name\":\"copying-moving-files\"}]\n9a:[\"$\",\"h3\",null,{\"id\":\"複製和移動檔案\",\"children\":[\"$\",\"a\",null,{\"href\":\"#複製和移動檔案\",\"children\":\"複製和移動檔案\"}]}]\n9b:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"copy\"}],\" 方法可用於將現有檔案複製到磁碟上的新位置,而 \",[\"$\",\"code\",null,{\"children\":\"move\"}],\" 方法可用於重新命名或將現有檔案移動到新位置:\"]}]\n9c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Storage::copy('old/file.jpg', 'new/file.jpg');\\n\\nStorage::move('old/file.jpg', 'new/file.jpg');\\n\"}]}]\n9d:[\"$\",\"a\",null,{\"name\":\"automatic-streaming\"}]\n9e:[\"$\",\"h3\",null,{\"id\":\"自動串流\",\"children\":[\"$\",\"a\",null,{\"href\":\"#自動串流\",\"children\":\"自動串流\"}]}]\n9f:[\"$\",\"p\",null,{\"children\":[\"將檔案串流到儲存可顯著減少記憶體使用。如果你希望 Laravel 自動管理將給定檔"])</script><script>self.__next_f.push([1,"案串流到你的儲存位置,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"putFile\"}],\" 或 \",[\"$\",\"code\",null,{\"children\":\"putFileAs\"}],\" 方法。此方法接受 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\File\"}],\" 或 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\UploadedFile\"}],\" 實例,並將自動將檔案串流到你所需的位置:\"]}]\na0:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Http\\\\File;\\nuse Illuminate\\\\Support\\\\Facades\\\\Storage;\\n\\n// Automatically generate a unique ID for filename...\\n$path = Storage::putFile('photos', new File('/path/to/photo'));\\n\\n// Manually specify a filename...\\n$path = Storage::putFileAs('photos', new File('/path/to/photo'), 'photo.jpg');\\n\"}]}]\na1:[\"$\",\"p\",null,{\"children\":[\"關於 \",[\"$\",\"code\",null,{\"children\":\"putFile\"}],\" 方法有幾個重要的事項要注意。請注意,我們只指定了目錄名稱,而不是檔案名稱。預設情況下,\",[\"$\",\"code\",null,{\"children\":\"putFile\"}],\" 方法將產生一個唯一 ID 作為檔案名稱。檔案的擴展名將透過檢查檔案的 MIME 類型來確定。檔案的路徑將由 \",[\"$\",\"code\",null,{\"children\":\"putFile\"}],\" 方法返回,因此你可以將路徑(包括產生的檔案名稱)儲存在資料庫中。\"]}]\na2:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"putFile\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"putFileAs\"}],\" 方法也接受一個參數來指定儲存檔案的「可見性」。如果你將檔案儲存在雲端磁碟(如 Amazon S3)上,並希望檔案透過產生的 URL 公開可存取,這特別有用:\"]}]\na3:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Storage::putFile('photos', new File('/path/to/photo'), 'public');\\n\"}]}]\na4:[\"$\",\"a\",null,{\"name\":\"file-uploads\"}]\na5:[\"$\",\"h3\",null,{\"id\":\"file-uploads\",\"children\":[\"$\",\"a\",null,{\"href\":\"#file-uploads\",\"children\":\"File Uploads\"}]}]\na6:[\"$\",\"p\",null,{\"children\":[\"In web applications, one of the most common use-cases for storing files is storing user uploaded files such as photos and documents. Laravel makes it very easy to store uploaded files using the \",[\"$\",\"code\",null,{\"children\":\"store\"}],\" method on an uploaded file instance. Call the \",[\"$\",\"code\",null,{\"children\":\"store\"}],\" method with the path at which you wish to store the uploaded file:\"]}]\na7:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Http\\\\Controllers;\\n\\nuse Illuminate\\\\Http\\\\Request;\\n\\nclass UserAvatarController extends Controller\\n{\\n    /**\\n     * Update the avatar for the user.\\n     */\\n    public function update(Request $request): string\\n    {\\n        $path = $request-\u003efile('avatar')-\u003estore('avatars');\\n\\n        return $path;\\n    }\\n}\\n\"}]}]\na8:[\"$\",\"p\",null,{\"children\":[\"There are a few important things to note about this example. Note that we only specified a directory name, not a filename. By default, the \",[\"$\",\"code\",null,{\"children\":\"store\"}],\" method will generate a unique ID to serve as the filename. The file's extension will be determined by examining the file's MIME type. The path to the file will be returned by the \",[\"$\",\"code\",null,{\"children\":\"store\"}],\" method so you can store the path, including the generated filename, in your database.\"]}]\na9:[\"$\",\"p\",null,{\"children\":[\"You may also call the \",[\"$\",\"code\",null,{\"children\":\"putFile\"}],\" method on the \",[\"$\",\"code\",null,{\"children\":\"Storage\"}],\" facade to perform the same file storage operation as the example above:\"]}]\naa:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$path = Storage::putFile('avatars', $request-\u003efile('avatar'));\\n\"}]}]\nab:[\"$\",\"a\",null,{\"name\":\"specifying-a-file-name\"}]\nac:[\"$\",\"h4\",null,{\"id\":\"specifying-a-file-name\",\"children\":[\"$\",\"a\",null,{\"href\":\"#specifying-a-file-name\",\"children\":\"Specifying a File Name\"}]}]\nad:[\"$\",\"p\",null,{\"children\":[\"If you do not want a filename to be automatically assigned to your stored file, you may use the \",[\"$\",\"code\",null,{\"children\":\"storeAs\"}],"])</script><script>self.__next_f.push([1,"\" method, which receives the path, the filename, and the (optional) disk as its arguments:\"]}]\nae:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$path = $request-\u003efile('avatar')-\u003estoreAs(\\n    'avatars', $request-\u003euser()-\u003eid\\n);\\n\"}]}]\naf:[\"$\",\"p\",null,{\"children\":[\"You may also use the \",[\"$\",\"code\",null,{\"children\":\"putFileAs\"}],\" method on the \",[\"$\",\"code\",null,{\"children\":\"Storage\"}],\" facade, which will perform the same file storage operation as the example above:\"]}]\nb0:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$path = Storage::putFileAs(\\n    'avatars', $request-\u003efile('avatar'), $request-\u003euser()-\u003eid\\n);\\n\"}]}]\nb1:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\nUnprintable and invalid unicode characters will automatically be removed from file paths. Therefore, you may wish to sanitize your file paths before passing them to Laravel's file storage methods. File paths are normalized using the \",[\"$\",\"code\",null,{\"children\":\"League\\\\Flysystem\\\\WhitespacePathNormalizer::normalizePath\"}],\" method.\"]}],\"\\n\"]}]\nb2:[\"$\",\"a\",null,{\"name\":\"specifying-a-disk\"}]\nb3:[\"$\",\"h4\",null,{\"id\":\"specifying-a-disk\",\"children\":[\"$\",\"a\",null,{\"href\":\"#specifying-a-disk\",\"children\":\"Specifying a Disk\"}]}]\nb4:[\"$\",\"p\",null,{\"children\":[\"By default, this uploaded file's \",[\"$\",\"code\",null,{\"children\":\"store\"}],\" method will use your default disk. If you would like to specify another disk, pass the disk name as the second argument to the \",[\"$\",\"code\",null,{\"children\":\"store\"}],\" method:\"]}]\nb5:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$path = $request-\u003efile('avatar')-\u003estore(\\n    'avatars/'.$request-\u003euser()-\u003eid, 's3'\\n);\\n\"}]}]\nb6:[\"$\",\"p\",null,{\"children\":[\"If you are using the \",[\"$\",\"code\",null,{\"children\":\"storeAs\"}],\" method, you may pass the disk name as the third argument to the method:\"]}]\nb7:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$path = $request-\u003efile('avatar')-\u003estoreAs(\\n    'avatars',\\n    $request-\u003euser()-\u003eid,\\n    's3'\\n);\\n\"}]}]\nb8:[\"$\",\"a\",null,{\"name\":\"other-uploaded-file-information\"}]\nb9:[\"$\",\"h4\",null,{\"id\":\"other-uploaded-file-information\",\"children\":[\"$\",\"a\",null,{\"href\":\"#other-uploaded-file-information\",\"children\":\"Other Uploaded File Information\"}]}]\nba:[\"$\",\"p\",null,{\"children\":[\"If you would like to get the original name and extension of the uploaded file, you may do so using the \",[\"$\",\"code\",null,{\"children\":\"getClientOriginalName\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"getClientOriginalExtension\"}],\" methods:\"]}]\nbb:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$file = $request-\u003efile('avatar');\\n\\n$name = $file-\u003egetClientOriginalName();\\n$extension = $file-\u003egetClientOriginalExtension();\\n\"}]}]\nbc:[\"$\",\"p\",null,{\"children\":[\"However, keep in mind that the \",[\"$\",\"code\",null,{\"children\":\"getClientOriginalName\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"getClientOriginalExtension\"}],\" methods are considered unsafe, as the file name and extension may be tampered with by a malicious user. For this reason, you should typically prefer the \",[\"$\",\"code\",null,{\"children\":\"hashName\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"extension\"}],\" methods to get a name and an extension for the given file upload:\"]}]\nbd:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$file = $request-\u003efile('avatar');\\n\\n$name = $file-\u003ehashName(); // Generate a unique, random name...\\n$extension = $file-\u003eextension(); // Determine the file's extension based on the file's MIME type...\\n\"}]}]\nbe:[\"$\",\"a\",null,{\"name\":\"file-visibility\"}]\nbf:[\"$\",\"h3\",null,{\"id\":\"檔案可見性\",\"children\":[\"$\",\"a\",null,{\"href\":\"#檔案可見性\",\"children\":\"檔案可見性\"}]}]\nc0:[\"$\",\"p\",null,{\"children\":[\"在 Laravel 的 Flysystem 整合中,「可見性」是跨多個平台的檔案權限的抽象。檔案可以被宣告為 \",[\"$\",\"code\",null,{\"children\":\"public\"}],\" 或 \",[\"$\",\"code\",null,"])</script><script>self.__next_f.push([1,"{\"children\":\"private\"}],\"。當檔案被宣告為 \",[\"$\",\"code\",null,{\"children\":\"public\"}],\" 時,你表示該檔案通常應該對其他人可存取。例如,當使用 S3 驅動程式時,你可以檢索 \",[\"$\",\"code\",null,{\"children\":\"public\"}],\" 檔案的 URL。\"]}]\nc1:[\"$\",\"p\",null,{\"children\":[\"你可以在透過 \",[\"$\",\"code\",null,{\"children\":\"put\"}],\" 方法寫入檔案時設定可見性:\"]}]\nc2:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Storage;\\n\\nStorage::put('file.jpg', $contents, 'public');\\n\"}]}]\nc3:[\"$\",\"p\",null,{\"children\":[\"如果檔案已經被儲存,可以透過 \",[\"$\",\"code\",null,{\"children\":\"getVisibility\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"setVisibility\"}],\" 方法檢索和設定其可見性:\"]}]\nc4:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$visibility = Storage::getVisibility('file.jpg');\\n\\nStorage::setVisibility('file.jpg', 'public');\\n\"}]}]\nc5:[\"$\",\"p\",null,{\"children\":[\"當與上傳檔案互動時,你可以使用 \",[\"$\",\"code\",null,{\"children\":\"storePublicly\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"storePubliclyAs\"}],\" 方法以 \",[\"$\",\"code\",null,{\"children\":\"public\"}],\" 可見性儲存上傳的檔案:\"]}]\nc6:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$path = $request-\u003efile('avatar')-\u003estorePublicly('avatars', 's3');\\n\\n$path = $request-\u003efile('avatar')-\u003estorePubliclyAs(\\n    'avatars',\\n    $request-\u003euser()-\u003eid,\\n    's3'\\n);\\n\"}]}]\nc7:[\"$\",\"a\",null,{\"name\":\"local-files-and-visibility\"}]\nc8:[\"$\",\"h4\",null,{\"id\":\"本地檔案和可見性\",\"children\":[\"$\",\"a\",null,{\"href\":\"#本地檔案和可見性\",\"children\":\"本地檔案和可見性\"}]}]\nc9:[\"$\",\"p\",null,{\"children\":[\"當使用 \",[\"$\",\"code\",null,{\"children\":\"local\"}],\" 驅動程式時,\",[\"$\",\"code\",null,{\"children\":\"public\"}],\" \",[\"$\",\"a\",null,{\"href\":\"#file-visibility\",\"children\":\"可見性\"}],\"轉換為目錄的 \",[\"$\",\"code\",null,{\"children\":\"0755\"}],\" 權限和檔案的 \",[\"$\",\"code\",null,{\"children\":\"0644\"}],\" 權限。你可以在應用程式的 \",[\"$\",\"code\",null,{\"children\":\"filesystems\"}],\" 設定檔中修改權限映射:\"]}]\nca:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"'local' =\u003e [\\n    'driver' =\u003e 'local',\\n    'root' =\u003e storage_path('app'),\\n    'permissions' =\u003e [\\n        'file' =\u003e [\\n            'public' =\u003e 0644,\\n            'private' =\u003e 0600,\\n        ],\\n        'dir' =\u003e [\\n            'public' =\u003e 0755,\\n            'private' =\u003e 0700,\\n        ],\\n    ],\\n    'throw' =\u003e false,\\n],\\n\"}]}]\ncb:[\"$\",\"a\",null,{\"name\":\"deleting-files\"}]\ncc:[\"$\",\"h2\",null,{\"id\":\"刪除檔案\",\"children\":[\"$\",\"a\",null,{\"href\":\"#刪除檔案\",\"children\":\"刪除檔案\"}]}]\ncd:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"delete\"}],\" 方法接受單個檔案名稱或要刪除的檔案陣列:\"]}]\nce:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Storage;\\n\\nStorage::delete('file.jpg');\\n\\nStorage::delete(['file.jpg', 'file2.jpg']);\\n\"}]}]\ncf:[\"$\",\"p\",null,{\"children\":\"如果必要,你可以指定應從中刪除檔案的磁碟:\"}]\nd0:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Storage;\\n\\nStorage::disk('s3')-\u003edelete('path/file.jpg');\\n\"}]}]\nd1:[\"$\",\"a\",null,{\"name\":\"directories\"}]\nd2:[\"$\",\"h2\",null,{\"id\":\"目錄\",\"children\":[\"$\",\"a\",null,{\"href\":\"#目錄\",\"children\":\"目錄\"}]}]\nd3:[\"$\",\"a\",null,{\"name\":\"get-all-files-within-a-directory\"}]\nd4:[\"$\",\"h4\",null,{\"id\":\"取得目錄中的所有檔案\",\"children\":[\"$\",\"a\",null,{\"href\":\"#取得目錄中的所有檔案\",\"children\":\"取得目錄中的所有檔案\"}]}]\nd5:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"files\"}],\" 方法返回給定目錄中所有檔案的陣列。如果你想檢索給定目錄中的所有檔案(包括子目錄),你可以使用 \",[\"$\",\"code\",null,{\"children\":\"allFiles\"}],\" 方法:\"]}]\nd6:[\"$\",\"pre\",null,{\"children\""])</script><script>self.__next_f.push([1,":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"use Illuminate\\\\Support\\\\Facades\\\\Storage;\\n\\n$files = Storage::files($directory);\\n\\n$files = Storage::allFiles($directory);\\n\"}]}]\nd7:[\"$\",\"a\",null,{\"name\":\"get-all-directories-within-a-directory\"}]\nd8:[\"$\",\"h4\",null,{\"id\":\"取得目錄中的所有子目錄\",\"children\":[\"$\",\"a\",null,{\"href\":\"#取得目錄中的所有子目錄\",\"children\":\"取得目錄中的所有子目錄\"}]}]\nd9:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"directories\"}],\" 方法返回給定目錄中所有目錄的陣列。如果你想檢索給定目錄中的所有目錄(包括子目錄),你可以使用 \",[\"$\",\"code\",null,{\"children\":\"allDirectories\"}],\" 方法:\"]}]\nda:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$$directories = Storage::directories($directory);\\n\\n$directories = Storage::allDirectories($directory);\\n\"}]}]\ndb:[\"$\",\"a\",null,{\"name\":\"create-a-directory\"}]\ndc:[\"$\",\"h4\",null,{\"id\":\"建立目錄\",\"children\":[\"$\",\"a\",null,{\"href\":\"#建立目錄\",\"children\":\"建立目錄\"}]}]\ndd:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"makeDirectory\"}],\" 方法將建立給定的目錄,包括任何需要的子目錄:\"]}]\nde:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Storage::makeDirectory($directory);\\n\"}]}]\ndf:[\"$\",\"a\",null,{\"name\":\"delete-a-directory\"}]\ne0:[\"$\",\"h4\",null,{\"id\":\"刪除目錄\",\"children\":[\"$\",\"a\",null,{\"href\":\"#刪除目錄\",\"children\":\"刪除目錄\"}]}]\ne1:[\"$\",\"p\",null,{\"children\":[\"最後,\",[\"$\",\"code\",null,{\"children\":\"deleteDirectory\"}],\" 方法可用於刪除目錄及其所有檔案:\"]}]\ne2:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"Storage::deleteDirectory($directory);\\n\"}]}]\ne3:[\"$\",\"a\",null,{\"name\":\"testing\"}]\ne4:[\"$\",\"h2\",null,{\"id\":\"測試\",\"children\":[\"$\",\"a\",null,{\"href\":\"#測試\",\"children\":\"測試\"}]}]\ne5:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Storage\"}],\" facade 的 \",[\"$\",\"code\",null,{\"children\":\"fake\"}],\" 方法允許你輕鬆產生一個僽磁碟,結合 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Http\\\\UploadedFile\"}],\" 類別的檔案產生工具,大大簡化了檔案上傳的測試。例如:\"]}]\ne6:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nuse Illuminate\\\\Http\\\\UploadedFile;\\nuse Illuminate\\\\Support\\\\Facades\\\\Storage;\\n\\ntest('albums can be uploaded', function () {\\n    Storage::fake('photos');\\n\\n    $response = $this-\u003ejson('POST', '/photos', [\\n        UploadedFile::fake()-\u003eimage('photo1.jpg'),\\n        UploadedFile::fake()-\u003eimage('photo2.jpg')\\n    ]);\\n\\n    // Assert one or more files were stored...\\n    Storage::disk('photos')-\u003eassertExists('photo1.jpg');\\n    Storage::disk('photos')-\u003eassertExists(['photo1.jpg', 'photo2.jpg']);\\n\\n    // Assert one or more files were not stored...\\n    Storage::disk('photos')-\u003eassertMissing('missing.jpg');\\n    Storage::disk('photos')-\u003eassertMissing(['missing.jpg', 'non-existing.jpg']);\\n\\n    // Assert that the number of files in a given directory matches the expected count...\\n    Storage::disk('photos')-\u003eassertCount('/wallpapers', 2);\\n\\n    // Assert that a given directory is empty...\\n    Storage::disk('photos')-\u003eassertDirectoryEmpty('/wallpapers');\\n});\\n\"}]}]\nf3:T460,\u003c?php\n\nnamespace Tests\\Feature;\n\nuse Illuminate\\Http\\UploadedFile;\nuse Illuminate\\Support\\Facades\\Storage;\nuse Tests\\TestCase;\n\nclass ExampleTest extends TestCase\n{\n    public function test_albums_can_be_uploaded(): void\n    {\n        Storage::fake('photos');\n\n        $response = $this-\u003ejson('POST', '/photos', [\n            UploadedFile::fake()-\u003eimage('photo1.jpg'),\n            UploadedFile::fake()-\u003eimage('photo2.jpg')\n        ]);\n\n        // Assert one or more files were stored...\n        Storage::disk('photos')-\u003eassertExists('photo1.jpg');\n        Storage::disk('photos')-\u003eassertExists(['photo1.jpg', 'photo2.jpg']);\n\n        // Assert one or more files were not stored...\n        Storage::disk('photos')-\u003eassertMissing('missing.jpg');\n    "])</script><script>self.__next_f.push([1,"    Storage::disk('photos')-\u003eassertMissing(['missing.jpg', 'non-existing.jpg']);\n\n        // Assert that the number of files in a given directory matches the expected count...\n        Storage::disk('photos')-\u003eassertCount('/wallpapers', 2);\n\n        // Assert that a given directory is empty...\n        Storage::disk('photos')-\u003eassertDirectoryEmpty('/wallpapers');\n    }\n}\ne7:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"$f3\"}]}]\ne8:[\"$\",\"p\",null,{\"children\":[\"預設情況下,\",[\"$\",\"code\",null,{\"children\":\"fake\"}],\" 方法將刪除其臨時目錄中的所有檔案。如果你想保留這些檔案,你可以使用「persistentFake」方法。有關測試檔案上傳的更多資訊,你可以查閱 \",[\"$\",\"a\",null,{\"href\":\"/docs/http-tests#testing-file-uploads\",\"children\":\"HTTP 測試文件中有關檔案上傳的資訊\"}],\"。\"]}]\ne9:[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"[!WARNING]\\n\",[\"$\",\"code\",null,{\"children\":\"image\"}],\" 方法需要 \",[\"$\",\"a\",null,{\"href\":\"https://www.php.net/manual/en/book.image.php\",\"children\":\"GD 擴展\"}],\"。\"]}],\"\\n\"]}]\nea:[\"$\",\"a\",null,{\"name\":\"custom-filesystems\"}]\neb:[\"$\",\"h2\",null,{\"id\":\"自訂檔案系統\",\"children\":[\"$\",\"a\",null,{\"href\":\"#自訂檔案系統\",\"children\":\"自訂檔案系統\"}]}]\nec:[\"$\",\"p\",null,{\"children\":\"Laravel 的 Flysystem 整合提供了幾個開箱即用的「驅動程式」支援;但是,Flysystem 不僅限於這些,它還有許多其他儲存系統的適配器。如果你想在 Laravel 應用程式中使用這些額外的適配器之一,你可以建立自訂驅動程式。\"}]\ned:[\"$\",\"p\",null,{\"children\":\"為了定義自訂檔案系統,你需要一個 Flysystem 適配器。讓我們將社群維護的 Dropbox 適配器新增到我們的專案:\"}]\nee:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell\",\"children\":\"composer require spatie/flysystem-dropbox\\n\"}]}]\nef:[\"$\",\"p\",null,{\"children\":[\"接下來,你可以在應用程式的其中一個\",[\"$\",\"a\",null,{\"href\":\"/docs/providers\",\"children\":\"服務提供者\"}],\"的 \",[\"$\",\"code\",null,{\"children\":\"boot\"}],\" 方法中註冊驅動程式。要完成此操作,你應該使用 \",[\"$\",\"code\",null,{\"children\":\"Storage\"}],\" facade 的 \",[\"$\",\"code\",null,{\"children\":\"extend\"}],\" 方法:\"]}]\nf0:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-php\",\"children\":\"\u003c?php\\n\\nnamespace App\\\\Providers;\\n\\nuse Illuminate\\\\Contracts\\\\Foundation\\\\Application;\\nuse Illuminate\\\\Filesystem\\\\FilesystemAdapter;\\nuse Illuminate\\\\Support\\\\Facades\\\\Storage;\\nuse Illuminate\\\\Support\\\\ServiceProvider;\\nuse League\\\\Flysystem\\\\Filesystem;\\nuse Spatie\\\\Dropbox\\\\Client as DropboxClient;\\nuse Spatie\\\\FlysystemDropbox\\\\DropboxAdapter;\\n\\nclass AppServiceProvider extends ServiceProvider\\n{\\n    /**\\n     * Register any application services.\\n     */\\n    public function register(): void\\n    {\\n        // ...\\n    }\\n\\n    /**\\n     * Bootstrap any application services.\\n     */\\n    public function boot(): void\\n    {\\n        Storage::extend('dropbox', function (Application $app, array $config) {\\n            $adapter = new DropboxAdapter(new DropboxClient(\\n                $config['authorization_token']\\n            ));\\n\\n            return new FilesystemAdapter(\\n                new Filesystem($adapter, $config),\\n                $adapter,\\n                $config\\n            );\\n        });\\n    }\\n}\\n\"}]}]\nf1:[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"extend\"}],\" 方法的第一個參數是驅動程式的名稱,第二個是接收 \",[\"$\",\"code\",null,{\"children\":\"$$app\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"$$config\"}],\" 變數的閉包。閉包必須返回 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Filesystem\\\\FilesystemAdapter\"}],\" 的實例。\",[\"$\",\"code\",null,{\"children\":\"$$config\"}],\" 變數包含在 \",[\"$\",\"code\",null,{\"children\":\"config/filesystems.php\"}],\" 中為指定磁碟定義的值。\"]}]\nf2:[\"$\",\"p\",null,{\"children\":[\"一旦你建立並註冊了擴展的服務提供者,你就可以在 \",[\"$\",\"code\",null,{\"child"])</script><script>self.__next_f.push([1,"ren\":\"config/filesystems.php\"}],\" 設定檔中使用 \",[\"$\",\"code\",null,{\"children\":\"dropbox\"}],\" 驅動程式。\"]}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"f4:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$Lf4\",\"3\",{}]]\n8:null\n"])</script></body></html>