<!DOCTYPE html><!--oT9fkv1Rls7posDurDqoH--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/chunks/ce232d23a2a15dcf.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/cbd55ab9639e1e66.js"/><script src="/_next/static/chunks/87a939617be2fa8c.js" async=""></script><script src="/_next/static/chunks/8368f298651cbd89.js" async=""></script><script src="/_next/static/chunks/6740f161f60c6ab5.js" async=""></script><script src="/_next/static/chunks/turbopack-929fc2ce3ca903db.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/247eb132b7f7b574.js" async=""></script><script src="/_next/static/chunks/796e69ae18b2784c.js" async=""></script><script src="/_next/static/chunks/2b257daea29fbb42.js" async=""></script><meta name="next-size-adjust" content=""/><title>Create Next App</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased"><div hidden=""><!--$--><!--/$--></div><div class="flex min-h-screen bg-background"><div class="w-64 border-r bg-background h-screen sticky top-0 hidden md:block"><div class="p-6 font-bold text-xl border-b flex items-center gap-2"><span class="text-red-600">Laravel</span> Docs（中文）</div><div dir="ltr" data-slot="scroll-area" class="relative h-[calc(100vh-65px)]" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="p-4 space-y-2"><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>前言</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">發行說明</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>入門</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></button><div class="ml-4 mt-1 space-y-1"><a class="block" href="/docs/installation"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">安裝</button></a><a class="block" href="/docs/configuration"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">配置</button></a><a class="block" href="/docs/structure"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">目錄結構</button></a><a class="block" href="/docs/lifecycle"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">生命週期</button></a><a class="block" href="/docs/frontend"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">前端</button></a><a class="block" href="/docs/starter-kits"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">啟動套件</button></a><a class="block" href="/docs/deployment"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">部署</button></a></div></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>架構</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>基礎功能</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>深入探討</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>安全性</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>資料庫</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>Eloquent ORM</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>測試</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>其他</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div><button class="w-full flex items-center justify-between px-4 py-2 text-sm font-semibold text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors"><span>官方套件</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-4 w-4" aria-hidden="true"><path d="m9 18 6-6-6-6"></path></svg></button></div><div class="border-t pt-4 space-y-2"><a class="block" href="/docs/api"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">API 文件</button></a><a class="block" href="/docs/releases"><button data-slot="button" class="inline-flex items-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5 w-full justify-start font-normal text-sm">更新日誌</button></a></div></div></div></div></div></div><main class="flex-1 relative"><div class="container mx-auto py-10"><div class="mx-auto max-w-3xl"><div class="mb-8"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Request Lifecycle</h1><p class="text-xl text-muted-foreground mt-2">Request Lifecycle</p></div><article class="prose prose-slate dark:prose-invert max-w-none"><h1 id="請求生命週期-request-lifecycle"><a href="#請求生命週期-request-lifecycle">請求生命週期 (Request Lifecycle)</a></h1>
<ul>
<li><a href="#introduction">簡介</a></li>
<li><a href="#lifecycle-overview">生命週期概覽</a>
<ul>
<li><a href="#first-steps">第一步</a></li>
<li><a href="#http-console-kernels">HTTP / Console Kernels</a></li>
<li><a href="#service-providers">Service Providers</a></li>
<li><a href="#routing">路由</a></li>
<li><a href="#finishing-up">完成</a></li>
</ul>
</li>
<li><a href="#focus-on-service-providers">聚焦 Service Providers</a></li>
</ul>
<a name="introduction"></a>
<h2 id="簡介"><a href="#簡介">簡介</a></h2>
<p>在「現實世界」中使用任何工具時，如果您了解該工具的運作方式，您會感到更有信心。應用程式開發也不例外。當您了解開發工具的功能時，您會感到更自在並更有信心地使用它們。</p>
<p>本文件的目標是讓您對 Laravel 框架的運作方式有一個良好的、高層次的概覽。透過更了解整體框架，一切都會感覺不再那麼「神奇」，您將更有信心地建立您的應用程式。如果您不能立即理解所有術語，請不要灰心！試著掌握正在發生的事情的基本概念，隨著您探索文件的其他部分，您的知識將會增長。</p>
<a name="lifecycle-overview"></a>
<h2 id="生命週期概覽"><a href="#生命週期概覽">生命週期概覽</a></h2>
<a name="first-steps"></a>
<h3 id="第一步"><a href="#第一步">第一步</a></h3>
<p>所有進入 Laravel 應用程式的請求的入口點都是 <code>public/index.php</code> 檔案。您的 Web 伺服器 (Apache / Nginx) 設定將所有請求導向此檔案。<code>index.php</code> 檔案不包含太多程式碼。相反，它是載入框架其餘部分的起點。</p>
<p><code>index.php</code> 檔案載入 Composer 生成的自動載入定義，然後從 <code>bootstrap/app.php</code> 檢索 Laravel 應用程式的實例。Laravel 本身採取的第一個動作是建立應用程式 / <a href="/docs/container">Service Container</a> 的實例。</p>
<a name="http-console-kernels"></a>
<h3 id="http--console-kernels"><a href="#http--console-kernels">HTTP / Console Kernels</a></h3>
<p>接下來，傳入的請求會使用應用程式實例的 <code>handleRequest</code> 或 <code>handleCommand</code> 方法發送到 HTTP Kernel 或 Console Kernel，具體取決於進入應用程式的請求類型。這兩個 Kernels 作為所有請求流經的中心位置。現在，讓我們只關注 HTTP Kernel，它是 <code>Illuminate\Foundation\Http\Kernel</code> 的實例。</p>
<p>HTTP Kernel 定義了一個 <code>bootstrappers</code> 陣列，這些 bootstrappers 將在請求執行之前執行。這些 bootstrappers 設定錯誤處理、設定日誌記錄、<a href="/docs/configuration#environment-configuration">偵測應用程式環境</a>，並執行在實際處理請求之前需要完成的其他任務。通常，這些類別處理您不需要擔心的內部 Laravel 設定。</p>
<p>HTTP Kernel 還負責將請求傳遞給應用程式的 Middleware 堆疊。這些 Middleware 處理讀取和寫入 <a href="/docs/session">HTTP Session</a>、判斷應用程式是否處於維護模式、<a href="/docs/csrf">驗證 CSRF Token</a> 等等。我們很快就會詳細討論這些。</p>
<p>HTTP Kernel 的 <code>handle</code> 方法的方法簽章非常簡單：它接收一個 <code>Request</code> 並返回一個 <code>Response</code>。將 Kernel 想像成一個代表整個應用程式的大黑盒子。給它 HTTP 請求，它就會返回 HTTP 回應。</p>
<a name="service-providers"></a>
<h3 id="service-providers"><a href="#service-providers">Service Providers</a></h3>
<p>最重要的 Kernel 啟動動作之一是載入應用程式的 <a href="/docs/providers">Service Providers</a>。Service Providers 負責啟動框架的所有各種組件，例如資料庫、Queue、驗證和路由組件。</p>
<p>Laravel 將遍歷此 Providers 清單並實例化每個 Provider。實例化 Providers 後，將在所有 Providers 上呼叫 <code>register</code> 方法。然後，一旦所有 Providers 都已註冊，將在每個 Provider 上呼叫 <code>boot</code> 方法。這樣 Service Providers 就可以依賴於在執行其 <code>boot</code> 方法時已註冊並可用的每個 Container 綁定。</p>
<p>基本上，Laravel 提供的每個主要功能都是由 Service Provider 啟動和設定的。由於它們啟動和設定了框架提供的如此多功能，因此 Service Providers 是整個 Laravel 啟動過程中最重要的一環。</p>
<p>雖然框架內部使用了數十個 Service Providers，但您也可以選擇建立自己的 Service Providers。您可以在 <code>bootstrap/providers.php</code> 檔案中找到應用程式正在使用的使用者定義或第三方 Service Providers 的清單。</p>
<a name="routing"></a>
<h3 id="路由"><a href="#路由">路由</a></h3>
<p>一旦應用程式啟動並且所有 Service Providers 都已註冊，<code>Request</code> 將被移交給 Router 進行調度。Router 將把請求調度到路由或 Controller，以及執行任何特定於路由的 Middleware。</p>
<p>Middleware 提供了一種方便的機制來過濾或檢查進入應用程式的 HTTP 請求。例如，Laravel 包含一個驗證應用程式使用者是否已通過驗證的 Middleware。如果使用者未通過驗證，Middleware 會將使用者重新導向到登入畫面。但是，如果使用者已通過驗證，Middleware 將允許請求進一步進入應用程式。有些 Middleware 分配給應用程式內的所有路由，如 <code>PreventRequestsDuringMaintenance</code>，而有些則僅分配給特定路由或路由群組。您可以透過閱讀完整的 <a href="/docs/middleware">Middleware 文件</a> 來了解有關 Middleware 的更多資訊。</p>
<p>如果請求通過了所有符合的路由分配的 Middleware，則將執行路由或 Controller 方法，並且路由或 Controller 方法返回的回應將透過路由的 Middleware 鏈送回。</p>
<a name="finishing-up"></a>
<h3 id="完成"><a href="#完成">完成</a></h3>
<p>一旦路由或 Controller 方法返回回應，回應將向外傳回透過路由的 Middleware，讓應用程式有機會修改或檢查傳出的回應。</p>
<p>最後，一旦回應傳回透過 Middleware，HTTP Kernel 的 <code>handle</code> 方法將回應物件返回給應用程式實例的 <code>handleRequest</code>，此方法呼叫返回的回應上的 <code>send</code> 方法。<code>send</code> 方法將回應內容發送給使用者的網頁瀏覽器。我們現在已經完成了整個 Laravel 請求生命週期的旅程！</p>
<a name="focus-on-service-providers"></a>
<h2 id="聚焦-service-providers"><a href="#聚焦-service-providers">聚焦 Service Providers</a></h2>
<p>Service Providers 確實是啟動 Laravel 應用程式的關鍵。建立應用程式實例，註冊 Service Providers，並將請求移交給已啟動的應用程式。真的就這麼簡單！</p>
<p>牢固掌握 Laravel 應用程式是如何透過 Service Providers 建立和啟動的是非常有價值的。您的應用程式的使用者定義 Service Providers 儲存在 <code>app/Providers</code> 目錄中。</p>
<p>預設情況下，<code>AppServiceProvider</code> 相當空。此 Provider 是新增應用程式自己的啟動和 Service Container 綁定的一個好地方。對於大型應用程式，您可能希望建立幾個 Service Providers，每個都針對應用程式使用的特定服務進行更細粒度的啟動。</p></article></div></div><!--$--><!--/$--></main></div><script src="/_next/static/chunks/cbd55ab9639e1e66.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n3:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"default\"]\n4:I[93649,[\"/_next/static/chunks/796e69ae18b2784c.js\",\"/_next/static/chunks/2b257daea29fbb42.js\"],\"DocsSidebar\"]\n6:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"ViewportBoundary\"]\nb:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"MetadataBoundary\"]\nd:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/ce232d23a2a15dcf.css\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"oT9fkv1Rls7posDurDqoH\",\"c\":[\"\",\"docs\",\"lifecycle\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"lifecycle\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/ce232d23a2a15dcf.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable antialiased\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/796e69ae18b2784c.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/2b257daea29fbb42.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"div\",null,{\"className\":\"flex min-h-screen bg-background\",\"children\":[[\"$\",\"$L4\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 relative\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"className\":\"container mx-auto py-10\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto max-w-3xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl\",\"children\":\"Request Lifecycle\"}],[\"$\",\"p\",null,{\"className\":\"text-xl text-muted-foreground mt-2\",\"children\":\"Request Lifecycle\"}]]}],[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"請求生命週期-request-lifecycle\",\"children\":[\"$\",\"a\",null,{\"href\":\"#請求生命週期-request-lifecycle\",\"children\":\"請求生命週期 (Request Lifecycle)\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#introduction\",\"children\":\"簡介\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"#lifecycle-overview\",\"children\":\"生命週期概覽\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#first-steps\",\"children\":\"第一步\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#http-console-kernels\",\"children\":\"HTTP / Console Kernels\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#service-providers\",\"children\":\"Service Providers\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#routing\",\"children\":\"路由\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#finishing-up\",\"children\":\"完成\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"#focus-on-service-providers\",\"children\":\"聚焦 Service Providers\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"introduction\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"簡介\",\"children\":[\"$\",\"a\",null,{\"href\":\"#簡介\",\"children\":\"簡介\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"在「現實世界」中使用任何工具時，如果您了解該工具的運作方式，您會感到更有信心。應用程式開發也不例外。當您了解開發工具的功能時，您會感到更自在並更有信心地使用它們。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"本文件的目標是讓您對 Laravel 框架的運作方式有一個良好的、高層次的概覽。透過更了解整體框架，一切都會感覺不再那麼「神奇」，您將更有信心地建立您的應用程式。如果您不能立即理解所有術語，請不要灰心！試著掌握正在發生的事情的基本概念，隨著您探索文件的其他部分，您的知識將會增長。\"}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"lifecycle-overview\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"生命週期概覽\",\"children\":[\"$\",\"a\",null,{\"href\":\"#生命週期概覽\",\"children\":\"生命週期概覽\"}]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"first-steps\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"第一步\",\"children\":[\"$\",\"a\",null,{\"href\":\"#第一步\",\"children\":\"第一步\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"所有進入 Laravel 應用程式的請求的入口點都是 \",[\"$\",\"code\",null,{\"children\":\"public/index.php\"}],\" 檔案。您的 Web 伺服器 (Apache / Nginx) 設定將所有請求導向此檔案。\",[\"$\",\"code\",null,{\"children\":\"index.php\"}],\" 檔案不包含太多程式碼。相反，它是載入框架其餘部分的起點。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"index.php\"}],\" 檔案載入 Composer 生成的自動載入定義，然後從 \",[\"$\",\"code\",null,{\"children\":\"bootstrap/app.php\"}],\" 檢索 Laravel 應用程式的實例。Laravel 本身採取的第一個動作是建立應用程式 / \",[\"$\",\"a\",null,{\"href\":\"/docs/container\",\"children\":\"Service Container\"}],\" 的實例。\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"http-console-kernels\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"http--console-kernels\",\"children\":[\"$\",\"a\",null,{\"href\":\"#http--console-kernels\",\"children\":\"HTTP / Console Kernels\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"接下來，傳入的請求會使用應用程式實例的 \",[\"$\",\"code\",null,{\"children\":\"handleRequest\"}],\" 或 \",[\"$\",\"code\",null,{\"children\":\"handleCommand\"}],\" 方法發送到 HTTP Kernel 或 Console Kernel，具體取決於進入應用程式的請求類型。這兩個 Kernels 作為所有請求流經的中心位置。現在，讓我們只關注 HTTP Kernel，它是 \",[\"$\",\"code\",null,{\"children\":\"Illuminate\\\\Foundation\\\\Http\\\\Kernel\"}],\" 的實例。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"HTTP Kernel 定義了一個 \",[\"$\",\"code\",null,{\"children\":\"bootstrappers\"}],\" 陣列，這些 bootstrappers 將在請求執行之前執行。這些 bootstrappers 設定錯誤處理、設定日誌記錄、\",[\"$\",\"a\",null,{\"href\":\"/docs/configuration#environment-configuration\",\"children\":\"偵測應用程式環境\"}],\"，並執行在實際處理請求之前需要完成的其他任務。通常，這些類別處理您不需要擔心的內部 Laravel 設定。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"HTTP Kernel 還負責將請求傳遞給應用程式的 Middleware 堆疊。這些 Middleware 處理讀取和寫入 \",[\"$\",\"a\",null,{\"href\":\"/docs/session\",\"children\":\"HTTP Session\"}],\"、判斷應用程式是否處於維護模式、\",[\"$\",\"a\",null,{\"href\":\"/docs/csrf\",\"children\":\"驗證 CSRF Token\"}],\" 等等。我們很快就會詳細討論這些。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"HTTP Kernel 的 \",[\"$\",\"code\",null,{\"children\":\"handle\"}],\" 方法的方法簽章非常簡單：它接收一個 \",[\"$\",\"code\",null,{\"children\":\"Request\"}],\" 並返回一個 \",[\"$\",\"code\",null,{\"children\":\"Response\"}],\"。將 Kernel 想像成一個代表整個應用程式的大黑盒子。給它 HTTP 請求，它就會返回 HTTP 回應。\"]}],\"\\n\",[\"$\",\"a\",null,{\"name\":\"service-providers\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"service-providers\",\"children\":[\"$\",\"a\",null,{\"href\":\"#service-providers\",\"children\":\"Service Providers\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"最重要的 Kernel 啟動動作之一是載入應用程式的 \",[\"$\",\"a\",null,{\"href\":\"/docs/providers\",\"children\":\"Service Providers\"}],\"。Service Providers 負責啟動框架的所有各種組件，例如資料庫、Queue、驗證和路由組件。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Laravel 將遍歷此 Providers 清單並實例化每個 Provider。實例化 Providers 後，將在所有 Providers 上呼叫 \",\"$Le\",\" 方法。然後，一旦所有 Providers 都已註冊，將在每個 Provider 上呼叫 \",\"$Lf\",\" 方法。這樣 Service Providers 就可以依賴於在執行其 \",\"$L10\",\" 方法時已註冊並可用的每個 Container 綁定。\"]}],\"\\n\",\"$L11\",\"\\n\",\"$L12\",\"\\n\",\"$L13\",\"\\n\",\"$L14\",\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\"]}]]}]}]\n"])</script><script>self.__next_f.push([1,"e:[\"$\",\"code\",null,{\"children\":\"register\"}]\nf:[\"$\",\"code\",null,{\"children\":\"boot\"}]\n10:[\"$\",\"code\",null,{\"children\":\"boot\"}]\n11:[\"$\",\"p\",null,{\"children\":\"基本上，Laravel 提供的每個主要功能都是由 Service Provider 啟動和設定的。由於它們啟動和設定了框架提供的如此多功能，因此 Service Providers 是整個 Laravel 啟動過程中最重要的一環。\"}]\n12:[\"$\",\"p\",null,{\"children\":[\"雖然框架內部使用了數十個 Service Providers，但您也可以選擇建立自己的 Service Providers。您可以在 \",[\"$\",\"code\",null,{\"children\":\"bootstrap/providers.php\"}],\" 檔案中找到應用程式正在使用的使用者定義或第三方 Service Providers 的清單。\"]}]\n13:[\"$\",\"a\",null,{\"name\":\"routing\"}]\n14:[\"$\",\"h3\",null,{\"id\":\"路由\",\"children\":[\"$\",\"a\",null,{\"href\":\"#路由\",\"children\":\"路由\"}]}]\n15:[\"$\",\"p\",null,{\"children\":[\"一旦應用程式啟動並且所有 Service Providers 都已註冊，\",[\"$\",\"code\",null,{\"children\":\"Request\"}],\" 將被移交給 Router 進行調度。Router 將把請求調度到路由或 Controller，以及執行任何特定於路由的 Middleware。\"]}]\n16:[\"$\",\"p\",null,{\"children\":[\"Middleware 提供了一種方便的機制來過濾或檢查進入應用程式的 HTTP 請求。例如，Laravel 包含一個驗證應用程式使用者是否已通過驗證的 Middleware。如果使用者未通過驗證，Middleware 會將使用者重新導向到登入畫面。但是，如果使用者已通過驗證，Middleware 將允許請求進一步進入應用程式。有些 Middleware 分配給應用程式內的所有路由，如 \",[\"$\",\"code\",null,{\"children\":\"PreventRequestsDuringMaintenance\"}],\"，而有些則僅分配給特定路由或路由群組。您可以透過閱讀完整的 \",[\"$\",\"a\",null,{\"href\":\"/docs/middleware\",\"children\":\"Middleware 文件\"}],\" 來了解有關 Middleware 的更多資訊。\"]}]\n17:[\"$\",\"p\",null,{\"children\":\"如果請求通過了所有符合的路由分配的 Middleware，則將執行路由或 Controller 方法，並且路由或 Controller 方法返回的回應將透過路由的 Middleware 鏈送回。\"}]\n18:[\"$\",\"a\",null,{\"name\":\"finishing-up\"}]\n19:[\"$\",\"h3\",null,{\"id\":\"完成\",\"children\":[\"$\",\"a\",null,{\"href\":\"#完成\",\"children\":\"完成\"}]}]\n1a:[\"$\",\"p\",null,{\"children\":\"一旦路由或 Controller 方法返回回應，回應將向外傳回透過路由的 Middleware，讓應用程式有機會修改或檢查傳出的回應。\"}]\n1b:[\"$\",\"p\",null,{\"children\":[\"最後，一旦回應傳回透過 Middleware，HTTP Kernel 的 \",[\"$\",\"code\",null,{\"children\":\"handle\"}],\" 方法將回應物件返回給應用程式實例的 \",[\"$\",\"code\",null,{\"children\":\"handleRequest\"}],\"，此方法呼叫返回的回應上的 \",[\"$\",\"code\",null,{\"children\":\"send\"}],\" 方法。\",[\"$\",\"code\",null,{\"children\":\"send\"}],\" 方法將回應內容發送給使用者的網頁瀏覽器。我們現在已經完成了整個 Laravel 請求生命週期的旅程！\"]}]\n1c:[\"$\",\"a\",null,{\"name\":\"focus-on-service-providers\"}]\n1d:[\"$\",\"h2\",null,{\"id\":\"聚焦-service-providers\",\"children\":[\"$\",\"a\",null,{\"href\":\"#聚焦-service-providers\",\"children\":\"聚焦 Service Providers\"}]}]\n1e:[\"$\",\"p\",null,{\"children\":\"Service Providers 確實是啟動 Laravel 應用程式的關鍵。建立應用程式實例，註冊 Service Providers，並將請求移交給已啟動的應用程式。真的就這麼簡單！\"}]\n1f:[\"$\",\"p\",null,{\"children\":[\"牢固掌握 Laravel 應用程式是如何透過 Service Providers 建立和啟動的是非常有價值的。您的應用程式的使用者定義 Service Providers 儲存在 \",[\"$\",\"code\",null,{\"children\":\"app/Providers\"}],\" 目錄中。\"]}]\n20:[\"$\",\"p\",null,{\"children\":[\"預設情況下，\",[\"$\",\"code\",null,{\"children\":\"AppServiceProvider\"}],\" 相當空。此 Provider 是新增應用程式自己的啟動和 Service Container 綁定的一個好地方。對於大型應用程式，您可能希望建立幾個 Service Providers，每個都針對應用程式使用的特定服務進行更細粒度的啟動。\"]}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"21:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/247eb132b7f7b574.js\"],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"Create Next App\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$L21\",\"3\",{}]]\n8:null\n"])</script></body></html>