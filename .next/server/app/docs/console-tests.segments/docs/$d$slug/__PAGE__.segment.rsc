1:"$Sreact.fragment"
1d:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/247eb132b7f7b574.js"],"OutletBoundary"]
1e:"$Sreact.suspense"
0:{"buildId":"2DrqUONp3UGGEsii_P-1z","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"container mx-auto py-10","children":["$","div",null,{"className":"mx-auto max-w-3xl","children":[["$","div",null,{"className":"mb-8","children":[["$","h1",null,{"className":"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl","children":"Console Tests"}],["$","p",null,{"className":"text-xl text-muted-foreground mt-2","children":"Laravel 提供多種工具來測試 Artisan 指令"}]]}],["$","article",null,{"className":"prose prose-slate dark:prose-invert max-w-none","children":[["$","h1",null,{"id":"console-tests","children":["$","a",null,{"href":"#console-tests","children":"Console Tests"}]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#introduction","children":"Introduction"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#success-failure-expectations","children":"Success / Failure Expectations"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#input-output-expectations","children":"Input / Output Expectations"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#console-events","children":"Console Events"}]}],"\n"]}],"\n",["$","a",null,{"name":"introduction"}],"\n",["$","h2",null,{"id":"簡介","children":["$","a",null,{"href":"#簡介","children":"簡介"}]}],"\n",["$","p",null,{"children":["In addition to simplifying HTTP testing, Laravel provides a simple API for testing your application's ",["$","a",null,{"href":"/docs/12.x/artisan","children":"custom console commands"}],"."]}],"\n",["$","a",null,{"name":"success-failure-expectations"}],"\n",["$","h2",null,{"id":"success--failure-expectations","children":["$","a",null,{"href":"#success--failure-expectations","children":"Success / Failure Expectations"}]}],"\n",["$","p",null,{"children":["To get started, let's explore how to make assertions regarding an Artisan command's exit code. To accomplish this, we will use the ",["$","code",null,{"children":"artisan"}]," method to invoke an Artisan command from our test. Then, we will use the ",["$","code",null,{"children":"assertExitCode"}]," method to assert that the command completed with a given exit code:"]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"test('console command', function () {\n    $this->artisan('inspire')->assertExitCode(0);\n});\n"}]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"/**\n * Test a console command.\n */\npublic function test_console_command(): void\n{\n    $this->artisan('inspire')->assertExitCode(0);\n}\n"}]}],"\n",["$","p",null,{"children":["You may use the ",["$","code",null,{"children":"assertNotExitCode"}]," method to assert that the command did not exit with a given exit code:"]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$this->artisan('inspire')->assertNotExitCode(1);\n"}]}],"\n",["$","p",null,{"children":["Of course, all terminal commands typically exit with a status code of ",["$","code",null,{"children":"0"}]," when they are successful and a non-zero exit code when they are not successful. Therefore, for convenience, you may utilize the ",["$","code",null,{"children":"assertSuccessful"}]," and ",["$","code",null,{"children":"assertFailed"}]," assertions to assert that a given command exited with a successful exit code or not:"]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$this->artisan('inspire')->assertSuccessful();\n\n$this->artisan('inspire')->assertFailed();\n"}]}],"\n",["$","a",null,{"name":"input-output-expectations"}],"\n",["$","h2",null,{"id":"input--output-expectations","children":["$","a",null,{"href":"#input--output-expectations","children":"Input / Output Expectations"}]}],"\n",["$","p",null,{"children":["Laravel allows you to easily \"mock\" user input for your console commands using the ",["$","code",null,{"children":"expectsQuestion"}]," method. In addition, you may specify the exit code and text that you expect to be output by the console command using the ",["$","code",null,{"children":"assertExitCode"}]," and ",["$","code",null,{"children":"expectsOutput"}]," methods. For example, consider the following console command:"]}],"\n","$L2","\n","$L3","\n","$L4","\n","$L5","\n","$L6","\n","$L7","\n","$L8","\n","$L9","\n","$La","\n","$Lb","\n","$Lc","\n","$Ld","\n","$Le","\n","$Lf","\n","$L10","\n","$L11","\n","$L12","\n","$L13","\n","$L14","\n","$L15","\n","$L16","\n","$L17","\n","$L18","\n","$L19","\n","$L1a","\n","$L1b"]}]]}]}],null,"$L1c"]}],"loading":null,"isPartial":false}
2:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"Artisan::command('question', function () {\n    $name = $this->ask('What is your name?');\n\n    $language = $this->choice('Which language do you prefer?', [\n        'PHP',\n        'Ruby',\n        'Python',\n    ]);\n\n    $this->line('Your name is '.$name.' and you prefer '.$language.'.');\n});\n"}]}]
3:["$","p",null,{"children":"You may test this command with the following test:"}]
4:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"test('console command', function () {\n    $this->artisan('question')\n        ->expectsQuestion('What is your name?', 'Taylor Otwell')\n        ->expectsQuestion('Which language do you prefer?', 'PHP')\n        ->expectsOutput('Your name is Taylor Otwell and you prefer PHP.')\n        ->doesntExpectOutput('Your name is Taylor Otwell and you prefer Ruby.')\n        ->assertExitCode(0);\n});\n"}]}]
5:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"/**\n * Test a console command.\n */\npublic function test_console_command(): void\n{\n    $this->artisan('question')\n        ->expectsQuestion('What is your name?', 'Taylor Otwell')\n        ->expectsQuestion('Which language do you prefer?', 'PHP')\n        ->expectsOutput('Your name is Taylor Otwell and you prefer PHP.')\n        ->doesntExpectOutput('Your name is Taylor Otwell and you prefer Ruby.')\n        ->assertExitCode(0);\n}\n"}]}]
6:["$","p",null,{"children":["If you are utilizing the ",["$","code",null,{"children":"search"}]," or ",["$","code",null,{"children":"multisearch"}]," functions provided by ",["$","a",null,{"href":"/docs/12.x/prompts","children":"Laravel Prompts"}],", you may use the ",["$","code",null,{"children":"expectsSearch"}]," assertion to mock the user's input, search results, and selection:"]}]
7:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"test('console command', function () {\n    $this->artisan('example')\n        ->expectsSearch('What is your name?', search: 'Tay', answers: [\n            'Taylor Otwell',\n            'Taylor Swift',\n            'Darian Taylor'\n        ], answer: 'Taylor Otwell')\n        ->assertExitCode(0);\n});\n"}]}]
8:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"/**\n * Test a console command.\n */\npublic function test_console_command(): void\n{\n    $this->artisan('example')\n        ->expectsSearch('What is your name?', search: 'Tay', answers: [\n            'Taylor Otwell',\n            'Taylor Swift',\n            'Darian Taylor'\n        ], answer: 'Taylor Otwell')\n        ->assertExitCode(0);\n}\n"}]}]
9:["$","p",null,{"children":["You may also assert that a console command does not generate any output using the ",["$","code",null,{"children":"doesntExpectOutput"}]," method:"]}]
a:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"test('console command', function () {\n    $this->artisan('example')\n        ->doesntExpectOutput()\n        ->assertExitCode(0);\n});\n"}]}]
b:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"/**\n * Test a console command.\n */\npublic function test_console_command(): void\n{\n    $this->artisan('example')\n        ->doesntExpectOutput()\n        ->assertExitCode(0);\n}\n"}]}]
c:["$","p",null,{"children":["The ",["$","code",null,{"children":"expectsOutputToContain"}]," and ",["$","code",null,{"children":"doesntExpectOutputToContain"}]," methods may be used to make assertions against a portion of the output:"]}]
d:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"test('console command', function () {\n    $this->artisan('example')\n        ->expectsOutputToContain('Taylor')\n        ->assertExitCode(0);\n});\n"}]}]
e:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"/**\n * Test a console command.\n */\npublic function test_console_command(): void\n{\n    $this->artisan('example')\n        ->expectsOutputToContain('Taylor')\n        ->assertExitCode(0);\n}\n"}]}]
f:["$","a",null,{"name":"confirmation-expectations"}]
10:["$","h4",null,{"id":"confirmation-expectations","children":["$","a",null,{"href":"#confirmation-expectations","children":"Confirmation Expectations"}]}]
11:["$","p",null,{"children":["When writing a command which expects confirmation in the form of a \"yes\" or \"no\" answer, you may utilize the ",["$","code",null,{"children":"expectsConfirmation"}]," method:"]}]
12:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$this->artisan('module:import')\n    ->expectsConfirmation('Do you really wish to run this command?', 'no')\n    ->assertExitCode(1);\n"}]}]
13:["$","a",null,{"name":"table-expectations"}]
14:["$","h4",null,{"id":"table-expectations","children":["$","a",null,{"href":"#table-expectations","children":"Table Expectations"}]}]
15:["$","p",null,{"children":["If your command displays a table of information using Artisan's ",["$","code",null,{"children":"table"}]," method, it can be cumbersome to write output expectations for the entire table. Instead, you may use the ",["$","code",null,{"children":"expectsTable"}]," method. This method accepts the table's headers as its first argument and the table's data as its second argument:"]}]
16:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"$$this->artisan('users:all')\n    ->expectsTable([\n        'ID',\n        'Email',\n    ], [\n        [1, 'taylor@example.com'],\n        [2, 'abigail@example.com'],\n    ]);\n"}]}]
17:["$","a",null,{"name":"console-events"}]
18:["$","h2",null,{"id":"console-events","children":["$","a",null,{"href":"#console-events","children":"Console Events"}]}]
19:["$","p",null,{"children":["By default, the ",["$","code",null,{"children":"Illuminate\\Console\\Events\\CommandStarting"}]," and ",["$","code",null,{"children":"Illuminate\\Console\\Events\\CommandFinished"}]," events are not dispatched while running your application's tests. However, you can enable these events for a given test class by adding the ",["$","code",null,{"children":"Illuminate\\Foundation\\Testing\\WithConsoleEvents"}]," trait to the class:"]}]
1a:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nuse Illuminate\\Foundation\\Testing\\WithConsoleEvents;\n\npest()->use(WithConsoleEvents::class);\n\n// ...\n"}]}]
1b:["$","pre",null,{"children":["$","code",null,{"className":"language-php","children":"<?php\n\nnamespace Tests\\Feature;\n\nuse Illuminate\\Foundation\\Testing\\WithConsoleEvents;\nuse Tests\\TestCase;\n\nclass ConsoleEventTest extends TestCase\n{\n    use WithConsoleEvents;\n\n    // ...\n}\n"}]}]
1c:["$","$L1d",null,{"children":["$","$1e",null,{"name":"Next.MetadataOutlet","children":"$@1f"}]}]
1f:null
