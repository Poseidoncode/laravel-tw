1:"$Sreact.fragment"
2:I[74715,["/_next/static/chunks/796e69ae18b2784c.js","/_next/static/chunks/0a3d48cc7de64d8a.js","/_next/static/chunks/b9cc757437f01a9b.js","/_next/static/chunks/a76a0998b696e151.js"],"CodeBlock"]
1b:I[48399,["/_next/static/chunks/796e69ae18b2784c.js","/_next/static/chunks/0a3d48cc7de64d8a.js","/_next/static/chunks/b9cc757437f01a9b.js","/_next/static/chunks/a76a0998b696e151.js"],"TableOfContents"]
1c:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/247eb132b7f7b574.js"],"OutletBoundary"]
1d:"$Sreact.suspense"
0:{"buildId":"B6gCsbFYtOtrb-3UkcGTt","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"container mx-auto py-10","children":["$","div",null,{"className":"flex gap-8 justify-center","children":[["$","div",null,{"className":"flex-1 max-w-3xl","children":[["$","div",null,{"className":"mb-8","children":[["$","h1",null,{"className":"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl","children":"並行 (Concurrency)"}],["$","p",null,{"className":"text-xl text-muted-foreground mt-2","children":"Laravel Concurrency 提供了並行執行任務的便利 API"}]]}],["$","article",null,{"className":"prose prose-slate dark:prose-invert max-w-none","children":[["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#introduction","children":"介紹"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#running-concurrent-tasks","children":"執行並行任務"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#deferring-concurrent-tasks","children":"延遲並行任務"}]}],"\n"]}],"\n",["$","a",null,{"name":"introduction"}],"\n",["$","h2",null,{"id":"介紹-introduction","children":["$","a",null,{"href":"#介紹-introduction","children":"介紹 (Introduction)"}]}],"\n",["$","p",null,{"children":["有時您可能需要執行多個彼此不相依的慢速任務。在許多情況下，並行執行這些任務可以實現顯著的效能提升。Laravel 的 ",["$","code",null,{"children":"Concurrency"}]," facade 提供了一個簡單、方便的 API 來並行執行 closures。"]}],"\n",["$","a",null,{"name":"how-it-works"}],"\n",["$","h4",null,{"id":"運作方式-how-it-works","children":["$","a",null,{"href":"#運作方式-how-it-works","children":"運作方式 (How It Works)"}]}],"\n",["$","p",null,{"children":"Laravel 透過序列化給定的 closures 並將它們發送到隱藏的 Artisan CLI 命令來實現並行，該命令在其自己的 PHP process 中反序列化 closures 並呼叫它。在 closure 被呼叫後，結果值會被序列化回父 process。"}],"\n",["$","p",null,{"children":[["$","code",null,{"children":"Concurrency"}]," facade 支援三種驅動程式：",["$","code",null,{"children":"process"}],"（預設）、",["$","code",null,{"children":"fork"}]," 和 ",["$","code",null,{"children":"sync"}],"。"]}],"\n",["$","p",null,{"children":[["$","code",null,{"children":"fork"}]," 驅動程式比預設的 ",["$","code",null,{"children":"process"}]," 驅動程式提供更好的效能，但它只能在 PHP 的 CLI 環境中使用，因為 PHP 不支援在 Web 請求期間進行 fork。在使用 ",["$","code",null,{"children":"fork"}]," 驅動程式之前，您需要安裝 ",["$","code",null,{"children":"spatie/fork"}]," 套件："]}],"\n",["$","$L2",null,{"className":"","children":["$","code",null,{"children":["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"composer"}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":" require"}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":" spatie/fork"}]]}]}]}],"\n",["$","p",null,{"children":[["$","code",null,{"children":"sync"}]," 驅動程式主要在測試期間有用，當您想要停用所有並行功能並在父 process 中依序執行給定的 closures 時。"]}],"\n",["$","a",null,{"name":"running-concurrent-tasks"}],"\n",["$","h2",null,{"id":"執行並行任務-running-concurrent-tasks","children":["$","a",null,{"href":"#執行並行任務-running-concurrent-tasks","children":"執行並行任務 (Running Concurrent Tasks)"}]}],"\n",["$","p",null,{"children":["要執行並行任務，您可以呼叫 ",["$","code",null,{"children":"Concurrency"}]," facade 的 ",["$","code",null,{"children":"run"}]," 方法。",["$","code",null,{"children":"run"}]," 方法接受一個 closures 陣列，這些 closures 應該在子 PHP processes 中同時執行："]}],"\n",["$","$L2",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Illuminate\\Support\\Facades\\Concurrency"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Illuminate\\Support\\Facades\\DB"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"[$userCount, $orderCount] "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Concurrency"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"run"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"(["}]]}],"\n",["$","span",null,{"className":"line","children":["$L3","$L4","$L5","$L6","$L7","$L8","$L9","$La","$Lb","$Lc","$Ld"]}],"\n","$Le","\n","$Lf"]}]}],"\n","$L10","\n","$L11","\n","$L12","\n","$L13","\n","$L14","\n","$L15","\n","$L16","\n","$L17"]}]]}],"$L18"]}]}],["$L19"],"$L1a"]}],"loading":null,"isPartial":false}
3:["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"    fn"}]
4:["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" () => "}]
5:["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"DB"}]
6:["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}]
7:["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"table"}]
8:["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}]
9:["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'users'"}]
a:["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":")"}]
b:["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}]
c:["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"count"}]
d:["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"(),"}]
e:["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"    fn"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" () => "}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"DB"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"table"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'orders'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":")"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"count"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"(),"}]]}]
f:["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"]);"}]}]
10:["$","p",null,{"children":["要使用特定的驅動程式，您可以使用 ",["$","code",null,{"children":"driver"}]," 方法："]}]
11:["$","$L2",null,{"className":"","children":["$","code",null,{"children":["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"$$results "}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"="}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Concurrency"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"driver"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'fork'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":")"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"->"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"run"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"..."}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":");"}]]}]}]}]
12:["$","p",null,{"children":["或者，要變更預設的並行驅動程式，您應該透過 ",["$","code",null,{"children":"config:publish"}]," Artisan 命令發布 ",["$","code",null,{"children":"concurrency"}]," 設定檔，並更新檔案中的 ",["$","code",null,{"children":"default"}]," 選項："]}]
13:["$","$L2",null,{"className":"","children":["$","code",null,{"children":["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"php"}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":" artisan"}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":" config:publish"}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":" concurrency"}]]}]}]}]
14:["$","a",null,{"name":"deferring-concurrent-tasks"}]
15:["$","h2",null,{"id":"延遲並行任務-deferring-concurrent-tasks","children":["$","a",null,{"href":"#延遲並行任務-deferring-concurrent-tasks","children":"延遲並行任務 (Deferring Concurrent Tasks)"}]}]
16:["$","p",null,{"children":["如果您想並行執行一個 closures 陣列，但對這些 closures 回傳的結果不感興趣，您應該考慮使用 ",["$","code",null,{"children":"defer"}]," 方法。當呼叫 ",["$","code",null,{"children":"defer"}]," 方法時，給定的 closures 不會立即執行。相反，Laravel 會在 HTTP response 發送給使用者後並行執行這些 closures："]}]
17:["$","$L2",null,{"className":"","children":["$","code",null,{"children":[["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" App\\Services\\Metrics"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"use"}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":" Illuminate\\Support\\Facades\\Concurrency"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":";"}]]}],"\n",["$","span",null,{"className":"line"}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Concurrency"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"defer"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"(["}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"    fn"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" () => "}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Metrics"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"report"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'users'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"),"}]]}],"\n",["$","span",null,{"className":"line","children":[["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"    fn"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":" () => "}],["$","span",null,{"style":{"color":"#79B8FF","--shiki-light":"#005CC5"},"children":"Metrics"}],["$","span",null,{"style":{"color":"#F97583","--shiki-light":"#D73A49"},"children":"::"}],["$","span",null,{"style":{"color":"#B392F0","--shiki-light":"#6F42C1"},"children":"report"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF","--shiki-light":"#032F62"},"children":"'orders'"}],["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"),"}]]}],"\n",["$","span",null,{"className":"line","children":["$","span",null,{"style":{"color":"#E1E4E8","--shiki-light":"#24292E"},"children":"]);"}]}]]}]}]
18:["$","$L1b",null,{"items":[{"id":"介紹-introduction","text":"介紹 (Introduction)","level":2},{"id":"運作方式-how-it-works","text":"運作方式 (How It Works)","level":4},{"id":"執行並行任務-running-concurrent-tasks","text":"執行並行任務 (Running Concurrent Tasks)","level":2},{"id":"延遲並行任務-deferring-concurrent-tasks","text":"延遲並行任務 (Deferring Concurrent Tasks)","level":2}]}]
19:["$","script","script-0",{"src":"/_next/static/chunks/a76a0998b696e151.js","async":true}]
1a:["$","$L1c",null,{"children":["$","$1d",null,{"name":"Next.MetadataOutlet","children":"$@1e"}]}]
1e:null
